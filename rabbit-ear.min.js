/* Rabbit Ear v2 (c) Robby Kraft, MIT License */
(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RabbitEar={})})(this,function(e){"use strict";var be=Math.max,Be=Math.floor,Se=Math.PI,we=Math.pow,ke=Math.sin,Me=Math.cos,Ae=Math.atan2,Ne=Math.abs,Ve=Math.sqrt;function t(e,t=15){return null==e?void 0:parseFloat(e.toFixed(t))}function i(e){let t=s(e);return e.map(e=>e/t)}function s(e){let t=e.map(e=>e*e).reduce((e,t)=>e+t);return Ve(t)}function r(e,t){return e.map((e,s)=>e*t[s]).reduce((e,t)=>e+t,0)}function n(e,t){return e.map((e,s)=>.5*(e+t[s]))}function c(e,t,s=Ie){return e.map((e,r)=>Ne(e-t[r])<s)}function d(e,t,s=Ie){return 1-Ne(r(i(e),i(t)))<s}function f(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}function o(e,t){let i=Ae(e[1],e[0]),s=Me(i),r=ke(i),n=Me(-i),f=ke(-i),o=s*n+r*f,a=s*-f+r*n,l=r*n+-s*f,c=r*-f+-s*n,d=t[0]+o*-t[0]+-t[1]*l,_=t[1]+a*-t[0]+-t[1]*c;return[o,a,l,c,d,_]}function l(e,t){var i=Me(e),s=ke(e),r=-ke(e),a=Me(e),n=null==t?0:t[0],c=null==t?0:t[1];return[i,s,r,a,n,c]}function _(e){var t=e[0]*e[3]-e[1]*e[2];return t&&!isNaN(t)&&isFinite(e[4])&&isFinite(e[5])?[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]:void 0}function g(e,t){let i=e[0]*t[0]+e[2]*t[1],s=e[0]*t[2]+e[2]*t[3],r=e[0]*t[4]+e[2]*t[5]+e[4],a=e[1]*t[0]+e[3]*t[1],n=e[1]*t[2]+e[3]*t[3],c=e[1]*t[4]+e[3]*t[5]+e[5];return[i,a,s,n,r,c]}function m(e,t){return[e[0]*t[1],e[1]*t[0]]}function u(e,t){return[e[1]*t[2]-e[2]*t[1],e[0]*t[2]-e[2]*t[0],e[0]*t[1]-e[1]*t[0]]}function v(e,t,i=Ie){return Ne(e[0]-t[0])<i&&Ne(e[1]-t[1])<i}function h(e,t,i,s,r){let a=[s[0]-i[0],s[1]-i[1]];return Re(e,t,i,a,Le,r)}function x(e,t,i,s,r){let a=[s[0]-i[0],s[1]-i[1]];return Re(e,t,i,a,ze,r)}function y(e,t,i,s,r){let a=[t[0]-e[0],t[1]-e[1]],n=[s[0]-i[0],s[1]-i[1]];return Re(e,a,i,n,De,r)}function E(e,t,i,s){let r=[s[0]-i[0],s[1]-i[1]],a=Re(e,t,i,r,Le);return null==a||v(a,i)||v(a,s)?void 0:a}function b(e,t,i,s=Ie){let r=[i[0]-e[0],i[1]-e[1]],a=r[0]*t[1]-r[1]*t[0];return Ne(a)<s}function B(e,t,i=Ie){let s=!1;for(let r=0,a=e.length-1;r<e.length;a=r++)e[r][1]>t[1]!=e[a][1]>t[1]&&t[0]<(e[a][0]-e[r][0])*(t[1]-e[r][1])/(e[a][1]-e[r][1])+e[r][0]&&(s=!s);return s}function S(e,t,s=Ie){return!!(null!=e&&0<e.length)&&e.map((e,r,i)=>{let n=i[(r+1)%i.length],c=[n[0]-e[0],n[1]-e[1]],a=[t[0]-e[0],t[1]-e[1]];return c[0]*a[1]-c[1]*a[0]>-s}).map((e,t,i)=>e==i[0]).reduce((e,t)=>e&&t,!0)}function w(e,t){let s=e.map((e,t,i)=>[e,i[(t+1)%i.length]]),r=t.map((e,t,i)=>[e,i[(t+1)%i.length]]);for(let a=0;a<s.length;a++)for(let e=0;e<r.length;e++)if(y(s[a][0],s[a][1],r[e][0],r[e][1])!=null)return!0;return!!S(e,t[0])||!!S(t,e[0])}function k(e,t,i){let s=e.map((e,t,i)=>[e,i[(t+1)%i.length]]).map(e=>h(t,i,e[0],e[1])).filter(e=>null!=e);switch(s.length){case 0:return;case 1:return[s[0],s[0]];case 2:return s;default:for(let e=1;e<s.length;e++)if(!v(s[0],s[e]))return[s[0],s[e]];}}function M(e,t,i){var s=e.map((e,t,i)=>[e,i[(t+1)%i.length]]).map(e=>x(t,i,e[0],e[1])).filter(e=>null!=e);switch(s.length){case 0:return;case 1:return[t,s[0]];case 2:return s;default:for(let e=1;e<s.length;e++)if(!v(s[0],s[e]))return[s[0],s[e]];}}function A(e,t,s){let r=e.map((e,t,i)=>[e,i[(t+1)%i.length]]).map(e=>y(t,s,e[0],e[1])).filter(e=>null!=e);for(var a=0;a<r.length;a++)for(var n=r.length-1;n>a;n--)v(r[a],r[n])&&r.splice(n,1);let c=S(t,e);switch(r.length){case 0:return c?[[...t],[...s]]:void 0;case 1:return c?[[...t],r[0]]:[[...s],r[0]];case 2:return r;default:throw"clipping ray in a convex polygon resulting in 3 or more points";}}function N(e,t,i,s){function r(e){return 0>e?-1:1}var a=we(t,2),n=i[0]-e[0],c=i[1]-e[1],d=s[0]-e[0],f=s[1]-e[1],o=d-n,l=f-c,_=o*o+l*l,g=n*f-d*c,n=(g*l+r(l)*o*Ve(a*_-g*g))/_,d=(g*l-r(l)*o*Ve(a*_-g*g))/_,c=(-g*o+Ne(l)*Ve(a*_-g*g))/_,f=(-g*o-Ne(l)*Ve(a*_-g*g))/_;let m=isNaN(n),p=isNaN(d);return m||p?m&&p?void 0:m?p?void 0:[[d+e[0],f+e[1]]]:[[n+e[0],c+e[1]]]:[[n+e[0],c+e[1]],[d+e[0],f+e[1]]]}function V(e,s=0,n=0,i=1){var c=.5*(2*Se/e),d=i/Me(c);return Array.from(Array(Be(e))).map((r,f)=>{var i=-2*Se*f/e+c,a=t(s+d*ke(i),14),o=t(n+d*Me(i),14);return[a,o]})}function I(e,t){var i=t[0]*e[0]+t[1]*e[1],s=t[0]*e[1]-t[1]*e[0],r=Ae(s,i);return 0>r&&(r+=2*Se),r}function O(e,t){let s=i(e),r=i(t),a=s.map((e,t)=>s[t]+r[t]),n=i(a),c=s.map((e,t)=>-s[t]+-r[t]);return[n,i(c)]}function P(e,i,s,r){let a=i[0]*r[1]-r[0]*i[1];if(Ne(a)<Ie)return[midpoint(e,s),i.slice()];let n=[s[0]-e[0],s[1]-e[1]],c=(s[0]-e[0])*r[1]-r[0]*(s[1]-e[1]);var d=c/a;let t=e[0]+i[0]*d,f=e[1]+i[1]*d;var o=O(i,r);if(o[1]=[o[1][1],-o[1][0]],Ne(m(i,o[1]))<Ne(m(i,o[0]))){var l=o[0];o[0]=o[1],o[1]=l}return o.map(e=>[[t,f],e])}function F(e,t=!1,i=Oe){var s=e.slice().sort((e,t)=>Ne(e[1]-t[1])<i?e[0]-t[0]:e[1]-t[1]),r=[];r.push(s[0]);var a=0,n=0;do{n++;var c=r.length-1,d=s.filter(e=>!(Ne(e[0]-r[c][0])<i&&Ne(e[1]-r[c][1])<i)).map(e=>{for(var t=Ae(r[c][1]-e[1],r[c][0]-e[0]);t<a;)t+=2*Se;return{node:e,angle:t,distance:void 0}}).sort((e,t)=>e.angle<t.angle?-1:e.angle>t.angle?1:0);if(0===d.length)return;var f=d[0];if(d=d.filter(e=>Ne(f.angle-e.angle)<i).map(e=>{var t=Ve(we(r[c][0]-e.node[0],2)+we(r[c][1]-e.node[1],2));return e.distance=t,e}).sort((e,t)=>e.distance<t.distance?1:e.distance>t.distance?-1:0),0<r.filter(e=>e===d[0].node).length)return r;r.push(d[0].node),a=Ae(r[c][1]-d[0].node[1],r[c][0]-d[0].node[0])}while(10000>n)}function C(e,t,s){let r=e.map((e,r)=>{let i=b(t,s,e);return{type:"v",point:i?e:null,at_index:r}}).filter(e=>null!=e.point),a=e.map((e,r,i)=>{let a=E(t,s,e,i[(r+1)%i.length]);return{type:"e",point:a,at_index:r}}).filter(e=>null!=e.point),n=r.concat(a).sort((e,t)=>Ne(e.point[0]-t.point[0])<Ie?e.point[1]-t.point[1]:e.point[0]-t.point[0]);return console.log(n),e}function L(e,t,s){let r=e.map((e,r)=>{let i=b(t,s,e);return{point:i?e:null,at_index:r}}).filter(e=>null!=e.point),a=e.map((e,r,i)=>{let a=E(t,s,e,i[(r+1)%i.length]);return{point:a,at_index:r}}).filter(e=>null!=e.point);if(2==a.length){let t=a.slice().sort((e,t)=>e.at_index-t.at_index),i=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));i.push(t[0].point),i.push(t[1].point);let s=e.slice(t[0].at_index+1,t[1].at_index+1);return s.push(t[1].point),s.push(t[0].point),[i,s]}if(1==a.length&&1==r.length){r[0].type="v",a[0].type="e";let t=r.concat(a).sort((e,t)=>e.at_index-t.at_index),i=e.slice(t[1].at_index+1).concat(e.slice(0,t[0].at_index+1));"e"===t[0].type&&i.push(t[0].point),i.push(t[1].point);let s=e.slice(t[0].at_index+1,t[1].at_index+1);return"e"===t[1].type&&s.push(t[1].point),s.push(t[0].point),[i,s]}if(2==r.length){let t=r.slice().sort((e,t)=>e.at_index-t.at_index),i=e.slice(t[1].at_index).concat(e.slice(0,t[0].at_index+1)),s=e.slice(t[0].at_index,t[1].at_index+1);return[i,s]}return[e.slice()]}function j(){let e=Array.from(arguments);if(0==e.length)return[];if(null!=e[0].vector&&e[0].vector.constructor==Array)return e[0].vector;let t=e.filter(e=>e.constructor===Array);if(1<=t.length)return[...t[0]];let i=e.filter(e=>!isNaN(e));return 1<=i.length?i:isNaN(e[0].x)?[]:["x","y","z"].map(t=>e[0][t]).filter(e=>null!=e)}function z(){let e=Array.from(arguments),t=e.filter(e=>!isNaN(e)),i=e.filter(e=>e.constructor===Array);if(0==e.length)return[1,0,0,1,0,0];if(null!=e[0].m&&e[0].m.constructor==Array&&(t=e[0].m.slice()),0==t.length&&1<=i.length&&(t=i[0]),6<=t.length)return t.slice(0,6);if(4<=t.length){let e=t.slice(0,4);return e[4]=0,e[5]=0,e}return[1,0,0,1,0,0]}function D(){let e=Array.from(arguments),t=e.filter(e=>!isNaN(e)),i=e.filter(e=>e.constructor===Array);if(0!=e.length){if(!isNaN(e[0])&&4<=t.length)return[[e[0],e[1]],[e[2],e[3]]];if(0<i.length){if(2==i.length)return[[i[0][0],i[0][1]],[i[1][0],i[1][1]]];if(4==i.length)return[[i[0],i[1]],[i[2],i[3]]]}}}function R(){let e=Array.from(arguments),t=e.filter(e=>!isNaN(e)),i=e.filter(e=>e.constructor===Array);if(0==e.length)return{vector:[],point:[]};if(!isNaN(e[0])&&4<=t.length)return{point:[e[0],e[1]],vector:[e[2],e[3]]};if(0<i.length){if(2==i.length)return{point:[i[0][0],i[0][1]],vector:[i[1][0],i[1][1]]};if(4==i.length)return{point:[i[0],i[1]],vector:[i[2],i[3]]}}if(e[0].constructor===Object){let t=[],i=[];return null==e[0].vector?null!=e[0].direction&&(t=j(e[0].direction)):t=j(e[0].vector),null==e[0].point?null!=e[0].origin&&(i=j(e[0].origin)):i=j(e[0].point),{point:i,vector:t}}return{point:[],vector:[]}}function T(){let e=Array.from(arguments),t=e.filter(e=>!isNaN(e)),i=e.filter(e=>e.constructor===Array);return 4<=t.length?[[t[0],t[1]],[t[2],t[3]]]:2<=i.length&&!isNaN(i[0][0])?i:1!=i.length||isNaN(i[0][0][0])?void 0:i[0]}function G(){let e=Array.from(arguments),t=e.filter(e=>e.constructor===Array);return 1==t.length&&0<t[0].length&&0<t[0][0].length&&!isNaN(t[0][0][0])?t[0]:e[0].constructor===Object&&null!=e[0].points?e[0].points:void 0}function H(){let e=j(...arguments);return Object.freeze(Object.assign({normalize:function(){return H(i(e))},magnitude:function(){return s(e)},dot:function(){let t=j(...arguments);return e.length>t.length?r(t,e):r(e,t)},cross:function(){let t=j(...arguments),i=e.slice();return null==i[2]&&(i[2]=0),null==t[2]&&(t[2]=0),H(u(i,t))},distanceTo:function(){let t=j(...arguments),i=e.length<t.length?e.length:t.length,s=Array.from(Array(i)).map((s,r)=>we(e[r]-t[r],2)).reduce((e,t)=>e+t,0);return Ve(s)},transform:function(){let t=z(...arguments);return H(f(e,t))},add:function(){let t=j(...arguments);return H(e.map((e,s)=>e+t[s]))},subtract:function(){let t=j(...arguments);return H(e.map((e,s)=>e-t[s]))},rotateZ:function(t,i){var s=l(t,i);return H(f(e,s))},rotateZ90:function(){return H(-e[1],e[0])},rotateZ180:function(){return H(-e[0],-e[1])},rotateZ270:function(){return H(e[1],-e[0])},reflect:function(){let t=R(...arguments),i=o(t.vector,t.point);return H(f(e,i))},lerp:function(t,s){let r=j(t),a=e.length<r.length?e.length:r.length,n=Array.from(Array(a)).map((t,a)=>e[a]*s+r[a]*(1-s));return H(n)},isEquivalent:function(t){let i=j(t),s=e.length<i.length?e:i,r=e.length<i.length?i:e;return c(s,r)},isParallel:function(t){let i=j(t),s=e.length<i.length?e:i,r=e.length<i.length?i:e;return d(s,r)},scale:function(t){return H(e.map(e=>e*t))},midpoint:function(){let t=j(...arguments),s=e.length<t.length?e.slice():t,r=e.length<t.length?t:e.slice();for(var a=s.length;a<r.length;a++)s[a]=0;return H(r.map((e,t)=>.5*(s[t]+r[t])))},bisect:function(t){let i=j(t);return H(O(e,i))},get x(){return e[0]},get y(){return e[1]},get z(){return e[2]}},e))}function Y(){let e=G(...arguments);const t=function(){return .5*e.map((e,t,i)=>{var s=i[(t+1)%i.length];return e[0]*s[1]-s[0]*e[1]}).reduce((e,t)=>e+t,0)},i=function(){return e.map((e,t,i)=>{var s=i[(t+1)%i.length],r=e[0]*s[1]-s[0]*e[1];return H((e[0]+s[0])*r,(e[1]+s[1])*r)}).reduce((e,t)=>e.add(t),H(0,0)).scale(1/(6*t(e)))};return Object.freeze({contains:function(t){return B(e,t)},signedArea:t,centroid:i,center:function(){var t=1/0,i=0,s=1/0,r=0;return e.forEach(e=>{e[0]>i&&(i=e[0]),e[0]<t&&(t=e[0]),e[1]>r&&(r=e[1]),e[1]<s&&(s=e[1])}),H(t+.5*(i-t),s+.5*(r-s))},scale:function(t,s=i()){let r=e.map(e=>{let i=[e[0]-s[0],e[1]-s[1]];return[s[0]+i[0]*t,s[1]+i[1]*t]});return Y(r)},rotate:function(t,s=i()){let r=e.map(e=>{let i=[e[0]-s[0],e[1]-s[1]],r=Ve(we(i[0],2)+we(i[1],2)),n=Ae(i[1],i[0]);return[s[0]+Me(n+t)*r,s[1]+ke(n+t)*r]});return Y(r)},split:function(){let t=R(...arguments);return C(e,t.point,t.vector).map(e=>Y(e))},clipEdge:function(){let t=D(...arguments);return A(e,t[0],t[1])},clipLine:function(){let t=R(...arguments);return k(e,t.point,t.vector)},clipRay:function(){let t=R(...arguments);return M(e,t.point,t.vector)},get points(){return e}})}function U(){let{contains:e,signedArea:t,centroid:i,center:s,points:r}=Y(...arguments),a=r;return Object.freeze({signedArea:t,centroid:i,center:s,contains:e,clipEdge:function(){let e=D(...arguments);return A(a,e[0],e[1])},clipLine:function(){let e=R(...arguments);return k(a,e.point,e.vector)},clipRay:function(){let e=R(...arguments);return M(a,e.point,e.vector)},enclosingRectangle:function(){var e=1/0,t=-Infinity,i=1/0,s=-Infinity;return a.forEach(r=>{r[0]>t&&(t=r[0]),r[0]<e&&(e=r[0]),r[1]>s&&(s=r[1]),r[1]<i&&(i=r[1])}),Z(e,i,t-e,s-i)},split:function(){let e=R(...arguments);return L(a,e.point,e.vector).map(e=>U(e))},overlaps:function(){let e=G(...arguments);return w(a,e)},scale:function(e,t=i()){let s=a.map(i=>{let s=[i[0]-t[0],i[1]-t[1]];return[t[0]+s[0]*e,t[1]+s[1]*e]});return U(s)},rotate:function(e,t=i()){let s=a.map(i=>{let s=[i[0]-t[0],i[1]-t[1]],r=Ve(we(s[0],2)+we(s[1],2)),n=Ae(s[1],s[0]);return[t[0]+Me(n+e)*r,t[1]+ke(n+e)*r]});return U(s)},get points(){return a}})}function Z(){let e,t,i,s=Array.from(arguments),r=s.filter(e=>!isNaN(e));return 4==r.length&&(e=r.slice(0,2),t=r[2],i=r[3]),Object.freeze({get origin(){return e},get width(){return t},get height(){return i}})}function X(){let e=z(...arguments);return Object.freeze({inverse:function(){return X(_(e))},multiply:function(){let t=z(...arguments);return X(g(e,t))},transform:function(){let t=j(...arguments);return H(f(t,e))},get m(){return e}})}function W(){let{point:e,vector:t}=R(...arguments);return Object.freeze({isParallel:function(){let e=R(...arguments);return d(t,e.vector)},transform:function(){let s=z(...arguments),r=i(t),a=e.map((e,t)=>e+r[t]);if(null!=a){var n=f(e,s),c=f(a,s);return W.withPoints([n,c])}},get vector(){return t},get point(){return e}})}function q(){let{point:e,vector:t}=R(...arguments);return Object.freeze({get vector(){return t},get point(){return e},get origin(){return e}})}function J(){let e=T(...arguments);const t=function(){return Ve(we(e[1][0]-e[0][0],2)+we(e[1][1]-e[0][1],2))},i=function(){let i=j(...arguments),s=t();var r=((i[0]-e[0][0])*(e[1][0]-e[0][0])+(i[1]-e[0][1])*(e[1][1]-e[0][1]))/we(s,2);return 0>r||1<r?void 0:H(e[0][0]+r*(e[1][0]-e[0][0]),e[0][1]+r*(e[1][1]-e[0][1]))};return Object.freeze({vector:function(){return H(e[1][0]-e[0][0],e[1][1]-e[0][1])},length:t,nearestPoint:function(){let t=j(...arguments);var s=i(...arguments);return null==s?H(e.map(e=>({point:e,d:Ve(we(e[0]-t[0],2)+we(e[1]-t[1],2))})).sort((e,t)=>e.d-t.d).shift().point):s},nearestPointNormalTo:i,get endpoints(){return e}})}function K(e){var t="    ";isNaN(parseInt(e))?t=e:1===e?t=" ":2===e?t="  ":3===e?t="   ":4===e?t="    ":5===e?t="     ":6===e?t="      ":7===e?t="       ":8===e?t="        ":9===e?t="         ":10===e?t="          ":11===e?t="           ":12===e?t="            ":void 0;var i=["\n"];for(let s=0;100>s;s++)i.push(i[s]+t);return i}function $(){this.step="\t",this.shift=K(this.step)}function Q(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function ee(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+t+t+"AND ").replace(/ BETWEEN /ig,"~::~"+t+"BETWEEN ").replace(/ CASE /ig,"~::~"+t+"CASE ").replace(/ ELSE /ig,"~::~"+t+"ELSE ").replace(/ END /ig,"~::~"+t+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+t+"ON ").replace(/ OR /ig,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+t+"").replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+t+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/\s{0,}UPDATE /ig,"UPDATE ").replace(/ SET /ig," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}function te(){function _(){m.addEventListener("mouseup",e,!1),m.addEventListener("mousedown",c,!1),m.addEventListener("mousemove",a,!1),m.addEventListener("mouseleave",d,!1),m.addEventListener("mouseenter",f,!1),m.addEventListener("touchend",e,!1),m.addEventListener("touchmove",i,!1),m.addEventListener("touchstart",g,!1),m.addEventListener("touchcancel",e,!1)}function S(e,t){O.prev=O.position,O.position=ot(m,e,t),O.x=O.position[0],O.y=O.position[1]}function b(){O.drag=[O.position[0]-O.pressed[0],O.position[1]-O.pressed[1]],O.drag.x=O.drag[0],O.drag.y=O.drag[1]}function a(e){S(e.clientX,e.clientY),O.isPressed&&b(),null!=j&&j(Object.assign({},O))}function c(e){O.isPressed=!0,O.pressed=ot(m,e.clientX,e.clientY),null!=z&&z(Object.assign({},O))}function e(){O.isPressed=!1,null!=D&&D(Object.assign({},O))}function d(e){S(e.clientX,e.clientY),null!=R&&R(Object.assign({},O))}function f(e){S(e.clientX,e.clientY),null!=T&&T(Object.assign({},O))}function g(e){e.preventDefault();let t=e.touches[0];null==t||(O.isPressed=!0,O.pressed=ot(m,t.clientX,t.clientY),null!=z&&z(Object.assign({},O)))}function i(e){e.preventDefault();let t=e.touches[0];null==t||(S(t.clientX,t.clientY),O.isPressed&&b(),null!=j&&j(Object.assign({},O)))}function h(e){null!=Y&&clearInterval(Z),Y=e,null!=Y&&(U=0,Z=setInterval(()=>{let e={time:m.getCurrentTime(),frame:U++};Y(e)},1e3/60))}let k,M=Array.from(arguments),m=tt(),N=1,V=0,p=m.createSVGMatrix(),O={isPressed:!1,position:[0,0],pressed:[0,0],drag:[0,0],prev:[0,0],x:0,y:0};const r=function(e,t=0,i=0){N=e,dt(m,e,t,i)},s=function(e,t){ft(m,e,t)},t=function(e,t,i,s){at(m,e,t,i,s,V)},u=function(){return ct(m)},v=function(e){m.appendChild(e)},w=function(e){for(null==e&&(e=m);e.lastChild;)e.removeChild(e.lastChild)},x=function(e="image.svg"){return lt(m,e)},y=function(e,t){if(null!=e&&null!=t){let i=ct(m);at(m,i[0],i[1],e,t,V),m.setAttributeNS(null,"width",e),m.setAttributeNS(null,"height",t)}},P=function(){let e=parseInt(m.getAttributeNS(null,"width"));return null==e?m.getBoundingClientRect().width:e},A=function(){let e=parseInt(m.getAttributeNS(null,"height"));return null==e?m.getBoundingClientRect().height:e},B=function(){let t=M.filter(e=>"function"==typeof e),i=M.filter(e=>!isNaN(e)),s=M.filter(e=>e instanceof HTMLElement).shift(),r=M.filter(e=>"string"==typeof e||e instanceof String).map(e=>document.getElementById(e)).shift();if(k=null==s?null==r?document.body:r:s,k.appendChild(m),2<=i.length)m.setAttributeNS(null,"width",i[0]),m.setAttributeNS(null,"height",i[1]),at(m,0,0,i[0],i[1]);else if(null==m.getAttribute("viewBox")){let e=m.getBoundingClientRect();at(m,0,0,e.width,e.height)}1<=t.length&&t[0](),_()};let C=M.filter(e=>!isNaN(e));2<=C.length&&(m.setAttributeNS(null,"width",C[0]),m.setAttributeNS(null,"height",C[1]),at(m,0,0,C[0],C[1])),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B();let j,z,D,R,T,Y,U,Z;return{zoom:r,translate:s,appendChild:v,removeChildren:w,load:function(e,t){gt(e,function(e,i){null!=e&&(k.removeChild(m),m=e,k.appendChild(m),_()),null!=t&&t(e,i)})},save:x,setViewBox:t,getViewBox:u,size:y,get scale(){return N},get svg(){return m},get width(){return P()},get height(){return A()},set width(e){m.setAttributeNS(null,"width",e)},set height(e){m.setAttributeNS(null,"height",e)},set onMouseMove(e){j=e},set onMouseDown(e){z=e},set onMouseUp(e){D=e},set onMouseLeave(e){R=e},set onMouseEnter(e){T=e},set animate(e){h(e)}}}function ie(e,t,i){this.x=e,this.y=t,this.z=i}function se(e){0<e&&1>e&&(e*=65536),e=Be(e),256>e&&(e|=e<<8);for(var t=0;256>t;t++){var s;s=1&t?ut[t]^255&e:ut[t]^255&e>>8,a[t]=a[t+256]=s,p[t]=p[t+256]=pt[s%12]}}function re(e){return e*e*e*(e*(6*e-15)+10)}function ae(e,i,s){return(1-s)*e+s*i}function ne(e,t){let i=0,r=Array(kt(e)).fill(!1);t.forEach(e=>r[e]=!0);let a=r.map(e=>e?--i:i);return 0===t.length?a:(null!=e.faces_vertices&&(e.faces_vertices=e.faces_vertices.map(e=>e.map(e=>e+a[e]))),null!=e.edges_vertices&&(e.edges_vertices=e.edges_vertices.map(e=>e.map(e=>e+a[e]))),null!=e.vertices_vertices&&(e.vertices_vertices=e.vertices_vertices.map(e=>e.map(e=>e+a[e]))),null!=e.vertices_faces&&(e.vertices_faces=e.vertices_faces.filter((e,t)=>!r[t])),null!=e.vertices_vertices&&(e.vertices_vertices=e.vertices_vertices.filter((e,t)=>!r[t])),null!=e.vertices_coords&&(e.vertices_coords=e.vertices_coords.filter((e,t)=>!r[t])),a)}function ce(e,t){let i=0,r=Array(At(e)).fill(!1);t.forEach(t=>r[t]=!0);let a=r.map(e=>e?--i:i);return 0===t.length?a:(null!=e.vertices_faces&&(e.vertices_faces=e.vertices_faces.map(e=>e.map(e=>e+a[e]))),null!=e.edges_faces&&(e.edges_faces=e.edges_faces.map(e=>e.map(e=>e+a[e]))),null!=e.faceOrders&&(e.faceOrders=e.faceOrders.map(e=>e.map((e,t)=>2===t?e:e+a[e]))),null!=e.faces_vertices&&(e.faces_vertices=e.faces_vertices.filter((t,e)=>!r[e])),null!=e.faces_edges&&(e.faces_edges=e.faces_edges.filter((t,e)=>!r[e])),a)}function de(e,t,s){let r=[],a=Array.from(Array(e.faces_vertices.length)).map((e,t)=>t).reverse();return a.forEach(a=>{let i=Ut(e,a,t,s);if(null!=i.edges&&null!=i.edges.new){let e=i.edges.new[0].index;r=r.map(e=>e+=null==i.edges.map[e]?0:i.edges.map[e]),r.push(e)}}),r}function fe(e,t,i){let s=Ye.origami.axiom1(t,i);return de(e,s[0],s[1])}function oe(e,t,i){let s=Ye.origami.axiom2(t,i);return de(e,s[0],s[1])}function le(e,t,i,s,r){let a=Ye.origami.axiom3(t,i,s,r);return de(e,a[0][0],a[0][1])}function _e(e,t,i,s){let r=Ye.origami.axiom4(t,i,s);return de(e,r[0],r[1])}function ge(e,t,i,s,r){let a=Ye.origami.axiom5(t,i,s,r);return de(e,a[0],a[1])}function me(e,t,i,s,r,a,n){let c=Ye.origami.axiom6(t,i,s,r,a,n);return de(e,c[0],c[1])}function pe(e,t,i,s,r,a){let n=Ye.origami.axiom7(t,i,s,r,a);return de(e,n[0],n[1])}function ue(e,t,i){Ye.Ray(t,i);return e.faces_vertices.forEach(s=>{s.map(t=>e.vertices_coords[t]);Ye.intersection.clip_ray_in_convex_poly(_points,t,i)}),de(e,line[0],line[1])}function ve(e){let t=e.filter((e,t)=>0==t%2).reduce((e,t)=>e+t,0),i=e.filter((e,t)=>1==t%2).reduce((e,t)=>e+t,0);return[Se-t,Se-i]}function he(e,t){let i=Xt(e,t),s=i.map(e=>Ae(e[1],e[0]));return i.map((e,t,i)=>{let s=i[(t+1)%i.length];return RabbitEar.math.core.geometry.counter_clockwise_angle2(e,s)}).map((e,t,i)=>{let s=i.slice();return s.splice(t,1),s}).map(e=>ve(e)).map((e,t)=>null==e?void 0:s[t]+e[1]).map(e=>e===void 0?void 0:[Me(e),ke(e)])}function xe(e,t,i,s="F"){let r=he(e,t),a=e.vertices_coords[t];Ut(e,i,a,r[i],s)}function ye(e,t=0,i){let s=e.vertices_coords.map((t,s)=>{for(var i=0;i<e.faces_vertices.length;i++)if(e.faces_vertices[i].includes(s))return i}),r=Graph.make_faces_matrix(e,i),a=e.vertices_coords.map((e,t)=>Geom.core.multiply_vector2_matrix2(e,r[s[t]]).map(e=>Geom.core.clean_number(e,14)));return{frame_classes:["foldedState"],frame_parent:t,frame_inherit:!0,vertices_coords:a,"re:faces_matrix":r}}function Ee(e,t,s){let r=e;e.edges_vertices.forEach(e=>{e.sort((e,t)=>e-t).join(" ")});let a=r.vertices_coords.length,n=r.vertices_coords.map(e=>Geom.core.intersection.point_on_line(t,s,e)),c=r.edges_vertices.map(e=>e.map(e=>r.vertices_coords[e])).map((e,n)=>{let i=Geom.core.intersection.line_edge_exclusive(t,s,e[0],e[1]),c=null==i?a:a++;return{point:i,vertices:r.edges_vertices[n],new_index:c}}),d=c.filter(e=>null!=e.point).map(e=>e.point),f=r.vertices_coords.map(()=>!1).concat(d.map(()=>!0));r.vertices_coords=r.vertices_coords.concat(d);let o=c.map((e,t)=>{if(null==e.point)return null;let i=[r.edges_vertices[t][0],e.new_index],s=[r.edges_vertices[t][1],e.new_index];return{edges:Graph.replace_edge(r,t,i,s),vertices:[i[0],s[0],e.new_index]}}),l=r.faces_vertices.map((e,t)=>{let i=e.map(e=>({intersection:n[e],v:e})).filter(e=>e.intersection).map(e=>e.v),s=r.faces_edges[t].map(t=>{let i=o[t];if(null!=i)return i.old_edge=t,i}).filter(e=>null!=e);return{vertices:i,edges:s}}),_=l.map(e=>2==e.edges.length?e:1==e.vertices.length&&1==e.edges.length?e:void 0),g=l.map(e=>2==e.edges.length?e:void 0).map(e=>null==e?void 0:e.edges),m=l.map(e=>1==e.vertices.length&&1==e.edges.length?e:void 0).map(e=>null==e?void 0:e.vertices),p=[],u=[];g.map((e,t)=>({edges:e,i:t})).filter(e=>null!=e.edges).forEach(e=>{let t=e.i,i=e.edges,s=e.edges.map(t=>({key:t.vertices.slice(0,2).sort((e,t)=>e-t).join(" "),new_v:t.vertices[2]})),a=r.faces_vertices[t].map((e,t,i)=>[e,i[(t+1)%i.length]]).map(e=>e.sort((e,t)=>e-t).join(" ")),n=s.map(e=>({found:a.indexOf(e.key),new_v:e.new_v})),c=n.sort((e,t)=>e.found-t.found),d=r.faces_vertices[t].slice(c[1].found+1);d=d.concat(r.faces_vertices[t].slice(0,c[0].found+1)),d.push(c[0].new_v),d.push(c[1].new_v);let f=r.faces_vertices[t].slice(c[0].found+1,c[1].found+1);f.push(c[1].new_v),f.push(c[0].new_v),p.push([c[0].new_v,c[1].new_v]),u[t]=[d,f]}),p.forEach(e=>Graph.add_edge(r,e,"F"));let v=u.map((e,t)=>({faces:e,i:t})).filter(e=>null!=e.faces).map(e=>e.faces.map(t=>({old:e.i,new:Graph.replace_face(r,e.i,t)}))).reduce((e,t)=>e.concat(t)),h=r.vertices_coords.map((e,t)=>null==e?t:void 0).filter(e=>null!=e),x=r.edges_vertices.map((e,t)=>null==e?t:void 0).filter(e=>null!=e),y=r.faces_vertices.map((e,t)=>null==e?t:void 0).filter(e=>null!=e),E=r.edges_vertices.map((e,t)=>t);o.forEach((e,t)=>{null!=e&&e.edges.forEach(e=>E[e]=t)});let b=r.faces_vertices.map((e,t)=>t);v.forEach(e=>b[e.new]=e.old);let B=Graph.remove_vertices(r,h),S=Graph.remove_edges(r,x),w=Graph.remove_faces(r,y);return f=f.filter((e,t)=>!B[t]),E=E.filter((t,e)=>!S[e]),b=b.filter((t,e)=>!w[e]),r["re:diff"]={vertices:f,edges:E,faces:b},r}const Ie=1e-10,Oe=1e-14;var Pe=Object.freeze({normalize:i,magnitude:s,degenerate:function(e){return Ne(e.reduce((e,t)=>e+t,0))<Ie},dot:r,midpoint:n,equivalent:c,parallel:d,multiply_vector2_matrix2:f,make_matrix2_reflection:o,make_matrix2_rotation:l,make_matrix2_inverse:_,multiply_matrices2:g,cross2:m,cross3:u,distance2:function(e,t){return Ve(we(e[0]-t[0],2)+we(e[1]-t[1],2))},distance3:function(e,t){return Ve(we(e[0]-t[0],2)+we(e[1]-t[1],2)+we(e[2]-t[2],2))}});const Fe=function(){return!0},Ce=function(e,t,i=Ie){return t>=-i},Le=function(e,t,i=Ie){return t>=-i&&t<=1+i},je=function(e,t,i=Ie){return e>=-i&&t>=-i},ze=function(e,t,i=Ie){return e>=-i&&t>=-i&&t<=1+i},De=function(e,t,i=Ie){return e>=-i&&e<=1+i&&t>=-i&&t<=1+i};var Re=function(e,t,i,s,r,a=Ie){function n(e,t){return e[0]*t[1]-t[0]*e[1]}var c=n(t,s);if(!(Ne(c)<a)){var d=n([i[0]-e[0],i[1]-e[1]],s),f=n([e[0]-i[0],e[1]-i[1]],t),o=d/c;if(r(o,f/-c,a))return[e[0]+t[0]*o,e[1]+t[1]*o]}},Te=Object.freeze({line_line:function(e,t,i,s,r){return Re(e,t,i,s,Fe,r)},line_ray:function(e,t,i,s,r){return Re(e,t,i,s,Ce,r)},line_edge:h,ray_ray:function(e,t,i,s,r){return Re(e,t,i,s,je,r)},ray_edge:x,edge_edge:y,line_edge_exclusive:E,point_on_line:b,point_on_edge:function(e,t,i,s=Ie){let r=Ve(we(e[0]-t[0],2)+we(e[1]-t[1],2)),a=Ve(we(i[0]-e[0],2)+we(i[1]-e[1],2)),n=Ve(we(i[0]-t[0],2)+we(i[1]-t[1],2));return Ne(r-a-n)<s},point_in_poly:B,point_in_convex_poly:S,convex_polygons_overlap:w,clip_line_in_convex_poly:k,clip_ray_in_convex_poly:M,clip_edge_in_convex_poly:A,intersection_circle_line:N}),Ge=Object.freeze({make_regular_polygon:V,clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*Se;for(;0>t;)t+=2*Se;var i=e-t;return 0<=i?i:2*Se-(t-e)},counter_clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*Se;for(;0>t;)t+=2*Se;var i=t-e;return 0<=i?i:2*Se-(e-t)},clockwise_angle2:I,counter_clockwise_angle2:function(e,t){var i=e[0]*t[0]+e[1]*t[1],s=e[0]*t[1]-e[1]*t[0],r=Ae(s,i);return 0>r&&(r+=2*Se),r},interior_angles2:function(e,t){var i=I(e,t),s=2*Se-i;return i<s?[i,s]:[s,i]},bisect_vectors:O,bisect_lines2:P,convex_hull:F,split_polygon:C,split_convex_polygon:L}),He=Object.freeze({axiom1:function(e,t){return[e,e.map((s,r)=>t[r]-e[r])]},axiom2:function(e,t){let i=n(e,t),s=e.map((s,r)=>t[r]-e[r]);return[i,[s[1],-s[0]]]},axiom3:function(e,t,i,s){return P(e,t,i,s)},axiom4:function(e,t,s){let r=i(t),a=[r[1],-r[0]];return[[...s],a]},axiom5:function(){},axiom6:function(){},axiom7:function(){}});Y.regularPolygon=function(e,t=0,i=0,s=1){let r=V(e,t,i,s);return Y(r)},Y.convexHull=function(e,t=!1){let i=F(e,t);return Y(i)},U.regularPolygon=function(e,t=0,i=0,s=1){let r=V(e,t,i,s);return U(r)},U.convexHull=function(e,t=!1){let i=F(e,t);return U(i)},X.makeIdentity=function(){return X(1,0,0,1,0,0)},X.makeRotation=function(e,t){return X(l(e,t))},X.makeReflection=function(e,t){return X(o(e,t))},W.withPoints=function(){let e=T(...arguments);return W({point:e[0],vector:i([e[1][0]-e[0][0],e[1][1]-e[0][1]])})},W.perpendicularBisector=function(){let e=T(...arguments),t=i([e[1][0]-e[0][0],e[1][1]-e[0][1]]);return W({point:n(e[0],e[1]),vector:[t[1],-t[0]]})},q.withPoints=function(){let e=T(...arguments);return q({point:e[0],vector:i([e[1][0]-e[0][0],e[1][1]-e[0][1]])})};let Ye={algebra:Pe,geometry:Ge,intersection:Te,origami:He,EPSILON_LOW:3e-6,EPSILON:Ie,EPSILON_HIGH:Oe,clean_number:t};var Ue=Object.freeze({core:Ye,Vector:H,Circle:function(){let e,t,i=Array.from(arguments),s=i.filter(e=>!isNaN(e));3==s.length&&(e=s.slice(0,2),t=s[2]);const r=function(){let i=R(...arguments),s=[i.point[0]+i.vector[0],i.point[1]+i.vector[1]],r=N(e,t,i.point,s);return Vector(r)},a=function(){let i=T(...arguments),s=N(e,t,i[0],i[1]);return Vector(s)};return Object.freeze({intersectionLine:r,intersectionEdge:a,get origin(){return e},get radius(){return t}})},Polygon:Y,ConvexPolygon:U,Rectangle:Z,Matrix:X,Line:W,Ray:q,Edge:J});$.prototype.xml=function(t,i){var s=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=s.length,a=!1,n=0,c="",d=i?K(i):this.shift;for(let e=0;e<r;e++)-1<s[e].search(/<!/)?(c+=d[n]+s[e],a=!0,(-1<s[e].search(/-->/)||-1<s[e].search(/\]>/)||-1<s[e].search(/!DOCTYPE/))&&(a=!1)):-1<s[e].search(/-->/)||-1<s[e].search(/\]>/)?(c+=s[e],a=!1):/^<\w/.exec(s[e-1])&&/^<\/\w/.exec(s[e])&&/^<[\w:\-\.\,]+/.exec(s[e-1])==/^<\/[\w:\-\.\,]+/.exec(s[e])[0].replace("/","")?(c+=s[e],a||n--):-1<s[e].search(/<\w/)&&-1==s[e].search(/<\//)&&-1==s[e].search(/\/>/)?c=a?c+=s[e]:c+=d[n++]+s[e]:-1<s[e].search(/<\w/)&&-1<s[e].search(/<\//)?c=a?c+=s[e]:c+=d[n]+s[e]:-1<s[e].search(/<\//)?c=a?c+=s[e]:c+=d[--n]+s[e]:-1<s[e].search(/\/>/)?c=a?c+=s[e]:c+=d[n]+s[e]:c+=-1<s[e].search(/<\?/)?d[n]+s[e]:-1<s[e].search(/xmlns\:/)||-1<s[e].search(/xmlns\=/)?d[n]+s[e]:s[e];return"\n"==c[0]?c.slice(1):c},$.prototype.json=function(e,t){var t=t?t:this.step;return"undefined"==typeof JSON?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},$.prototype.css=function(t,i){var s=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=s.length,a=0,n="",c=i?K(i):this.shift;for(let e=0;e<r;e++)n+=/\{/.exec(s[e])?c[a++]+s[e]:/\}/.exec(s[e])?c[--a]+s[e]:/\*\\/.exec(s[e])?c[a]+s[e]:c[a]+s[e];return n.replace(/^\n{1,}/,"")},$.prototype.sql=function(t,s){var r=t.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),a=r.length,n=[],o=0,l=this.step,_=0,g="",m=s?K(s):this.shift;for(let e=0;e<a;e++)n=e%2?n.concat(r[e]):n.concat(ee(r[e],l));a=n.length;for(let e=0;e<a;e++)_=Q(n[e],_),/\s{0,}\s{0,}SELECT\s{0,}/.exec(n[e])&&(n[e]=n[e].replace(/\,/g,",\n"+l+l+"")),/\s{0,}\s{0,}SET\s{0,}/.exec(n[e])&&(n[e]=n[e].replace(/\,/g,",\n"+l+l+"")),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(n[e])?(o++,g+=m[o]+n[e]):/\'/.exec(n[e])?(1>_&&o&&o--,g+=n[e]):(g+=m[o]+n[e],1>_&&o&&o--);return g=g.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n"),g},$.prototype.xmlmin=function(e,t){var i=t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return i.replace(/>\s{0,}</g,"><")},$.prototype.jsonmin=function(e){return"undefined"==typeof JSON?e:JSON.stringify(JSON.parse(e),null,0)},$.prototype.cssmin=function(e,t){var i=t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return i.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},$.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};var Ze=new $;const Xe="http://www.w3.org/2000/svg",We=function(e,t,i,s){null!=t&&e.setAttributeNS(null,"class",t),null!=i&&e.setAttributeNS(null,"id",i),null!=s&&s.appendChild(e)},qe=function(e,t){if(null!=t&&t.constructor===Array){let i=t.map(e=>e.constructor===Array?e:[e.x,e.y]).reduce((e,t)=>e+t[0]+","+t[1]+" ","");e.setAttributeNS(null,"points",i)}},Je=function(t,s,a,c,e,d,f=!1){var _=ke,i=Me;let g=[s+i(e)*c,a+_(e)*c],u=[i(e)*c,_(e)*c],l=[i(d)*c,_(d)*c],m=[l[0]-u[0],l[1]-u[1]],n=u[0]*l[1]-u[1]*l[0],o=u[0]*l[0]+u[1]*l[1],p=0<Ae(n,o)?0:1,v=f?"M "+s+","+a+" l "+u[0]+","+u[1]+" ":"M "+g[0]+","+g[1]+" ";v+=["a ",c,c,0,p,1,m[0],m[1]].join(" "),f&&(v+=" Z"),t.setAttributeNS(null,"d",v)},Ke=function(t,i,s,r,a,e,n){let c=document.createElementNS(Xe,"line");return c.setAttributeNS(null,"x1",t),c.setAttributeNS(null,"y1",i),c.setAttributeNS(null,"x2",s),c.setAttributeNS(null,"y2",r),We(c,a,e,n),c},$e=function(t,i,s,r,a,e){let n=document.createElementNS(Xe,"circle");return n.setAttributeNS(null,"cx",t),n.setAttributeNS(null,"cy",i),n.setAttributeNS(null,"r",s),We(n,r,a,e),n},Qe=function(t,i,s,r){let a=document.createElementNS(Xe,"polygon");return qe(a,t),We(a,i,s,r),a},et=function(e,t,i){let s=document.createElementNS(Xe,"g");return We(s,e,t,i),s},tt=function(e,t,i){let s=document.createElementNS(Xe,"svg");return We(s,e,t,i),s},it=function(e,t){if(null==e)return;let i=e.getAttribute("class");null==i&&(i="");let s=i.split(" ").filter(e=>e!==t);s.push(t),e.setAttributeNS(null,"class",s.join(" "))},st=function(e,t){if(null==e)return;let i=e.getAttribute("class");null==i&&(i="");let s=i.split(" ").filter(e=>e!==t);e.setAttributeNS(null,"class",s.join(" "))},rt=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},at=function(t,i,s,r,e,a=0){let n=r/1-r,c=[i-n-a,s-n-a,r+2*n+2*a,e+2*n+2*a].join(" ");t.setAttributeNS(null,"viewBox",c)},nt=function(e){let t=e.getBoundingClientRect(),i=0==t.width?640:t.width,s=0==t.height?480:t.height;at(e,0,0,i,s)},ct=function(e){let t=e.getAttribute("viewBox");return null==t?void 0:t.split(" ").map(e=>parseFloat(e))},dt=function(t,s,r=0,a=0){1e-8>s&&(s=.01);let n=t.createSVGMatrix().translate(r,a).scale(1/s).translate(-r,-a),e=ct(t);null==e&&nt(t);let c=t.createSVGPoint(),d=t.createSVGPoint();c.x=e[0],c.y=e[1],d.x=e[0]+e[2],d.y=e[1]+e[3];let f=c.matrixTransform(n),i=d.matrixTransform(n);at(t,f.x,f.y,i.x-f.x,i.y-f.y)},ft=function(e,t,i){let s=ct(e);null==s&&nt(e),s[0]+=t,s[1]+=i,e.setAttributeNS(null,"viewBox",s.join(" "))},ot=function(t,i,s){let r=t.createSVGPoint();r.x=i,r.y=s;let a=r.matrixTransform(t.getScreenCTM().inverse()),e=[a.x,a.y];return e.x=a.x,e.y=a.y,e},lt=function(t,i="image.svg"){let s=document.createElement("a"),r=new window.XMLSerializer().serializeToString(t),a=Ze.xml(r),e=new window.Blob([a],{type:"text/plain"});s.setAttribute("href",window.URL.createObjectURL(e)),s.setAttribute("download",i),s.click()},_t=new window.DOMParser().parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,gt=function(e,t){if("string"==typeof e||e instanceof String){let i=new window.DOMParser().parseFromString(e,"text/xml");if(0===i.getElementsByTagNameNS(_t,"parsererror").length){let e=i.documentElement;return null!=t&&t(e),e}fetch(e).then(e=>e.text()).then(e=>new window.DOMParser().parseFromString(e,"text/xml")).then(e=>{let i=e.getElementsByTagName("svg");if(null==i||0==i.length)throw"error, valid XML found, but no SVG element";return null!=t&&t(i[0]),i[0]}).catch(e=>t(null,e))}else if(e instanceof Document)return t(e),e};var mt=Object.freeze({Image:te,setPoints:qe,setArc:Je,line:Ke,circle:$e,rect:function(t,i,s,r,a,e,n){let c=document.createElementNS(Xe,"rect");return c.setAttributeNS(null,"x",t),c.setAttributeNS(null,"y",i),c.setAttributeNS(null,"width",s),c.setAttributeNS(null,"height",r),We(c,a,e,n),c},polygon:Qe,polyline:function(t,i,s,r){let a=document.createElementNS(Xe,"polyline");return qe(a,t),We(a,i,s,r),a},bezier:function(t,s,r,a,n,e,c,d,f,i,o){let _=document.createElementNS(Xe,"path");return _.setAttributeNS(null,"d","M "+t+","+s+" C "+r+","+a+" "+n+","+e+" "+c+","+d),We(_,f,i,o),_},text:function(t,i,s,r,a,e){let n=document.createElementNS(Xe,"text");return n.innerHTML=t,n.setAttributeNS(null,"x",i),n.setAttributeNS(null,"y",s),We(n,r,a,e),n},wedge:function(t,s,r,a,n,e,c,d){let f=document.createElementNS(Xe,"path");return Je(f,t,s,r,a,n,!0),We(f,e,c,d),f},arc:function(t,s,r,a,n,e,c,d){let f=document.createElementNS(Xe,"path");return Je(f,t,s,r,a,n,!1),We(f,e,c,d),f},regularPolygon:function(t,s,r,n,a,e,c){var d=Se,o=Me;let _=.5*(2*d/n),m=o(_)*r,f=Array.from(Array(n)).map((r,e)=>{let c=-2*d*e/n+_,f=t+m*ke(c),a=s+m*o(c);return[f,a]});return Qe(f,a,e,c)},group:et,svg:tt,addClass:it,removeClass:st,setId:function(e,t){null==e||e.setAttributeNS(null,"id",t)},removeChildren:rt,setViewBox:at,setDefaultViewBox:nt,getViewBox:ct,scale:dt,translate:ft,convertToViewBox:ot,save:lt,load:gt});ie.prototype.dot2=function(e,t){return this.x*e+this.y*t},ie.prototype.dot3=function(e,t,i){return this.x*e+this.y*t+this.z*i};var pt=[new ie(1,1,0),new ie(-1,1,0),new ie(1,-1,0),new ie(-1,-1,0),new ie(1,0,1),new ie(-1,0,1),new ie(1,0,-1),new ie(-1,0,-1),new ie(0,1,1),new ie(0,-1,1),new ie(0,1,-1),new ie(0,-1,-1)],ut=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],a=Array(512),p=Array(512);se(0);var vt=.5*(Ve(3)-1),ht=(3-Ve(3))/6,xt=1/6,yt=Object.freeze({seed:se,simplex2:function(e,r){var n,c,d,f,o,l=(e+r)*vt,s=Be(e+l),_=Be(r+l),g=(s+_)*ht,t=e-s+g,m=r-_+g;t>m?(f=1,o=0):(f=0,o=1);var u=t-f+ht,v=m-o+ht,h=t-1+2*ht,x=m-1+2*ht;s&=255,_&=255;var y=p[s+a[_]],E=p[s+f+a[_+o]],b=p[s+1+a[_+1]],B=.5-t*t-m*m;0>B?n=0:(B*=B,n=B*B*y.dot2(t,m));var S=.5-u*u-v*v;0>S?c=0:(S*=S,c=S*S*E.dot2(u,v));var w=.5-h*h-x*x;return 0>w?d=0:(w*=w,d=w*w*b.dot2(h,x)),70*(n+c+d)},simplex3:function(e,r,n){var c,d,f,o,l,_,g,m,u,v,h=(e+r+n)*(1/3),s=Be(e+h),x=Be(r+h),y=Be(n+h),E=(s+x+y)*xt,t=e-s+E,b=r-x+E,B=n-y+E;t>=b?b>=B?(l=1,_=0,g=0,m=1,u=1,v=0):t>=B?(l=1,_=0,g=0,m=1,u=0,v=1):(l=0,_=0,g=1,m=1,u=0,v=1):b<B?(l=0,_=0,g=1,m=0,u=1,v=1):t<B?(l=0,_=1,g=0,m=0,u=1,v=1):(l=0,_=1,g=0,m=1,u=1,v=0);var S=t-l+xt,w=b-_+xt,M=B-g+xt,A=t-m+2*xt,N=b-u+2*xt,V=B-v+2*xt,I=t-1+3*xt,O=b-1+3*xt,P=B-1+3*xt;s&=255,x&=255,y&=255;var F=p[s+a[x+a[y]]],C=p[s+l+a[x+_+a[y+g]]],L=p[s+m+a[x+u+a[y+v]]],z=p[s+1+a[x+1+a[y+1]]],D=.6-t*t-b*b-B*B;0>D?c=0:(D*=D,c=D*D*F.dot3(t,b,B));var R=.6-S*S-w*w-M*M;0>R?d=0:(R*=R,d=R*R*C.dot3(S,w,M));var T=.6-A*A-N*N-V*V;0>T?f=0:(T*=T,f=T*T*L.dot3(A,N,V));var G=.6-I*I-O*O-P*P;return 0>G?o=0:(G*=G,o=G*G*z.dot3(I,O,P)),32*(c+d+f+o)},perlin2:function(e,t){var i=Be(e),s=Be(t);e-=i,t-=s,i&=255,s&=255;var r=p[i+a[s]].dot2(e,t),n=p[i+a[s+1]].dot2(e,t-1),c=p[i+1+a[s]].dot2(e-1,t),d=p[i+1+a[s+1]].dot2(e-1,t-1),f=re(e);return ae(ae(r,c,f),ae(n,d,f),re(t))},perlin3:function(e,t,i){var s=Be(e),r=Be(t),n=Be(i);e-=s,t-=r,i-=n,s&=255,r&=255,n&=255;var c=p[s+a[r+a[n]]].dot3(e,t,i),d=p[s+a[r+a[n+1]]].dot3(e,t,i-1),f=p[s+a[r+1+a[n]]].dot3(e,t-1,i),o=p[s+a[r+1+a[n+1]]].dot3(e,t-1,i-1),l=p[s+1+a[r+a[n]]].dot3(e-1,t,i),_=p[s+1+a[r+a[n+1]]].dot3(e-1,t,i-1),g=p[s+1+a[r+1+a[n]]].dot3(e-1,t-1,i),m=p[s+1+a[r+1+a[n+1]]].dot3(e-1,t-1,i-1),h=re(e),u=re(t),v=re(i);return ae(ae(ae(c,l,h),ae(d,_,h),v),ae(ae(f,g,h),ae(o,m,h),v),u)}});const Et={meta:["file_spec","file_creator","file_author","file_classes","frame_title","frame_attributes","frame_classes"],graph:["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges"],orders:["edgeOrders","faceOrders"]},bt=["file_frames"].concat(Et.meta).concat(Et.graph).concat(Et.orders),Bt=function(e,t,i){null==e.vertices_coords&&(e.vertices_coords=[]),e.vertices_coords.push([t,i]);let s=e.vertices_coords.length-1;return s},St=function(e){let t=e.edges_assignment.map(e=>"b"!==e&&"B"!==e).map((e,t)=>e?t:null).filter(e=>null!=e),i=Lt(e,t),s=Pt(e);e.faces_edges=[s.edges],e.faces_vertices=[s.vertices],wt(e)},wt=function(e){let t=e.vertices_coords.map(()=>!0);e.edges_vertices.forEach(e=>e.forEach(e=>t[e]=!1));let i=t.map((e,t)=>e?t:null).filter(e=>null!==e);return 0===i.length?[]:ne(e,i)},kt=function(e){return be(...[[],e.vertices_coords,e.vertices_faces,e.vertices_vertices].filter(e=>null!=e).map(e=>e.length))},Mt=function(e){return be(...[[],e.edges_vertices,e.edges_faces].filter(e=>null!=e).map(e=>e.length))},At=function(e){return be(...[[],e.faces_vertices,e.faces_edges].filter(e=>null!=e).map(e=>e.length))},Nt=function(e){let t=e.faces_vertices.length,i=Array.from(Array(t)).map(()=>[]),s={};return e.faces_vertices.forEach((e,t)=>{if(void 0===e)return;let r=e.length;e.forEach((e,a,n)=>{let c=n[(a+1)%r];c<e&&([e,c]=[c,e]);let d=e+" "+c;if(d in s){let e=s[d];i[t].push(e),i[e].push(t)}else s[d]=t})}),i},Vt=function(e,t=0){let s=[];return s[t]=!1,It(e,t).forEach((e,t)=>e.forEach(e=>s[e.face]=0==t%2)),s},It=function(e,t=0){let i=Nt(e);var s=[t],r=[[{face:t,parent:void 0,edge:void 0,level:0}]];do r[r.length]=r[r.length-1].map(t=>{let r=i[t.face].filter(e=>-1===s.indexOf(e));return s=s.concat(r),r.map(i=>({face:i,parent:t.face,edge:e.faces_vertices[i].filter(i=>-1!==e.faces_vertices[t.face].indexOf(i)).sort((e,t)=>e-t)}))}).reduce((e,t)=>e.concat(t),[]);while(0<r[r.length-1].length);return 0<r.length&&0==r[r.length-1].length&&r.pop(),r},Ot=function(t,i,e,s){if(t.edges_vertices.length<s)return;let r=Bt(t,i,e),a=t.edges_vertices[s];null==t.vertices_vertices&&(t.vertices_vertices=[]),t.vertices_vertices[r]=JSON.parse(JSON.stringify(a)),a.forEach((e,s,i)=>{let a=i[(s+1)%i.length],n=t.vertices_vertices[e].indexOf(a);t.vertices_vertices[e][n]=r}),null!=t.edges_faces&&null!=t.edges_faces[s]&&(t.vertices_faces[r]=JSON.parse(JSON.stringify(t.edges_faces[s])));let n=[{edges_vertices:[a[0],r]},{edges_vertices:[r,a[1]]}];n.forEach((s,e)=>s.i=t.edges_vertices.length+e),["edges_faces","edges_assignment","edges_foldAngle"].filter(e=>null!=t[e]&&null!=t[e][s]).forEach(e=>{n[0][e]=JSON.parse(JSON.stringify(t[e][s])),n[1][e]=JSON.parse(JSON.stringify(t[e][s]))});const c=function(e,t){return Ve(we(t[0]-e[0],2)+we(t[1]-e[1],2))};n.forEach((e,s)=>{let i=e.edges_vertices.map(e=>t.vertices_coords[e]);n[s].edges_length=c(...i)}),n.forEach(e=>Object.keys(e).filter(e=>"i"!==e).forEach(i=>t[i][e.i]=e[i]));let d=t.edges_faces[s],f=d.map(e=>t.faces_vertices[e]),o=d.map(e=>t.faces_edges[e]);f.forEach(e=>e.map((e,t,i)=>{let s=(t+1)%i.length;return e===a[0]&&i[s]===a[1]||e===a[1]&&i[s]===a[0]?s:void 0}).filter(e=>e!==void 0).sort((e,t)=>t-e).forEach(t=>e.splice(t,0,r))),o.forEach(e=>{let i=e.indexOf(s),a=e[(i+e.length-1)%e.length],c=e[(i+1)%e.length],d=[[a,s],[s,c]].map(e=>{let i=e.map(i=>t.edges_vertices[i]);return i[0][0]===i[1][0]||i[0][0]===i[1][1]?i[0][0]:i[0][1]}).reduce((e,t)=>e.concat(t),[]),f=[[d[0],r],[r,d[1]]].map(e=>{let t=e.map(e=>-1!==n[0].edges_vertices.indexOf(e)).reduce((e,t)=>e&&t,!0),i=e.map(e=>-1!==n[1].edges_vertices.indexOf(e)).reduce((e,t)=>e&&t,!0);if(t)return n[0].i;if(i)return n[1].i;throw"something wrong with input graph's faces_edges construction"});return i===e.length-1?(e.splice(i,1,f[0]),e.unshift(f[1])):e.splice(i,1,...f),f});let l=Lt(t,[s]);return{vertices:{new:[{index:r}]},edges:{map:l,replace:[{old:s,new:n.map(e=>e.i)}]}}},Pt=function(e){let t=e.edges_assignment.map(e=>"B"===e||"b"===e),s=e.vertices_coords.map(()=>[]);e.edges_vertices.forEach((e,t)=>e.forEach(e=>s[e].push(t)));let r=[],a=[],n=-1;for(let s=0;s<t.length;s++)if(t[s]){n=s;break}t[n]=!1,r.push(n),a.push(e.edges_vertices[n][0]);for(let i=e.edges_vertices[n][1];a[0]!==i;)a.push(i),n=s[i].filter(e=>t[e]).shift(),i=e.edges_vertices[n][0]===i?e.edges_vertices[n][1]:e.edges_vertices[n][0],t[n]=!1,r.push(n);return{vertices:a,edges:r}},Ft=function(e){let t=e.edges_vertices.filter((t,s)=>"B"==e.edges_assignment[s]||"b"==e.edges_assignment[s]).map(e=>e.slice()),s=Array.from(Array(e.vertices_coords.length)).map(()=>[]);t.forEach((e,t)=>e.forEach(i=>s[i].push(t)));let r=0,a=t[r].shift(),n=t[r].shift(),c=[a];for(;c[0]!==n;){c.push(n);let e=s[n],i=s[n].indexOf(r);if(-1===i)return;s[n].splice(i,1);let a=s[n].map((e,t)=>({key:e,i:t})).filter(e=>e.key!==r).shift();if(null==a)return;s[n].splice(a.i,1),r=a.key;let d=t[r].indexOf(n);if(-1===d)return;t[r].splice(d,1),n=t[r].shift()}return c},Ct=function(e){var t=JSON.parse(JSON.stringify(e));t.clean(),t.removeIsolatedNodes(),t.nodes.forEach(function(e){e.cache.adj=e.adjacentEdges().length},this);for(var i=[];0<t.edges.length;){var e=new Graph;t.nodes.forEach(function(i){e.addNode(Object.assign(new t.nodeType(e),i))},this);for(var s=t.nodes.slice().sort(function(e,t){return t.cache.adj-e.cache.adj})[0],r=s.adjacentEdges();0<r.length;){var a=r.filter(function(e){return 0==e.otherNode(s).cache.adj%2},this);0==a.length&&(a=r);var n=a.sort(function(e,t){return t.otherNode(s).cache.adj-e.otherNode(s).cache.adj})[0],c=n.otherNode(s),d=Object.assign(new t.edgeType(e,void 0,void 0),n);d.nodes=[e.nodes[s.index],e.nodes[c.index]],e.addEdge(d),s.cache.adj-=1,c.cache.adj-=1,t.edges=t.edges.filter(function(e){return e!==n}),s=c,r=s.adjacentEdges()}e.removeIsolatedNodes(),i.push(e)}return i},Lt=function(e,t){let i=0,r=Array(Mt(e)).fill(!1);t.forEach(t=>r[t]=!0);let a=r.map(e=>e?--i:i);return 0===t.length?a:(null!=e.faces_edges&&(e.faces_edges=e.faces_edges.map(e=>e.map(e=>e+a[e]))),null!=e.edgeOrders&&(e.edgeOrders=e.edgeOrders.map(e=>e.map((e,t)=>2===t?e:e+a[e]))),null!=e.edges_vertices&&(e.edges_vertices=e.edges_vertices.filter((t,e)=>!r[e])),null!=e.edges_faces&&(e.edges_faces=e.edges_faces.filter((t,e)=>!r[e])),null!=e.edges_assignment&&(e.edges_assignment=e.edges_assignment.filter((t,e)=>!r[e])),null!=e.edges_foldAngle&&(e.edges_foldAngle=e.edges_foldAngle.filter((t,e)=>!r[e])),null!=e.edges_length&&(e.edges_length=e.edges_length.filter((t,e)=>!r[e])),a)};var jt=Object.freeze({keys:Et,all_keys:bt,new_vertex:Bt,new_edge:function(e,t,i){null==_m.edges_vertices&&(e.edges_vertices=[]),e.edges_vertices.push([t,i]);let s=e.edges_vertices.length-1;return s},remove_non_boundary_edges:St,remove_isolated_vertices:wt,remove_collinear_vertices:function(){},vertices_count:kt,edges_count:Mt,faces_count:At,make_faces_faces:Nt,face_coloring:Vt,make_face_walk_tree:It,add_vertex_on_edge:Ot,get_boundary_face:Pt,get_boundary_vertices:Ft,connectedGraphs:Ct,remove_vertices:ne,remove_edges:Lt,remove_faces:ce});const zt=function(e,t){let s=[];for(let r=1;r<e.length;r++)e[r]!==e[r-1]&&s.push(r);for(let s=1;s<t.length;s++)if(t[s]!==t[s-1]);let r=t.slice();return s.forEach(e=>r.splice(e,0,0===e?0:r[e-1])),e.map((e,t)=>e+r[t])},Dt=function(e){return"M"===e||"m"===e?-180:"V"===e||"v"===e?180:0},Rt=function(e,t){if(null==e.vertices_coords||0===e.vertices_coords.length)return;let s=[...t];return null==s[2]&&(s[2]=0),e.vertices_coords.map(e=>e.map((e,t)=>we(e-s[t],2)).reduce((e,t)=>e+t,0)).map((e,t)=>({d:Ve(e),i:t})).sort((e,t)=>e.d-t.d).shift().i},Tt=function(e,t){return null==e.vertices_coords||0===e.vertices_coords.length||null==e.edges_vertices||0===e.edges_vertices.length?void 0:e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t])).map(t=>J(t)).map((s,e)=>({e:s,i:e,d:s.nearestPoint(t).distanceTo(t)})).sort((e,t)=>e.d-t.d).shift().i},Gt=function(e,t){if(null!=e.vertices_coords&&0!==e.vertices_coords.length&&null!=e.faces_vertices&&0!==e.faces_vertices.length){let i=e.faces_vertices.map((t,s)=>({face:t.map(t=>e.vertices_coords[t]),i:s})).filter(e=>Ye.intersection.point_in_poly(e.face,t)).shift();return null==i?void 0:i.i}},Ht=function(e,t){let i=e.faces_vertices.map(()=>[1,0,0,1,0,0]);return It(e,t).forEach(t=>t.filter(e=>null!=e.parent).forEach(t=>{let s=t.edge.map(t=>e.vertices_coords[t]),r=[s[1][0]-s[0][0],s[1][1]-s[0][1]],a=Ye.algebra.make_matrix2_reflection(r,s[0]);i[t.face]=Ye.algebra.multiply_matrices2(i[t.parent],a)})),i},Yt=function(e,t){let i=e.faces_vertices.map(()=>[1,0,0,1,0,0]);return It(e,t).forEach(t=>t.filter(e=>null!=e.parent).forEach(t=>{let s=t.edge.map(t=>e.vertices_coords[t]),r=[s[1][0]-s[0][0],s[1][1]-s[0][1]],a=Ye.algebra.make_matrix2_reflection(r,s[0]);i[t.face]=Ye.algebra.multiply_matrices2(a,i[t.parent])})),i},Ut=function(t,s,r,a,n="F"){let c=t.faces_vertices[s].map(e=>t.vertices_coords[e]).map(e=>Ye.intersection.point_on_line(r,a,e)?e:void 0).map((e,r)=>({point:e,i_face:r,i_vertices:t.faces_vertices[s][r]})).filter(e=>e.point!==void 0),d=t.faces_edges[s].map(e=>t.edges_vertices[e]).map(e=>e.map(i=>t.vertices_coords[i])).map(e=>Ye.intersection.line_edge_exclusive(r,a,e[0],e[1])).map((e,r)=>({point:e,i_face:r,i_edges:t.faces_edges[s][r]})).filter(e=>e.point!==void 0),f=[],o=Array.from(Array(t.edges_vertices.length)).map(()=>0);if(2===d.length)f=d.map((e,s,i)=>{let r=Ot(t,e.point[0],e.point[1],e.i_edges);return i.slice(s+1).filter(e=>null!=r.edges.map[e.i_edges]).forEach(e=>e.i_edges+=r.edges.map[e.i_edges]),o=zt(o,r.edges.map),r.vertices.new[0].index});else if(1===d.length&&1===c.length){let e=c.map(e=>e.i_vertices),i=d.map((e,s,i)=>{let r=Ot(t,e.point[0],e.point[1],e.i_edges);return i.slice(s+1).filter(e=>null!=r.edges.map[e.i_edges]).forEach(e=>e.i_edges+=r.edges.map[e.i_edges]),o=r.edges.map,r.vertices.new[0].index});f=e.concat(i)}else if(2===c.length)f=c.map(e=>e.i_vertices);else return{};let l=f.map(e=>t.faces_vertices[s].indexOf(e)).sort((e,t)=>e-t),_=[{},{}];_[0].vertices=t.faces_vertices[s].slice(l[1]).concat(t.faces_vertices[s].slice(0,l[0]+1)),_[1].vertices=t.faces_vertices[s].slice(l[0],l[1]+1),_[0].edges=t.faces_edges[s].slice(l[1]).concat(t.faces_edges[s].slice(0,l[0])).concat([t.edges_vertices.length]),_[1].edges=t.faces_edges[s].slice(l[0],l[1]).concat([t.edges_vertices.length]);let g=[{index:t.edges_vertices.length,vertices:[...f],assignment:n,foldAngle:Dt(n),length:Ye.algebra.distance2(...f.map(e=>t.vertices_coords[e])),faces:[t.faces_vertices.length,t.faces_vertices.length+1]}],m=t.edges_vertices.length,p=t.faces_vertices.length;_.forEach((e,s)=>Object.keys(e).forEach(i=>t["faces_"+i][p+s]=e[i])),g.forEach((e,s)=>Object.keys(e).filter(e=>"index"!==e).forEach(i=>t["edges_"+i][m+s]=e[i])),g.forEach(e=>{let i=e.vertices[0],s=e.vertices[1];t.vertices_vertices[i].push(s),t.vertices_vertices[s].push(i)});let u={};t.faces_vertices.map((e,t)=>({face:e,i:t})).filter(e=>e.i===p||e.i===p+1).forEach(e=>e.face.forEach(t=>{null==u[t]&&(u[t]=[]),u[t].push(e.i)})),t.vertices_faces.forEach((e,r)=>{for(let i=e.indexOf(s);-1!==i;)t.vertices_faces[r].splice(i,1,...u[r]),i=e.indexOf(s)});let v={};t.faces_edges.map((e,t)=>({face:e,i:t})).filter(e=>e.i===p||e.i===p+1).forEach(t=>t.face.forEach(i=>{null==v[i]&&(v[i]=[]),v[i].push(t.i)})),t.edges_faces.forEach((e,r)=>{for(let i=e.indexOf(s);-1!==i;)t.edges_faces[r].splice(i,1,...v[r]),i=e.indexOf(s)});let h=ce(t,[s]);return{faces:{map:h,replace:[{old:s,new:_}]},edges:{new:g,map:o}}};var Zt=Object.freeze({nearest_vertex:Rt,nearest_edge:Tt,face_containing_point:Gt,faces_containing_point:function(e,t){return null==e.vertices_coords||0===e.vertices_coords.length||null==e.faces_vertices||0===e.faces_vertices.length?void 0:e.faces_vertices.map((t,s)=>({face:t.map(t=>e.vertices_coords[t]),i:s})).filter(e=>Ye.intersection.point_in_polygon(e.face,t)).map(e=>e.i)},make_faces_matrix:Ht,make_faces_matrix_inv:Yt,split_convex_polygon:Ut,clip_line:function(t,s,r){function a(e,t){return Ve(we(e[0]-t[0],2)+we(e[1]-t[1],2))}let n=t.edges_vertices.map(e=>e.map(i=>t.vertices_coords[i]));return[r,[-r[0],-r[1]]].map(t=>n.map(i=>Ye.intersection.ray_edge(s,t,i[0],i[1])).filter(e=>null!=e).map(e=>({intersection:e,length:a(e,s)})).sort((e,t)=>e.length-t.length).map(e=>e.intersection).shift()).filter(e=>null!=e)},add_crease:function(e,t,i){let s=J([t,i]),r=s.endpoints.map(t=>e.vertices_coords.map(e=>Ve(we(t[0]-e[0],2)+we(t[1]-e[1],2))).map((e,t)=>1e-8>e?t:void 0).filter(e=>void 0!==e).shift()).map((t,r)=>void 0===t?(e.vertices_coords.push(s.endpoints[r]),e.vertices_coords.length-1):t);return e.edges_vertices.push(r),e.edges_assignment.push("F"),e.edges_vertices.length-1}});let Xt=function(e,t){let i=origami.cp.vertices_vertices[t];return i.map(e=>[origami.cp.vertices_coords[e][0]-origami.cp.vertices_coords[t][0],origami.cp.vertices_coords[e][1]-origami.cp.vertices_coords[t][1]])};var Wt=Object.freeze({crease_folded:function(e,t,i,s){null==s&&(s=0);let r=W(t,i),a=Vt(e,s);Yt(e,s).map(e=>r.transform(e)).reverse().forEach((t,s,r)=>{let n=r.length-1-s;Ut(e,n,t.point,t.vector,a[n]?"M":"V")})},crease_line:de,crease_ray:function(e,t,s){let r=[],a=Array.from(Array(e.faces_vertices.length)).map((e,t)=>t).reverse();return a.forEach(a=>{let i=Ut(e,a,t,s);if(null!=i.edges&&null!=i.edges.new){let e=i.edges.new[0].index;r=r.map(e=>e+=null==i.edges.map[e]?0:i.edges.map[e]),r.push(e)}}),r},axiom1:fe,axiom2:oe,axiom3:le,axiom4:_e,axiom5:ge,axiom6:me,axiom7:pe,creaseRay:ue,kawasaki_solutions:he,kawasaki_collapse:xe,fold_without_layering:function(e,t){null==t&&(t=0);let s=Ht(e,t),r=e.vertices_coords.map((t,s)=>{for(var i=0;i<e.faces_vertices.length;i++)if(e.faces_vertices[i].includes(s))return i}),a=e.vertices_coords.map((e,t)=>Ye.algebra.multiply_vector2_matrix2(e,s[r[t]]).map(e=>Ye.clean_number(e)));return e.frame_classes=["foldedState"],e.vertices_coords=a,e}});let qt=["load","json","clear","wipe","clearGraph","nearestVertex","nearestEdge","nearestFace","vertex","edge","face","crease","addVertexOnEdge","connectedGraphs","axiom1","axiom2","axiom3","axiom4","axiom5","axiom6","axiom7","creaseRay"];const Jt=function(e,t){let i=e,s=t;const r=function(e){return s.map(t=>e.map(e=>e===i.edges_assignment[t]).reduce((e,t)=>e||t,!1)).reduce((e,t)=>e||t,!1)},a=function(){return r(["M","m"])},n=function(){return r(["V","v"])},c=function(){s.forEach(e=>i.edges_assignment[e]="M"),s.forEach(e=>i.edges_foldAngle[e]=-180),"function"==typeof i.onchange&&i.onchange()},d=function(){s.forEach(e=>i.edges_assignment[e]="V"),s.forEach(e=>i.edges_foldAngle[e]=180),"function"==typeof i.onchange&&i.onchange()};return{get index(){return _index},mountain:c,valley:d,mark:function(){s.forEach(e=>i.edges_assignment[e]="F"),s.forEach(e=>i.edges_foldAngle[e]=0),"function"==typeof i.onchange&&i.onchange()},flip:function(){if(a())d();else if(n())c();else return;"function"==typeof i.onchange&&i.onchange()},get isMountain(){return a()},get isValley(){return n()},remove:function(){}}},Kt=function(e,t){let i=e,s=t;const r=function(e){return e.map(e=>e===i.edges_assignment[s]).reduce((e,t)=>e||t,!1)},a=function(){return r(["M","m"])},n=function(){return r(["V","v"])},c=function(){i.edges_assignment[s]="M",i.edges_foldAngle[s]=-180,"function"==typeof i.onchange&&i.onchange()},d=function(){i.edges_assignment[s]="V",i.edges_foldAngle[s]=180,"function"==typeof i.onchange&&i.onchange()};return{get index(){return t},mountain:c,valley:d,mark:function(){i.edges_assignment[s]="F",i.edges_foldAngle[s]=0,"function"==typeof i.onchange&&i.onchange()},flip:function(){if(a())d();else if(n())c();else return;"function"==typeof i.onchange&&i.onchange()},get isMountain(){return a()},get isValley(){return n()},remove:function(){},addVertexOnEdge:function(e,t){let s=this.index;i.addVertexOnEdge(e,t,s)}}},$t=function(e,t){return{get index(){return t}}},Qt=function(e,t){return{get index(){return t}}},ei={B:"boundary",b:"boundary",M:"mountain",m:"mountain",V:"valley",v:"valley",F:"mark",f:"mark",U:"mark",u:"mark"},ti={file_spec:1.1,file_creator:"",file_author:"",file_classes:["singleModel"],frame_title:"",frame_attributes:["2D"],frame_classes:["creasePattern"],vertices_coords:[[0,0],[1,0],[1,1],[0,1]],vertices_vertices:[[1,3],[2,0],[3,1],[0,2]],vertices_faces:[[0],[0],[0],[0]],edges_vertices:[[0,1],[1,2],[2,3],[3,0]],edges_faces:[[0],[0],[0],[0]],edges_assignment:["B","B","B","B"],edges_foldAngle:[0,0,0,0],edges_length:[1,1,1,1],faces_vertices:[[0,1,2,3]],faces_edges:[[0,1,2,3]]},ii=function(e){return JSON.parse(JSON.stringify(e))};var si=Object.freeze({clone:ii,flatten_frame:function(e,t){function i(e,t,s){if(-1!=r.visited_frames.indexOf(t)){throw".FOLD file_frames encountered a cycle. stopping."}return r.visited_frames.push(t),s=[t].concat(s),0==t?s:e.file_frames[t-1].frame_inherit&&null!=e.file_frames[t-1].frame_parent?i(e,e.file_frames[t-1].frame_parent,s):s}const s=["frame_parent","frame_inherit"];var r={visited_frames:[]};return i(e,t,[]).map(t=>{if(0==t){let t=e.file_frames;e.file_frames=null;let i=ii(e);return e.file_frames=t,delete i.file_frames,s.forEach(e=>delete i[e]),i}let i=ii(e.file_frames[t-1]);return s.forEach(e=>delete i[e]),i}).reduce((e,t)=>Object.assign(e,t),{})},merge_frame:function(e,t){let i=ii(t);["frame_parent","frame_inherit"].forEach(e=>delete i[e]);let s=e.file_frames;e.file_frames=null;let r=ii(e);return e.file_frames=s,delete r.file_frames,Object.assign(r,t),r}}),ri=function(e,t,i,s){let r=mi(e,s);if(null==r)return;let a,n,c=ai(e,t,i),d=ni(c),o=ci(e.vertices_coords,d),l=di(e.faces_vertices,c,d).map(e=>fi(e,o,t,i)),_=[0,1].map(e=>null==l[r][e]?[]:l[r][e]).map(e=>e.map(e=>o[e])).map(e=>Geom.core.intersection.point_in_polygon(e,s)).indexOf(!0),g=l.map(e=>e[_]),m=Graph.make_faces_faces({faces_vertices:g}),p=oi(g,o,m,e.faces_layer,r);({stay_faces:a,move_faces:n}=li(e.faces_vertices,e.faces_layer,l,p,_));let u=a.length,v=_i(a,n);var h={vertices_coords:o,faces_vertices:v.faces_vertices};Graph.remove_isolated_vertices(h);let x=gi(h.vertices_coords,h.faces_vertices,v.faces_layer,u,t,i),y=x.vertices_coords.map((e,t)=>{for(var i=0;i<h.faces_vertices.length;i++)if(h.faces_vertices[i].includes(t))return i});let E=Graph.make_faces_matrix({vertices_coords:x.vertices_coords,faces_vertices:h.faces_vertices},1),b=E.map(e=>Geom.core.make_matrix2_inverse(e)),B=x.vertices_coords.map((e,t)=>Geom.core.multiply_vector2_matrix2(e,b[y[t]]).map(e=>Geom.core.clean_number(e))),S={vertices_coords:x.vertices_coords,faces_vertices:h.faces_vertices,faces_layer:x.faces_layer};Graph.faces_vertices_to_edges(S);let w={file_spec:1.1,file_creator:"Rabbit Ear",file_author:"",file_classes:["singleModel"],frame_attributes:["2D"],frame_title:"one valley crease",frame_classes:["foldedState"]};return Object.keys(w).forEach(t=>S[t]=null==e[t]?w[t]:e[t]),S.file_classes=["singleModel"],S.frame_attributes=["2D"],S.frame_classes=["foldedState"],S.file_frames=[{frame_classes:["creasePattern"],parent:0,inherit:!0,vertices_coords:B}],S},ai=function({vertices_coords:e,faces_vertices:t},s,r){let a=t.map(t=>t.map(t=>e[t])).map((e,t)=>({face:t,clip:Geom.core.intersection.clip_line_in_poly(e,s,r)})).filter(e=>null!=e.clip).reduce((e,t)=>(e[t.face]={clip:t.clip},e),{});return Object.keys(a).forEach(i=>{let s=t[i],r=a[i].clip;a[i].collinear=find_collinear_face_edges(r,s,e)}),a},ni=function(e){let t={};Object.keys(e).forEach(s=>{let r=e[s].collinear.map(t=>t.sort((e,t)=>e-t).join(" "));r.forEach((r,a)=>t[r]={point:e[s].clip[a],face:parseInt(s)})});let i=Object.keys(t).map(e=>(t[e].edges=e.split(" ").map(e=>parseInt(e)),t[e]));return i};let ci=function(e,t){let i=JSON.parse(JSON.stringify(e));return t.forEach(e=>{i.push(e.point),e.newVertexIndex=i.length-1}),i};var di=function(e,t,i){let s={};i.forEach(e=>s[e.edges.join(" ")]=e);let r=e.map(e=>[e,void 0]);return Object.keys(t).forEach(t=>{let i=parseInt(t);var a=[[],[]],n=0;e[i].forEach((e,t,i)=>{let r=i[(t+1)%i.length];var c=[e,r].sort((e,t)=>e-t).join(" ");if(s[c]){var d=s[c].newVertexIndex;a[n].push(d),n=(n+1)%2,a[n].push(d),a[n].push(r)}else a[n].push(r)}),r[i]=a}),r},fi=function(e,t,i,s){var r=[void 0,void 0];return e.forEach(e=>{if(null!=e){var a=e.map(e=>{var r=t[e],n=[r[0]-i[0],r[1]-i[1]],a=[s[0],s[1]];return n[0]*a[1]-n[1]*a[0]}).reduce((e,t)=>e+t),n=0>a?0:1;r[n]=e}}),r},oi=function(e,t,i,s,r){let a=e.map(()=>!1);a[r]=!0;let n=[r],c=0,d=e.map(e=>e===void 0?void 0:e.map(e=>t[e]));for(;c<n.length;){let t=n[c];c+=1,e.forEach((e,i)=>{!a[i]&&s[i]>s[t]&&d[t]!==void 0&&d[i]!==void 0&&Geom.core.intersection.polygons_overlap(d[t],d[i])&&(a[i]=!0,n.push(i))}),i[t].forEach(e=>{a[e]||(a[e]=!0,n.push(e))})}return a},li=function(e,t,s,r,a){let n=e.slice(),c=t.slice(),d=c.length,f=r.map((e,t)=>({mark:e,i:t})),o=r.map((t,r)=>t?s[r][(a+1)%2]:e[r]).map((e,s)=>{if(e!=null)return{old_face:s,old_layer:t[s],new_vertices:e}}).filter(e=>e!=null),l=f.filter(e=>e.mark).map(e=>({old_face:e.i,old_layer:t[e.i],new_vertices:s[e.i][a]}));return{stay_faces:o,move_faces:l}},_i=function(e,t){e.forEach((e,t)=>e.i=t),t.forEach((e,t)=>e.i=t),e.sort((e,t)=>e.old_layer-t.old_layer).forEach((e,t)=>e.new_layer=t),t.sort((e,t)=>e.old_layer-t.old_layer).forEach((t,i)=>t.new_layer=i+e.length),e.sort((e,t)=>e.i-t.i),t.sort((e,t)=>e.i-t.i),e.forEach(e=>delete e.i),t.forEach(e=>delete e.i),e.forEach((e,t)=>e.new_face=t),t.forEach((t,s)=>t.new_face=s+e.length);let i=e.map(e=>e.new_vertices),s=t.map(e=>e.new_vertices),r=e.map(e=>e.new_layer),a=t.map(e=>e.new_layer);return{faces_vertices:i.concat(s),faces_layer:r.concat(a)}},gi=function(e,t,s,r,a,n){var c=Geom.core.make_matrix_reflection(n,a),d=s.slice(0,r),o=s.slice(r,r+s.length-r);o.reverse();for(var l=e.map(()=>!1),_=r;_<t.length;_++)for(var g=0;g<t[_].length;g++)if(!l[t[_][g]]){var m=e[t[_][g]];e[t[_][g]]=Geom.core.multiply_vector2_matrix2(m,c),l[t[_][g]]=!0}return{faces_layer:d.concat(o),vertices_coords:e}},mi=function({faces_vertices:e,vertices_coords:t,faces_layer:i},s){let r=e.map((e,i)=>{let r=e.map(e=>t[e]);return Geom.core.intersection.point_in_polygon(r,s)?i:-1}).reduce((e,t)=>-1===e||-1!==t&&i[t]>i[e]?t:e,-1);return-1===r?void 0:r},pi=Object.freeze({default:function(e,t,i){null!=i&&(i=[i.x,i.y]);let s=[t.point.x,t.point.y],r=[t.direction.x,t.direction.y];if(null!=i){let t=ri(e,s,r,i);return t}}}),ui=Object.freeze({make_folded_frame:ye,make_unfolded_frame:function(e,t=0,i){let s=e.vertices_coords.map((t,s)=>{for(var i=0;i<e.faces_vertices.length;i++)if(e.faces_vertices[i].includes(s))return i}),r=Graph.make_faces_matrix(e,i),a=e.vertices_coords.map((e,t)=>Geom.core.multiply_vector2_matrix2(e,r[s[t]]).map(e=>Geom.core.clean_number(e,14)));return{frame_classes:["creasePattern"],frame_parent:t,frame_inherit:!0,vertices_coords:a,"re:faces_matrix":r}},crease_through_layers:function(e,t,i){let s=clone(e),r=ye(s,1,0),a=merge_frame(s,r),n=Ee(a,t,i),c=n["re:diff"],d=n.vertices_coords.map((e,t)=>{for(var i=0;i<n.faces_vertices.length;i++)if(n.faces_vertices[i].includes(t))return i}),f=n["re:faces_matrix"],o=n.vertices_coords.map((e,t)=>Geom.core.multiply_vector2_matrix2(e,Geom.core.make_matrix2_inverse(f[c.faces[d[t]]])).map(e=>Geom.core.clean_number(e))),l=merge_frame(n,{frame_classes:["creasePattern"],frame_parent:0,frame_inherit:!0,vertices_coords:o,"re:faces_matrix":f});return delete l.faces_edges,delete l.faces_layer,delete l.frame_inherit,delete l.frame_parent,l.file_frames=[ye(l,0,1)],l},clip_edges_with_line:Ee});const vi={empty:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [],\n\t\"frame_classes\": [],\n\t\"vertices_coords\": [],\n\t\"vertices_vertices\": [],\n\t\"vertices_faces\": [],\n\t\"edges_vertices\": [],\n\t\"edges_faces\": [],\n\t\"edges_assignment\": [],\n\t\"edges_foldAngle\": [],\n\t\"edges_length\": [],\n\t\"faces_vertices\": [],\n\t\"faces_edges\": [],\n\t\"edgeOrders\": [],\n\t\"faceOrders\": [],\n\t\"file_frames\": []\n}"),square:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [1,0], [1,1], [0,1]],\n\t\"vertices_vertices\": [[1,3], [2,0], [3,1], [0,2]],\n\t\"vertices_faces\": [[0], [0], [0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,0]],\n\t\"edges_faces\": [[0], [0], [0], [0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0],\n\t\"edges_length\": [1, 1, 1, 1],\n\t\"faces_vertices\": [[0,1,2,3]],\n\t\"faces_edges\": [[0,1,2,3]]\n}"),book:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,1], [0.5,1], [0,1]],\n\t\"vertices_vertices\": [[1,5], [2,4,0], [3,1], [4,2], [5,1,3], [0,4]],\n\t\"vertices_faces\": [[0], [0,1], [1], [1], [1,0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,0], [1,4]],\n\t\"edges_faces\": [[0], [1], [1], [1], [0], [0], [0,1]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180],\n\t\"edges_length\": [0.5, 0.5, 1, 0.5, 0.5, 1, 1],\n\t\"faces_vertices\": [[1,4,5,0], [4,1,2,3]],\n\t\"faces_edges\": [[6,4,5,0], [6,1,2,3]]\n}"),blintz:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"blintz base\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,0.5], [1,1], [0.5,1], [0,1], [0,0.5]],\n\t\"vertices_vertices\": [[1,7], [2,3,7,0], [3,1], [4,5,1,2], [5,3], [6,7,3,4], [7,5], [0,1,5,6]],\n\t\"vertices_faces\": [[0], [1,4,0], [1], [2,4,1], [2], [3,4,2], [3], [0,4,3]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0], [1,3], [3,5], [5,7], [7,1]],\n\t\"edges_faces\": [[0], [1], [1], [2], [2], [3], [3], [0], [1,4], [2,4], [3,4], [0,4]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\",\"V\",\"V\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\"edges_length\": [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.707106781186548, 0.707106781186548, 0.707106781186548, 0.707106781186548],\n\t\"faces_vertices\": [[0,1,7], [2,3,1], [4,5,3], [6,7,5], [1,3,5,7]],\n\t\"faces_edges\": [[0,11,7], [2,8,1], [4,9,3], [6,10,5], [8,9,10,11]],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [[0.5,0.5], [0.5,0.0], [0.5,0.5], [1.0,0.5], [0.5,0.5], [0.5,1.0], [0.5,0.5], [0.0,0.5]],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 180, 180, 180, 180],\n\t\t\"faceOrders\": [[0,4,1], [1,4,1], [2,4,1], [3,4,1]]\n\t}]\n}"),kite:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"kite base\",\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0], [0.414213562373095,0], [1,0], [1,0.585786437626905], [1,1], [0,1]],\n\t\"vertices_vertices\": [[1,5], [2,5,0], [3,5,1], [4,5,2], [5,3], [0,1,2,3,4]],\n\t\"vertices_faces\": [[0], [1,0], [2,1], [3,2], [3], [0,1,2,3]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,0], [5,1], [3,5], [5,2]],\n\t\"edges_faces\": [[0], [1], [2], [3], [3], [0], [0,1], [3,2], [1,2]],\n\t\"edges_assignment\": [\"B\", \"B\", \"B\", \"B\", \"B\", \"B\", \"V\", \"V\", \"F\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\"edges_length\": [0.414213562373095, 0.585786437626905, 0.585786437626905, 0.414213562373095, 1, 1, 1.082392200292394, 1.082392200292394, 1.414213562373095],\n\t\"faces_vertices\": [[0,1,5], [1,2,5], [2,3,5], [3,4,5]],\n\t\"faces_edges\": [[0,6,5], [1,8,6], [2,7,8], [3,4,7]],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [[0.707106781186548,0.292893218813452],[1,0],[0.707106781186548,0.292893218813452],[0,1],[0.414213562373095,0],[1,0.585786437626905]],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180, 180, 0],\n\t\t\"faceOrders\": [[0,1,1], [3,2,1]]\n\t}]\n}"),fish:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.292893218813452,0],[1,0.707106781186548]],\n\t\"edges_vertices\": [[2,3],[3,0],[3,1],[0,4],[1,4],[3,4],[1,5],[2,5],[3,5],[4,6],[0,6],[6,1],[5,7],[1,7],[7,2]],\n\t\"edges_assignment\": [\"B\",\"B\",\"F\",\"M\",\"M\",\"M\",\"M\",\"M\",\"M\",\"V\",\"B\",\"B\",\"V\",\"B\",\"B\"],\n\t\"faces_vertices\": [[2,3,5],[3,0,4],[3,1,5],[1,3,4],[4,0,6],[1,4,6],[5,1,7],[2,5,7]],\n\t\"faces_edges\": [[0,8,7],[1,3,5],[2,6,8],[2,5,4],[3,10,9],[4,9,11],[6,13,12],[7,12,14]],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [[0.707106781186548,0.292893218813452],[1,0],[0.707106781186548,0.292893218813452],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.5,0.5],[0.5,0.5]]\n\t}]\n}"),bird:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0.207106781186548,0.5],[0.5,0.207106781186548],[0.792893218813452,0.5],[0.5,0.792893218813452],[0.353553390593274,0.646446609406726],[0.646446609406726,0.646446609406726],[0.646446609406726,0.353553390593274],[0.353553390593274,0.353553390593274],[0,0.5],[0.5,0],[1,0.5],[0.5,1]],\n\t\"edges_vertices\": [[3,5],[5,9],[3,9],[3,13],[5,13],[0,5],[0,13],[0,12],[5,12],[4,5],[4,12],[4,9],[0,6],[6,12],[0,14],[6,14],[1,6],[1,14],[1,11],[6,11],[4,6],[4,11],[1,7],[7,11],[1,15],[7,15],[2,7],[2,15],[2,10],[7,10],[4,7],[4,10],[2,8],[8,10],[2,16],[8,16],[3,8],[3,16],[8,9],[4,8]],\n\t\"edges_faces\": [[0,1],[0,5],[21,0],[1],[2,1],[2,3],[2],[3,6],[4,3],[4,5],[11,4],[5,22],[6,7],[6,11],[7],[8,7],[8,9],[8],[9,12],[10,9],[10,11],[17,10],[12,13],[12,17],[13],[14,13],[14,15],[14],[15,18],[16,15],[16,17],[23,16],[18,19],[18,23],[19],[20,19],[20,21],[20],[22,21],[22,23]],\n\t\"edges_assignment\": [\"M\",\"F\",\"V\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"V\",\"F\",\"M\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"M\"],\n\t\"faces_vertices\": [[3,5,9],[5,3,13],[0,5,13],[5,0,12],[4,5,12],[5,4,9],[0,6,12],[6,0,14],[1,6,14],[6,1,11],[4,6,11],[6,4,12],[1,7,11],[7,1,15],[2,7,15],[7,2,10],[4,7,10],[7,4,11],[2,8,10],[8,2,16],[3,8,16],[8,3,9],[4,8,9],[8,4,10]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,4,6],[5,7,8],[9,8,10],[9,11,1],[12,13,7],[12,14,15],[16,15,17],[16,18,19],[20,19,21],[20,10,13],[22,23,18],[22,24,25],[26,25,27],[26,28,29],[30,29,31],[30,21,23],[32,33,28],[32,34,35],[36,35,37],[36,2,38],[39,38,11],[39,31,33]]\n}"),frog:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0,0.5],[0.5,0],[1,0.5],[0.5,1],[0.146446609406726,0.353553390593274],[0.353553390593274,0.146446609406726],[0.646446609406726,0.146446609406726],[0.853553390593274,0.353553390593274],[0.853553390593274,0.646446609406726],[0.646446609406726,0.853553390593274],[0.353553390593274,0.853553390593274],[0.146446609406726,0.646446609406726],[0,0.353553390593274],[0,0.646446609406726],[0.353553390593274,0],[0.646446609406726,0],[1,0.353553390593274],[1,0.646446609406726],[0.646446609406726,1],[0.353553390593274,1]],\n\t\"edges_vertices\": [[0,4],[4,9],[0,9],[0,10],[4,10],[2,4],[2,14],[4,14],[4,13],[2,13],[3,4],[4,15],[3,15],[3,16],[4,16],[1,4],[1,12],[4,12],[4,11],[1,11],[4,5],[5,9],[5,16],[4,6],[6,11],[6,10],[4,7],[7,13],[7,12],[4,8],[8,15],[8,14],[9,17],[0,17],[5,17],[0,19],[10,19],[6,19],[11,20],[1,20],[6,20],[1,21],[12,21],[7,21],[13,22],[2,22],[7,22],[2,23],[14,23],[8,23],[15,24],[3,24],[8,24],[3,18],[16,18],[5,18]],\n\t\"edges_faces\": [[0,1],[0,8],[16,0],[1,18],[11,1],[3,2],[2,26],[15,2],[3,12],[24,3],[4,5],[4,14],[28,4],[5,30],[9,5],[7,6],[6,22],[13,6],[7,10],[20,7],[8,9],[8,17],[31,9],[10,11],[10,21],[19,11],[12,13],[12,25],[23,13],[14,15],[14,29],[27,15],[16,17],[16],[17],[18],[19,18],[19],[20,21],[20],[21],[22],[23,22],[23],[24,25],[24],[25],[26],[27,26],[27],[28,29],[28],[29],[30],[31,30],[31]],\n\t\"edges_assignment\": [\"F\",\"M\",\"M\",\"M\",\"M\",\"F\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\"],\n\t\"faces_vertices\": [[0,4,9],[4,0,10],[4,2,14],[2,4,13],[3,4,15],[4,3,16],[4,1,12],[1,4,11],[4,5,9],[5,4,16],[4,6,11],[6,4,10],[4,7,13],[7,4,12],[4,8,15],[8,4,14],[0,9,17],[9,5,17],[10,0,19],[6,10,19],[1,11,20],[11,6,20],[12,1,21],[7,12,21],[2,13,22],[13,7,22],[14,2,23],[8,14,23],[3,15,24],[15,8,24],[16,3,18],[5,16,18]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,6,7],[5,8,9],[10,11,12],[10,13,14],[15,16,17],[15,18,19],[20,21,1],[20,14,22],[23,24,18],[23,4,25],[26,27,8],[26,17,28],[29,30,11],[29,7,31],[2,32,33],[21,34,32],[3,35,36],[25,36,37],[19,38,39],[24,40,38],[16,41,42],[28,42,43],[9,44,45],[27,46,44],[6,47,48],[31,48,49],[12,50,51],[30,52,50],[13,53,54],[22,54,55]]\n}"),test:JSON.parse("{\n\t\"file_spec\":1.1,\n\t\"file_creator\":\"Rabbit Ear\",\n\t\"file_author\":\"Robby Kraft\",\n\t\"file_classes\":[\"singleModel\"],\n\t\"frame_attributes\":[\"2D\"],\n\t\"frame_title\":\"three crease\",\n\t\"frame_classes\":[\"creasePattern\"],\n\t\"vertices_coords\":[\n\t\t[0,0],[1,0],[1,1],[0,1],[1,0.21920709774914],[0,0.75329794695316],[0.1,1],[0,0.9],[0.506713890898239,0],[0.645319539098137,0.408638686308289],[1,0.871265438078371]\n\t],\n\t\"edges_vertices\":[[8,9],[5,9],[0,5],[0,8],[5,7],[9,10],[2,10],[2,6],[6,7],[3,6],[3,7],[1,8],[1,4],[4,9],[4,10]],\n\t\"edges_assignment\":[\"M\",\"M\",\"B\",\"B\",\"B\",\"V\",\"B\",\"B\",\"V\",\"B\",\"B\",\"B\",\"B\",\"M\",\"B\"],\n\t\"faces_vertices\":[[8,9,5,0],[7,5,9,10,2,6],[6,3,7],[8,1,4,9],[9,4,10]],\n\t\"faces_edges\":[[0,1,2,3],[4,1,5,6,7,8],[9,10,8],[11,12,13,0],[13,14,5]],\n\t\"re:faces_layer\":[0,1,2,4,3],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\":[\n\t\t\t[0.62607055446971, 1.17221733980796],\n\t\t\t[0.44072549605688, 0.90956291495505],\n\t\t\t[1, 1],\n\t\t\t[0.1, 0.9],\n\t\t\t[0.37030057556411, 0.70197659007504],\n\t\t\t[0, 0.75329794695316],\n\t\t\t[0.1, 1],\n\t\t\t[0, 0.9],\n\t\t\t[0.90786114793244, 0.75108431015443],\n\t\t\t[0.64531953909814, 0.40863868630829],\n\t\t\t[1, 0.87126543807837]\n\t\t]\n\t}]\n}"),dodecagon:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_title\": \"\",\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [\n\t\t[1,0],[0.8660254,0.5],[0.5,0.8660254],[0,1],[-0.5,0.8660254],[-0.8660254,0.5],[-1,0],[-0.8660254,-0.5],[-0.5,-0.8660254],[0,-1],[0.5,-0.8660254],[0.8660254,-0.5]\n\t],\n\t\"vertices_vertices\": [[11,1], [0,2], [1,3], [2,4], [3,5], [4,6], [5,7], [6,8], [7,9], [8,10], [9,11], [10,0]],\n\t\"vertices_faces\": [[0],[0],[0],[0],[0],[0],[0],[0],[0],[0],[0],[0]],\n\t\"edges_vertices\": [\n\t\t[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,8], [8,9], [9,10], [10,11], [11,0]\n\t],\n\t\"edges_faces\": [[0],[0],[0],[0],[0],[0],[0],[0],[0],[0],[0],[0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\"edges_length\": [0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381, 0.5176381],\n\t\"faces_vertices\": [[0,1,2,3,4,5,6,7,8,9,10,11]],\n\t\"faces_edges\": [[0,1,2,3,4,5,6,7,8,9,10,11]]\n}"),boundary:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [],\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_title\": \"\",\n\t\"frame_classes\": [],\n\t\"vertices_coords\": [[0.3535533905932738,0.8535533905932737], [-0.3535533905932738,0.8535533905932737], [-0.8535533905932737,0.35355339059327384], [-0.8535533905932737,-0.35355339059327373], [-0.35355339059327384,-0.8535533905932737], [0.3535533905932737,-0.8535533905932738], [0.8535533905932735,-0.3535533905932743], [0.8535533905932736,0.35355339059327395]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,7], [7,6], [6,5], [5,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\"],\n\t\"faces_vertices\": [[0,1,2,7,6,5,2,3,4,5,6,7]],\n\t\"faces_edges\": [[0,1,2,3,4,5,6,7,8,9,10,11]]\n}"),concave:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [],\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_title\": \"\",\n\t\"frame_classes\": [],\n\t\"vertices_coords\": [[0,0], [1,0], [1,0.33333333333333], [0.33333333333333,0.33333333333333], [0.33333333333333,0.66666666666666], [1,0.66666666666666], [1,1], [0,1]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\"],\n\t\"faces_vertices\": [[0,1,2,3,4,5,6,7]],\n\t\"faces_edges\": [[0,1,2,3,4,5,6,7]]\n}"),blintzAnimated:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_author\": \"Robby Kraft\",\n\t\"file_classes\": [\"singleModel\", \"animation\"],\n\t\"re:file_date\": \"2018-10-14\",\n\t\"frame_title\": \"blintz base\",\n\t\"frame_attributes\": [\"3D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [\n\t\t[0.0, 0.0, 0.0], [0.5, 0.0, 0.0],\n\t\t[1.0, 0.0, 0.0], [1.0, 0.5, 0.0],\n\t\t[1.0, 1.0, 0.0], [0.5, 1.0, 0.0],\n\t\t[0.0, 1.0, 0.0], [0.0, 0.5, 0.0]\n\t],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0], [1,3], [3,5], [5,7], [7,1]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\",\"V\",\"V\",\"V\"],\n\t\"faces_vertices\": [[0,1,7], [2,3,1], [4,5,3], [6,7,5], [1,3,5,7]],\n\t\"faces_layer\": [4,0,1,2,3],\n\t\"file_frames\": [\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\": 0,\n\t\t\t\"frame_inherit\": true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.0012038183319507678, 0.0012038183319507678, 0.02450428508239015], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9987961816680493, 0.0012038183319507678, 0.02450428508239015], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9987961816680493, 0.9987961816680493, 0.02450428508239015], [0.5, 1.0, 0.0],\n\t\t\t\t[0.0012038183319507678, 0.9987961816680493, 0.02450428508239015], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.004803679899192392, 0.004803679899192392, 0.04877258050403206], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9951963201008076, 0.004803679899192392, 0.04877258050403206], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9951963201008076, 0.9951963201008076, 0.04877258050403206], [0.5, 1.0, 0.0],\n\t\t\t\t[0.004803679899192392, 0.9951963201008076, 0.04877258050403206], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.010764916066947794, 0.010764916066947794, 0.07257116931361558], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9892350839330522, 0.010764916066947794, 0.07257116931361558], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9892350839330522, 0.9892350839330522, 0.07257116931361558], [0.5, 1.0, 0.0],\n\t\t\t\t[0.010764916066947794, 0.9892350839330522, 0.07257116931361558], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.019030116872178315, 0.019030116872178315, 0.09567085809127245], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9809698831278217, 0.019030116872178315, 0.09567085809127245], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9809698831278217, 0.9809698831278217, 0.09567085809127245], [0.5, 1.0, 0.0],\n\t\t\t\t[0.019030116872178315, 0.9809698831278217, 0.09567085809127245], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.029519683912911238, 0.029519683912911238, 0.11784918420649941], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9704803160870887, 0.029519683912911238, 0.11784918420649941], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9704803160870887, 0.9704803160870887, 0.11784918420649941], [0.5, 1.0, 0.0],\n\t\t\t\t[0.029519683912911238, 0.9704803160870887, 0.11784918420649941], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.04213259692436369, 0.04213259692436369, 0.13889255825490054], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9578674030756363, 0.04213259692436369, 0.13889255825490054], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9578674030756363, 0.9578674030756363, 0.13889255825490054], [0.5, 1.0, 0.0],\n\t\t\t\t[0.04213259692436369, 0.9578674030756363, 0.13889255825490054], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.05674738665931575, 0.05674738665931575, 0.15859832104091137], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9432526133406842, 0.05674738665931575, 0.15859832104091137], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9432526133406842, 0.9432526133406842, 0.15859832104091137], [0.5, 1.0, 0.0],\n\t\t\t\t[0.05674738665931575, 0.9432526133406842, 0.15859832104091137], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.0732233047033631, 0.0732233047033631, 0.17677669529663687], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9267766952966369, 0.0732233047033631, 0.17677669529663687], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9267766952966369, 0.9267766952966369, 0.17677669529663687], [0.5, 1.0, 0.0],\n\t\t\t\t[0.0732233047033631, 0.9267766952966369, 0.17677669529663687], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.09140167895908863, 0.09140167895908863, 0.19325261334068422], [0.5, 0.0, 0.0],\n\t\t\t\t[0.9085983210409114, 0.09140167895908863, 0.19325261334068422], [1.0, 0.5, 0.0],\n\t\t\t\t[0.9085983210409114, 0.9085983210409114, 0.19325261334068422], [0.5, 1.0, 0.0],\n\t\t\t\t[0.09140167895908863, 0.9085983210409114, 0.19325261334068422], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.11110744174509943, 0.11110744174509943, 0.2078674030756363], [0.5, 0.0, 0.0],\n\t\t\t\t[0.8888925582549005, 0.11110744174509943, 0.2078674030756363], [1.0, 0.5, 0.0],\n\t\t\t\t[0.8888925582549005, 0.8888925582549005, 0.2078674030756363], [0.5, 1.0, 0.0],\n\t\t\t\t[0.11110744174509943, 0.8888925582549005, 0.2078674030756363], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.13215081579350055, 0.13215081579350055, 0.22048031608708873], [0.5, 0.0, 0.0],\n\t\t\t\t[0.8678491842064995, 0.13215081579350055, 0.22048031608708873], [1.0, 0.5, 0.0],\n\t\t\t\t[0.8678491842064995, 0.8678491842064995, 0.22048031608708873], [0.5, 1.0, 0.0],\n\t\t\t\t[0.13215081579350055, 0.8678491842064995, 0.22048031608708873], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.15432914190872754, 0.15432914190872754, 0.23096988312782168], [0.5, 0.0, 0.0],\n\t\t\t\t[0.8456708580912724, 0.15432914190872754, 0.23096988312782168], [1.0, 0.5, 0.0],\n\t\t\t\t[0.8456708580912724, 0.8456708580912724, 0.23096988312782168], [0.5, 1.0, 0.0],\n\t\t\t\t[0.15432914190872754, 0.8456708580912724, 0.23096988312782168], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.17742883068638443, 0.17742883068638443, 0.23923508393305223], [0.5, 0.0, 0.0],\n\t\t\t\t[0.8225711693136155, 0.17742883068638443, 0.23923508393305223], [1.0, 0.5, 0.0],\n\t\t\t\t[0.8225711693136155, 0.8225711693136155, 0.23923508393305223], [0.5, 1.0, 0.0],\n\t\t\t\t[0.17742883068638443, 0.8225711693136155, 0.23923508393305223], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.20122741949596792, 0.20122741949596792, 0.2451963201008076], [0.5, 0.0, 0.0],\n\t\t\t\t[0.7987725805040321, 0.20122741949596792, 0.2451963201008076], [1.0, 0.5, 0.0],\n\t\t\t\t[0.7987725805040321, 0.7987725805040321, 0.2451963201008076], [0.5, 1.0, 0.0],\n\t\t\t\t[0.20122741949596792, 0.7987725805040321, 0.2451963201008076], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.2254957149176098, 0.2254957149176098, 0.2487961816680492], [0.5, 0.0, 0.0],\n\t\t\t\t[0.7745042850823902, 0.2254957149176098, 0.2487961816680492], [1.0, 0.5, 0.0],\n\t\t\t\t[0.7745042850823902, 0.7745042850823902, 0.2487961816680492], [0.5, 1.0, 0.0],\n\t\t\t\t[0.2254957149176098, 0.7745042850823902, 0.2487961816680492], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.25, 0.25, 0.25], [0.5, 0.0, 0.0],\n\t\t\t\t[0.75, 0.25, 0.25], [1.0, 0.5, 0.0],\n\t\t\t\t[0.75, 0.75, 0.25], [0.5, 1.0, 0.0],\n\t\t\t\t[0.25, 0.75, 0.25], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.27450428508239016, 0.27450428508239016, 0.24879618166804923], [0.5, 0.0, 0.0],\n\t\t\t\t[0.7254957149176098, 0.27450428508239016, 0.24879618166804923], [1.0, 0.5, 0.0],\n\t\t\t\t[0.7254957149176098, 0.7254957149176098, 0.24879618166804923], [0.5, 1.0, 0.0],\n\t\t\t\t[0.27450428508239016, 0.7254957149176098, 0.24879618166804923], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.29877258050403205, 0.29877258050403205, 0.2451963201008076], [0.5, 0.0, 0.0],\n\t\t\t\t[0.701227419495968, 0.29877258050403205, 0.2451963201008076], [1.0, 0.5, 0.0],\n\t\t\t\t[0.701227419495968, 0.701227419495968, 0.2451963201008076], [0.5, 1.0, 0.0],\n\t\t\t\t[0.29877258050403205, 0.701227419495968, 0.2451963201008076], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.3225711693136155, 0.3225711693136155, 0.23923508393305223], [0.5, 0.0, 0.0],\n\t\t\t\t[0.6774288306863845, 0.3225711693136155, 0.23923508393305223], [1.0, 0.5, 0.0],\n\t\t\t\t[0.6774288306863845, 0.6774288306863845, 0.23923508393305223], [0.5, 1.0, 0.0],\n\t\t\t\t[0.3225711693136155, 0.6774288306863845, 0.23923508393305223], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.3456708580912724, 0.3456708580912724, 0.23096988312782168], [0.5, 0.0, 0.0],\n\t\t\t\t[0.6543291419087276, 0.3456708580912724, 0.23096988312782168], [1.0, 0.5, 0.0],\n\t\t\t\t[0.6543291419087276, 0.6543291419087276, 0.23096988312782168], [0.5, 1.0, 0.0],\n\t\t\t\t[0.3456708580912724, 0.6543291419087276, 0.23096988312782168], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.3678491842064994, 0.3678491842064994, 0.22048031608708876], [0.5, 0.0, 0.0],\n\t\t\t\t[0.6321508157935005, 0.3678491842064994, 0.22048031608708876], [1.0, 0.5, 0.0],\n\t\t\t\t[0.6321508157935005, 0.6321508157935005, 0.22048031608708876], [0.5, 1.0, 0.0],\n\t\t\t\t[0.3678491842064994, 0.6321508157935005, 0.22048031608708876], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.3888925582549005, 0.3888925582549005, 0.20786740307563634], [0.5, 0.0, 0.0],\n\t\t\t\t[0.6111074417450995, 0.3888925582549005, 0.20786740307563634], [1.0, 0.5, 0.0],\n\t\t\t\t[0.6111074417450995, 0.6111074417450995, 0.20786740307563634], [0.5, 1.0, 0.0],\n\t\t\t\t[0.3888925582549005, 0.6111074417450995, 0.20786740307563634], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4085983210409113, 0.4085983210409113, 0.19325261334068428], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5914016789590887, 0.4085983210409113, 0.19325261334068428], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5914016789590887, 0.5914016789590887, 0.19325261334068428], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4085983210409113, 0.5914016789590887, 0.19325261334068428], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.42677669529663687, 0.42677669529663687, 0.1767766952966369], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5732233047033631, 0.42677669529663687, 0.1767766952966369], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5732233047033631, 0.5732233047033631, 0.1767766952966369], [0.5, 1.0, 0.0],\n\t\t\t\t[0.42677669529663687, 0.5732233047033631, 0.1767766952966369], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4432526133406842, 0.4432526133406842, 0.15859832104091137], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5567473866593158, 0.4432526133406842, 0.15859832104091137], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5567473866593158, 0.5567473866593158, 0.15859832104091137], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4432526133406842, 0.5567473866593158, 0.15859832104091137], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.45786740307563634, 0.45786740307563634, 0.13889255825490054], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5421325969243637, 0.45786740307563634, 0.13889255825490054], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5421325969243637, 0.5421325969243637, 0.13889255825490054], [0.5, 1.0, 0.0],\n\t\t\t\t[0.45786740307563634, 0.5421325969243637, 0.13889255825490054], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.47048031608708873, 0.47048031608708873, 0.11784918420649947], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5295196839129113, 0.47048031608708873, 0.11784918420649947], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5295196839129113, 0.5295196839129113, 0.11784918420649947], [0.5, 1.0, 0.0],\n\t\t\t\t[0.47048031608708873, 0.5295196839129113, 0.11784918420649947], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4809698831278217, 0.4809698831278217, 0.09567085809127247], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5190301168721783, 0.4809698831278217, 0.09567085809127247], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5190301168721783, 0.5190301168721783, 0.09567085809127247], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4809698831278217, 0.5190301168721783, 0.09567085809127247], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4892350839330522, 0.4892350839330522, 0.0725711693136156], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5107649160669478, 0.4892350839330522, 0.0725711693136156], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5107649160669478, 0.5107649160669478, 0.0725711693136156], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4892350839330522, 0.5107649160669478, 0.0725711693136156], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4951963201008076, 0.4951963201008076, 0.04877258050403215], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5048036798991924, 0.4951963201008076, 0.04877258050403215], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5048036798991924, 0.5048036798991924, 0.04877258050403215], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4951963201008076, 0.5048036798991924, 0.04877258050403215], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.4987961816680492, 0.4987961816680492, 0.024504285082390206], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5012038183319508, 0.4987961816680492, 0.024504285082390206], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5012038183319508, 0.5012038183319508, 0.024504285082390206], [0.5, 1.0, 0.0],\n\t\t\t\t[0.4987961816680492, 0.5012038183319508, 0.024504285082390206], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"frame_classes\": [\"foldedState\"],\n\t\t\t\"frame_parent\":0,\n\t\t\t\"frame_inherit\":true,\n\t\t\t\"vertices_coords\": [\n\t\t\t\t[0.5, 0.5, 0.0], [0.5, 0.0, 0.0],\n\t\t\t\t[0.5, 0.5, 0.0], [1.0, 0.5, 0.0],\n\t\t\t\t[0.5, 0.5, 0.0], [0.5, 1.0, 0.0],\n\t\t\t\t[0.5, 0.5, 0.0], [0.0, 0.5, 0.0]\n\t\t\t]\n\t\t}\n\t]\n}")};e.math=Ue,e.svg=mt,e.noise=yt,e.fold={file:si,validate:function(e){let t={vertices:["coords","vertices","faces"],edges:["vertices","faces","assignment","foldAngle","length"],faces:["vertices","edges"]};["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","faces_vertices","faces_edges"].forEach(t=>{if(e[t].map(e=>0<e.filter(e=>null==e).length).reduce((e,t)=>e||t,!1))throw t+" contains a null"}),["edges_assignment","edges_foldAngle","edges_length"].forEach(t=>{if(0<e[t].filter(e=>null==e).length)throw t+" contains a null"});let i=Object.keys(t).map(e=>({prefix:e,suffixes:t[e]})).map(t=>t.suffixes.map(e=>t.prefix+"_"+e).filter(t=>null!=e[t]).map((t,i,s)=>e[t].length===e[s[0]].length).reduce((e,t)=>e&&t,!0)).reduce((e,t)=>e&&t,!0);if(!i)throw"validate failed, geometry array-lengths don't match";let s={vertices:kt(e),edges:Mt(e),faces:At(e)},r=Object.keys(t).map(e=>({prefix:e,suffixes:t[e]})).map(t=>t.suffixes.map(e=>({key:t.prefix+"_"+e,suffix:e})).filter(t=>null!=e[t.key]&&null!=s[t.suffix]).map(t=>({key:t.key,test:e[t.key].reduce((e,i)=>i.reduce((e,i)=>e&&i<s[t.suffix],!0),!0)}))).reduce((e,t)=>e.concat(t),[]);r.filter(e=>!e.test).forEach(t=>{throw console.log("ERROR"),console.log(e),t.key+" contains a index too large, larger than the reference array to which it points"});let a=e.vertices_vertices.map((e,t)=>e.map(e=>[t,e])).reduce((e,t)=>e.concat(t),[]),n=a.map(t=>0<e.edges_vertices.filter(i=>t[0]===i[0]&&t[1]===i[1]||t[0]===i[1]&&t[1]===i[0]).length).map((e,t)=>({test:e,i:t})).filter(e=>!e.test);if(0<n.length)throw"vertices_vertices at index "+n[0].i+" declares an edge that doesn't exist in edges_vertices";let c=e.vertices_faces.map((t,s)=>t.map(t=>({test:-1!==e.faces_vertices[t].indexOf(s),face:t,i:s})).filter(e=>!e.test)).reduce((e,t)=>e.concat(t),[]);if(0<c.length)throw"vertex "+c[0].i+" in vertices_faces connects to face "+c[0].face+", whereas in faces_vertices this same connection in reverse doesn't exist.";let d=e.edges_faces.map((t,s)=>t.map(t=>({test:-1!==e.faces_edges[t].indexOf(s),face:t,i:s})).filter(e=>!e.test)).reduce((e,t)=>e.concat(t),[]);if(0<d.length)throw"edges_faces "+d[0].i+" connects to face "+d[0].face+", whereas in faces_edges this same connection in reverse doesn't exist.";e.faces_vertices.map((t,s)=>t.map(t=>({test:-1!==e.vertices_faces[t].indexOf(s),face:t,i:s})).filter(e=>!e.test)).reduce((e,t)=>e.concat(t),[]);return!0},graph:jt,origami:Wt,planargraph:Zt,valleyfold:pi,creasethrough:ui},e.bases=vi,e.CreasePattern=function(){let e={},t=Array.from(arguments),i=t.filter(e=>"object"==typeof e&&null!==e),s=i.filter(e=>null!=e.vertices_coords);return e=0<s.length?JSON.parse(JSON.stringify(s.shift())):JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [1,0], [1,1], [0,1]],\n\t\"vertices_vertices\": [[1,3], [2,0], [3,1], [0,2]],\n\t\"vertices_faces\": [[0], [0], [0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,0]],\n\t\"edges_faces\": [[0], [0], [0], [0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0],\n\t\"edges_length\": [1, 1, 1, 1],\n\t\"faces_vertices\": [[0,1,2,3]],\n\t\"faces_edges\": [[0,1,2,3]]\n}"),e.onchange=void 0,e.load=function(t){let i=JSON.parse(JSON.stringify(t));for(key in i)e[key]=i[key]},e.json=function(){let t=Object.create(null);return Object.assign(t,e),qt.forEach(e=>delete t[e]),JSON.parse(JSON.stringify(t))},e.clear=function(){St(e),"function"==typeof e.onchange&&e.onchange()},e.wipe=function(){},e.clearGraph=function(){},e.nearestVertex=function(t,i,s=0){let r=Rt(e,[t,i,s]);return null==r?void 0:$t(this,r)},e.nearestEdge=function(t,i,s=0){let r=Tt(e,[t,i,s]);return null==r?void 0:Kt(this,r)},e.nearestFace=function(t,i,s=0){let r=Gt(e,[t,i,s]);return null==r?void 0:Qt(this,r)},e.vertex=function(e){return $t(this,e)},e.edge=function(e){return Kt(this,e)},e.face=function(e){return Qt(this,e)},e.crease=function(e){return Jt(this,e)},e.addVertexOnEdge=function(t,i,s){Ot(e,t,i,s),"function"==typeof e.onchange&&e.onchange()},e.connectedGraphs=function(){return Ct(e)},e.axiom1=function(){return Jt(this,fe(e,...arguments))},e.axiom2=function(){return Jt(this,oe(e,...arguments))},e.axiom3=function(){return Jt(this,le(e,...arguments))},e.axiom4=function(){return Jt(this,_e(e,...arguments))},e.axiom5=function(){return Jt(this,ge(e,...arguments))},e.axiom6=function(){return Jt(this,me(e,...arguments))},e.axiom7=function(){return Jt(this,pe(e,...arguments))},e.creaseRay=function(){return Jt(this,ue(e,...arguments))},e.kawasaki=function(){return Jt(this,xe(e,...arguments))},e},e.Origami=function(){let e=te(...arguments),t=RabbitEar.CreasePattern(...arguments);t.onchange=function(){d()};let s={boundary:et(void 0,"boundary"),faces:et(void 0,"faces"),creases:et(void 0,"creases"),vertices:et(void 0,"vertices")};e.svg.appendChild(s.boundary),e.svg.appendChild(s.faces),e.svg.appendChild(s.creases),e.svg.appendChild(s.vertices);let r={vertex:{radius:.01}},a={isPressed:!1,position:[0,0],pressed:[0,0],drag:[0,0],prev:[0,0],x:0,y:0};const n=function(){let e=t.vertices_coords,r=t.faces_vertices.map(()=>"face folded"),a=t.faces_vertices.map(t=>t.map(t=>e[t])).map(e=>Y(e)),n=Ft(t).map(e=>t.vertices_coords[e]);if(Object.keys(s).forEach(e=>rt(s[e])),t["re:faces_layer"]&&0<t["re:faces_layer"].length)t["re:faces_layer"].forEach((e,t)=>Qe(a[e].points,0==t%2?"face-front":"face-back","face",s.faces));else if(t.facesOrder&&0<t.facesOrder.length);else a.forEach((e,t)=>Qe(e.points,r[t],"face",s.faces))},c=function(){let e=t.vertices_coords,i=t.edges_vertices.map(t=>t.map(t=>e[t])),a=t.edges_assignment.map(e=>ei[e]),n=t.faces_vertices.map(()=>"face"),c=t.faces_vertices.map(t=>t.map(t=>e[t])).map(e=>Y(e)),d=t.faces_edges.map(e=>e.map(e=>t.edges_vertices[e]).map((e,t,i)=>{let s=i[(t+1)%i.length];return e[1]===s[0]||e[1]===s[1]?e[0]:e[1]}).map(e=>t.vertices_coords[e])).map(e=>Y(e)),f=Ft(t).map(e=>t.vertices_coords[e]);c=c.map(e=>e.scale(.6666)),d=d.map(e=>e.scale(.8333)),Object.keys(s).forEach(e=>rt(s[e])),Qe(f,"boundary",null,s.boundary),e.forEach((e,t)=>$e(e[0],e[1],r.vertex.radius,"vertex",""+t,s.vertices)),i.forEach((t,e)=>Ke(t[0][0],t[0][1],t[1][0],t[1][1],a[e],""+e,s.creases)),c.forEach((e,t)=>Qe(e.points,n[t],"face",s.faces)),d.forEach((e,t)=>Qe(e.points,n[t],"face",s.faces))},d=function(){null==t.vertices_coords||(l()?n():c(),f())},f=function(){let i=t.vertices_coords.slice().sort((e,t)=>e[0]-t[0]),s=t.vertices_coords.slice().sort((e,t)=>e[1]-t[1]),r=i.shift()[0],a=s.shift()[1],n=i.pop()[0]-r,c=s.pop()[1]-a,d=isNaN(r)||isNaN(a)||isNaN(n)||isNaN(c);d?at(e.svg,0,0,1,1):at(e.svg,r,a,n,c)},o=function(){let e=H(...arguments),i=t.nearestVertex(e[0],e[1]),r=t.nearestEdge(e[0],e[1]),a=t.nearestFace(e[0],e[1]),n={};return null!=i&&(i.svg=s.vertices.childNodes[i.index],n.vertex=i),null!=r&&(r.svg=s.creases.childNodes[r.index],n.edge=r),null!=a&&(a.svg=s.faces.childNodes[a.index],n.face=a),n},l=function(){return null!=t&&null!=t.frame_classes&&t.frame_classes.includes("foldedState")},_=function(){return null==t.vertices_coords?[]:t.vertices_coords.map(e=>H(e))},g=function(){return null==t.edges_vertices?[]:t.edges_vertices.map(i=>i.map(e=>t.vertices_coords[e])).map(t=>J(t))},m=function(){return null==t.faces_vertices?[]:t.faces_vertices.map(e=>e.map(e=>t.vertices_coords[e])).map(e=>Y(e))},p=function(){return t.axiom1(...arguments)},u=function(){return t.axiom2(...arguments)},v=function(){return t.axiom3(...arguments)},h=function(){return t.axiom4(...arguments)},x=function(){return t.axiom5(...arguments)},y=function(){return t.axiom6(...arguments)},E=function(){return t.axiom7(...arguments)};return d(),{get mouse(){return JSON.parse(JSON.stringify(a))},set cp(e){t=e,d(),t.onchange=function(){d()}},get cp(){return t},get vertices(){return _()},get edges(){return g()},get faces(){return m()},nearest:o,addClass:function(e,t){it(e,t)},removeClass:function(e,t){st(e,t)},clear:function(){},crease:function(){},fold:function(){},axiom1:p,axiom2:u,axiom3:v,axiom4:h,axiom5:x,axiom6:y,axiom7:E,isFolded:l,draw:d,updateViewBox:f,showVertices:function(){s.vertices.removeAttribute("visibility")},showEdges:function(){s.creases.removeAttribute("visibility")},showFaces:function(){s.faces.removeAttribute("visibility")},hideVertices:function(){s.vertices.setAttribute("visibility","hidden")},hideEdges:function(){s.creases.setAttribute("visibility","hidden")},hideFaces:function(){s.faces.setAttribute("visibility","hidden")},load:function(e,i){if("string"==typeof e||e instanceof String){let s=e.substr(e.lastIndexOf(".")+1);"fold"===s?fetch(e).then(e=>e.json()).then(e=>{t=e,d(),null!=i&&i(t)}):void 0}try{let i=JSON.parse(e);t=i}catch(e){console.log("not a valid .fold file format")}},save:function(){},get svg(){return e.svg},get zoom(){return e.zoom},get translate(){return e.translate},get appendChild(){return e.appendChild},get removeChildren(){return e.removeChildren},get size(){return e.size},get scale(){return e.scale},get width(){return e.width},get height(){return e.height},set width(t){e.width=t},set height(t){e.height=t},set onMouseMove(t){e.onMouseMove=t},set onMouseDown(t){e.onMouseDown=t},set onMouseUp(t){e.onMouseUp=t},set onMouseLeave(t){e.onMouseLeave=t},set onMouseEnter(t){e.onMouseEnter=t},set animate(t){e.animate=t},set setFolded(e){t.frame_classes=t.frame_classes.filter(e=>"creasePattern"!==e),t.frame_classes=t.frame_classes.filter(e=>"foldedState"!==e),t.frame_classes.push("foldedState")}}},e.Origami3D=function(){function e(e){var i=new THREE.PerspectiveCamera(45,e.clientWidth/e.clientHeight,.1,1e3),s=new THREE.OrbitControls(i,e);i.position.set(.5,.5,1.5),s.target.set(.5,.5,0),s.addEventListener("change",void 0);var r=new THREE.WebGLRenderer({antialias:!0});r.setClearColor("#FFFFFF"),r.setSize(e.clientWidth,e.clientHeight),e.appendChild(r.domElement);var a=new THREE.DirectionalLight(16777215,.2);a.position.set(20,20,-100),g.add(a);var n=new THREE.SpotLight(16777215,.3);n.position.set(50,-200,100),g.add(n);var c=new THREE.SpotLight(16777215,.3);c.position.set(100,50,200),g.add(c);var d=new THREE.AmbientLight(16777215,.48);g.add(d);var f=function(){requestAnimationFrame(f),r.render(g,i),s.update()};f(),t()}function t(){var e=new THREE.MeshPhongMaterial({color:16777215,side:THREE.DoubleSide,flatShading:!0,shininess:0,specular:16777215,reflectivity:0});let t=i(o,e),s=d(o);_.forEach(e=>g.remove(e)),_=[],_.push(t),_.push(s),_.forEach(e=>g.add(e))}function i(e,t){var i=new THREE.BufferGeometry;let s=e.vertices_coords.map(e=>[e[0],e[1],null==e[2]?0:e[2]]).reduce((e,t)=>e.concat(t),[]),r=e.vertices_coords.map(()=>[0,0,1]).reduce((e,t)=>e.concat(t),[]),a=e.vertices_coords.map(()=>[1,1,1]).reduce((e,t)=>e.concat(t),[]),n=e.faces_vertices.map(e=>e.map((e,t,i)=>[i[0],i[t+1],i[t+2]]).slice(0,e.length-2)).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]);return i.addAttribute("position",new THREE.Float32BufferAttribute(s,3)),i.addAttribute("normal",new THREE.Float32BufferAttribute(r,3)),i.addAttribute("color",new THREE.Float32BufferAttribute(a,3)),i.setIndex(n),null==t&&(t=new THREE.MeshNormalMaterial({side:THREE.DoubleSide})),new THREE.Mesh(i,t)}function s(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function r(e){return Ve(we(e[0],2)+we(e[1],2)+we(e[2],2))}function a(e){let t=Ve(we(e[0],2)+we(e[1],2)+we(e[2],2));return[e[0]/t,e[1]/t,e[2]/t]}function n(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function c(e,t){let c=[e[1][0]-e[0][0],e[1][1]-e[0][1],e[1][2]-e[0][2]],d=Ve(we(c[0],2)+we(c[1],2)+we(c[2],2));if(1e-10>d)throw"degenerate edge";let f=[c[0]/d,c[1]/d,c[2]/d],o=[a(s(f,[1,0,0])),a(s(f,[0,1,0])),a(s(f,[0,0,1]))].map((e,t)=>({i:t,v:e,mag:r(e)})).filter(e=>1e-10<e.mag).map(e=>e.v).shift(),l=[o];for(var _=1;4>_;_++)l.push(a(s(l[_-1],f)));let g=l.map(e=>n(e,t));return e.map(e=>g.map(t=>[e[0]+t[0],e[1]+t[1],e[2]+t[2]])).reduce((e,t)=>e.concat(t),[])}function d(e,t=.005){let i=e.edges_vertices.map(t=>t.map(t=>e.vertices_coords[t]));i.forEach(e=>{e[0][2]==null&&(e[0][2]=0),e[1][2]==null&&(e[1][2]=0)});let r={B:[0,0,0],M:[.6,.2,.11],F:[.25,.25,.25],V:[.12,.35,.5]},d=e.edges_assignment.map(t=>[r[t],r[t],r[t],r[t],r[t],r[t],r[t],r[t]]).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),f=i.map(e=>c(e,t)).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),o=i.map(e=>{let i=[e[1][0]-e[0][0],e[1][1]-e[0][1],e[1][2]-e[0][2]],r=Ve(we(i[0],2)+we(i[1],2)+we(i[2],2));if(1e-10>r)throw"degenerate edge";let c=n(a(s(i,[0,0,-1])),t),d=n(a(s(i,[0,0,1])),t);return[c,[-c[2],c[1],c[0]],d,[-d[2],d[1],d[0]],c,[-c[2],c[1],c[0]],d,[-d[2],d[1],d[0]]]}).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>e.concat(t),[]),l=i.map((t,e)=>[8*e+0,8*e+4,8*e+1,8*e+1,8*e+4,8*e+5,8*e+1,8*e+5,8*e+2,8*e+2,8*e+5,8*e+6,8*e+2,8*e+6,8*e+3,8*e+3,8*e+6,8*e+7,8*e+3,8*e+7,8*e+0,8*e+0,8*e+7,8*e+4,8*e+0,8*e+1,8*e+3,8*e+1,8*e+2,8*e+3,8*e+5,8*e+4,8*e+7,8*e+7,8*e+6,8*e+5]).reduce((e,t)=>e.concat(t),[]);var _=new THREE.BufferGeometry;_.addAttribute("position",new THREE.Float32BufferAttribute(f,3)),_.addAttribute("normal",new THREE.Float32BufferAttribute(o,3)),_.addAttribute("color",new THREE.Float32BufferAttribute(d,3)),_.setIndex(l),_.computeVertexNormals();var g=new THREE.MeshToonMaterial({shininess:0,side:THREE.DoubleSide,vertexColors:THREE.VertexColors});return new THREE.Mesh(_,g)}let f=Array.from(arguments),o=f.filter(e=>"object"==typeof e&&e.vertices_coords!=null).shift();o==null&&(o=ti);let l,_=[],g=new THREE.Scene;const m=function(){let t=f.filter(e=>"function"==typeof e),i=f.filter(e=>!isNaN(e)),s=f.filter(e=>e instanceof HTMLElement).shift(),r=f.filter(e=>"string"==typeof e||e instanceof String).map(e=>document.getElementById(e)).shift();l=null==s?null==r?document.body:r:s,e(l),2<=i.length&&(_svg.setAttributeNS(null,"width",i[0]),_svg.setAttributeNS(null,"height",i[1])),1<=t.length&&t[0]()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m();const p=function(){return o.file_frames},u=function(e){return o.file_frames[e]};return{set cp(e){o=e,t()},get cp(){return o},draw:t,load:function(e,i){if("string"==typeof e||e instanceof String){let s=e.substr(e.lastIndexOf(".")+1);"fold"===s?fetch(e).then(e=>e.json()).then(e=>{o=e,t(),null!=i&&i(o)}):void 0}try{let t=JSON.parse(e);o=t}catch(e){console.log("not a valid .fold file format")}},getFrames:p,getFrame:u,setFrame:function(){t()}}},Object.defineProperty(e,"__esModule",{value:!0})});
