/* Rabbit Ear v0.1.91 (c) Robby Kraft, MIT License */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.RabbitEar=t())})(this,function(){'use strict';var be=Math.tan,Ee=Math.floor,Pe=Math.acos,we=Math.min,Ae=Math.max,Se=Math.PI,Ne=Math.abs,Le=Math.sin,Ce=Math.cos,je=Math.atan2,Oe=Math.sqrt,Me=Math.pow;function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return s(e)||o(e,t)||l()}function n(e){return r(e)||a(e)||c()}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function s(e){if(Array.isArray(e))return e}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(i.push(o.value),!(t&&i.length===t));n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(t){return g="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},g(t)}function f(e,t){return h(e)||m(e,t)||k()}function p(e){return _(e)||u(e)||v()}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function h(e){if(Array.isArray(e))return e}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function m(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(i.push(o.value),!(t&&i.length===t));n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return vt(t)}function P(){var e=Array.from(arguments),t=e.filter(function(e){return!isNaN(e)}),i=e.filter(function(e){return e.constructor===Array});if(0===e.length)return{vector:[],origin:[]};if(!isNaN(e[0])&&4<=t.length)return{origin:[e[0],e[1]],vector:[e[2],e[3]]};if(0<i.length){if(1===i.length)return P.apply(void 0,p(i[0]));if(2===i.length)return{origin:[i[0][0],i[0][1]],vector:[i[1][0],i[1][1]]};if(4===i.length)return{origin:[i[0],i[1]],vector:[i[2],i[3]]}}if(e[0].constructor===Object){var n=[],r=[];return null==e[0].vector?null!=e[0].direction&&(n=mt(e[0].direction)):n=mt(e[0].vector),null==e[0].point?null!=e[0].origin&&(r=mt(e[0].origin)):r=mt(e[0].point),{origin:r,vector:n}}return{origin:[],vector:[]}}function w(){return P.apply(void 0,arguments)}function A(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(0!==t.length){if(1===t.length&&void 0!==t[0])return A.apply(void 0,p(t[0]));var n=Array.from(t),r=n.filter(function(e){return!isNaN(e)}),s=n.filter(function(e){return"object"===g(e)}).filter(function(e){return e.constructor===Array});return 4<=r.length?[[r[0],r[1]],[r[2],r[3]]]:2<=s.length&&!isNaN(s[0][0])?s:1!==s.length||isNaN(s[0][0][0])?void 0:s[0]}}function N(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?void 0:1===t.length&&void 0!==t[0]?N.apply(void 0,p(t[0])):Array.from(t)}function L(e,t){var i=null==t?{}:t,n=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return this.compare_function(e,t)&&!0},r=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return this.compare_function(e,i)&&t>=-i},s=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return this.compare_function(e,i)&&t>=-i&&t<=1+i};return Object.defineProperty(i,"isParallel",{value:function(e){if(null==e.vector)throw new Error("isParallel() argument is missing a vector");var t=this.vector.length<e.vector.length,i=t?this.vector:e.vector,n=t?e.vector:this.vector;return Ot(i,n)}}),Object.defineProperty(i,"isDegenerate",{value:function(){return jt(this.vector)}}),Object.defineProperty(i,"nearestPoint",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t);return ji(Pi(this.origin,this.vector,n,this.clip_function))}}),Object.defineProperty(i,"reflection",{value:function(){return Oi.makeReflection(this.vector,this.origin)}}),Object.defineProperty(i,"intersect",{value:function(e){var t=this;return $t(this.origin,this.vector,e.origin,e.vector,function(i,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return t.compare_function(i,r)&&e.compare_function(n,r)})}}),Object.defineProperty(i,"intersectLine",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=P(t);return $t(this.origin,this.vector,r.origin,r.vector,n.bind(this))}}),Object.defineProperty(i,"intersectRay",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=w(t);return $t(this.origin,this.vector,n.origin,n.vector,r.bind(this))}}),Object.defineProperty(i,"intersectSegment",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=E(t),r=[n[1][0]-n[0][0],n[1][1]-n[0][1]];return $t(this.origin,this.vector,n[0],r,s.bind(this))}}),Object.defineProperty(i,"bisectLine",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=P(t);return ui(this.origin,this.vector,n.origin,n.vector)}}),Object.defineProperty(i,"bisectRay",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=w(t);return ui(this.origin,this.vector,n.origin,n.vector)}}),Object.defineProperty(i,"bisectSegment",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=E(t),r=[n[1][0]-n[0][0],n[1][1]-n[0][1]];return ui(this.origin,this.vector,n[0],r)}}),Object.freeze(i)}function C(e){var t={},i=e,n=function(){return yi(this.points)},r=function(){return this.points.map(function(e,t,i){var n=(t+i.length-1)%i.length,r=(t+1)%i.length,s=e,o=i[n].map(function(e,t){return e-s[t]}),a=i[r].map(function(e,t){return e-s[t]});return Ti(a,o,s)})};return Object.defineProperty(t,"area",{value:n}),Object.defineProperty(t,"centroid",{value:function(){return ki(this.points)}}),Object.defineProperty(t,"midpoint",{value:function(){return Te(this.points)}}),Object.defineProperty(t,"enclosingRectangle",{value:function(){return xi(this.points)}}),Object.defineProperty(t,"contains",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ft(mt(t),this.points)}}),Object.defineProperty(t,"nearest",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t),r=this.sides.map(function(e){return e.nearestPoint(n)}),s=1/0,a;return r.map(function(e){return Ve(n,e)}).forEach(function(e,t){e<s&&(s=e,a=t)}),{point:r[a],edge:this.sides[a]}}}),Object.defineProperty(t,"clipSegment",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=E(i),s=gi(this.points,r[0],r[1]);return void 0===s?void 0:zi(s)}}),Object.defineProperty(t,"clipLine",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=P(i),s=di(this.points,r.origin,r.vector);return void 0===s?void 0:zi(s)}}),Object.defineProperty(t,"clipRay",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=P(i),s=li(this.points,r.origin,r.vector);return void 0===s?void 0:zi(s)}}),Object.defineProperty(t,"split",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=P(t);return wi(this.points,r.origin,r.vector).map(function(e){return i(e)})}}),Object.defineProperty(t,"scale",{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ki(this.points),n=this.points.map(function(e){return[0,1].map(function(n,r){return e[r]-t[r]})}).map(function(n){return n.map(function(r,s){return t[s]+n[s]*e})});return i(n)}}),Object.defineProperty(t,"rotate",{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ki(this.points),n=this.points.map(function(i){var n=[i[0]-t[0],i[1]-t[1]],r=Oe(Me(n[0],2)+Me(n[1],2)),s=je(n[1],n[0]);return[t[0]+Ce(s+e)*r,t[1]+Le(s+e)*r]});return i(n)}}),Object.defineProperty(t,"translate",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=mt(t),s=this.points.map(function(e){return e.map(function(e,t){return e+r[t]})});return i(s)}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=xt(t),s=this.points.map(function(e){return ji(Xe(r,e))});return i(s)}}),Object.defineProperty(t,"edges",{get:function(){return this.sides}}),Object.defineProperty(t,"sectors",{get:function(){return r.call(this)}}),Object.defineProperty(t,"signedArea",{value:n}),Object.freeze(t)}function j(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",o=null!=t&&"string"==typeof t?t:"\t",c=["\n"],d=0;100>d;d+=1)c.push(c[d]+o);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=c[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s]+i[l]:a+=-1<i[l].search(/<\?/)?c[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?c[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function O(t){return O="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},O(t)}function M(e,t){return T(e)||V(e,t)||R()}function F(e){return z(e)||I(e)||D()}function z(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function T(e){if(Array.isArray(e))return e}function I(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function V(e,t){var i=[],n=!0,r=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(i.push(o.value),!(t&&i.length===t));n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function q(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",o=null!=t&&"string"==typeof t?t:"\t",c=["\n"],d=0;100>d;d+=1)c.push(c[d]+o);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=c[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s]+i[l]:a+=-1<i[l].search(/<\?/)?c[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?c[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function X(e,t){void 0===e["re:diagrams"]||0===e["re:diagrams"].length||Array.from(e["re:diagrams"]).forEach(function(i){if(!0=="re:diagram_lines"in i&&i["re:diagram_lines"].forEach(function(e){var i="re:diagram_line_classes"in e?e["re:diagram_line_classes"].join(" "):"valley",n=e["re:diagram_line_coords"];if(void 0!==n){var r=To(n[0][0],n[0][1],n[1][0],n[1][1]);r.setAttribute("class",i),t.appendChild(r)}}),!0=="re:diagram_arrows"in i){var n=yo(e),r=n[2]>n[3]?n[3]:n[2],s={length:.09*r,width:.035*r,strokeWidth:.02*r};i["re:diagram_arrows"].forEach(function(e){if(2===e["re:diagram_arrow_coords"].length){var i=e["re:diagram_arrow_coords"],n=i[0][0]<i[1][0];.1>Ne(i[0][0]-i[1][0])&&(n=i[0][1]<i[1][1]?.5>i[0][0]:.5<i[0][0]),.1>Ne(i[0][1]-i[1][1])&&(n=i[0][0]<i[1][0]?.5<i[0][1]:.5>i[0][1]),s.side=n;var r=Ro(i[0],i[1],s);t.appendChild(r)}})}})}function G(e){return W(e)||Y(e)||Z()}function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function K(e){var t=[];return e.replace(Vc,function(e,i,n){var r=i.toLowerCase();for(n=H(n),"m"===r&&2<n.length&&(t.push([i].concat(n.splice(0,2))),r="l",i="m"===i?"l":"L");0<=n.length;){if(n.length===Ic[r])return n.unshift(i),t.push(n);if(n.length<Ic[r])throw new Error("malformed path data");t.push([i].concat(n.splice(0,Ic[r])))}}),t}function H(e){var t=e.match(Dc);return t?t.map(Number):[]}function Q(e,t,i,n,r,s,a,o){return new J(e,t,i,n,r,s,a,o)}function J(e,t,n,r,s,a,o,c){this.a={x:e,y:t},this.b={x:n,y:r},this.c={x:s,y:a},this.d={x:o,y:c},null!==o&&void 0!==o&&null!==c&&void 0!==c?(this.getArcLength=i,this.getPoint=ne,this.getDerivative=ee):(this.getArcLength=re,this.getPoint=ie,this.getDerivative=$),this.init()}function $(e,i,n){return{x:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1]),y:2*(1-n)*(i[1]-i[0])+2*n*(i[2]-i[1])}}function ee(e,i,n){var t=ie([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(i[1]-i[0]),3*(i[2]-i[1]),3*(i[3]-i[2])],n);return t}function te(e,i,n,r,s){for(var a=1,o=e/i,c=(e-n(r,s,o))/i,d=0;.001<a;){var l=n(r,s,o+c),g=n(r,s,o-c),f=Ne(e-l)/i,p=Ne(e-g)/i;if(f<a?(a=f,o+=c):p<a?(a=p,o-=c):c/=2,d++,500<d)break}return o}function ie(e,i,n){var t=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],r=(1-n)*(1-n)*i[0]+2*(1-n)*n*i[1]+n*n*i[2];return{x:t,y:r}}function ne(e,i,n){var t=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],r=(1-n)*(1-n)*(1-n)*i[0]+3*(1-n)*(1-n)*n*i[1]+3*(1-n)*n*n*i[2]+n*n*n*i[3];return{x:t,y:r}}function re(e,i,n){var r=Math.log;void 0===n&&(n=1);var s=e[0]-2*e[1]+e[2],a=i[0]-2*i[1]+i[2],o=2*e[1]-2*e[0],c=2*i[1]-2*i[0],d=4*(s*s+a*a);if(0===d)return n*Oe(Me(e[2]-e[0],2)+Me(i[2]-i[0],2));var l=4*(s*o+a*c)/(2*d),g=n+l,f=(o*o+c*c)/d-l*l,p=0<g*g+f?Oe(g*g+f):0,_=0<l*l+f?Oe(l*l+f):0,h=0===l+Oe(l*l+f)?0:f*r(Ne((g+p)/(l+_)));return Oe(d)/2*(g*p-l*_+h)}function se(e,t){return Xc[e][t]}function ae(e,i,t){var r=t.length-1,n,s,a;if(0==r)return 0;if(0===e){for(s=0,a=0;a<=r;a++)s+=se(r,a)*Me(1-i,r-a)*Me(i,a)*t[a];return s}for(n=Array(r),a=0;a<r;a++)n[a]=r*(t[a+1]-t[a]);return ae(e-1,i,n)}function oe(e,i,n){var t=ae(1,n,e),r=ae(1,n,i);return Oe(t*t+r*r)}function i(e,n,r){var s,a,o,c;void 0===r&&(r=1);for(s=r/2,a=0,o=0;20>o;o++)c=s*Rc[20][o]+s,a+=qc[20][o]*oe(e,n,c);return s*a}function B(e,t,i,n,r,s,a,o,c){return new ce(e,t,i,n,r,s,a,o,c)}function ce(e,i,n,r,s,a,o,c,d){this.x0=e,this.y0=i,this.rx=n,this.ry=r,this.xAxisRotate=s,this.LargeArcFlag=a,this.SweepFlag=o,this.x1=c,this.y1=d;var t=le(300,function(l){return de({x:e,y:i},n,r,s,a,o,{x:c,y:d},l)});this.length=t.arcLength}function de(e,i,n,r,s,a,o,c){i=Ne(i),n=Ne(n),r=ge(r,360);var t=fe(r);if(e.x===o.x&&e.y===o.y)return e;if(0===i||0===n)return this.pointOnLine(e,o,c);var d=(e.x-o.x)/2,l=(e.y-o.y)/2,g={x:Ce(t)*d+Le(t)*l,y:-Le(t)*d+Ce(t)*l},f=Me(g.x,2)/Me(i,2)+Me(g.y,2)/Me(n,2);1<f&&(i=Oe(f)*i,n=Oe(f)*n);var p=Me(i,2)*Me(n,2)-Me(i,2)*Me(g.y,2)-Me(n,2)*Me(g.x,2),_=Me(i,2)*Me(g.y,2)+Me(n,2)*Me(g.x,2),h=p/_;h=0>h?0:h;var u=(s===a?-1:1)*Oe(h),m={x:u*(i*g.y/n),y:u*(-(n*g.x)/i)},v={x:Ce(t)*m.x-Le(t)*m.y+(e.x+o.x)/2,y:Le(t)*m.x+Ce(t)*m.y+(e.y+o.y)/2},y={x:(g.x-m.x)/i,y:(g.y-m.y)/n},k=he({x:1,y:0},y),x={x:(-g.x-m.x)/i,y:(-g.y-m.y)/n},b=he(y,x);!a&&0<b?b-=2*Se:a&&0>b&&(b+=2*Se),b%=2*Se;var E=k+b*c,P=i*Ce(E),w=n*Le(E),A={x:Ce(t)*P-Le(t)*w+v.x,y:Le(t)*P+Ce(t)*w+v.y};return A.ellipticalArcStartAngle=k,A.ellipticalArcEndAngle=k+b,A.ellipticalArcAngle=E,A.ellipticalArcCenter=v,A.resultantRx=i,A.resultantRy=n,A}function le(e,n){e=e?e:500;for(var r=0,s=[],a=[],o=n(0),c=0,d,l;c<e;c++)l=_e(c*(1/e),0,1),d=n(l),r+=pe(o,d),a.push([o,d]),s.push({t:l,arcLength:r}),o=d;return d=n(1),a.push([o,d]),r+=pe(o,d),s.push({t:1,arcLength:r}),{arcLength:r,arcLengthMap:s,approximationLines:a}}function ge(e,t){return(e%t+t)%t}function fe(e){return e*(Se/180)}function pe(e,t){return Oe(Me(t.x-e.x,2)+Me(t.y-e.y,2))}function _e(e,t,i){return we(Ae(e,t),i)}function he(e,t){var i=e.x*t.x+e.y*t.y,r=Oe((Me(e.x,2)+Me(e.y,2))*(Me(t.x,2)+Me(t.y,2))),n=0>e.x*t.y-e.y*t.x?-1:1,s=n*Pe(i/r);return s}function ue(e,t,i,n){return new me(e,t,i,n)}function me(e,t,i,n){this.x0=e,this.x1=t,this.y0=i,this.y1=n}function ve(e){function t(e){if(!e)return null;for(var a=K(e),o=[0,0],c=[0,0],d=0,l,g;d<a.length;d++)"M"===a[d][0]?(o=[a[d][1],a[d][2]],g=[o[0],o[1]],s.push(null)):"m"===a[d][0]?(o=[a[d][1]+o[0],a[d][2]+o[1]],g=[o[0],o[1]],s.push(null)):"L"===a[d][0]?(n+=Oe(Me(o[0]-a[d][1],2)+Me(o[1]-a[d][2],2)),s.push(new ue(o[0],a[d][1],o[1],a[d][2])),o=[a[d][1],a[d][2]]):"l"===a[d][0]?(n+=Oe(Me(a[d][1],2)+Me(a[d][2],2)),s.push(new ue(o[0],a[d][1]+o[0],o[1],a[d][2]+o[1])),o=[a[d][1]+o[0],a[d][2]+o[1]]):"H"===a[d][0]?(n+=Ne(o[0]-a[d][1]),s.push(new ue(o[0],a[d][1],o[1],o[1])),o[0]=a[d][1]):"h"===a[d][0]?(n+=Ne(a[d][1]),s.push(new ue(o[0],o[0]+a[d][1],o[1],o[1])),o[0]=a[d][1]+o[0]):"V"===a[d][0]?(n+=Ne(o[1]-a[d][1]),s.push(new ue(o[0],o[0],o[1],a[d][1])),o[1]=a[d][1]):"v"===a[d][0]?(n+=Ne(a[d][1]),s.push(new ue(o[0],o[0],o[1],o[1]+a[d][1])),o[1]=a[d][1]+o[1]):"z"===a[d][0]||"Z"===a[d][0]?(n+=Oe(Me(g[0]-o[0],2)+Me(g[1]-o[1],2)),s.push(new ue(o[0],g[0],o[1],g[1])),o=[g[0],g[1]]):"C"===a[d][0]?(l=new Q(o[0],o[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6]),n+=l.getTotalLength(),o=[a[d][5],a[d][6]],s.push(l)):"c"===a[d][0]?(l=new Q(o[0],o[1],o[0]+a[d][1],o[1]+a[d][2],o[0]+a[d][3],o[1]+a[d][4],o[0]+a[d][5],o[1]+a[d][6]),0<l.getTotalLength()?(n+=l.getTotalLength(),s.push(l),o=[a[d][5]+o[0],a[d][6]+o[1]]):s.push(new ue(o[0],o[0],o[1],o[1]))):"S"===a[d][0]?(l=0<d&&-1<["C","c","S","s"].indexOf(a[d-1][0])?new Q(o[0],o[1],2*o[0]-a[d-1][a[d-1].length-4],2*o[1]-a[d-1][a[d-1].length-3],a[d][1],a[d][2],a[d][3],a[d][4]):new Q(o[0],o[1],o[0],o[1],a[d][1],a[d][2],a[d][3],a[d][4]),n+=l.getTotalLength(),o=[a[d][3],a[d][4]],s.push(l)):"s"===a[d][0]?(l=0<d&&-1<["C","c","S","s"].indexOf(a[d-1][0])?new Q(o[0],o[1],o[0]+l.d.x-l.c.x,o[1]+l.d.y-l.c.y,o[0]+a[d][1],o[1]+a[d][2],o[0]+a[d][3],o[1]+a[d][4]):new Q(o[0],o[1],o[0],o[1],o[0]+a[d][1],o[1]+a[d][2],o[0]+a[d][3],o[1]+a[d][4]),n+=l.getTotalLength(),o=[a[d][3]+o[0],a[d][4]+o[1]],s.push(l)):"Q"===a[d][0]?(l=o[0]==a[d][1]&&o[1]==a[d][2]?new ue(a[d][1],a[d][3],a[d][2],a[d][4]):new Q(o[0],o[1],a[d][1],a[d][2],a[d][3],a[d][4]),n+=l.getTotalLength(),s.push(l),o=[a[d][3],a[d][4]],c=[a[d][1],a[d][2]]):"q"===a[d][0]?(l=0==a[d][1]&&0==a[d][2]?new ue(o[0]+a[d][1],o[0]+a[d][3],o[1]+a[d][2],o[1]+a[d][4]):new Q(o[0],o[1],o[0]+a[d][1],o[1]+a[d][2],o[0]+a[d][3],o[1]+a[d][4]),n+=l.getTotalLength(),c=[o[0]+a[d][1],o[1]+a[d][2]],o=[a[d][3]+o[0],a[d][4]+o[1]],s.push(l)):"T"===a[d][0]?(l=0<d&&-1<["Q","q","T","t"].indexOf(a[d-1][0])?new Q(o[0],o[1],2*o[0]-c[0],2*o[1]-c[1],a[d][1],a[d][2]):new ue(o[0],a[d][1],o[1],a[d][2]),s.push(l),n+=l.getTotalLength(),c=[2*o[0]-c[0],2*o[1]-c[1]],o=[a[d][1],a[d][2]]):"t"===a[d][0]?(l=0<d&&-1<["Q","q","T","t"].indexOf(a[d-1][0])?new Q(o[0],o[1],2*o[0]-c[0],2*o[1]-c[1],o[0]+a[d][1],o[1]+a[d][2]):new ue(o[0],o[0]+a[d][1],o[1],o[1]+a[d][2]),n+=l.getTotalLength(),c=[2*o[0]-c[0],2*o[1]-c[1]],o=[a[d][1]+o[0],a[d][2]+o[0]],s.push(l)):"A"===a[d][0]?(l=new B(o[0],o[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6],a[d][7]),n+=l.getTotalLength(),o=[a[d][6],a[d][7]],s.push(l)):"a"===a[d][0]&&(l=new B(o[0],o[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],o[0]+a[d][6],o[1]+a[d][7]),n+=l.getTotalLength(),o=[o[0]+a[d][6],o[1]+a[d][7]],s.push(l)),r.push(n);return t}var n=0,r=[],s=[];t.getTotalLength=function(){return n},t.getPointAtLength=function(e){var t=a(e);return s[t.i].getPointAtLength(t.fraction)},t.getTangentAtLength=function(e){var t=a(e);return s[t.i].getTangentAtLength(t.fraction)},t.getPropertiesAtLength=function(e){var t=a(e);return s[t.i].getPropertiesAtLength(t.fraction)},t.getParts=function(){for(var e=[],t=0;t<s.length;t++)if(null!=s[t]){var n={};n.start=s[t].getPointAtLength(0),n.end=s[t].getPointAtLength(r[t]-r[t-1]),n.length=r[t]-r[t-1],function(e){n.getPointAtLength=function(t){return e.getPointAtLength(t)},n.getTangentAtLength=function(t){return e.getTangentAtLength(t)},n.getPropertiesAtLength=function(t){return e.getPropertiesAtLength(t)}}(s[t]),e.push(n)}return e};var a=function(e){0>e?e=0:e>n&&(e=n);for(var t=r.length-1;r[t]>=e&&0<r[t];)t--;return t++,{fraction:e-r[t-1],i:t}};return t(e)}function ye(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",o=null!=t&&"string"==typeof t?t:"\t",c=["\n"],d=0;100>d;d+=1)c.push(c[d]+o);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=c[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=c[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=c[s]+i[l]:a+=-1<i[l].search(/<\?/)?c[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?c[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function ke(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"F",r=el(e,t),s=e.vertices_coords[t];Td(e,i,s,r[i],n)}function xe(){function t(e){var t=new THREE.PerspectiveCamera(45,e.clientWidth/e.clientHeight,.1,1e3),n=new THREE.OrbitControls(t,e);n.enableZoom=!1,t.position.set(-.75,2,-.025),n.target.set(0,0,0),n.addEventListener("change",void 0);var r=new THREE.WebGLRenderer({antialias:!0});1!==window.devicePixelRatio&&r.setPixelRatio(window.devicePixelRatio),r.setClearColor("#FFFFFF"),r.setSize(e.clientWidth,e.clientHeight),e.appendChild(r.domElement);var s=new THREE.DirectionalLight(16777215,.2);s.position.set(20,20,-100),_.add(s);var a=new THREE.SpotLight(16777215,.3);a.position.set(50,-200,100),_.add(a);var o=new THREE.SpotLight(16777215,.3);o.position.set(100,50,200),_.add(o);var c=new THREE.AmbientLight(16777215,.48);_.add(c);(function e(){requestAnimationFrame(e),r.render(_,t),n.update()})(),i()}function i(){var e=new THREE.MeshPhongMaterial({color:16777215,side:THREE.DoubleSide,flatShading:!0,shininess:0,specular:16777215,reflectivity:0}),t=h.frame?Va(h.cp,h.frame):h.cp,i=n(t,e),r=d(t);p.forEach(function(e){return _.remove(e)}),p=[],p.push(i),p.push(r),p.forEach(function(e){return _.add(e)})}function n(e,t){var i=new THREE.BufferGeometry,n=e.vertices_coords.map(function(e){return[e[0],e[1],null==e[2]?0:e[2]]}).reduce(function(e,t){return e.concat(t)},[]),r=e.vertices_coords.map(function(){return[0,0,1]}).reduce(function(e,t){return e.concat(t)},[]),s=e.vertices_coords.map(function(){return[1,1,1]}).reduce(function(e,t){return e.concat(t)},[]),a=e.faces_vertices.map(function(e){return e.map(function(e,t,i){return[i[0],i[t+1],i[t+2]]}).slice(0,e.length-2)}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[]);return i.addAttribute("position",new THREE.Float32BufferAttribute(n,3)),i.addAttribute("normal",new THREE.Float32BufferAttribute(r,3)),i.addAttribute("color",new THREE.Float32BufferAttribute(s,3)),i.setIndex(a),null==t&&(t=new THREE.MeshNormalMaterial({side:THREE.DoubleSide})),new THREE.Mesh(i,t)}function r(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function s(e){return Oe(Me(e[0],2)+Me(e[1],2)+Me(e[2],2))}function a(e){var t=Oe(Me(e[0],2)+Me(e[1],2)+Me(e[2],2));return[e[0]/t,e[1]/t,e[2]/t]}function o(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function c(e,t){var n=[e[1][0]-e[0][0],e[1][1]-e[0][1],e[1][2]-e[0][2]],c=Oe(Me(n[0],2)+Me(n[1],2)+Me(n[2],2));if(1e-10>c)throw"degenerate edge";for(var d=[n[0]/c,n[1]/c,n[2]/c],l=[a(r(d,[1,0,0])),a(r(d,[0,1,0])),a(r(d,[0,0,1]))].map(function(e,t){return{i:t,v:e,mag:s(e)}}).filter(function(e){return 1e-10<e.mag}).map(function(e){return e.v}).shift(),g=[l],f=1;4>f;f++)g.push(a(r(g[f-1],d)));var p=g.map(function(e){return o(e,t)});return e.map(function(e){return p.map(function(t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]})}).reduce(function(e,t){return e.concat(t)},[])}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.002,i=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});i.forEach(function(e){null==e[0][2]&&(e[0][2]=0),null==e[1][2]&&(e[1][2]=0)});var n={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},s=e.edges_assignment.map(function(t){return[n[t],n[t],n[t],n[t],n[t],n[t],n[t],n[t]]}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[]),d=i.map(function(e){return c(e,t)}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[]),l=i.map(function(e){var i=[e[1][0]-e[0][0],e[1][1]-e[0][1],e[1][2]-e[0][2]],n=Oe(Me(i[0],2)+Me(i[1],2)+Me(i[2],2));if(1e-10>n)throw"degenerate edge";var s=o(a(r(i,[0,0,-1])),t),c=o(a(r(i,[0,0,1])),t);return[s,[-s[2],s[1],s[0]],c,[-c[2],c[1],c[0]],s,[-s[2],s[1],s[0]],c,[-c[2],c[1],c[0]]]}).reduce(function(e,t){return e.concat(t)},[]).reduce(function(e,t){return e.concat(t)},[]),g=i.map(function(t,e){return[8*e+0,8*e+4,8*e+1,8*e+1,8*e+4,8*e+5,8*e+1,8*e+5,8*e+2,8*e+2,8*e+5,8*e+6,8*e+2,8*e+6,8*e+3,8*e+3,8*e+6,8*e+7,8*e+3,8*e+7,8*e+0,8*e+0,8*e+7,8*e+4,8*e+0,8*e+1,8*e+3,8*e+1,8*e+2,8*e+3,8*e+5,8*e+4,8*e+7,8*e+7,8*e+6,8*e+5]}).reduce(function(e,t){return e.concat(t)},[]),f=new THREE.BufferGeometry;f.addAttribute("position",new THREE.Float32BufferAttribute(d,3)),f.addAttribute("normal",new THREE.Float32BufferAttribute(l,3)),f.addAttribute("color",new THREE.Float32BufferAttribute(s,3)),f.setIndex(g),f.computeVertexNormals();var p=new THREE.MeshToonMaterial({shininess:0,side:THREE.DoubleSide,vertexColors:THREE.VertexColors});return new THREE.Mesh(f,p)}for(var l=arguments.length,g=Array(l),f=0;f<l;f++)g[f]=arguments[f];var p=[],_=new THREE.Scene,h={cp:void 0,frame:void 0,style:{vertex_radius:.01}},u;h.cp=g.filter(function(t){return"object"===e(t)&&null!=t.vertices_coords}).shift(),null==h.cp&&(h.cp=CreasePattern(El));var m=function(){var e=g.filter(function(e){return"function"==typeof e}),i=g.filter(function(e){return!isNaN(e)}),n=g.filter(function(e){return e instanceof HTMLElement}).shift(),r=g.filter(function(e){return"string"==typeof e||e instanceof String}).map(function(e){return document.getElementById(e)}).shift();if(u=null==n?null==r?document.body:r:n,t(u),2<=i.length);1<=e.length&&e[0]()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m();var v=function(e){h.cp=e,i(),h.cp.onchange=i};return{set cp(e){v(e),i()},get cp(){return h.cp},draw:i,get frame(){return h.frame},set frame(e){h.frame=e,i()},get frames(){var e=JSON.parse(JSON.stringify(h.cp));return delete e.file_frames,[e].concat(JSON.parse(JSON.stringify(h.cp.file_frames)))}}}var Fe=function(e){var t=e.map(function(e){return e*e}).reduce(function(e,t){return e+t},0);return Oe(t)},Be=function(e){var t=Fe(e);return 0===t?e:e.map(function(e){return e/t})},ze=function(e,t){return e.map(function(n,r){return e[r]*t[r]}).reduce(function(e,t){return e+t},0)},Te=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=0<t.length?t[0].length:0,r=Array(n).fill(0);return t.forEach(function(e){return r.forEach(function(t,n){r[n]+=e[n]||0})}),r.map(function(e){return e/t.length})},Ie=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[0]*t[2]-e[2]*t[0],e[0]*t[1]-e[1]*t[0]]},Ve=function(e,t){var i=e[0]-t[0],n=e[1]-t[1];return Oe(i*i+n*n)},De=function(e,t){for(var n=e.length,r=0,s=0;s<n;s+=1)r+=Me(e[s]-t[s],2);return Oe(r)},Re=function(e,t){return e.map(function(n,r){return(e[r]+t[r])/2})},qe=Object.freeze({__proto__:null,magnitude:Fe,normalize:Be,dot:ze,average:Te,cross2:function(e,t){return[e[0]*t[1],e[1]*t[0]]},cross3:Ie,distance2:Ve,distance3:function(t,i){var n=t[0]-i[0],r=t[1]-i[1],s=t[2]-i[2];return Oe(n*n+r*r+s*s)},distance:De,midpoint2:Re}),Xe=function(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]]},Ge=function(e,t,i){return{origin:[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],vector:[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1]]}},Ue=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},We=function(e){return e[0]*e[3]-e[1]*e[2]},Ye=function(e){var t=We(e);return 1e-6>Ne(t)||isNaN(t)||!isFinite(e[4])||!isFinite(e[5])?void 0:[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},Ze=function(e,t){return[1,0,0,1,e,t]},Ke=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0];return[e,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1]]},He=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=Ce(e),n=Le(e);return[i,n,-n,i,t[0],t[1]]},Qe=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=je(e[1],e[0]),n=Ce(i),r=Le(i),s=Ce(-i),o=Le(-i),l=n*s+r*o,a=n*-o+r*s,g=r*s+-n*o,c=r*-o+-n*s,d=t[0]+l*-t[0]+-t[1]*g,f=t[1]+a*-t[0]+-t[1]*c;return[l,a,g,c,d,f]},Je=Object.freeze({__proto__:null,multiply_matrix2_vector2:Xe,multiply_matrix2_line2:Ge,multiply_matrices2:Ue,matrix2_determinant:We,invert_matrix2:Ye,make_matrix2_translate:Ze,make_matrix2_scale:Ke,make_matrix2_rotate:He,make_matrix2_reflection:Qe}),$e=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]]},et=function(e,t,i){return{origin:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],vector:[e[0]*i[0]+e[3]*i[1]+e[6]*i[2],e[1]*i[0]+e[4]*i[1]+e[7]*i[2],e[2]*i[0]+e[5]*i[1]+e[8]*i[2]]}},tt=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]]},it=function(e){return e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2]},nt=function(e){var t=it(e);if(!(1e-6>Ne(t))&&!isNaN(t)&&isFinite(e[9])&&isFinite(e[10])&&isFinite(e[11])){var i=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]];return i.map(function(e){return e*(1/t)})}},rt=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return[1,0,0,0,1,0,0,0,1,e,t,i]},st=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=Ce(e),n=Le(e);return[1,0,0,0,i,n,0,-n,i,t[0]||0,t[1]||0,t[2]||0]},at=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=Ce(e),n=Le(e);return[i,0,-n,0,1,0,n,0,i,t[0]||0,t[1]||0,t[2]||0]},ot=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=Ce(e),n=Le(e);return[i,n,0,-n,i,0,0,0,1,t[0]||0,t[1]||0,t[2]||0]},ct=function(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0,0],s=Be(i),o=Array.from([,,,]).map(function(e,t){return r[t]||0}),l=f(s,3),g=l[0],n=l[1],a=l[2],c=Ce(e),p=Le(e),_=Oe(s[1]*s[1]+s[2]*s[2]),d=1e-6>Ne(_)?0:n/_,h=1e-6>Ne(_)?1:a/_,u=[1,0,0,0,1,0,0,0,1,o[0],o[1],o[2]],t=[1,0,0,0,1,0,0,0,1,-o[0],-o[1],-o[2]];return tt(t,tt([1,0,0,0,h,-d,0,d,h,0,0,0],tt([_,0,-g,0,1,0,g,0,_,0,0,0],tt([c,p,0,-p,c,0,0,0,1,0,0,0],tt([_,0,g,0,1,0,-g,0,_,0,0,0],tt([1,0,0,0,h,d,0,-d,h,0,0,0],u))))))},dt=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[e,0,0,0,e,0,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1],e*-t[2]+t[2]]},lt=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=je(e[1],e[0]),n=Ce(i),r=Le(i),s=Ce(-i),o=Le(-i),l=n*s+r*o,a=n*-o+r*s,g=r*s+-n*o,c=r*-o+-n*s,d=t[0]+l*-t[0]+-t[1]*g,f=t[1]+a*-t[0]+-t[1]*c;return[l,a,0,g,c,0,0,0,0,d,f,0]},gt=Object.freeze({__proto__:null,multiply_matrix3_vector3:$e,multiply_matrix3_line3:et,multiply_matrices3:tt,matrix3_determinant:it,invert_matrix3:nt,make_matrix3_translate:rt,make_matrix3_rotateX:st,make_matrix3_rotateY:at,make_matrix3_rotateZ:ot,make_matrix3_rotate:ct,make_matrix3_scale:dt,make_matrix3_reflectionZ:lt}),ft=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Ae(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},pt=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,i=parseFloat(e.toFixed(t));return ft(i)===we(t,ft(e))?e:i},_t=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},ht=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];switch(i.length){case void 0:case 0:return i;case 1:return _t(i[0])&&"string"!=typeof i[0]?e.apply(void 0,p(i[0])):[i[0]];default:return Array.from(i).map(function(t){return _t(t)?p(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},ut=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var n=t;1===n.length&&n[0].length;){var r=n,s=f(r,1);n=s[0]}return n},mt=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=ht(t).filter(function(e){return void 0!==e});if(void 0!==n)return 0===n.length?void 0:(isNaN(n[0].x)||(n=["x","y","z"].map(function(e){return n[0][e]}).filter(function(e){return void 0!==e})),n.filter(function(e){return"number"==typeof e}))},vt=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ut(t).map(function(e){return mt(e)})},yt=[1,0,0,1,0,0],kt=[1,0,0,0,1,0,0,0,1,0,0,0],xt=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t);return void 0===r?void 0:6===r.length?r:6<r.length?[r[0],r[1],r[2],r[3],r[4],r[5]]:6>r.length?yt.map(function(e,t){return r[t]||e}):void 0},bt=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t);if(void 0!==r){switch(r.length){case 4:return[r[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,0,0,0,1];case 6:return[r[0],r[1],0,r[2],r[3],0,0,0,1,r[4],r[5],0];case 9:return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],0,0,0];case 12:return r;case 16:return[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10],r[12],r[13],r[14]];default:}return 12<r.length?[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10],r[12],r[13],r[14]]:12>r.length?kt.map(function(e,t){return r[t]||e}):void 0}},Et=1e-6,Pt=function(e,t){return Array.from(Array(e.length-1)).map(function(n,r){return t(e[0],e[r+1])}).reduce(function(e,t){return e&&t},!0)},wt=function e(){var t=vt.apply(void 0,arguments);if(0===t.length)return!1;if(1===t.length&&void 0!==t[0])return e.apply(void 0,p(t[0]));var i=t[0].length,n=Array.from(Array(i));return Array.from(Array(t.length-1)).map(function(e,r){return n.map(function(e,i){return Ne(t[r][i]-t[r+1][i])<Et}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)&&Array.from(Array(t.length-1)).map(function(e,n){return t[0].length===t[n+1].length}).reduce(function(e,t){return e&&t},!0)},At=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=ut(t);if(1>n.length)return!1;var r=g(n[0]);if("undefined"===r)return!1;switch(n[0].constructor===Array&&(n=n.map(function(e){return ut(e)})),r){case"number":return Pt(n,function(e,t){return Ne(e-t)<Et});case"boolean":return Pt(n,function(e,t){return e===t});case"string":return Pt(n,function(e,t){return e===t});case"object":return n[0].constructor===Array?wt.apply(void 0,p(n)):(console.warn("comparing array of objects for equivalency by slow JSON.stringify with no epsilon check"),Pt(n,function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));default:console.warn("incapable of determining comparison method");}return!1},St=Object.freeze({__proto__:null,EPSILON:Et,equivalent_numbers:function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return 0!==i.length&&(1===i.length&&void 0!==i[0]?e.apply(void 0,p(i[0])):Pt(i,function(e,t){return Ne(e-t)<Et}))},equivalent_vectors:wt,equivalent:At}),Nt=function(e,t,i,n,r){var s=function(e,t){return e[0]*t[1]-t[0]*e[1]},a=s(t,n),o=s([i[0]-e[0],i[1]-e[1]],n),c=s([e[0]-i[0],e[1]-i[1]],t);if(Ne(a)<Et)return!1;return r(o/a,c/-a)},Lt=function(e,t){return e>=-Et&&e<=1+Et&&t>=-Et&&t<=1+Et},Ct=function(e,t,i,n){var r=[t[0]-e[0],t[1]-e[1]],s=[n[0]-i[0],n[1]-i[1]];return Nt(e,r,i,s,Lt)},jt=function(e){return Ne(e.reduce(function(e,t){return e+t},0))<Et},Ot=function(e,t){return 1-Ne(ze(Be(e),Be(t)))<Et},Mt=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Et,r=[i[0]-e[0],i[1]-e[1]],s=r[0]*t[1]-r[1]*t[0];return Ne(s)<n},Ft=function(e,t){for(var n=!1,r=0,s=t.length-1;r<t.length;s=r++)t[r][1]>e[1]!=t[s][1]>e[1]&&e[0]<(t[s][0]-t[r][0])*(e[1]-t[r][1])/(t[s][1]-t[r][1])+t[r][0]&&(n=!n);return n},Bt=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var s=i[(r+1)%i.length],o=[s[0]-t[0],s[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return o[0]*a[1]-o[1]*a[0]>-n}).map(function(e,t,i){return e===i[0]}).reduce(function(e,t){return e&&t},!0)},zt=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var s=i[(r+1)%i.length],o=[s[0]-t[0],s[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return o[0]*a[1]-o[1]*a[0]>n}).map(function(e,t,i){return e===i[0]}).reduce(function(e,t){return e&&t},!0)},Tt=function(e,t){for(var n=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}),r=t.map(function(e,t,i){return[e,i[(t+1)%i.length]]}),s=0;s<n.length;s+=1)for(var a=0;a<r.length;a+=1)if(Ct(n[s][0],n[s][1],r[a][0],r[a][1]))return!0;return!!Ft(t[0],e)||!!Ft(e[0],t)},It=Object.freeze({__proto__:null,overlap_function:Nt,segment_segment_overlap:Ct,degenerate:jt,parallel:Ot,point_on_line:Mt,point_on_segment:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Et,r=[e[0]-t[0],e[1]-t[1]],s=[e[0]-i[0],e[1]-i[1]],a=[t[0]-i[0],t[1]-i[1]],o=Oe(r[0]*r[0]+r[1]*r[1]),c=Oe(s[0]*s[0]+s[1]*s[1]),d=Oe(a[0]*a[0]+a[1]*a[1]);return Ne(o-c-d)<n},point_in_poly:Ft,point_in_convex_poly:Bt,point_in_convex_poly_exclusive:zt,convex_polygons_overlap:Tt,convex_polygon_is_enclosed:function(e,t){var i=t.map(function(t){return Bt(t,e)}).reduce(function(e,t){return e||t},!1);return!i&&void 0},convex_polygons_enclose:function(e,t){var i=t.map(function(t){return Bt(t,e)}).reduce(function(e,t){return e||t},!1),n=e.map(function(t){return Bt(t,e)}).reduce(function(e,t){return e&&t},!0);return!i&&n},is_counter_clockwise_between:function(e,t,i){for(;i<t;)i+=2*Se;for(;e<t;)e+=2*Se;return e<i}}),Vt=function(){return!0},Dt=function(e,t){return t>=-Et},Rt=function(e,t){return t>=-Et&&t<=1+Et},qt=function(e,t){return e>=-Et&&t>=-Et},Xt=function(e,t){return e>=-Et&&t>=-Et&&t<=1+Et},Gt=function(e,t){return e>=-Et&&e<=1+Et&&t>=-Et&&t<=1+Et},Ut=function(e,t){return t>Et},Wt=function(e,t){return t>Et&&t<1-Et},Yt=function(e,t){return e>Et&&t>Et},Zt=function(e,t){return e>Et&&t>Et&&t<1-Et},Kt=function(e,t){return e>Et&&e<1-Et&&t>Et&&t<1-Et},Ht=function(e){return e},Qt=function(e){return e<-Et?0:e},Jt=function(e){return e<-Et?0:e>1+Et?1:e},$t=function(e,t,i,n,r){function s(e,t){return e[0]*t[1]-t[0]*e[1]}var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Et,o=s(t,n);if(!(Ne(o)<a)){var c=s([i[0]-e[0],i[1]-e[1]],n),d=s([e[0]-i[0],e[1]-i[1]],t),l=c/o;return r(l,d/-o,a)?[e[0]+t[0]*l,e[1]+t[1]*l]:void 0}},ei=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return $t(e,t,i,s,Rt,r)},ti=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return $t(e,t,i,s,Xt,r)},ii=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return $t(e,t,i,s,Wt,r)},ni=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return $t(e,t,i,s,Zt,r)},ri=function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return $t(e,s,i,a,Kt,r)},si=function(e,t,i,n){function r(e){return e<-s?-1:1}var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Et,a=i[0]-e[0],o=i[1]-e[1],c=n[0]-e[0],d=n[1]-e[1],l=c-a,g=d-o,f=a*d-c*o,p=f*f,_=t*t,h=Ne(l*l+g*g),u=_*h-p;if(!(u<-s)){var m=Oe(_*h-p),v=[e[0]+(f*g+r(g)*l*m)/h,e[1]+(-f*l+Ne(g)*m)/h];if(u>s){var y=[e[0]+(f*g-r(g)*l*m)/h,e[1]+(-f*l-Ne(g)*m)/h];return[v,y]}return[v]}},ai=function(){throw"circle_ray has not been written yet"},oi=function(e,t,i,n){function r(e){return 0>e?-1:1}var s=Me(t,2),a=i[0]-e[0],o=i[1]-e[1],c=n[0]-e[0],d=n[1]-e[1],l=c-a,g=d-o,f=l*l+g*g,p=a*d-c*o,_=(p*g+r(g)*l*Oe(s*f-p*p))/f,h=(p*g-r(g)*l*Oe(s*f-p*p))/f,u=(-p*l+Ne(g)*Oe(s*f-p*p))/f,m=(-p*l-Ne(g)*Oe(s*f-p*p))/f,v=isNaN(_),y=isNaN(h);return v||y?v&&y?void 0:v?y?void 0:[[h+e[0],m+e[1]]]:[[_+e[0],u+e[1]]]:[[_+e[0],u+e[1]],[h+e[0],m+e[1]]]},ci=function(e,t){return Ne(e[0]-t[0])<Et&&Ne(e[1]-t[1])<Et},di=function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return ei(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[r[0],r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!ci(r[0],r[s]))return[r[0],r[s]];}},li=function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return ti(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!ci(r[0],r[s]))return[r[0],r[s]];}},gi=function(e,t,i){var n=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return ri(t,i,e[0],e[1])}).filter(function(e){return null!=e}),r=zt(t,e),s=zt(i,e),a=Bt(t,e),o=Bt(i,e);if(0===n.length&&(r||s))return[t,i];if(0===n.length&&a&&o)return[t,i];switch(n.length){case 0:return r?[p(t),p(i)]:void 0;case 1:return a?[p(t),n[0]]:[p(i),n[0]];case 2:return n;default:throw new Error("clipping segment in a convex polygon resulting in 3 or more points");}},fi=Object.freeze({__proto__:null,limit_line:Ht,limit_ray:Qt,limit_segment:Jt,intersection_function:$t,line_line:function(e,t,i,n,r){return $t(e,t,i,n,Vt,r)},line_ray:function(e,t,i,n,r){return $t(e,t,i,n,Dt,r)},line_segment:ei,ray_ray:function(e,t,i,n,r){return $t(e,t,i,n,qt,r)},ray_segment:ti,segment_segment:function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return $t(e,s,i,a,Gt,r)},line_ray_exclusive:function(e,t,i,n,r){return $t(e,t,i,n,Ut,r)},line_segment_exclusive:ii,ray_ray_exclusive:function(e,t,i,n,r){return $t(e,t,i,n,Yt,r)},ray_segment_exclusive:ni,segment_segment_exclusive:ri,circle_line:si,circle_ray:ai,circle_segment:oi,convex_poly_line:di,convex_poly_ray:li,convex_poly_segment:gi,convex_poly_ray_exclusive:function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return ni(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!ci(r[0],r[s]))return[r[0],r[s]];}}}),pi=function(e,t){var i=e[0]*t[0]+e[1]*t[1],n=e[0]*t[1]-e[1]*t[0],r=je(n,i);return 0>r&&(r+=2*Se),r},_i=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.map(function(e){return je(e[1],e[0])}),r=Array.from(Array(n.length)).map(function(e,t){return t}).sort(function(e,t){return n[e]-n[t]});return r.slice(r.indexOf(0),r.length).concat(r.slice(0,r.indexOf(0)))},hi=function(e,t){var n=Be(e),r=Be(t),i=n.map(function(e,t){return n[t]+r[t]}),s=Be(i),a=n.map(function(e,t){return-n[t]+-r[t]});return[s,Be(a)]},ui=function(e,i,n,r){var s=i[0]*r[1]-r[0]*i[1];if(Ne(s)<Et){var a=[Re(e,n),[i[0],i[1]]],o=[a,a],c=i[0]*r[0]+i[1]*r[1];return delete o[0<c?1:0],o}var d=(n[0]-e[0])*r[1]-r[0]*(n[1]-e[1]),l=d/s,t=e[0]+i[0]*l,g=e[1]+i[1]*l,f=hi(i,r);return f[1]=[f[1][1],-f[1][0]],f.map(function(e){return[[t,g],e]})},mi=function(e,t,i){var n=pi(t,i)/e;return Array.from(Array(e-1)).map(function(e,r){return t+n*r})},vi=function(e,t,i){var n=je(t[1],t[0]),r=je(i[1],i[0]);return mi(e,n,r).map(function(e){return[Ce(e),Le(e)]})},yi=function(e){return .5*e.map(function(e,t,i){var n=i[(t+1)%i.length];return e[0]*n[1]-n[0]*e[1]}).reduce(function(e,t){return e+t},0)},ki=function(e){var t=1/(6*yi(e));return e.map(function(e,t,i){var n=i[(t+1)%i.length],r=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*r,(e[1]+n[1])*r]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(e){return e*t})},xi=function(e){var t=e[0].length,n=Array.from(Array(t)).map(function(){return 1/0}),r=Array.from(Array(t)).map(function(){return-Infinity});e.forEach(function(e){return e.forEach(function(e,t){e<n[t]&&(n[t]=e),e>r[t]&&(r[t]=e)})});var s=r.map(function(e,t){return e-n[t]});return[n,s]},bi=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=.5*(2*Se/e),o=i/Ce(s);return Array.from(Array(Ee(e))).map(function(r,c){var i=-2*Se*c/e+s,a=pt(t+o*Le(i),14),d=pt(n+o*Ce(i),14);return[a,d]})},Ei=function(e,t,n){for(var r=t.map(function(t,r){return{o:t,i:r,d:n(e,t)}}),s=1/0,a=0,o;a<r.length;a+=1)r[a].d<s&&(o=a,s=r[a].d);return o},Pi=function(e,t,n,r){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Et,a=Me(t[0],2)+Me(t[1],2),o=[0,1].map(function(t,r){return n[r]-e[r]}),c=[0,1].map(function(e,n){return t[n]*o[n]}).reduce(function(e,t){return e+t},0),l=r(c/a,s);return[0,1].map(function(n,r){return e[r]+t[r]*l})},wi=function(e,t,n){var r=e.map(function(e,r){var i=Mt(t,n,e);return{type:"v",point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),s=e.map(function(e,r,i){var s=ii(t,n,e,i[(r+1)%i.length]);return{type:"e",point:s,at_index:r}}).filter(function(e){return null!=e.point}),a=r.concat(s).sort(function(e,t){return Ne(e.point[0]-t.point[0])<Et?e.point[1]-t.point[1]:e.point[0]-t.point[0]});return console.log(a),e},Ai=function(e,t,n){var r=e.map(function(e,r){var i=Mt(t,n,e);return{point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),s=e.map(function(e,r,i){var s=ii(t,n,e,i[(r+1)%i.length]);return{point:s,at_index:r}}).filter(function(e){return null!=e.point});if(2==s.length){var a=s.slice().sort(function(e,t){return e.at_index-t.at_index}),o=e.slice(a[1].at_index+1).concat(e.slice(0,a[0].at_index+1));o.push(a[0].point),o.push(a[1].point);var c=e.slice(a[0].at_index+1,a[1].at_index+1);return c.push(a[1].point),c.push(a[0].point),[o,c]}if(1==s.length&&1==r.length){r[0].type="v",s[0].type="e";var d=r.concat(s).sort(function(e,t){return e.at_index-t.at_index}),l=e.slice(d[1].at_index+1).concat(e.slice(0,d[0].at_index+1));"e"===d[0].type&&l.push(d[0].point),l.push(d[1].point);var g=e.slice(d[0].at_index+1,d[1].at_index+1);return"e"===d[1].type&&g.push(d[1].point),g.push(d[0].point),[l,g]}if(2==r.length){var f=r.slice().sort(function(e,t){return e.at_index-t.at_index}),p=e.slice(f[1].at_index).concat(e.slice(0,f[0].at_index+1)),_=e.slice(f[0].at_index,f[1].at_index+1);return[p,_]}return[e.slice()]},Ni=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Et,i=e.slice().sort(function(e,i){return Ne(e[1]-i[1])<t?e[0]-i[0]:e[1]-i[1]}),n=[];n.push(i[0]);var r=0,s=0,a=function(){s+=1;var e=n.length-1,a=i.filter(function(i){return!(Ne(i[0]-n[e][0])<t&&Ne(i[1]-n[e][1])<t)}).map(function(t){for(var i=je(n[e][1]-t[1],n[e][0]-t[0]);i<r;)i+=2*Se;return{node:t,angle:i,distance:void 0}}).sort(function(e,t){return e.angle<t.angle?-1:e.angle>t.angle?1:0});if(0===a.length)return{v:void 0};var o=a[0];return a=a.filter(function(e){return Ne(o.angle-e.angle)<t}).map(function(t){var i=Oe(Me(n[e][0]-t.node[0],2)+Me(n[e][1]-t.node[1],2));return t.distance=i,t}).sort(function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}),0<n.filter(function(e){return e===a[0].node}).length?{v:n}:void(n.push(a[0].node),r=je(n[e][1]-a[0].node[1],n[e][0]-a[0].node[0]))};do{var o=a();if("object"===g(o))return o.v}while(s<1e4)},Li=Object.freeze({__proto__:null,clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*Se;for(;0>t;)t+=2*Se;var i=e-t;return 0<=i?i:2*Se-(t-e)},counter_clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*Se;for(;0>t;)t+=2*Se;var i=t-e;return 0<=i?i:2*Se-(e-t)},clockwise_angle2:function(e,t){var i=t[0]*e[0]+t[1]*e[1],n=t[0]*e[1]-t[1]*e[0],r=je(n,i);return 0>r&&(r+=2*Se),r},counter_clockwise_angle2:pi,counter_clockwise_vector_order:_i,interior_angles2:function(e,t){var i=pi(e,t);return[i,2*Se-i]},interior_angles:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(function(e,t,i){return pi(e,i[(t+1)%i.length])})},bisect_vectors:hi,bisect_lines2:ui,subsect_radians:mi,subsect:vi,signed_area:yi,centroid:ki,enclosing_rectangle:xi,make_regular_polygon:bi,nearest_point2:function(e,t){var i=Ei(e,t,Ve);return void 0===i?void 0:t[i]},nearest_point:function(e,t){var i=Ei(e,t,De);return void 0===i?void 0:t[i]},nearest_point_on_line:Pi,split_polygon:wi,split_convex_polygon:Ai,convex_hull:Ni}),Ci=function(e){var t=[],n=e,r=function(){return n(Be(w))},s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t);return this.length>n.length?ze(n,w):ze(w,n)},a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t),s=w.slice();return null==s[2]&&(s[2]=0),null==r[2]&&(r[2]=0),n(Ie(s,r))},o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t),r=w.length<n.length?w.length:n.length,s=Array.from(Array(r)).map(function(e,t){return Me(w[t]-n[t],2)}).reduce(function(e,t){return e+t},0);return Oe(s)},c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=xt(t);return n(Xe(r,w))},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t);return n(w.map(function(e,t){return e+r[t]}))},l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t);return n(w.map(function(e,t){return e-r[t]}))},g=function(e,t){var i=He(e,t);return n(Xe(i,w))},f=function(){return n(-w[1],w[0])},_=function(){return n(-w[0],-w[1])},h=function(){return n(w[1],-w[0])},u=function(){return n.apply(void 0,p(w.map(function(e){return-e})))},m=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=P(t),s=Qe(r.vector,r.origin);return n(Xe(s,w))},v=function(e,t){var r=mt(e),s=w.length<r.length?w.length:r.length,a=Array.from(Array(s)).map(function(e,n){return w[n]*t+r[n]*(1-t)});return n(a)},y=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t),r=w.length<n.length?w:n,s=w.length<n.length?n:w;return At(r,s)},k=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t),r=w.length<n.length?w:n,s=w.length<n.length?n:w;return Ot(r,s)},x=function(e){return n(w.map(function(t){return t*e}))},b=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var s=mt(t),a=w.length<s.length?w.slice():s,o=w.length<s.length?s:w.slice(),c=a.length;c<o.length;c+=1)a[c]=0;return n(o.map(function(e,t){return .5*(a[t]+o[t])}))},E=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=mt(t);return hi(w,r).map(function(e){return n(e)})},w;return Object.defineProperty(t,"normalize",{value:r}),Object.defineProperty(t,"dot",{value:s}),Object.defineProperty(t,"cross",{value:a}),Object.defineProperty(t,"distanceTo",{value:o}),Object.defineProperty(t,"transform",{value:c}),Object.defineProperty(t,"add",{value:d}),Object.defineProperty(t,"subtract",{value:l}),Object.defineProperty(t,"rotateZ",{value:g}),Object.defineProperty(t,"rotateZ90",{value:f}),Object.defineProperty(t,"rotateZ180",{value:_}),Object.defineProperty(t,"rotateZ270",{value:h}),Object.defineProperty(t,"flip",{value:u}),Object.defineProperty(t,"reflect",{value:m}),Object.defineProperty(t,"lerp",{value:v}),Object.defineProperty(t,"isEquivalent",{value:y}),Object.defineProperty(t,"isParallel",{value:k}),Object.defineProperty(t,"scale",{value:x}),Object.defineProperty(t,"midpoint",{value:b}),Object.defineProperty(t,"bisect",{value:E}),Object.defineProperty(t,"copy",{value:function(){return n.apply(void 0,p(w))}}),Object.defineProperty(t,"magnitude",{get:function(){return Fe(w)}}),Object.defineProperty(t,"bind",{value:function(e){w=e}}),t},ji=function e(){var t=Ci(e),i=Object.create(t);t.bind(i);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];return mt(r).forEach(function(e){return i.push(e)}),Object.defineProperty(i,"x",{get:function(){return i[0]}}),Object.defineProperty(i,"y",{get:function(){return i[1]}}),Object.defineProperty(i,"z",{get:function(){return i[2]}}),i};ji.withAngle=function(e){return ji(Ce(e),Le(e))};var Oi=function e(){for(var t=[1,0,0,1,0,0],i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=xt(n);void 0!==s&&s.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"multiply",{value:function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e(Ue(t,xt(n)).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"determinant",{value:function(){return pt(We(t))}}),Object.defineProperty(t,"inverse",{value:function(){return e(Ye(t).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"translate",{value:function(i,n){var r=Ze(i,n);return e(Ue(t,r).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"scale",{value:function(){var i=Ke.apply(void 0,arguments);return e(Ue(t,i).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"rotate",{value:function(){var i=He.apply(void 0,arguments);return e(Ue(t,i).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"reflect",{value:function(){var i=Qe.apply(void 0,arguments);return e(Ue(t,i).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=mt(i);return ji(Xe(t,r).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transformVector",{value:function(i){return e(Xe(t,i).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transformLine",{value:function(i,n){return e(Ge(t,i,n).map(function(e){return pt(e,13)}))}}),Object.freeze(t)};Oi.makeIdentity=function(){return Oi(1,0,0,1,0,0)},Oi.makeTranslation=function(e,t){return Oi(Ze(e,t))},Oi.makeRotation=function(e,t){return Oi(He(e,t).map(function(e){return pt(e,13)}))},Oi.makeScale=function(e,t){return Oi(Ke(e,t).map(function(e){return pt(e,13)}))},Oi.makeReflection=function(e,t){return Oi(Qe(e,t).map(function(e){return pt(e,13)}))};var Mi=function e(){for(var t=[1,0,0,0,1,0,0,0,1,0,0,0],i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=bt(n);void 0!==s&&s.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"multiply",{value:function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e(tt(t,bt(n)).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"determinant",{value:function(){return pt(it(t),13)}}),Object.defineProperty(t,"inverse",{value:function(){return e(nt(t).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"translate",{value:function(i,n,r){var s=rt(i,n,r);return e(tt(t,s).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"rotateX",{value:function(i){var n=st(i);return e(tt(t,n).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"rotateY",{value:function(i){var n=at(i);return e(tt(t,n).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"rotateZ",{value:function(i){var n=ot(i);return e(tt(t,n).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"rotate",{value:function(i,n,r){var s=ct(i,n,r);return e(tt(t,s).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"scale",{value:function(i){var n=dt(i);return e(tt(t,n).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"reflectZ",{value:function(i,n){var r=lt(i,n);return e(tt(t,r).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=mt(i);return ji($e(r,t).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transformVector",{value:function(i){return e($e(t,i).map(function(e){return pt(e,13)}))}}),Object.defineProperty(t,"transformLine",{value:function(i,n){return e(et(t,i,n).map(function(e){return pt(e,13)}))}}),Object.freeze(t)};Mi.makeIdentity=function(){return Mi(1,0,0,0,1,0,0,0,1,0,0,0)},Mi.makeTranslation=function(e,t,i){return Mi(rt(e,t,i))},Mi.makeRotationX=function(e){return Mi(st(e).map(function(e){return pt(e,13)}))},Mi.makeRotationY=function(e){return Mi(at(e).map(function(e){return pt(e,13)}))},Mi.makeRotationZ=function(e){return Mi(ot(e).map(function(e){return pt(e,13)}))},Mi.makeRotation=function(e,t,i){return Mi(ct(e,t,i).map(function(e){return pt(e,13)}))},Mi.makeScale=function(e,t){return Mi(dt(e,t).map(function(e){return pt(e,13)}))},Mi.makeReflectionZ=function(e,t){return Mi(lt(e,t).map(function(e){return pt(e,13)}))};var Fi=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=P(i),s=r.origin,a=r.vector,o=L.bind(this),c=Object.create(o(e));return Object.defineProperty(c,"compare_function",{value:function(){return!0}}),Object.defineProperty(c,"clip_function",{value:Ht}),Object.defineProperty(c,"origin",{get:function(){return ji(s)}}),Object.defineProperty(c,"vector",{get:function(){return ji(a)}}),Object.defineProperty(c,"length",{get:function(){return 1/0}}),Object.defineProperty(c,"transform",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=xt(i),o=Ge(r,s,a);return e(o[0],o[1])}}),c};Fi.fromPoints=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=A(t);return Fi({origin:n[0],vector:Be([n[1][0]-n[0][0],n[1][1]-n[0][1]])})},Fi.perpendicularBisector=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=A(t),r=Be([n[1][0]-n[0][0],n[1][1]-n[0][1]]);return Fi({origin:Te(n[0],n[1]),vector:[r[1],-r[0]]})};var Bi=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=P(i),s=r.origin,a=r.vector,o=L.bind(this),c=Object.create(o(e));return Object.defineProperty(c,"origin",{get:function(){return ji(s)}}),Object.defineProperty(c,"vector",{get:function(){return ji(a)}}),Object.defineProperty(c,"length",{get:function(){return 1/0}}),Object.defineProperty(c,"transform",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=xt(i),o=a.map(function(e,t){return e+s[t]}),c=Xe(r,s),d=Xe(r,o).map(function(e,t){return e-c[t]});return e(c,d)}}),Object.defineProperty(c,"rotate180",{value:function(){return e(s[0],s[1],-a[0],-a[1])}}),Object.defineProperty(c,"compare_function",{value:function(e,t){return e>=-t}}),Object.defineProperty(c,"clip_function",{value:Qt}),c};Bi.fromPoints=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=A(t);return Bi({origin:n[0],vector:Be([n[1][0]-n[0][0],n[1][1]-n[0][1]])})};var zi=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=A(i),s=L.bind(this),a=0<r.length?r.map(function(e){return ji(e)}):void 0;if(void 0!==a){var o=Object.create(s(e,a)),c=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=xt(i),s=o.map(function(e){return Xe(r,e)});return e(s)},d=function(t){var i=Te(o[0],o[1]),n=o.map(function(e){return e.lerp(i,t)});return e(n)},l=function(){return ji(o[1][0]-o[0][0],o[1][1]-o[0][1])},g=function(){return ji(Te(o[0],o[1]))},f=function(){return Oe(Me(o[1][0]-o[0][0],2)+Me(o[1][1]-o[0][1],2))},p=function(e,t){return e>=-t&&e<=1+t};return Object.defineProperty(o,"origin",{get:function(){return o[0]}}),Object.defineProperty(o,"vector",{get:function(){return l()}}),Object.defineProperty(o,"midpoint",{value:g}),Object.defineProperty(o,"magnitude",{get:function(){return f()}}),Object.defineProperty(o,"transform",{value:c}),Object.defineProperty(o,"scale",{value:d}),Object.defineProperty(o,"compare_function",{value:p}),Object.defineProperty(o,"clip_function",{value:Jt}),o}},Ti=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],s=[mt(e),mt(t)];return{contains:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=mt(t).map(function(e,t){return e+r[t]}),a=(n[1]-s[0][1])*-s[0][0]-(n[0]-s[0][0])*-s[0][1],o=n[1]*s[1][0]-n[0]*s[1][1];return 0>a&&0>o},bisect:function(){var e=pi(s[0],s[1]),t=s.map(function(e){return je(e[1],e[0])}),i=t[0]+.5*e;return ji(Ce(i),Le(i))},subsect:function(e){return vi(e,s[0],s[1]).map(function(e){return ji(e[0],e[1])})},get center(){return r},get vectors(){return s},get angle(){return pi(s[0],s[1])}}};Ti.fromVectors=function(e,t){return Ti(e,t)},Ti.fromPoints=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],r=[e,t].map(function(e){return e.map(function(t,r){return e[r]-n[r]})});return Ti(r[0],r[1],n)};var Ii=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=vt(t).map(function(e){return ji(e)});if(void 0!==n){var r=n.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return zi(e[0][0],e[0][1],e[1][0],e[1][1])}),s=C.bind(this),a=Object.create(s());return Object.defineProperty(a,"points",{get:function(){return n}}),Object.defineProperty(a,"sides",{get:function(){return r}}),a}};Ii.regularPolygon=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=bi(e,t,i,n);return Ii(r)},Ii.convexHull=function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=Ni(e,t);return Ii(i)};var Vi=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=N(i).map(function(e){return ji(e)});if(void 0!==r){var s=r.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return zi(e[0][0],e[0][1],e[1][0],e[1][1])}),a=C.bind(this),o=Object.create(a(e)),c=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var s=P(i);return Ai(r,s.origin,s.vector).map(function(t){return e(t)})},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=N(t);return Tt(r,n)},l=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ki(o.points),r=o.points.map(function(e){return[0,1].map(function(t,r){return e[r]-n[r]})}).map(function(e){return e.map(function(r,s){return n[s]+e[s]*t})});return e(r)},g=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ki(o.points),n=o.points.map(function(e){var n=[e[0]-i[0],e[1]-i[1]],r=Oe(Me(n[0],2)+Me(n[1],2)),s=je(n[1],n[0]);return[i[0]+Ce(s+t)*r,i[1]+Le(s+t)*r]});return e(n)};return Object.defineProperty(o,"points",{get:function(){return r}}),Object.defineProperty(o,"sides",{get:function(){return s}}),Object.defineProperty(o,"split",{value:c}),Object.defineProperty(o,"overlaps",{value:d}),Object.defineProperty(o,"scale",{value:l}),Object.defineProperty(o,"rotate",{value:g}),o}};Vi.regularPolygon=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=bi(e,t,i,n);return Vi(r)},Vi.convexHull=function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=Ni(e,t);return Vi(i)};var Di=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=vt(t);if(void 0!==n){var r=_i.apply(void 0,p(n)),s=function(){return r.map(function(e){return n[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return Ti.fromVectors(e[0],e[1])})},a=function(){return r.map(function(e){return n[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return pi(e[0],e[1])})};return{sectors:s,angles:a,get vectors(){return n},get vectorOrder(){return p(r)}}}};Di.fromVectors=function(){return Di.apply(void 0,arguments)},Di.fromPoints=function(e,t){var i=t.map(function(t){return t.map(function(n,r){return t[r]-e[r]})});return Di.fromVectors(i)};var Ri=Object.create(null);Object.assign(Ri,qe,Je,gt,Li,It,St),Ri.clean_number=pt,Ri.is_number=function(e){return null!=e&&!isNaN(e)},Ri.is_vector=function(e){return null!=e&&null!=e[0]&&!isNaN(e[0])},Ri.is_iterable=_t,Ri.flatten_input=ht,Ri.semi_flatten_input=ut,Ri.get_vector=mt,Ri.get_vector_of_vectors=vt,Ri.get_matrix2=xt,Ri.get_segment=E,Ri.get_line=P,Ri.get_ray=w,Ri.get_two_vec2=A,Ri.get_array_of_vec=N,Ri.get_array_of_vec2=function(){var e=Array.from(arguments),t=e.filter(function(e){return e.constructor===Array});return 2<=t.length&&!isNaN(t[0][0])?t:1===t.length&&1<=t[0].length?t[0]:e},Ri.intersection=fi,Object.freeze(Ri);var qi={vector:ji,matrix2:Oi,matrix:Mi,line:Fi,ray:Bi,segment:zi,circle:function(){for(var e=arguments.length,t=Array(e),i=0,n,r;i<e;i++)t[i]=arguments[i];var s=Array.from(t),a=s.filter(function(e){return!isNaN(e)});if(3===a.length){n=ji(a[0],a[1]);var o=f(a,3);r=o[2]}var c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=P(t),a=[s.origin[0]+s.vector[0],s.origin[1]+s.vector[1]],o=si(n,r,s.origin,a);return void 0===o?void 0:o.map(function(e){return ji(e)})},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=w(t),a=ai(n,r,s[0],s[1]);return void 0===a?void 0:a.map(function(e){return ji(e)})},l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=A(t),a=oi(n,r,s[0],s[1]);return void 0===a?void 0:a.map(function(e){return ji(e)})};return{intersectionLine:c,intersectionRay:d,intersectionSegment:l,get origin(){return n},get radius(){return r},set origin(e){n=ji(e)},set radius(e){r=e}}},polygon:Ii,convexPolygon:Vi,rectangle:function e(){for(var t=arguments.length,i=Array(t),n=0,r,s,a;n<t;n++)i[n]=arguments[n];var o=Array.from(i),c=o.filter(function(e){return!isNaN(e)}),d=o.filter(function(e){return e.constructor===Array});if(4===c.length){r=c.slice(0,2);var l=f(c,4);s=l[2],a=l[3]}1===d.length&&(d=d[0]),2===d.length&&"number"==typeof d[0][0]&&(r=d[0].slice(),s=d[1][0],a=d[1][1]);var g=[[r[0],r[1]],[r[0]+s,r[1]],[r[0]+s,r[1]+a],[r[0],r[1]+a]],p=C.bind(this),_=Object.create(p(e)),h=function(t,i){var n=null==i?[r[0]+s,r[1]+a]:i,o=r[0]+(n[0]-r[0])*(1-t),c=r[1]+(n[1]-r[1])*(1-t);return e(o,c,s*t,a*t)};return Object.defineProperty(_,"origin",{get:function(){return r}}),Object.defineProperty(_,"width",{get:function(){return s}}),Object.defineProperty(_,"height",{get:function(){return a}}),Object.defineProperty(_,"area",{get:function(){return s*a}}),Object.defineProperty(_,"scale",{value:h}),Object.defineProperty(_,"rotate",{value:function(){var e;return(e=Vi(g)).rotate.apply(e,arguments)}}),Object.defineProperty(_,"transform",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Vi(g).transform(t)}}),_},junction:Di,sector:Ti,core:Ri},Xi=1.1,Gi="Rabbit Ear",Ui={FACES_MATRIX:"faces_re:matrix",FACES_LAYER:"faces_re:layer",SECTORS_VERTICES:"re:sectors_vertices",SECTORS_EDGES:"re:sectors_edges",SECTORS_ANGLES:"re:sectors_angles",VERTICES_SECTORS_VERTICES:"vertices_re:sectors_vertices"},Wi={file:["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"],frame:["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"],graph:["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],orders:["edgeOrders","faceOrders"]},Yi=Object.freeze([].concat(Wi.file).concat(Wi.frame).concat(Wi.graph).concat(Wi.orders)),Zi=["B","b","M","m","V","v","F","f","U","u"],Ki={B:"boundary",b:"boundary",M:"mountain",m:"mountain",V:"valley",v:"valley",F:"mark",f:"mark",U:"unassigned",u:"unassigned"},Hi={M:-180,m:-180,V:180,v:180},Qi=function(e){return Hi[e]||0},Ji=function(e,t){var i="".concat(t,"_");return Object.keys(e).map(function(e){return e.substring(0,i.length)===i?e:void 0}).filter(function(e){return void 0!==e})},$i=function(e,t){return Object.keys(e).map(function(e){return e.substring(e.length-t.length,e.length)===t?e:void 0}).filter(function(e){return void 0!==e})},en=function(e,t){var i=Ji(e,t);if(0===i.length)return[];var r=Ae.apply(Math,n(i.map(function(t){return e[t].length}))),s=Array.from(Array(r)).map(function(){return{}});return i.map(function(e){return{long:e,short:e.substring(t.length+1)}}).forEach(function(t){return s.forEach(function(n,r){s[r][t.short]=e[t.long][r]})}),s},tn=function(e,t,i){var n=Ji(e,t);if(0===n.length)return[];var r={};return n.map(function(e){return{long:e,short:e.substring(t.length+1)}}).forEach(function(t){r[t.short]=e[t.long][i]}),r},nn=/*#__PURE__*/Object.freeze({__proto__:null,file_spec:Xi,file_creator:Gi,future_spec:Ui,fold_keys:Wi,file_classes:["singleModel","multiModel","animation","diagrams"],frame_classes:["creasePattern","foldedForm","graph","linkage"],frame_attributes:["2D","3D","abstract","manifold","nonManifold","orientable","nonOrientable","selfTouching","nonSelfTouching","selfIntersecting","nonSelfIntersecting"],keys:Yi,edges_assignment_values:Zi,edges_assignment_names:Ki,edge_assignment_to_foldAngle:Qi,get_geometry_keys_with_prefix:Ji,get_geometry_keys_with_suffix:function(e,t){var i="_".concat(t);return Object.keys(e).map(function(e){return e.substring(e.length-i.length,e.length)===i?e:void 0}).filter(function(e){return void 0!==e})},get_keys_with_ending:$i,transpose_geometry_arrays:en,transpose_geometry_array_at_index:tn}),rn=function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return e?{file_spec:Xi,file_creator:Gi,file_author:"",file_title:"",file_description:"",file_classes:[],file_frames:[],frame_description:"",frame_attributes:[],frame_classes:[],frame_unit:""}:{file_spec:Xi,file_creator:Gi}},sn=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{"faces_re:layer":Array.from(Array(e)).map(function(e,t){return t}),"faces_re:matrix":Array.from(Array(e)).map(function(){return[1,0,0,1,0,0]})}},an=function(){return{file_classes:["singleModel"],frame_attributes:["2D"],frame_classes:["creasePattern"]}},on=function(){return{vertices_coords:[[0,0],[1,0],[1,1],[0,1]],vertices_vertices:[[1,3],[2,0],[3,1],[0,2]],vertices_faces:[[0],[0],[0],[0]],edges_vertices:[[0,1],[1,2],[2,3],[3,0]],edges_faces:[[0],[0],[0],[0]],edges_assignment:["B","B","B","B"],edges_foldAngle:[0,0,0,0],edges_length:[1,1,1,1],faces_vertices:[[0,1,2,3]],faces_edges:[[0,1,2,3]]}},cn=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object.assign(Object.create(e),rn())},dn=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object.assign(Object.create(e),rn(),an(),on(),sn(1))},ln=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=on();return i.vertices_coords=[[0,0],[e,0],[e,t],[0,t]],i.edges_length=[e,t,e,t],Object.assign(Object.create(null),rn(),an(),i,sn(1))},gn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=Array.from(Array(e)),r=2*Se/e,s=qi.core.clean_number(Oe(Me(t-t*Ce(r),2)+Me(t*Le(r),2))),a={vertices_coords:n.map(function(e,t){return r*t}).map(function(e){return[qi.core.clean_number(t*Ce(e)),qi.core.clean_number(t*Le(e))]}),vertices_vertices:n.map(function(e,t){return[(t+1)%n.length,(t+n.length-1)%n.length]}),vertices_faces:n.map(function(){return[0]}),edges_vertices:n.map(function(e,t){return[t,(t+1)%n.length]}),edges_faces:n.map(function(){return[0]}),edges_assignment:n.map(function(){return"B"}),edges_foldAngle:n.map(function(){return 0}),edges_length:n.map(function(){return s}),faces_vertices:[n.map(function(e,t){return t})],faces_edges:[n.map(function(e,t){return t})]};return Object.assign(Object.create(null),rn(),an(),a,sn(1))},fn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ae.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},pn={vertices:function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return fn([],t,i,n)},edges:function(e){var t=e.edges_vertices,i=e.edges_faces;return fn([],t,i)},faces:function(e){var t=e.faces_vertices,i=e.faces_edges;return fn([],t,i)}},_n=function(e,t,i){var n=pn[t](e),r=Array(n).fill(!1);i.forEach(function(e){r[e]=!0});var a=0,o=r.map(function(e){return e?--a:a});if(0===i.length)return o;var c="".concat(t,"_"),d="_".concat(t),l=Object.keys(e),g=l.map(function(e){return e.substring(0,c.length)===c?e:void 0}).filter(function(e){return void 0!==e}),f=l.map(function(e){return e.substring(e.length-d.length,e.length)===d?e:void 0}).filter(function(e){return void 0!==e});return f.forEach(function(t){return e[t].forEach(function(n,r){return e[t][r].forEach(function(i,n){e[t][r][n]+=o[i]})})}),g.forEach(function(t){e[t]=e[t].filter(function(e,t){return!r[t]})}),o},hn=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:qi.core.EPSILON,r=0;r<e.length;r+=1)if(Ne(e[r]-t[r])>n)return!1;return!0},un=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:qi.core.EPSILON,r=[t[0]-i[0],t[1]-i[1]],s=[t[0]-e[0],t[1]-e[1]],a=[i[0]-e[0],i[1]-e[1]],o=Oe(r[0]*r[0]+r[1]*r[1]),c=Oe(s[0]*s[0]+s[1]*s[1]),d=Oe(a[0]*a[0]+a[1]*a[1]);return Ne(o-c-d)<n},mn=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},vn=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qi.core.EPSILON,r=i.map(function(e){return e.map(function(e){return t[e]})});return r.map(function(i){return t.filter(function(e){return un(e,i[0],i[1],n)})})},yn=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=i.map(function(e){return e.map(function(e){return t[e]})}),r=n.map(function(t){return[t[1][0]-t[0][0],t[1][1]-t[0][1]]}),s=r.map(function(t){return Oe(t[0]*t[0]+t[1]*t[1])}),a=r.map(function(t,e){return[t[0]/s[e],t[1]/s[e]]});return a.map(function(t){return .707<Ne(t[0])})},kn=function(e){for(var t=e.vertices_coords,n=e.edges_vertices,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qi.core.EPSILON,s=n.length,a=n.map(function(e){return e.map(function(e){return t[e]})}),o=Array.from(Array(s-1)).map(function(){return[]}),c=0;c<a.length-1;c+=1)for(var d=c+1;d<a.length;d+=1)o[c][d]=qi.core.intersection.segment_segment_exclusive(a[c][0],a[c][1],a[d][0],a[d][1],r);for(var l=Array.from(Array(s)).map(function(){return[]}),g=0;g<a.length-1;g+=1)for(var f=g+1;f<a.length;f+=1)null!=o[g][f]&&(l[g].push(o[g][f]),l[f].push(o[g][f]));return l},xn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qi.core.EPSILON,n=function(e,t){return e[0]-t[0]},r=function(e,t){return e[1]-t[1]},s=yn(e),a=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});a.forEach(function(t,e){return t.sort(s[e]?n:r)});var o=kn(e,t),c=vn(e,t),d=o.map(function(e,t){return e.concat(c[t])});d.forEach(function(t,e){return t.sort(s[e]?n:r)});var l=d.map(function(e){return Array.from(Array(e.length-1)).map(function(t,n){return[e[n],e[n+1]]})});l=l.map(function(e){return e.filter(function(n){return!1===n.map(function(e,r){return Ne(n[0][r]-n[1][r])<t}).reduce(function(e,t){return e&&t},!0)})});for(var g=l.map(function(e,t){return e.map(function(){return t})}).reduce(function(e,t){return e.concat(t)},[]),f=l.map(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),p=0,_=l.map(function(e){return e.map(function(){return[p++,p++]})}).reduce(function(e,t){return e.concat(t)},[]),h=Array.from(Array(f.length)).map(function(){return[]}),u=0;u<f.length-1;u+=1)for(var m=u+1;m<f.length;m+=1)h[u][m]=hn(f[u],f[m],t);var y=f.map(function(){});h.forEach(function(e,t){return e.forEach(function(e,i){e&&(y[i]=void 0===y[t]?t:y[t])})});var k=y.map(function(e){return void 0!==e});y.forEach(function(e,t){void 0===e&&(y[t]=t)}),_.forEach(function(e,t){return e.forEach(function(e,i){_[t][i]=y[e]})});for(var x=Array.from(Array(_.length)).map(function(){return[]}),b=0;b<_.length-1;b+=1)for(var E=b+1;E<_.length;E+=1)x[b][E]=mn(_[b],_[E]);var P=_.map(function(){});x.forEach(function(e,t){return e.forEach(function(e,i){e&&(P[t]=void 0===P[i]?i:P[i])})});var w=P.map(function(e){return void 0===e});P.forEach(function(e,t){void 0===e&&(P[t]=t)});var A=_.filter(function(e,t){return w[t]}),S=g.filter(function(e,t){return w[t]}),N={vertices_coords:f,edges_vertices:A};null!=e.edges_assignment&&(N.edges_assignment=S.map(function(t){return e.edges_assignment[t]||"U"})),null!=e.edges_foldAngle&&(N.edges_foldAngle=S.map(function(t,i){return e.edges_foldAngle[t]||Qi(N.edges_assignment[i])}));var L=k.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e});return _n(N,"vertices",L),Wi.graph.forEach(function(t){return delete e[t]}),Object.keys(N).forEach(function(t){e[t]=N[t]}),N},bn=function(e){var t=e.edges_vertices.map(function(e,t){return e[0]===e[1]?t:void 0}).filter(function(e){return void 0!==e});_n(e,"edges",t)},En=function(e,t,i){return e.edges_vertices[t][0]===e.edges_vertices[i][0]&&e.edges_vertices[t][1]===e.edges_vertices[i][1]||e.edges_vertices[t][0]===e.edges_vertices[i][1]&&e.edges_vertices[t][1]===e.edges_vertices[i][0]},Pn=function(e){var t=e.edges_vertices.map(function(t,n){for(var i=n+1;i<e.edges_vertices-1-n;i+=1)if(En(e,n,i))return i});_n(e,"edges",t)},wn=function(e){bn(e),Pn(e)},An={},Sn=function(e,t){return(+e%(t=+t)+t)%t};An.EPS=1e-6,An.sum=function(e,t){return e+t},An.min=function(e,t){return e<t?e:t},An.max=function(e,t){return e>t?e:t},An.all=function(e,t){return e&&t},An.next=function(e,t,n){return null==n&&(n=1),Sn(e+n,t)},An.rangesDisjoint=function(e,t){var i,n,r,s,a,o;return i=e[0],n=e[1],r=t[0],s=t[1],r<(a=we(i,n))&&a>s||r>(o=Ae(i,n))&&o<s},An.topologicalSort=function(e){var t,i,n,r,s,a,o;for(t=0,n=e.length;t<n;t++)o=e[t],a=[!1,null],o.visited=a[0],o.parent=a[1];for(s=[],i=0,r=e.length;i<r;i++)o=e[i],o.visited||(s=An.visit(o,s));return s},An.visit=function(e,t){var i,n,r,s;for(e.visited=!0,r=e.children,(i=0,n=r.length);i<n;i++)(s=r[i],!!!s.visited)&&(s.parent=e,t=An.visit(s,t));return t.concat([e])},An.magsq=function(e){return An.dot(e,e)},An.mag=function(e){return Oe(An.magsq(e))},An.unit=function(e,t){var i;return null==t&&(t=An.EPS),i=An.magsq(e),i<t?null:An.mul(e,1/An.mag(e))},An.ang2D=function(e,t){return null==t&&(t=An.EPS),An.magsq(e)<t?null:je(e[1],e[0])},An.mul=function(e,t){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(n*t);return a},An.linearInterpolate=function(e,t,i){return An.plus(An.mul(t,1-e),An.mul(i,e))},An.plus=function(e,t){var n,r,s,a,o;for(o=[],r=s=0,a=e.length;s<a;r=++s)n=e[r],o.push(n+t[r]);return o},An.sub=function(e,t){return An.plus(e,An.mul(t,-1))},An.dot=function(e,t){var n,r;return function(){var i,s,a;for(a=[],r=i=0,s=e.length;i<s;r=++i)n=e[r],a.push(n*t[r]);return a}().reduce(An.sum)},An.distsq=function(e,t){return An.magsq(An.sub(e,t))},An.dist=function(e,t){return Oe(An.distsq(e,t))},An.closestIndex=function(e,t){var n,r,s,a,o,c,d;for(c=2e308,s=a=0,o=t.length;a<o;s=++a)n=t[s],c>(r=An.dist(e,n))&&(c=r,d=s);return d},An.dir=function(e,t){return An.unit(An.sub(t,e))},An.ang=function(e,t){var i,n,r,s;return i=function(){var i,n,r,a;for(r=[e,t],a=[],(i=0,n=r.length);i<n;i++)s=r[i],a.push(An.unit(s));return a}(),n=i[0],r=i[1],null==n||null==r?null:Pe(An.dot(n,r))},An.cross=function(e,t){var n,r,s,a;return e.length===(s=t.length)&&2===s?e[0]*t[1]-e[1]*t[0]:e.length===(a=t.length)&&3===a?function(){var i,s,a,o,c;for(a=[[1,2],[2,0],[0,1]],c=[],(i=0,s=a.length);i<s;i++)o=a[i],n=o[0],r=o[1],c.push(e[n]*t[r]-e[r]*t[n]);return c}():null},An.parallel=function(e,t,i){var n,r,s,a;return null==i&&(i=An.EPS),n=function(){var i,n,r,s;for(r=[e,t],s=[],(i=0,n=r.length);i<n;i++)a=r[i],s.push(An.unit(a));return s}(),r=n[0],s=n[1],null==r||null==s?null:1-Ne(An.dot(r,s))<i},An.rotate=function(e,n,r){var t,s,a,o,c,d,l,g,f,_;if(n=An.unit(n),null==n)return null;for(l=[Ce(r),Le(r)],t=l[0],_=l[1],g=[[0,1,2],[1,2,0],[2,0,1]],f=[],(a=0,o=g.length);a<o;a++)c=g[a],f.push(function(){var i,r,a,o;for(a=[t,-_*n[c[2]],_*n[c[1]]],o=[],(s=i=0,r=a.length);i<r;s=++i)d=a[s],o.push(e[c[s]]*(n[c[0]]*n[c[s]]*(1-t)+d));return o}().reduce(An.sum));return f},An.interiorAngle=function(e,t,i){var n;return n=An.ang2D(An.sub(e,t))-An.ang2D(An.sub(i,t)),n+(0>n?2*Se:0)},An.turnAngle=function(e,t,i){return Se-An.interiorAngle(e,t,i)},An.triangleNormal=function(e,t,i){return An.unit(An.cross(An.sub(t,e),An.sub(i,t)))},An.polygonNormal=function(e,t){var n,r;return null==t&&(t=An.EPS),An.unit(function(){var t,i,s;for(s=[],n=t=0,i=e.length;t<i;n=++t)r=e[n],s.push(An.cross(r,e[An.next(n,e.length)]));return s}().reduce(An.plus),t)},An.twiceSignedArea=function(e){var t,n,r;return function(){var i,s,a;for(a=[],t=i=0,s=e.length;i<s;t=++i)n=e[t],r=e[An.next(t,e.length)],a.push(n[0]*r[1]-r[0]*n[1]);return a}().reduce(An.sum)},An.polygonOrientation=function(e){var t=Math.sign;return t(An.twiceSignedArea(e))},An.sortByAngle=function(e,t,i){return null==t&&(t=[0,0]),null==i&&(i=function(e){return e}),t=i(t),e.sort(function(e,n){var r,s;return r=An.ang2D(An.sub(i(e),t)),s=An.ang2D(An.sub(i(n),t)),r-s})},An.segmentsCross=function(e,t){var i,n,r,s;return i=e[0],r=e[1],n=t[0],s=t[1],!(An.rangesDisjoint([i[0],r[0]],[n[0],s[0]])||An.rangesDisjoint([i[1],r[1]],[n[1],s[1]]))&&An.polygonOrientation([i,r,n])!==An.polygonOrientation([i,r,s])&&An.polygonOrientation([n,s,i])!==An.polygonOrientation([n,s,r])},An.parametricLineIntersect=function(e,t){var i,n,r,s,a;return n=e[0],r=e[1],s=t[0],a=t[1],i=(a[1]-s[1])*(r[0]-n[0])+(s[0]-a[0])*(r[1]-n[1]),0===i?[null,null]:[(a[0]*(n[1]-s[1])+a[1]*(s[0]-n[0])+s[1]*n[0]-n[1]*s[0])/i,(s[0]*(r[1]-n[1])+s[1]*(n[0]-r[0])+n[1]*r[0]-r[1]*n[0])/i]},An.segmentIntersectSegment=function(e,i){var n,r,a;return n=An.parametricLineIntersect(e,i),r=n[0],a=n[1],null!=r&&0<=r&&1>=r&&0<=a&&1>=a?An.linearInterpolate(r,e[0],e[1]):null},An.lineIntersectLine=function(e,i){var n,r,a;return n=An.parametricLineIntersect(e,i),r=n[0],a=n[1],null==r?null:An.linearInterpolate(r,e[0],e[1])},An.pointStrictlyInSegment=function(e,t,i){var n,r;return null==i&&(i=An.EPS),n=An.sub(e,t[0]),r=An.sub(e,t[1]),An.parallel(n,r,i)&&0>An.dot(n,r)},An.centroid=function(e){return An.mul(e.reduce(An.plus),1/e.length)},An.basis=function(e,t){var i,r,s,a,o,c,l,g;return(null==t&&(t=An.EPS),function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)o=e[t],n.push(3!==o.length);return n}().reduce(An.all))?null:(r=function(){var i,n,r;for(r=[],i=0,n=e.length;i<n;i++)o=e[i],An.distsq(o,e[0])>t&&r.push(An.dir(o,e[0]));return r}(),0===r.length)?[]:(c=r[0],function(){var e,n,s;for(s=[],e=0,n=r.length;e<n;e++)i=r[e],s.push(An.parallel(i,c,t));return s}().reduce(An.all))?[c]:(a=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(An.unit(An.cross(i,c)));return n}(),a=function(){var e,t,i;for(i=[],e=0,t=a.length;e<t;e++)s=a[e],null!=s&&i.push(s);return i}(),g=a[0],l=An.cross(g,c),function(){var e,i,n;for(n=[],e=0,i=a.length;e<i;e++)s=a[e],n.push(An.parallel(s,g,t));return n}().reduce(An.all)?[c,l]:[c,l,g])},An.above=function(e,t,i,n){var r,s,a,o,c;return null==n&&(n=An.EPS),a=function(){var n,r,s,a;for(s=[e,t],a=[],(n=0,r=s.length);n<r;n++)c=s[n],a.push(function(){var e,t,n;for(n=[],e=0,t=c.length;e<t;e++)o=c[e],n.push(An.dot(o,i));return n}());return a}(),r=a[0],s=a[1],s.reduce(An.max)-r.reduce(An.min)<n?1:r.reduce(An.max)-s.reduce(An.min)<n?-1:0},An.separatingDirection2D=function(e,r,s,n){var a,c,d,g,f,_,h,u,v,y,x,b,E,P;for(null==n&&(n=An.EPS),b=[e,r],(d=0,f=b.length);d<f;d++)for(P=b[d],a=g=0,_=P.length;g<_;a=++g)for(y=P[a],c=v=0,h=P.length;v<h;c=++v)if((x=P[c],!!(a<c))&&(u=An.unit(An.cross(An.sub(y,x),s)),null!=u&&(E=An.above(e,r,u,n),0!==E)))return An.mul(u,E);return null},An.separatingDirection3D=function(e,t,n){var s,a,c,d,g,f,_,h,u,v,y,x,b,E,P,w,A,S,N;for(null==n&&(n=An.EPS),P=[[e,t],[t,e]],(c=0,g=P.length);c<g;c++)for(w=P[c],S=w[0],N=w[1],(d=0,f=S.length);d<f;d++)for(y=S[d],s=v=0,_=N.length;v<_;s=++v)for(x=N[s],a=E=0,h=N.length;E<h;a=++E)if((b=N[a],!!(s<a))&&(u=An.unit(An.cross(An.sub(y,x),An.sub(y,b))),null!=u&&(A=An.above(e,t,u,n),0!==A)))return An.mul(u,A);return null},An.circleCross=function(e,t,i){var n,r;return n=(e*e-i*i+t*t)/e/2,r=Oe(t*t-n*n),[n,r]},An.creaseDir=function(e,t,i,n,r){var s,a,o,c,d,l;return null==r&&(r=An.EPS),s=Ce(i)+Ce(n),a=Ce(i)-Ce(n),o=An.plus(e,t),c=An.sub(e,t),d=An.unit(An.cross(c,o)),o=An.mul(o,s/An.magsq(o)),c=An.mul(c,An.magsq(c)<r?0:a/An.magsq(c)),l=Oe(1-An.magsq(o)-An.magsq(c)),d=An.mul(d,l),[o,c,d].reduce(An.plus)},An.quadSplit=function(e,i,n,r){if(An.magsq(i)>n*n)throw new Error("STOP! Trying to split expansive quad.");return An.mul(e,(n*n-An.magsq(i))/2/(n*Ce(r)-An.dot(e,i)))};var Nn={},Ln=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Nn.edgesAssigned=function(e,t){var n,r,s,a,o,c;for(o=e.edges_assignment,c=[],(r=s=0,a=o.length);s<a;r=++s)n=o[r],n===t&&c.push(r);return c},Nn.mountainEdges=function(e){return Nn.edgesAssigned(e,"M")},Nn.valleyEdges=function(e){return Nn.edgesAssigned(e,"V")},Nn.flatEdges=function(e){return Nn.edgesAssigned(e,"F")},Nn.boundaryEdges=function(e){return Nn.edgesAssigned(e,"B")},Nn.unassignedEdges=function(e){return Nn.edgesAssigned(e,"U")},Nn.keysStartingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(0,t.length)===t&&n.push(i);return n},Nn.keysEndingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(-t.length)===t&&n.push(i);return n},Nn.remapField=function(e,t,n){var r,s,a,o,c,d,g,f,p,_,h,u,v,y;for(h=[],s=o=0,g=n.length;o<g;s=++o)a=n[s],null!=a&&(h[a]=s);for(v=Nn.keysStartingWith(e,t+"_"),d=0,f=v.length;d<f;d++)c=v[d],e[c]=function(){var t,i,n;for(n=[],i=0,t=h.length;i<t;i++)u=h[i],n.push(e[c][u]);return n}();for(y=Nn.keysEndingWith(e,"_"+t),_=0,p=y.length;_<p;_++)c=y[_],e[c]=function(){var t,i,s,a;for(s=e[c],a=[],(i=0,t=s.length);i<t;i++)r=s[i],a.push(function(){var e,t,i;for(i=[],t=0,e=r.length;t<e;t++)u=r[t],i.push(n[u]);return i}());return a}();return e},Nn.remapFieldSubset=function(e,t,i){var n,r,s;return n=0,r=function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)s=i[e],s?r.push(n++):r.push(null);return r}(),Nn.remapField(e,t,r),r},Nn.numType=function(e,t){var i,n,r;return i=function(){var i,s,a,o;for(a=Nn.keysStartingWith(e,t+"_"),o=[],(i=0,s=a.length);i<s;i++)(n=a[i],r=e[n],null!=r.length)&&o.push(r.length);return o}(),i.length||(i=function(){var i,r,s,a;for(s=Nn.keysEndingWith(e,"_"+t),a=[],(i=0,r=s.length);i<r;i++)n=s[i],a.push(1+Ae.apply(Math,e[n]));return a}()),i.length?Ae.apply(Math,i):0},Nn.numVertices=function(e){return Nn.numType(e,"vertices")},Nn.numEdges=function(e){return Nn.numType(e,"edges")},Nn.numFaces=function(e){return Nn.numType(e,"faces")},Nn.removeDuplicateEdges_vertices=function(e){var t,i,n,r,s,a,o;return s={},i=0,r=function(){var r,c,d,l;for(d=e.edges_vertices,l=[],(r=0,c=d.length);r<c;r++)t=d[r],a=t[0],o=t[1],n=a<o?a+","+o:o+","+a,n in s||(s[n]=i,i+=1),l.push(s[n]);return l}(),Nn.remapField(e,"edges",r),r},Nn.edges_verticesIncident=function(e,t){var i,n,r;for(i=0,n=e.length;i<n;i++)if(r=e[i],0<=Ln.call(t,r))return r;return null};var Cn=function(){var t=Math.round;function e(e,t){var i,n,r,s,a,o,c;for(this.vertices_coords=e,this.epsilon=t,this.hash={},o=this.vertices_coords,(c=r=0,s=o.length);r<s;c=++r)n=o[c],(null==(i=this.hash)[a=this.key(n)]?i[a]=[]:i[a]).push(c)}return e.prototype.lookup=function(e){var i,n,r,s,a,o,c,d,g,f,p,_,h,u,b,E,P,w;for(h=e[0],E=e[1],u=t(h/this.epsilon),P=t(E/this.epsilon),d=[u,u-1,u+1],(i=0,s=d.length);i<s;i++)for(b=d[i],g=[P,P-1,P+1],(r=0,a=g.length);r<a;r++)for(w=g[r],n=b+","+w,p=null==(f=this.hash[n])?[]:f,(c=0,o=p.length);c<o;c++)if(_=p[c],this.epsilon>An.dist(this.vertices_coords[_],e))return _;return null},e.prototype.key=function(e){var i,n,r,s,a;return n=e[0],s=e[1],r=t(n/this.epsilon),a=t(s/this.epsilon),i=r+","+a},e.prototype.insert=function(e){var t,i,n;return(n=this.lookup(e),null!=n)?n:((null==(t=this.hash)[i=this.key(e)]?t[i]=[]:t[i]).push(n=this.vertices_coords.length),this.vertices_coords.push(e),n)},e}();Nn.collapseNearbyVertices=function(e,t){var i,n,r;return r=new Cn([],t),n=function(){var t,n,s,a;for(s=e.vertices_coords,a=[],(t=0,n=s.length);t<n;t++)i=s[t],a.push(r.insert(i));return a}(),Nn.remapField(e,"vertices",n)},Nn.maybeAddVertex=function(e,t,n){var r;return r=An.closestIndex(t,e.vertices_coords),null!=r&&n>=An.dist(t,e.vertices_coords[r])?r:e.vertices_coords.push(t)-1},Nn.addVertexLike=function(e,t){var i,n,r,s,a;for(a=Nn.numVertices(e),s=Nn.keysStartingWith(e,"vertices_"),(i=0,r=s.length);i<r;i++)switch(n=s[i],n.slice(6)){case"vertices":break;default:e[n][a]=e[n][t];}return a},Nn.addEdgeLike=function(e,t,i,n){var r,s,a,o,c;for(r=e.edges_vertices.length,c=Nn.keysStartingWith(e,"edges_"),(s=0,o=c.length);s<o;s++)switch(a=c[s],a.slice(6)){case"vertices":e.edges_vertices.push([null==i?e.edges_vertices[t][0]:i,null==n?e.edges_vertices[t][1]:n]);break;case"edges":break;default:e[a][r]=e[a][t];}return r},Nn.addVertexAndSubdivide=function(t,n,r){var a,o,c,d,l,g,f,p,_,h;if(h=Nn.maybeAddVertex(t,n,r),a=[],h===t.vertices_coords.length-1)for(f=t.edges_vertices,c=l=0,g=f.length;l<g;c=++l)(o=f[c],!(0<=Ln.call(o,h)))&&(p=function(){var e,i,n;for(n=[],e=0,i=o.length;e<i;e++)_=o[e],n.push(t.vertices_coords[_]);return n}(),An.pointStrictlyInSegment(n,p)&&(d=Nn.addEdgeLike(t,c,h,o[1]),a.push(c,d),o[1]=h));return[h,a]},Nn.removeLoopEdges=function(e){var t;return Nn.remapFieldSubset(e,"edges",function(){var i,n,r,s;for(r=e.edges_vertices,s=[],(i=0,n=r.length);i<n;i++)t=r[i],s.push(t[0]!==t[1]);return s}())},Nn.subdivideCrossingEdges_vertices=function(t,r,a){var o,c,d,g,f,_,h,y,x,b,E,P,w,A,S,N,L,C,j,O,M,F,B,z,T,I,V,D,R,q;for(c=[[],[]],o=function(e,i,n,r){var s;return s=Nn.addEdgeLike(t,n,e,i),c[r].push(n,s)},y=null==a?0:a;y<t.edges_vertices.length;){for(f=t.edges_vertices[y],T=function(){var e,i,n;for(n=[],e=0,i=f.length;e<i;e++)D=f[e],n.push(t.vertices_coords[D]);return n}(),M=t.vertices_coords,(R=E=0,w=M.length);E<w;R=++E)(O=M[R],!(0<=Ln.call(f,R)))&&An.pointStrictlyInSegment(O,T)&&(o(R,f[1],y,0),f[1]=R);y++}for(q=new Cn(t.vertices_coords,r),x=null==a?0:a;x<t.edges_vertices.length;){for(_=t.edges_vertices[x],I=function(){var e,i,n;for(n=[],e=0,i=_.length;e<i;e++)R=_[e],n.push(t.vertices_coords[R]);return n}(),F=t.edges_vertices.slice(0,x),(b=P=0,A=F.length);P<A;b=++P)if(h=F[b],V=function(){var e,i,n;for(n=[],i=0,e=h.length;i<e;i++)R=h[i],n.push(t.vertices_coords[R]);return n}(),!Nn.edges_verticesIncident(_,h)&&An.segmentsCross(I,V)){if(d=An.lineIntersectLine(I,V),null==d)continue;g=q.insert(d),0<=Ln.call(_,g)&&0<=Ln.call(h,g)||(0>Ln.call(_,g)&&(o(g,_[1],x,0),_[1]=g,I[1]=t.vertices_coords[g]),0>Ln.call(h,g)&&(o(g,h[1],b,1),h[1]=g))}x++}for(j=Nn.removeDuplicateEdges_vertices(t),B=[0,1],(L=0,S=B.length);L<S;L++)y=B[L],c[y]=function(){var e,t,i,r;for(i=c[y],r=[],(t=0,e=i.length);t<e;t++)f=i[t],r.push(j[f]);return r}();for(j=Nn.removeLoopEdges(t),z=[0,1],(C=0,N=z.length);C<N;C++)y=z[C],c[y]=function(){var e,t,i,n;for(i=c[y],n=[],(t=0,e=i.length);t<e;t++)f=i[t],n.push(j[f]);return n}();return null==a?c[0].concat(c[1]):c},Nn.addEdgeAndSubdivide=function(t,n,r,s){var a,o,c,d,l,g,f,p,_,h,u,m,v;if(null!=n.length&&(_=Nn.addVertexAndSubdivide(t,n,s),n=_[0],o=_[1]),null!=r.length&&(h=Nn.addVertexAndSubdivide(t,r,s),r=h[0],c=h[1]),n===r)return[[],[]];for(u=t.edges_vertices,l=f=0,p=u.length;f<p;l=++f)if(d=u[l],d[0]===n&&d[1]===r||d[0]===r&&d[1]===n)return[[l],[]];return g=t.edges_vertices.push([n,r])-1,g?(a=Nn.subdivideCrossingEdges_vertices(t,s,g),0>Ln.call(a[0],g)&&a[0].push(g)):a=[[g],[]],null!=o&&(m=a[1]).push.apply(m,o),null!=c&&(v=a[1]).push.apply(v,c),a},Nn.cutEdges=function(s,a){var c,d,g,f,p,_,h,u,y,x,b,E,P,w,A,S,N,L,C,j,O,M,F,B,z,T,I,V,D,R,X,G,U,W,Y,Z,K,H,Q,J,$,ee,te,ne,re,se,ae,oe,ce;for(ce=[],X=Nn.boundaryEdges(s),(w=0,S=X.length);w<S;w++)for(f=X[w],G=s.edges_vertices[f],(A=0,N=G.length);A<N;A++)re=G[A],(null==ce[re]?ce[re]=[]:ce[re]).push(f);for(B=0,L=a.length;B<L;B++){for(p=a[B],_=Nn.addEdgeLike(s,p),W=s.edges_vertices[p],(u=z=0,C=W.length);z<C;u=++z)re=W[u],oe=s.vertices_edges[re],oe.splice(oe.indexOf(p)+u,0,_);for(Y=s.edges_vertices[p],u=V=0,j=Y.length;V<j;u=++V)if(se=Y[u],te=s.edges_vertices[p][1-u],ne=s.edges_vertices[_][1-u],g=null==(Z=ce[se])?void 0:Z.length,2<=g){if(2<g)throw new Error(ce[se].length+" boundary edges at vertex "+se);if(K=ce[se],c=K[0],d=K[1],I=s.vertices_edges[se],y=I.indexOf(c),x=I.indexOf(d),x===(y+1)%I.length)0!==x&&(I=I.slice(x).concat(I.slice(0,+y+1||9e9)));else if(y===(x+1)%I.length)0!==y&&(I=I.slice(y).concat(I.slice(0,+x+1||9e9)));else throw new Error("Nonadjacent boundary edges at vertex "+se);for(E=I.indexOf(p),P=I.indexOf(_),b=we(E,P),s.vertices_edges[se]=I.slice(0,+b+1||9e9),ae=Nn.addVertexLike(s,se),s.vertices_edges[ae]=I.slice(1+b),H=s.vertices_edges[ae],(D=0,O=H.length);D<O;D++)T=H[D],h=s.edges_vertices[T],h[h.indexOf(se)]=ae}for(null!=(Q=s.edges_assignment)&&(Q[p]="B"),null!=(J=s.edges_assignment)&&(J[_]="B"),$=s.edges_vertices[p],(u=R=0,M=$.length);R<M;u=++R)re=$[u],(null==ce[re]?ce[re]=[]:ce[re]).push(p);for(U=s.edges_vertices[_],u=ee=0,F=U.length;ee<F;u=++ee)re=U[u],(null==ce[re]?ce[re]=[]:ce[re]).push(_)}return delete s.vertices_vertices,s},Nn.edges_vertices_to_vertices_vertices=function(e){var t,i,n,r,s,a,o,c;for(r=Nn.numVertices(e),o=function(){var e,t,i;for(i=[],a=e=0,t=r;0<=t?e<t:e>t;a=0<=t?++e:--e)i.push([]);return i}(),s=e.edges_vertices,(i=0,n=s.length);i<n;i++){for(t=s[i],a=t[0],c=t[1];a>=o.length;)o.push([]);for(;c>=o.length;)o.push([]);o[a].push(c),o[c].push(a)}return o};var jn={},On=function(e,t){return(+e%(t=+t)+t)%t},Mn={}.hasOwnProperty;jn.edges_vertices_to_vertices_vertices_unsorted=function(e){return e.vertices_vertices=Nn.edges_vertices_to_vertices_vertices(e),e},jn.edges_vertices_to_vertices_vertices_sorted=function(e){return jn.edges_vertices_to_vertices_vertices_unsorted(e),jn.sort_vertices_vertices(e)},jn.edges_vertices_to_vertices_edges_sorted=function(e){return jn.edges_vertices_to_vertices_vertices_sorted(e),jn.vertices_vertices_to_vertices_edges(e)},jn.sort_vertices_vertices=function(e){var t,i,n,r,s;if(2!==(null==(i=e.vertices_coords)||null==(n=i[0])?void 0:n.length))throw console.log("fold.vertices_coords",e.vertices_coords),new Error("sort_vertices_vertices: Vertex coordinates missing or not two dimensional");for(s in null==e.vertices_vertices&&jn.edges_vertices_to_vertices_vertices(e),r=e.vertices_vertices,r)t=r[s],An.sortByAngle(t,s,function(t){return e.vertices_coords[t]});return e},jn.vertices_vertices_to_faces_vertices=function(e){var t,n,r,s,a,o,c,d,g,f,p,_,h,m,y,b,E,P,A,S;for(p={},_=e.vertices_vertices,(P=r=0,c=_.length);r<c;P=++r)for(f=_[P],n=s=0,d=f.length;s<d;n=++s)b=f[n],p[b+","+P]=f[On(n-1,f.length)];for(e.faces_vertices=[],h=function(){var e;for(a in e=[],p)e.push(a);return e}(),(o=0,g=h.length);o<g;o++)if(E=h[o],A=p[E],null!=A){for(p[E]=null,m=E.split(","),b=m[0],P=m[1],b=parseInt(b),P=parseInt(P),t=[b,P];A!==t[0];){if(null==A){console.warn("Confusion with face "+t);break}t.push(A),y=[P,A],b=y[0],P=y[1],A=p[b+","+P],p[b+","+P]=null}p[t[t.length-1]+","+t[0]]=null,null!=A&&0<An.polygonOrientation(function(){var i,n,r;for(r=[],n=0,i=t.length;n<i;n++)S=t[n],r.push(e.vertices_coords[S]);return r}())&&e.faces_vertices.push(t)}return e},jn.vertices_edges_to_faces_vertices_edges=function(t){var n,r,s,a,o,c,d,g,f,p,_,h,u,y,b,E,P,w,A,S,N,L;for(b=[],P=t.vertices_edges,(A=c=0,f=P.length);c<f;A=++c)for(y=P[A],b[A]={},(o=d=0,p=y.length);d<p;o=++d)n=y[o],b[A][n]=y[On(o-1,y.length)];for(t.faces_vertices=[],t.faces_edges=[],(S=g=0,_=b.length);g<_;S=++g)for(r in E=b[S],E)if(s=E[r],null!=s){if(r=parseInt(r),E[r]=null,a=[r],N=[Nn.edges_verticesIncident(t.edges_vertices[r],t.edges_vertices[s])],null==N[0])throw new Error("Confusion at edges "+r+" and "+s);for(;s!==a[0];){if(null==s){console.warn("Confusion with face containing edges "+a);break}for(a.push(s),w=t.edges_vertices[s],(u=0,h=w.length);u<h;u++)if(A=w[u],A!==N[N.length-1]){N.push(A);break}r=s,s=b[A][r],b[A][r]=null}null!=s&&0<An.polygonOrientation(function(){var e,i,r;for(r=[],i=0,e=N.length;i<e;i++)L=N[i],r.push(t.vertices_coords[L]);return r}())&&(t.faces_vertices.push(N),t.faces_edges.push(a))}return t},jn.edges_vertices_to_faces_vertices=function(e){return jn.edges_vertices_to_vertices_vertices_sorted(e),jn.vertices_vertices_to_faces_vertices(e)},jn.edges_vertices_to_faces_vertices_edges=function(e){return jn.edges_vertices_to_vertices_edges_sorted(e),jn.vertices_edges_to_faces_vertices_edges(e)},jn.vertices_vertices_to_vertices_edges=function(e){var t,n,r,s,a,o,c,d,l,g,f;for(n={},o=e.edges_vertices,(t=s=0,a=o.length);s<a;t=++s)c=o[t],d=c[0],l=c[1],n[d+","+l]=t,n[l+","+d]=t;return e.vertices_edges=function(){var t,i,s,a;for(s=e.vertices_vertices,a=[],(g=t=0,i=s.length);t<i;g=++t)f=s[g],a.push(function(){var e,t,i;for(i=[],r=e=0,t=f.length;0<=t?e<t:e>t;r=0<=t?++e:--e)i.push(n[g+","+f[r]]);return i}());return a}()},jn.faces_vertices_to_faces_edges=function(e){var t,n,r,s,a,o,c,d,l,g,f;for(n={},c=e.edges_vertices,(t=a=0,o=c.length);a<o;t=++a)d=c[t],l=d[0],g=d[1],n[l+","+g]=t,n[g+","+l]=t;return e.faces_edges=function(){var t,i,a,o;for(a=e.faces_vertices,o=[],(r=t=0,i=a.length);t<i;r=++t)f=a[r],o.push(function(){var e,t,i;for(i=[],s=e=0,t=f.length;0<=t?e<t:e>t;s=0<=t?++e:--e)i.push(n[f[s]+","+f[(s+1)%f.length]]);return i}());return o}()},jn.faces_vertices_to_edges=function(e){var t,n,r,s,a,o,c,d,l;for(r in e.edges_vertices=[],e.edges_faces=[],e.faces_edges=[],e.edges_assignment=[],n={},o=e.faces_vertices,o)l=o[r],r=parseInt(r),e.faces_edges.push(function(){var i,o,g;for(g=[],s=i=0,o=l.length;i<o;s=++i)c=l[s],c=parseInt(c),d=l[(s+1)%l.length],a=c<=d?c+","+d:d+","+c,a in n?t=n[a]:(t=n[a]=e.edges_vertices.length,c<=d?e.edges_vertices.push([c,d]):e.edges_vertices.push([d,c]),e.edges_faces.push([null,null]),e.edges_assignment.push("B")),c<=d?e.edges_faces[t][0]=r:e.edges_faces[t][1]=r,g.push(t);return g}());return e},jn.deepCopy=function(t){var i,n,r,s,a,o,c,d;if("number"===(o=e(t))||"string"===o||"boolean"===o)return t;if(Array.isArray(t)){for(c=[],r=0,a=t.length;r<a;r++)n=t[r],c.push(jn.deepCopy(n));return c}for(s in i={},t)Mn.call(t,s)&&(d=t[s],i[s]=jn.deepCopy(d));return i},jn.toJSON=function(e){var t,i,n;return"{\n"+function(){var r=[];for(var s=Object.keys(e),a=0;a<s.length;a++)t=s[a],n=e[t],r.push("  "+JSON.stringify(t)+": "+(Array.isArray(n)?"[\n"+function(){var e,t,r;for(r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push("    "+JSON.stringify(i));return r}().join(",\n")+"\n  ]":JSON.stringify(n)));return r}().join(",\n")+"\n}\n"},jn.extensions={},jn.converters={},jn.getConverter=function(e,t){return e===t?function(e){return e}:jn.converters[""+e+t]},jn.setConverter=function(e,t,i){return jn.extensions[e]=!0,jn.extensions[t]=!0,jn.converters[""+e+t]=i},jn.convertFromTo=function(e,t,i){var n;if("."!==t[0]&&(t="."+t),"."!==i[0]&&(i="."+i),n=jn.getConverter(t,i),null==n){if(t===i)return e;throw new Error("No converter from "+t+" to "+i)}return n(e)},jn.convertFrom=function(e,t){return jn.convertFromTo(e,t,".fold")},jn.convertTo=function(e,t){return jn.convertFromTo(e,".fold",t)};var Fn=function(e){var t=e.edges_vertices;if(t){var n=[];return t.forEach(function(e,t){return e.forEach(function(e){void 0===n[e]&&(n[e]=[]),n[e].push(t)})}),n}},Bn=function(e){var t=e.faces_vertices;if(t){var i=t.length,n=Array.from(Array(i)).map(function(){return[]}),r={};return t.forEach(function(e,t){if(void 0!==e){var s=e.length;e.forEach(function(e,a,i){var o=i[(a+1)%s];if(o<e){var c=[o,e];e=c[0],o=c[1]}var d="".concat(e," ").concat(o);if(d in r){var l=r[d];n[t].push(l),n[l].push(t)}else r[d]=t})}}),n}},zn=function(e){var t=e.edges_vertices,n=e.vertices_edges;return t&&n?t.map(function(e,t){var i=e[0],r=e[1],s=n[i].filter(function(i){return i!==t}),a=n[r].filter(function(i){return i!==t});return s.concat(a)}):void 0},Tn=function(e){var t=e.edges_vertices,i=e.faces_edges;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(t,i){return n[i].push(t)})}),n}},In=function(e){var t=e.vertices_coords,i=e.edges_vertices;return t&&i?i.map(function(e){return e.map(function(e){return t[e]})}).map(function(e){var t;return(t=qi.core).distance.apply(t,n(e))}):void 0},Vn={M:-180,m:-180,V:180,v:180},Dn=function(e){var t=e.edges_vertices;if(!t)return{};var n={};return t.map(function(e){return e.sort(function(e,t){return e-t}).join(" ")}).forEach(function(e,t){n[e]=t}),n},Rn=function(e){var t=e.vertices_coords,i=e.faces_vertices;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(e,t){return n[t].push(e)})}),n}},qn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=Dn(e),n=Bn(e);if(0>=n.length)return[];var r=[t],s=[[{face:t,parent:void 0,edge:void 0,level:0}]];do s[s.length]=s[s.length-1].map(function(t){var s=n[t.face].filter(function(e){return-1===r.indexOf(e)});return r=r.concat(s),s.map(function(n){var r=e.faces_vertices[n].filter(function(i){return-1!==e.faces_vertices[t.face].indexOf(i)}).sort(function(e,t){return e-t}),s=i[r.join(" ")];return{face:n,parent:t.face,edge:s,edge_vertices:r}})}).reduce(function(e,t){return e.concat(t)},[]);while(0<s[s.length-1].length);return 0<s.length&&0===s[s.length-1].length&&s.pop(),s},Xn=function(e){return"f"===e||"F"===e||"u"===e||"U"===e},Gn=function(e,t){if(null!=e.faces_vertices&&null!=e.edges_vertices){var i=!0=="edges_assignment"in e,n=i?e.edges_assignment.map(function(e){return!Xn(e)}):e.edges_vertices.map(function(){return!0}),r=e.faces_vertices.map(function(){return[1,0,0,1,0,0]});return qn(e,t).forEach(function(t){t.filter(function(e){return null!=e.parent}).forEach(function(t){var i=t.edge_vertices.map(function(t){return e.vertices_coords[t]}),s=[i[1][0]-i[0][0],i[1][1]-i[0][1]],a=n[t.edge]?qi.core.make_matrix2_reflection(s,i[0]):[1,0,0,1,0,0];r[t.face]=qi.core.multiply_matrices2(r[t.parent],a)})}),r}},Un=function(e,t){var i=!0=="edges_assignment"in e?e.edges_assignment.map(function(e){return!Xn(e)}):e.edges_vertices.map(function(){return!0}),n=e.faces_vertices.map(function(){return[1,0,0,1,0,0]});return qn(e,t).forEach(function(t){t.filter(function(e){return null!=e.parent}).forEach(function(t){var r=t.edge_vertices.map(function(t){return e.vertices_coords[t]}),s=[r[1][0]-r[0][0],r[1][1]-r[0][1]],a=i[t.edge]?qi.core.make_matrix2_reflection(s,r[0]):[1,0,0,1,0,0];n[t.face]=qi.core.multiply_matrices2(a,n[t.parent])})}),n},Wn=function(e,t,n){if(null!=e.vertices_coords){if(null==t&&(t=0),null==n)n=Gn(e,t);else{var r=null==e.faces_vertices?e.faces_edges:e.faces_vertices,s=null==r?0:r.length;n.length!==s&&(n=Gn(e,t))}var a=e.vertices_coords.map(function(n,r){for(var i=0;i<e.faces_vertices.length;i+=1)if(e.faces_vertices[i].includes(r))return i;return t});return e.vertices_coords.map(function(e,t){return qi.core.multiply_matrix2_vector2(n[a[t]],e).map(function(e){return qi.core.clean_number(e)})})}},Yn=function(e){var t=Fn(e),i=e.edges_assignment.map(function(e){return"b"===e||"B"===e});return t.map(function(e){return e.map(function(t){return i[t]}).reduce(function(e,t){return e||t},!1)})},Zn=function(e){return e.map(function(e){return e[0]*e[3]-e[1]*e[2]}).map(function(e){return 0<=e})},Kn=/*#__PURE__*/Object.freeze({__proto__:null,make_vertices_edges:Fn,make_edges_vertices:function(e){var t=e.edges_vertices,i=e.faces_edges;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(t,i){return n[i].push(t)})}),n}},make_faces_faces:Bn,make_edges_edges:zn,make_edges_faces:Tn,make_edges_length:In,make_edges_foldAngle:function(e){var t=e.edges_assignment;return t?t.map(function(e){return Vn[e]||0}):void 0},make_vertex_pair_to_edge_map:Dn,make_vertices_faces:Rn,make_face_walk_tree:qn,make_faces_matrix:Gn,make_faces_matrix_inv:Un,make_vertices_coords_folded:Wn,make_vertices_isBoundary:Yn,make_faces_coloring_from_faces_matrix:Zn,make_faces_coloring:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=[];return n[t]=!0,qn(e,t).forEach(function(e,t){return e.forEach(function(e){n[e.face]=0==t%2})}),n}}),Hn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ae.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},Qn=function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return Hn([],t,i,n)},Jn=function(e){var t=e.edges_vertices,i=e.edges_faces;return Hn([],t,i)},$n=function(e){var t=e.faces_vertices,i=e.faces_edges;return Hn([],t,i)},er=function(e){var t=e.faces_vertices,i=e.edges_vertices,n=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(t){t>n&&(n=t)})})}),n+1},tr=function(e,t){var i=e.vertices_coords;if(void 0!==i&&0!==i.length){var r=n(t);return null==r[2]&&(r[2]=0),i.map(function(e){return e.map(function(e,t){return Me(e-r[t],2)}).reduce(function(e,t){return e+t},0)}).map(function(e,t){return{d:Oe(e),i:t}}).sort(function(e,t){return e.d-t.d}).shift().i}},ir=function(e,t){var n=e.vertices_coords,r=e.edges_vertices;if(null!=n&&0!==n.length&&null!=r&&0!==r.length){for(var s=function(e){return e<-qi.core.EPSILON?0:e>1+qi.core.EPSILON?1:e},a=r.map(function(t){return t.map(function(e){return n[e]})}).map(function(t){return[t[0],[t[1][0]-t[0][0],t[1][1]-t[0][1]]]}).map(function(e){return qi.core.nearest_point_on_line(e[0],e[1],t,s)}).map(function(e,n){return{p:e,i:n,d:qi.core.distance2(t,e)}}),o=1/0,c=0,d;c<a.length;c+=1)a[c].d<o&&(d=c,o=a[c].d);return d}},nr=function(e,t){var i=e.vertices_coords,n=e.faces_vertices;if(null!=i&&0!==i.length&&null!=n&&0!==n.length){var r=n.map(function(e,t){return{face:e.map(function(e){return i[e]}),i:t}}).filter(function(e){return qi.core.point_in_poly(t,e.face)}).shift();return null==r?void 0:r.i}},rr=function(e,t){var i=e.vertices_coords,n=e.faces_vertices;return n.map(function(e,t){return{face:e.map(function(e){return i[e]}),i:t}}).filter(function(e){return qi.core.point_in_poly(t,e.face)}).map(function(e){return e.i})},sr=function(e,t){if(null==t&&(t=Array.from(Array($n(e))).map(function(e,t){return t})),0!==t.length){if(1===t.length)return t[0];for(var n=e["faces_re:layer"].map(function(e,t){return{layer:e,i:t}}).sort(function(e,t){return t.layer-e.layer}).map(function(e){return e.i}),r=0;r<n.length;r+=1)if(t.includes(n[r]))return n[r]}},ar=function(t){for(var n=t.edges_vertices,r=t.vertices_coords,s=r.length,a=Array(s).fill(!0),o=s,c=0;c<n.length&&0<o;c+=1)for(var d=0,l;d<n[c].length;d+=1)l=n[c][d],a[l]&&(o-=1,a[l]=!1);return 0===o?[]:a.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},or=function(e){for(var t=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},n=Array.from(Array(e.edges_vertices.length)).map(function(){return[]}),r=0;r<e.edges_vertices.length-1;r+=1)for(var s=r+1;s<e.edges_vertices.length;s+=1)n[r][s]=t(e.edges_vertices[r],e.edges_vertices[s]);var a=e.edges_vertices.map(function(){});n.forEach(function(e,t){return e.forEach(function(e,i){e&&(a[i]=void 0===a[t]?t:a[t])})});var o=a.map(function(e){return void 0!==e});return a.forEach(function(e,t){void 0===e&&(a[t]=t)}),o.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},cr=/*#__PURE__*/Object.freeze({__proto__:null,vertices_count:Qn,edges_count:Jn,faces_count:$n,implied_vertices_count:er,implied_edges_count:function(e){var t=e.faces_edges,i=e.vertices_edges,n=e.edgeOrders,r=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(t){t>r&&(r=t)})})}),void 0!==n&&n.forEach(function(e){return e.forEach(function(t,e){2!==e&&t>r&&(r=t)})}),r+1},implied_faces_count:function(e){var t=e.vertices_faces,i=e.edges_faces,n=e.facesOrders,r=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(e){e>r&&(r=e)})})}),void 0!==n&&n.forEach(function(e){return e.forEach(function(e,t){2!==t&&e>r&&(r=e)})}),r+1},nearest_vertex:tr,nearest_edge:ir,face_containing_point:nr,folded_faces_containing_point:function(e,t,i){var n=e.vertices_coords,r=e.faces_vertices,s=i.map(function(e){return qi.core.multiply_matrix2_vector2(e,t)});return r.map(function(e,t){return{face:e.map(function(e){return n[e]}),i:t}}).filter(function(e,t){return qi.core.intersection.point_in_poly(s[t],e.face)}).map(function(e){return e.i})},faces_containing_point:rr,topmost_face:sr,get_collinear_vertices:function(e){var t=e.edges_vertices,i=e.vertices_coords,n=Fn({edges_vertices:t});return Array.from(Array(i.length)).map(function(e,t){return t}).filter(function(){return 2===n.length}).map(function(e){var t=n[e],r=t[0][0]===e?t[0][1]:t[0][0],s=t[1][0]===e?t[1][1]:t[1][0],a=qi.core.distance2(i[r],i[e]),o=qi.core.distance2(i[s],i[e]),c=qi.core.distance2(i[r],i[s]);return Ne(c-a-o)<qi.core.EPSILON?e:void 0}).filter(function(e){return void 0!==e})},get_isolated_vertices:ar,get_duplicate_vertices:function(e){for(var t=e.vertices_coords,n=Array.from(Array(t.length)).map(function(){return[]}),r=0;r<t.length-1;r+=1)for(var s=r+1;s<t.length;s+=1)n[r][s]=qi.core.equivalent_vectors(t[r],t[s]);var a=t.map(function(){});n.forEach(function(e,t){return e.forEach(function(e,i){e&&(a[i]=void 0===a[t]?t:a[t])})});var o=a.map(function(e){return void 0!==e});return a.forEach(function(e,t){void 0===e&&(a[t]=t)}),o.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},get_duplicate_edges:function(e){for(var t=e.edges_vertices,n=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},r=Array.from(Array(t.length)).map(function(){return[]}),s=0;s<t.length-1;s+=1)for(var a=s+1;a<t.length;a+=1)r[s][a]=n(t[s],t[a]);var o=[];return r.forEach(function(e,t){return e.forEach(function(e,i){e&&(o[i]=void 0===o[t]?t:o[t])})}),o},get_duplicate_edges_old:or,find_collinear_face_edges:function(e,t,i){var n=t.map(function(e){return i[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]});return e.map(function(r){var s=n.map(function(e,t){return{index:t,edge:e}}).filter(function(t){return qi.core.intersection.point_on_edge(t.edge[0],t.edge[1],r)}).shift().index;return[t[s],t[(s+1)%t.length]].sort(function(e,t){return e-t})})}}),dr=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"number",n=!0;return t.forEach(function(t){t.forEach(function(t){if(e(t)!==i)return void(n=!1)})}),n},lr=function(e){return e.map(function(e){return e.map(function(e){return!isNaN(e)}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},gr=function(e,t){return e.map(function(e){return e.map(function(e){return t(e)}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},fr={};fr.vertices_coords=function(e){var t=e.vertices_coords;return null!=t&&dr(t,"number")&&lr(t)},fr.vertices_vertices=function(e){var t=e.vertices_coords,i=e.vertices_vertices,n=e.edges_vertices;if(null==i)return!1;var r=i.map(function(e){return e.length}).reduce(function(e,t){return e+t},0);if(1<Ne(1*r-2*n.length)&&console.warn("Validate.vertices_vertices, expected array length deviated by more than 1"),null!=i){if(i.length!==t.length)return!1;var s=i.map(function(e,t){return e.map(function(e){return[t,e]})}).reduce(function(e,t){return e.concat(t)},[]);return 0===s.map(function(t){return 0<n.filter(function(i){return t[0]===i[0]&&t[1]===i[1]||t[0]===i[1]&&t[1]===i[0]}).length}).map(function(e,t){return{test:e,i:t}}).filter(function(e){return!e.test}).length}return!1},fr.vertices_faces=function(e){var t=e.vertices_faces,n=e.faces_vertices;return null!=n&&null!=t&&0===t.map(function(e,t){return e.map(function(e){return{test:-1!==n[e].indexOf(t),face:e,i:t}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]).length},fr.edges_vertices=function(e){var t=e.vertices_coords,i=e.edges_vertices;if(null==t)return!0;var r=t.length;return null!=i&&dr(i,"number")&&lr(i)&&gr(i,function(e){return e<r})},fr.edges_faces=function(e){var t=e.edges_faces,i=e.faces_edges;return!1},fr.faces_faces=function(){return!1},fr.vertices_edges=function(){return!1},fr.edges_assignment=function(e){var t=e.edges_vertices,i=e.edges_assignment;return null!=t&&null!=i&&i.length===t.length&&i.filter(function(e){return Zi.includes(e)}).reduce(function(e,t){return e&&t},!0)},fr.edges_foldAngle=function(){return!1},fr.edges_length=function(){return!1},fr.faces_vertices=function(e){var t=e.vertices_faces,i=e.faces_vertices;return null!=t&&0===i.map(function(e,n){return e.map(function(e){return{test:-1!==t[e].indexOf(n),face:e,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]).length},fr.faces_edges=function(){return!1};var pr=function(t){if("object"!==e(t)||null===t)return!1;for(var n=Object.keys(t),r=0;r<n.length;r+=1)if(Yi.includes(n[r]))return!0;return!1},_r=function(e){var t={vertices:["coords","vertices","faces"],edges:["vertices","faces","assignment","foldAngle","length"],faces:["vertices","edges"]};["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","faces_vertices","faces_edges"].filter(function(t){return t in e}).forEach(function(t){if(e[t].map(function(e){return 0<e.filter(function(e){return null==e}).length}).reduce(function(e,t){return e||t},!1))throw new Error("".concat(t," contains a null"))}),["edges_assignment","edges_foldAngle","edges_length"].filter(function(t){return t in e}).forEach(function(t){if(0<e[t].filter(function(e){return null==e}).length)throw new Error("".concat(t," contains a null"))});var i=Object.keys(t).map(function(e){return{prefix:e,suffixes:t[e]}}).map(function(t){return t.suffixes.map(function(e){return"".concat(t.prefix,"_").concat(e)}).filter(function(t){return null!=e[t]}).map(function(t,i,n){return e[t].length===e[n[0]].length}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0);if(!i)throw new Error("validate failed: arrays with common keys have mismatching lengths");var n={vertices:e.vertices_coords.length,edges:e.edges_vertices.length,faces:e.faces_vertices.length||e.faces_edges.length},r=Object.keys(t).map(function(e){return{prefix:e,suffixes:t[e]}}).map(function(t){return t.suffixes.map(function(e){return{key:"".concat(t.prefix,"_").concat(e),suffix:e}}).filter(function(t){return null!=e[t.key]&&null!=n[t.suffix]}).map(function(t){return{key:t.key,test:e[t.key].reduce(function(e,i){return i.reduce(function(e,i){return e&&i<n[t.suffix]},!0)},!0)}})}).reduce(function(e,t){return e.concat(t)},[]);if(r.filter(function(e){return!e.test}).forEach(function(t){throw console.log(e),new Error("".concat(t.key," contains a index too large, larger than the reference array to which it points"))}),"vertices_vertices"in e){var s=e.vertices_vertices.map(function(e,t){return e.map(function(e){return[t,e]})}).reduce(function(e,t){return e.concat(t)},[]),a=s.map(function(t){return 0<e.edges_vertices.filter(function(i){return t[0]===i[0]&&t[1]===i[1]||t[0]===i[1]&&t[1]===i[0]}).length}).map(function(e,t){return{test:e,i:t}}).filter(function(e){return!e.test});if(0<a.length)throw new Error("vertices_vertices at index ".concat(a[0].i," declares an edge that doesn't exist in edges_vertices"))}if("vertices_faces"in e){var o=e.vertices_faces.map(function(t,n){return t.map(function(t){return{test:-1!==e.faces_vertices[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);if(0<o.length)throw new Error("vertex ".concat(o[0].i," in vertices_faces connects to face ").concat(o[0].face,", whereas in faces_vertices this same connection in reverse doesn't exist."))}if("edges_faces"in e){var c=e.edges_faces.map(function(t,n){return t.map(function(t){return{test:-1!==e.faces_edges[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);if(0<c.length)throw new Error("edges_faces ".concat(c[0].i," connects to face ").concat(c[0].face,", whereas in faces_edges this same connection in reverse doesn't exist."))}if("faces_vertices"in e&&"vertices_faces"in e)e.faces_vertices.map(function(t,n){return t.map(function(t){return{test:-1!==e.vertices_faces[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);return!0},hr=/*#__PURE__*/Object.freeze({__proto__:null,arrayOfType:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"number",n=!0;return t.forEach(function(t){if(e(t)!==i)return void(n=!1)}),n},arrayOfArrayOfType:dr,possibleFoldObject:pr,default:fr,validate_first:_r}),ur=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qi.core.EPSILON;["vertices_vertices","vertices_edges","vertices_faces","edges_faces","edges_edges","faces_vertices","faces_edges","faces_faces"].filter(function(t){return t in e}).forEach(function(t){return delete e[t]}),Object.keys(e).filter(function(e){return e.includes("re:")}).forEach(function(t){return delete e[t]});var i=xn(e,t);_n(i,"edges",or(i)),jn.edges_vertices_to_vertices_vertices_sorted(i),jn.vertices_vertices_to_faces_vertices(i),jn.faces_vertices_to_faces_edges(i),i.edges_faces=Tn(i),i.vertices_faces=Rn(i),i.edges_length=In(i),Object.assign(e,i),fr.edges_assignment(e)||(e.edges_assignment=Array(e.edges_vertices.length).fill("F")),!1=="file_spec"in e&&(e.file_spec=1.1),!1=="frame_attributes"in e&&(e.frame_attributes=["2D"]),!1=="frame_classes"in e&&(e.frame_classes=["creasePattern"])},mr=function(t){if("object"===e(t)){if(null==t.vertices_vertices&&(t.vertices_coords&&t.edges_vertices?jn.edges_vertices_to_vertices_vertices_sorted(t):t.edges_vertices&&jn.edges_vertices_to_vertices_vertices_unsorted(t)),null==t.faces_vertices&&t.vertices_coords&&t.vertices_vertices&&jn.vertices_vertices_to_faces_vertices(t),null==t.faces_edges&&t.faces_vertices&&jn.faces_vertices_to_faces_edges(t),null==t.edges_faces){var i=Tn(t);void 0!==i&&(t.edges_faces=i)}if(null==t.vertices_faces){var n=Rn(t);void 0!==n&&(t.vertices_faces=n)}if(null==t.edges_length){var r=In(t);void 0!==r&&(t.edges_length=r)}if(null==t.edges_foldAngle&&null!=t.edges_assignment&&(t.edges_foldAngle=t.edges_assignment.map(function(e){return Qi(e)})),null==t.edges_assignment&&null!=t.edges_foldAngle&&(t.edges_assignment=t.edges_foldAngle.map(function(e){return 0===e?"F":0>e?"M":0<e?"V":"U"})),null==t.faces_faces){var s=Bn(t);void 0!==s&&(t.faces_faces=s)}if(null==t.vertices_edges){var a=Fn(t);void 0!==a&&(t.vertices_edges=a)}if(null==t.edges_edges){var o=zn(t);void 0!==o&&(t.edges_edges=o)}}},vr=function t(n){var r,s;if("object"!==e(n))return n;if(!n)return n;if("[object Array]"===Object.prototype.toString.apply(n)){for(r=[],s=0;s<n.length;s+=1)r[s]=t(n[s]);return r}for(s in r={},n)n.hasOwnProperty(s)&&(r[s]=t(n[s]));return r},yr=/*#__PURE__*/Object.freeze({__proto__:null,clone:vr,recursive_freeze:function t(i){return(Object.freeze(i),void 0===i)?i:(Object.getOwnPropertyNames(i).filter(function(t){return null!==i[t]&&("object"===e(i[t])||"function"==typeof i[t])&&!Object.isFrozen(i[t])}).forEach(function(e){return t(i[e])}),i)}}),kr=function(e,t,i){Object.defineProperty(e,"degree",{get:function(){return i.vertices_vertices&&i.vertices_vertices[t]?i.vertices_vertices[t].length:null}})},xr=function(e,t,i){Object.defineProperty(e,"simple",{get:function(){if(!i.faces_vertices||!i.faces_vertices[t])return null;for(var n=0;n<e.length-1;n+=1)for(var r=n+1;r<e.length;r+=1)if(i.faces_vertices[t][n]===i.faces_vertices[t][r])return!1;return!0}})},br=function(e,t,i){kr(e,t,i)},Er=function(e,t,i){xr(e,t,i)},Pr=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.copy=function(){return Object.assign(Object.create(e()),vr(this))};return t.clean=function(){wn(this)},t.populate=function(){mr(this)},t.fragment=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e-6;xn(this,e)},t.rebuild=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e-6;ur(this,e)},t.load=function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!0!==i.append&&Yi.forEach(function(e){return delete t[e]}),Object.assign(this,{file_spec:Xi,file_creator:Gi},vr(e))},t.clear=function(){var e=this;Wi.graph.forEach(function(t){return delete e[t]})},t.nearestVertex=function(){var e=tr(this,(i=qi.core).get_vector.apply(i,arguments)),t=tn(this,"vertices",e),i;return br(t,e,this),t.index=e,t},t.nearestEdge=function(){var e=ir(this,(i=qi.core).get_vector.apply(i,arguments)),t=tn(this,"edges",e),i;return t.index=e,t},t.nearestFace=function(){var e=nr(this,(t=qi.core).get_vector.apply(t,arguments)),t;if(void 0!==e){var i=tn(this,"faces",e);return Er(i,e,this),i.index=e,i}},t.nearest=function(){var e=(i=qi.core).get_vector.apply(i,arguments),t={vertex:this.nearestVertex(this,e),edge:this.nearestEdge(this,e),face:this.nearestFace(this,e)},i;return Object.keys(t).filter(function(e){return null==t[e]}).forEach(function(e){return delete t[e]}),t},Object.defineProperty(t,"vertices",{get:function(){var e=this,t=en(this,"vertices"),i=0===t.length?Array.from(Array(er(this))).map(function(){return{}}):t;return i.forEach(function(t,n){return br(t,n,e)}),i}}),Object.defineProperty(t,"edges",{get:function(){return en(this,"edges")}}),Object.defineProperty(t,"faces",{get:function(){var e=this,t=en(this,"faces");return t.forEach(function(t,n){return Er(t,n,e)}),t}}),Object.freeze(t)},wr="undefined"!=typeof window&&"undefined"!=typeof window.document,Ar="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,Nr=function(){var e={};if(Ar){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else wr&&(e=window);return e}(),Lr="http://www.w3.org/2000/svg",Cr=function(e,t){var i=new window.Blob([t],{type:"text/plain"}),n=document.createElement("a");n.setAttribute("href",window.URL.createObjectURL(i)),n.setAttribute("download",e),document.body.appendChild(n),n.click(),n.remove()},jr=function(){for(var e=[],t=0,i;t<document.styleSheets.length;t+=1){i=document.styleSheets[t];try{for(var n=("cssRules"in i)?i.cssRules:i.rules,a=0,o;a<n.length;a+=1)o=n[a],"cssText"in o?e.push(o.cssText):e.push("".concat(o.selectorText," {\n").concat(o.style.cssText,"\n}\n"))}catch(e){console.warn(e)}}return e.join("\n")},Or=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"image.svg",i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(i){var n=document.createElementNS(Lr,"style");n.setAttribute("type","text/css"),n.innerHTML=jr(),e.appendChild(n)}var r=new XMLSerializer().serializeToString(e),s=j(r);return null!=window&&Cr(t,s),s},Mr=function(e,t){if("string"==typeof e||e instanceof String){var i=new DOMParser().parseFromString(e,"text/xml"),n=i.getElementsByTagName("parsererror");if(0===n.length){var r=i.documentElement;return null!=t&&t(r),r}fetch(e).then(function(e){return e.text()}).then(function(e){return new DOMParser().parseFromString(e,"text/xml")}).then(function(e){var i=e.getElementsByTagName("svg");if(null==i||0===i.length)throw new Error("error, valid XML found, but no SVG element");return null!=t&&t(i[0]),i[0]})}else if(e instanceof Document)return t(e),e},Fr=Object.freeze({__proto__:null,save:Or,load:Mr}),Br=function(e,t){Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]}).forEach(function(i){t[i]=e[i].bind(e)});var i=["svg","style","setPoints","setArc","setEllipticalArc","setBezier"];Object.keys(Nr.SVG).filter(function(e){return void 0===t[e]}).filter(function(e){return-1===i.indexOf(e)}).forEach(function(e){t[e]=Nr.SVG[e]}),Object.defineProperty(Nr,"mousePressed",{set:function(t){e.mousePressed=t},get:function(){return e.mousePressed}}),Object.defineProperty(Nr,"mouseReleased",{set:function(t){e.mouseReleased=t},get:function(){return e.mouseReleased}}),Object.defineProperty(Nr,"mouseMoved",{set:function(t){e.mouseMoved=t},get:function(){return e.mouseMoved}}),Object.defineProperty(Nr,"scroll",{set:function(t){e.scroll=t},get:function(){return e.scroll}}),Object.defineProperty(Nr,"animate",{set:function(t){e.animate=t},get:function(){return e.animate}}),Object.defineProperty(Nr,"fps",{set:function(t){e.fps=t},get:function(){return e.fps}})},zr=function(e){var t=e;if(null==t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t=Nr.SVG.apply(Nr,n)}return Br(t,Nr),t},Tr=function(e){var t=e.getAttribute("viewBox");return null==t?void 0:t.split(" ").map(function(e){return parseFloat(e)})},Ir=function(e,t,i,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=n/1-n,o=[t-a-s,i-a-s,n+2*a+2*s,r+2*a+2*s].join(" ");e.setAttributeNS(null,"viewBox",o)},Vr=function(e){var t=e.getBoundingClientRect(),i=0===t.width?640:t.width,n=0===t.height?480:t.height;Ir(e,0,0,i,n)},Dr=function(e,t,i){var n=e.createSVGPoint();n.x=t,n.y=i;var r=n.matrixTransform(e.getScreenCTM().inverse()),s=[r.x,r.y];return s.x=r.x,s.y=r.y,s},Rr=Object.freeze({__proto__:null,getViewBox:Tr,setViewBox:Ir,convertToViewBox:Dr,translateViewBox:function(e,t,i){var n=Tr(e);null==n&&Vr(e),n[0]+=t,n[1]+=i,e.setAttributeNS(null,"viewBox",n.join(" "))},scaleViewBox:function(e,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;1e-8>Ne(i)&&(i=.01);var s=e.createSVGMatrix().translate(n,r).scale(1/i).translate(-n,-r),a=Tr(e);null==a&&Vr(e);var o=e.createSVGPoint(),c=e.createSVGPoint(),d=t(a,2);o.x=d[0],o.y=d[1],c.x=a[0]+a[2],c.y=a[1]+a[3];var l=o.matrixTransform(s),g=c.matrixTransform(s);Ir(e,l.x,l.y,g.x-l.x,g.y-l.y)}}),qr=function(i){var n=Object.create(null);Object.assign(n,{isPressed:!1,position:[0,0],pressed:[0,0],drag:[0,0],previous:[0,0],x:0,y:0});var r=[0,0];n.position.x=r[0],n.position.y=r[1];var s=[0,0];n.pressed.x=s[0],n.pressed.y=s[1];var a=[0,0];n.drag.x=a[0],n.drag.y=a[1];var o=[0,0];n.previous.x=o[0],n.previous.y=o[1];var c=function(e,r){n.position=Dr(i,e,r);var s=t(n.position,2);n.x=s[0],n.y=s[1]},d=function(){n.drag=[n.position[0]-n.pressed[0],n.position[1]-n.pressed[1]];var e=t(n.drag,2);n.drag.x=e[0],n.drag.y=e[1]},l={};return Object.defineProperty(l,"release",{value:function(){return n.isPressed=!1,l}}),Object.defineProperty(l,"move",{value:function(e,r){var s=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(s&&!n.isPressed&&(n.pressed=Dr(i,e,r)),n.isPressed=s,n.previous=n.position,c(e,r),n.isPressed)d();else{n.drag=[0,0],n.pressed=[0,0];var a=t(n.drag,2);n.drag.x=a[0],n.drag.y=a[1];var o=t(n.pressed,2);n.pressed.x=o[0],n.pressed.y=o[1]}return l}}),Object.defineProperty(l,"get",{value:function(){var t=n.position.slice();return Object.keys(n).filter(function(t){return"object"===e(t)}).forEach(function(e){t[e]=n[e].slice()}),Object.keys(n).filter(function(t){return"object"!==e(t)}).forEach(function(e){t[e]=n[e]}),Object.freeze(t)}}),l},Xr=function(i){var n=qr(i),r={mousemove:[],touchmove:[],mousedown:[],touchstart:[],mouseup:[],touchend:[],scroll:[]},s=function(t,i){i.preventDefault();var r=n.move(i.clientX,i.clientY,0<i.buttons).get();return t(r),r},a=function(t,i){i.preventDefault();var r=n.move(i.touches[0].clientX,i.touches[0].clientY,!0).get();return t(r),r},o=function(t,i){i.preventDefault();var r=n.move(i.clientX,i.clientY,!0).get();return t(r),r},c=function(t,i){i.preventDefault();var r=n.move(i.touches[0].clientX,i.touches[0].clientY,!0).get();return t(r),r},d=function(t,i){i.preventDefault();var r=n.release().get();return t(r),r},l=function(n,r){var s={deltaX:r.deltaX,deltaY:r.deltaY,deltaZ:r.deltaZ,position:Dr(i,r.clientX,r.clientY)},e=t(s.position,2);return s.x=e[0],s.y=e[1],r.preventDefault(),n(s),s};return Object.defineProperty(i,"mouse",{get:function(){return n.get()},enumerable:!0}),Object.defineProperty(i,"mouseMoved",{set:function(e){var t=function(t){return s(e,t)};r.mousemove.push(t),r.touchmove.push(t),i.addEventListener("mousemove",t),i.addEventListener("touchmove",function(t){return a(e,t)})},enumerable:!0}),Object.defineProperty(i,"mousePressed",{set:function(e){var t=function(t){return o(e,t)},n=function(t){return c(e,t)};r.mousedown.push(t),r.touchstart.push(n),i.addEventListener("mousedown",t),i.addEventListener("touchstart",n)},enumerable:!0}),Object.defineProperty(i,"mouseReleased",{set:function(e){var t=function(t){return d(e,t)},n=function(t){return d(e,t)};r.mouseup.push(t),r.touchend.push(n),i.addEventListener("mouseup",t),i.addEventListener("touchend",n)},enumerable:!0}),Object.defineProperty(i,"scroll",{set:function(e){var t=function(t){return l(e,t)};r.mouseup.push(t),i.addEventListener("scroll",t)},enumerable:!0}),{clear:function(){Object.keys(r).forEach(function(e){return r[e].forEach(function(t){return i.removeEventListener(e,t)})}),Object.keys(r).forEach(function(e){r[e]=[]})},pointer:n}},Gr=1e3/60,Ur=function(e){var t=[],i=Gr,n=function(){for(;0<t.length;)clearInterval(t.shift());c=void 0},r=function(){"function"!=typeof c||t.push(setInterval(function(){c({time:e.getCurrentTime(),frame:o+=1})},i))},s=function(e){n(),c=e,"function"==typeof c&&(o=0,r())},a=function(e){var t=parseFloat(e);return!isNaN(t)&&isFinite(t)?t:Gr},o,c;return Object.defineProperty(e,"animate",{set:function(e){return s(e)},enumerable:!0}),Object.defineProperty(e,"clear",{value:function(){return n()},enumerable:!0}),{clear:n,setLoop:s,setFPS:function(e){n(),i=a(1e3/e),r()}}},Wr=function(e){var t=Ur(e),i=Xr(e);Object.defineProperty(e,"stopAnimations",{value:t.clear,enumerated:!0}),Object.defineProperty(e,"freeze",{value:function(){i.clear(),t.clear()},enumerated:!0}),Object.defineProperty(e,"fps",{set:function(e){return t.setFPS(e)},enumerated:!0})},Yr=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[0,0],r=!1,s=function(){null!=c&&(null==c.parentNode&&t.appendChild(c),c.setAttribute("cx",n[0]),c.setAttribute("cy",n[1]))},a=new Proxy(n,{set:function(e,t,i){return e[t]=i,s(),!0}}),o=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(0!==i.length){var o=e(i[0]);"number"===o&&(n[0]=i[0],n[1]=i[1],s()),"object"===o&&("number"==typeof i[0][0]?(n[0]=i[0][0],n[1]=i[0][1],s()):"number"==typeof i[0].x&&(n[0]=i[0].x,n[1]=i[0].y,s())),"function"==typeof n.delegate&&n.delegate.apply(n.pointsContainer,[a,n.pointsContainer])}},c;o(i.position);var d=function(e){return e},l=function(e){r&&o(d(e))};return n.delegate=void 0,n.setPosition=o,n.onMouseMove=l,n.onMouseUp=function(){r=!1},n.distance=function(e){return[0,1].map(function(t){return e[t]-n[t]}).map(function(t){return Me(t,2)}).reduce(function(e,t){return e+t},0)},Object.defineProperty(n,"x",{get:function(){return n[0]},set:function(e){n[0]=e}}),Object.defineProperty(n,"y",{get:function(){return n[1]},set:function(e){n[1]=e}}),Object.defineProperty(n,"svg",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(n,"positionDidUpdate",{set:function(e){d=e}}),Object.defineProperty(n,"selected",{set:function(e){r=e}}),Object.defineProperty(n,"remove",{value:function(){null!=c&&c.remove()}}),a},Zr=function(t,i,n){var r=Array.from(Array(i)).map(function(){return Yr(t,n)}),s,a;r.forEach(function(t,r){"object"===e(n)&&"function"==typeof n.position&&t.setPosition(n.position(r))});var o=function(e){"function"==typeof a&&a.call(r,r,e)};r.forEach(function(e){e.delegate=o,e.pointsContainer=r});var c=function(e){0<r.length&&(s=r.map(function(t,n){return{i:n,d:t.distance(e)}}).sort(function(e,t){return e.d-t.d}).shift().i,r[s].selected=!0)};return t.mousePressed=c,t.mouseMoved=function(e){r.forEach(function(t){return t.onMouseMove(e)})},t.mouseReleased=function(){r.forEach(function(e){return e.onMouseUp()}),s=void 0},Object.defineProperty(r,"selectedIndex",{get:function(){return s}}),Object.defineProperty(r,"selected",{get:function(){return r[s]}}),Object.defineProperty(r,"add",{value:function(e){r.push(Yr(t,e))}}),r.removeAll=function(){for(;0<r.length;)r.pop().remove()},r.onChange=function(e,t){return"function"==typeof e&&(a=e,!0===t&&e.call(r,r,void 0)),r},r.position=function(e){return"function"==typeof e&&r.forEach(function(t,n){return t.setPosition(e.call(r,n))}),r},r.svg=function(e){return"function"==typeof e&&r.forEach(function(t,n){t.svg=e.call(r,n)}),r},r.parent=function(e){return null!=e&&null!=e.appendChild&&r.forEach(function(t){e.appendChild(t.svg)}),r},r},Kr=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},Hr=function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];switch(i.length){case void 0:case 0:return i;case 1:return Kr(i[0])&&"string"!=typeof i[0]?e.apply(void 0,n(i[0])):[i[0]];default:return Array.from(i).map(function(t){return Kr(t)?n(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},Qr=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=Hr.apply(void 0,n),a="";return"number"==typeof s[0]&&(a=Array.from(Array(Ee(s.length/2))).reduce(function(e,t,n){return"".concat(e).concat(s[2*n],",").concat(s[2*n+1]," ")},"")),"object"===e(s[0])&&("number"==typeof s[0].x&&(a=s.reduce(function(e,t){return"".concat(e).concat(t.x,",").concat(t.y," ")},"")),"number"==typeof s[0][0]&&(a=s.reduce(function(e,t){return"".concat(e).concat(t[0],",").concat(t[1]," ")},""))),t.setAttributeNS(null,"points",a),t},Jr=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=Hr.apply(void 0,n),a=[];return"number"==typeof s[0]&&(a=s),"object"===e(s[0])&&("number"==typeof s[0].x&&(a=s.map(function(e){return[e[0],e[1]]}).reduce(function(e,t){return e.concat(t)},[])),"number"==typeof s[0][0]&&(a=s.reduce(function(e,t){return e.concat(t)},[]))),null!=a[0]&&t.setAttributeNS(null,"x1",a[0]),null!=a[1]&&t.setAttributeNS(null,"y1",a[1]),null!=a[2]&&t.setAttributeNS(null,"x2",a[2]),null!=a[3]&&t.setAttributeNS(null,"y2",a[3]),t},$r=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=Hr.apply(void 0,i);return"number"==typeof r[0]&&(null!=r[0]&&e.setAttributeNS(null,"cx",r[0]),null!=r[1]&&e.setAttributeNS(null,"cy",r[1])),"number"==typeof r.x&&(null!=r.x&&e.setAttributeNS(null,"cx",r.x),null!=r.y&&e.setAttributeNS(null,"cy",r.y)),e},es=function(e,t,i,n,r,s){var a=!!(6<arguments.length&&void 0!==arguments[6])&&arguments[6];if(null!=s){var o=[t+Ce(r)*n,i+Le(r)*n],c=[Ce(r)*n,Le(r)*n],l=[Ce(s)*n,Le(s)*n],g=[l[0]-c[0],l[1]-c[1]],f=c[0]*l[1]-c[1]*l[0],p=c[0]*l[0]+c[1]*l[1],_=0<je(f,p)?0:1,h=a?"M ".concat(t,",").concat(i," l ").concat(c[0],",").concat(c[1]," "):"M ".concat(o[0],",").concat(o[1]," ");return h+=["a ",n,n,0,_,1,g[0],g[1]].join(" "),a&&(h+=" Z"),e.setAttributeNS(null,"d",h),e}},ts=function(e,t,i,n,r,s,a){var o=!!(7<arguments.length&&void 0!==arguments[7])&&arguments[7];if(null!=a){var c=[t+Ce(s)*n,i+Le(s)*r],l=[Ce(s)*n,Le(s)*r],g=[Ce(a)*n,Le(a)*r],f=[g[0]-l[0],g[1]-l[1]],p=l[0]*g[1]-l[1]*g[0],_=l[0]*g[0]+l[1]*g[1],h=0<je(p,_)?0:1,u=o?"M ".concat(t,",").concat(i," l ").concat(l[0],",").concat(l[1]," "):"M ".concat(c[0],",").concat(c[1]," ");return u+=["a ",n,r,0,h,1,f[0],f[1]].join(" "),o&&(u+=" Z"),e.setAttributeNS(null,"d",u),e}},is=function(e,t,i,n,r,s,a,o,c){if(null!=c){var l=[[t,i],[n,r],[s,a],[o,c]].map(function(e){return e.join(",")}),g="M ".concat(l[0]," C ").concat(l[1]," ").concat(l[2]," ").concat(l[3]);return e.setAttributeNS(null,"d",g),e}},ns=function(t){for(var i=Array.from(t.childNodes),n=i.filter(function(e){return"path"===e.tagName}).shift(),r=["svg-arrow-head","svg-arrow-tail"].map(function(e){return i.filter(function(t){return t.getAttribute("class")===e}).shift()}),s=arguments.length,a=Array(1<s?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var d=Hr.apply(void 0,a),l=[];if("number"==typeof d[0]&&(l=d),"object"===e(d[0])&&("number"==typeof d[0].x&&(l=d.map(function(e){return[e[0],e[1]]}).reduce(function(e,t){return e.concat(t)},[])),"number"==typeof d[0][0]&&(l=d.reduce(function(e,t){return e.concat(t)},[]))),l.length||null==t.endpoints||(l=t.endpoints),!l.length)return t;t.endpoints=l;var g=t.options,o=[l[0],l[1]],f=[l[2],l[3]],p=[f[0]-o[0],f[1]-o[1]],_=[o[0]+p[0]/2,o[1]+p[1]/2],h=Oe(Me(p[0],2)+Me(p[1],2)),u=(g.tail.visible?2.5*((1+g.tail.padding)*g.tail.height):0)+(g.head.visible?2.5*((1+g.head.padding)*g.head.height):0);if(h<u){var m=0===h?[u,0]:[p[0]/h*u,p[1]/h*u];o=[_[0]-.5*m[0],_[1]-.5*m[1]],f=[_[0]+.5*m[0],_[1]+.5*m[1]],p=[f[0]-o[0],f[1]-o[1]]}var v=[p[1],-p[0]],y=[_[0]+v[0]*g.curve,_[1]+v[1]*g.curve],k=[y[0]-o[0],y[1]-o[1]],x=[y[0]-f[0],y[1]-f[1]],b=Oe(Me(k[0],2)+Me(k[1],2)),E=Oe(Me(x[0],2)+Me(x[1],2)),P=0===b?k:[k[0]/b,k[1]/b],w=0===b?x:[x[0]/E,x[1]/E],A=[-P[0],-P[1]],S=[-w[0],-w[1]],N=[A[1],-A[0]],L=[S[1],-S[0]],C=[o[0]+P[0]*g.tail.height*((g.tail.visible?1:0)+g.tail.padding),o[1]+P[1]*g.tail.height*((g.tail.visible?1:0)+g.tail.padding)],j=[f[0]+w[0]*g.head.height*((g.head.visible?1:0)+g.head.padding),f[1]+w[1]*g.head.height*((g.head.visible?1:0)+g.head.padding)];p=[j[0]-C[0],j[1]-C[1]],v=[p[1],-p[0]],_=[C[0]+p[0]/2,C[1]+p[1]/2],y=[_[0]+v[0]*g.curve,_[1]+v[1]*g.curve];var O=[C[0]+(y[0]-C[0])*g.pinch,C[1]+(y[1]-C[1])*g.pinch],M=[j[0]+(y[0]-j[0])*g.pinch,j[1]+(y[1]-j[1])*g.pinch],F=[[C[0]+N[0]*-g.tail.width,C[1]+N[1]*-g.tail.width],[C[0]+N[0]*g.tail.width,C[1]+N[1]*g.tail.width],[C[0]+A[0]*g.tail.height,C[1]+A[1]*g.tail.height]],B=[[j[0]+L[0]*-g.head.width,j[1]+L[1]*-g.head.width],[j[0]+L[0]*g.head.width,j[1]+L[1]*g.head.width],[j[0]+S[0]*g.head.height,j[1]+S[1]*g.head.height]];return n.setAttribute("d","M".concat(C[0],",").concat(C[1],"C").concat(O[0],",").concat(O[1],",").concat(M[0],",").concat(M[1],",").concat(j[0],",").concat(j[1])),g.head.visible?(r[0].removeAttribute("display"),Qr(r[0],B)):r[0].setAttribute("display","none"),g.tail.visible?(r[1].removeAttribute("display"),Qr(r[1],F)):r[1].setAttribute("display","none"),t},rs=Object.freeze({__proto__:null,setPoints:Qr,setLinePoints:Jr,setCenter:$r,setArc:es,setEllipticalArc:ts,setBezier:is,setArrowPoints:ns}),ss=["accumulate","additive","alignment-baseline","amplitude","attributeName","azimuth","baseFrequency","baseline-shift","baseProfile","bbox","begin","bias","by","CSection","calcMode","cap-height","clip","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","contentScriptType","contentStyleType","cursor","DSection","decelerate","descent","diffuseConstant","direction","display","divisor","dominant-baseline","dur","ESection","edgeMode","elevation","enable-background","end","exponent","externalResourcesRequired","FSection","fill","fill-opacity","fill-rule","filter","filterRes","filterUnits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","format","from","fr","fx","fy","GSection","g1","g2","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","glyphRef","gradientTransform","gradientUnits","HSection","hanging","href","hreflang","horiz-adv-x","horiz-origin-x","ISection","image-rendering","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","keyPoints","keySplines","keyTimes","LSection","lang","letter-spacing","lighting-color","limitingConeAngle","local","MSection","marker-end","marker-mid","marker-start","markerHeight","markerUnits","markerWidth","mathematical","max","media","method","min","mode","NSection","name","numOctaves","OSection","opacity","operator","order","orient","overflow","overline-position","overline-thickness","PSection","paint-order","patternContentUnits","patternTransform","patternUnits","pointer-events","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","RSection","radius","refX","refY","rendering-intent","repeatCount","repeatDur","requiredFeatures","restart","result","SSection","seed","shape-rendering","spacing","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","surfaceScale","TSection","tabindex","tableValues","target","targetX","targetY","text-anchor","text-decoration","text-rendering","to","transform-origin","type","USection","u1","u2","underline-position","underline-thickness","unicode","unicode-range","units-per-em","user-select","VSection","v-alphabetic","v-hanging","v-ideographic","v-mathematical","values","vector-effect","version","vert-adv-y","vert-origin-x","vert-origin-y","viewTarget","visibility","WSection","widths","word-spacing","writing-mode","XSection","xChannelSelector","YSection","yChannelSelector","ZSection"],as=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},os=function(e,t){return null!=t&&(e.remove(),t.appendChild(e)),e},cs=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()},ds=function(e){var t=e.getAttribute("class");return null==t?[]:t.split(" ").filter(function(e){return""!==e})},ls=Object.freeze({__proto__:null,removeChildren:as,appendTo:os,setAttributes:function(e,t){return Object.keys(t).forEach(function(i){e.setAttribute(cs(i),t[i])}),e},addClass:function(e,t){if(null==e)return e;var i=ds(e).filter(function(e){return e!==t});return i.push(t),e.setAttributeNS(null,"class",i.join(" ")),e},removeClass:function(e,t){if(null==e)return e;var i=ds(e).filter(function(e){return e!==t});return e.setAttributeNS(null,"class",i.join(" ")),e},setClass:function(e,t){return e.setAttributeNS(null,"class",t),e},setID:function(e,t){return e.setAttributeNS(null,"id",t),e}}),gs=function(t,i){"object"===e(i)?t.setAttribute("transform",i.join(" ")):"string"==typeof i&&t.setAttribute("transform",i)},fs=function(e){var t=e.getAttribute("transform");return null==t?void 0:t.split(" ")},ps=Object.freeze({__proto__:null,translate:function(e,t,i){var n=fs(e)||[];return n.push("translate(".concat(t,", ").concat(i,")")),gs(e,n),e},rotate:function(e,t){var i=fs(e)||[];return i.push("rotate(".concat(t,")")),gs(e,i),e},scale:function(e,t,i){var n=fs(e)||[];return n.push("scale(".concat(t,", ").concat(i,")")),gs(e,n),e},clearTransforms:function(e){return e.setAttribute("transform",""),e}}),_s=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},hs=function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];switch(i.length){case void 0:case 0:return i;case 1:return _s(i[0])&&"string"!=typeof i[0]?e.apply(void 0,n(i[0])):[i[0]];default:return Array.from(i).map(function(t){return _s(t)?n(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},us=function(e){var t=e.getAttribute("d");return null==t&&(t=""),t},d=function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var s=hs(n).join(",");return e.setAttribute("d","".concat(us(e)).concat(t).concat(s)),e},ms=Object.freeze({__proto__:null,command:function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return d.apply(void 0,[e,t].concat(n))},moveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"M"].concat(i))},_moveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"m"].concat(i))},lineTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"L"].concat(i))},_lineTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"l"].concat(i))},verticalLineTo:function(e,t){return d(e,"V",t)},_verticalLineTo:function(e,t){return d(e,"v",t)},horizontalLineTo:function(e,t){return d(e,"H",t)},_horizontalLineTo:function(e,t){return d(e,"h",t)},ellipseTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"A"].concat(i))},_ellipseTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"a"].concat(i))},curveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"C"].concat(i))},_curveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"c"].concat(i))},smoothCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"S"].concat(i))},_smoothCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"s"].concat(i))},quadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"Q"].concat(i))},_quadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"q"].concat(i))},smoothQuadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"T"].concat(i))},_smoothQuadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"t"].concat(i))},close:function(e){return d(e,"Z")},clear:function(e){return e.setAttribute("d",""),e}}),vs=function(e){e.appendTo=function(t){return os(e,t)}},ys=function(e,t){Object.keys(t).filter(function(t){return void 0===e[t]}).forEach(function(i){e[i]=function(){var n=t[i].apply(t,arguments);return e.appendChild(n),n}})},ks=function(t){t.head=function(i){return"object"===e(i)?(Object.assign(t.options.head,i),void 0===i.visible&&(t.options.head.visible=!0)):"boolean"==typeof i?t.options.head.visible=i:null==i&&(t.options.head.visible=!0),ns(t),t},t.tail=function(i){return"object"===e(i)?(Object.assign(t.options.tail,i),void 0===i.visible&&(t.options.tail.visible=!0),t.options.tail.visible=!0):"boolean"==typeof i?t.options.tail.visible=i:null==i&&(t.options.tail.visible=!0),ns(t),t},t.curve=function(e){return t.options.curve=e,ns(t),t},t.pinch=function(e){return t.options.pinch=e,ns(t),t}},xs=function(e){Object.keys(ms).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return ms[t].apply(ms,[e].concat(n))}})},bs=function(e){Object.keys(ls).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return ls[t].apply(ls,[e].concat(n))}})},Es=function(e){Object.keys(ps).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return ps[t].apply(ps,[e].concat(n))}})},Ps=function(e){Object.keys(Rr).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return Rr[t].apply(Rr,[e].concat(n))}})},ws=function(e){return e.replace(/([-_][a-z])/ig,function(e){return e.toUpperCase().replace("-","").replace("_","")})},As=function(e){ss.filter(function(t){return void 0===e[ws(t)]}).forEach(function(t){e[ws(t)]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e.setAttribute.apply(e,[t].concat(n)),e}})},Ss=function(e,t){void 0===e.clipPath&&(e.clipPath=function(){var i=t.clipPath.apply(t,arguments);return e.appendChild(i),i}),void 0===e.mask&&(e.mask=function(){var i=t.mask.apply(t,arguments);return e.appendChild(i),i})},Ns=function(e){if(null!=e){if("string"==typeof e)return"url"===e.slice(0,3)?e:"url(#".concat(e,")");if(null!=e.getAttribute){var t=e.getAttribute("id");return"url(#".concat(t,")")}return"url(#)"}},Ls=function(e){void 0===e.clipPath&&(e.clipPath=function(t){var i=Ns(t);return void 0===i?e:(e.setAttribute("clip-path",i),e)}),void 0===e.mask&&(e.mask=function(t){var i=Ns(t);return void 0===i?e:(e.setAttribute("mask",i),e)})},Cs=function(e){As(e),bs(e),Es(e),Ls(e),"path"===e.tagName&&xs(e)},js=function(e){As(e),bs(e),Es(e),Ls(e),ks(e)},Os=function(e){As(e),bs(e),Es(e),Ls(e)},Ms=function(e,t){bs(e),Es(e),Ps(e),As(e),Ss(e,t),ys(e,t)},Fs=function(e,t){As(e),bs(e),Es(e),Ls(e),ys(e,t)},Bs=function(e,t){As(e),bs(e),Es(e),Ls(e),ys(e,t)},zs=function(e){vs(e)},Ts=function(e,t,i){"svg"===e?Ms(t,i):"primitive"===e?Cs(t):"arrow"===e?js(t):"defs"===e||"group"===e?Fs(t,i):"text"===e?Os(t):"clipPath"===e||"mask"===e?Bs(t,i):"style"===e?zs(t):console.warn("prepare missing valid type (svg, group..")},Is=function(e,t,i,n){var r=Nr.document.createElementNS(Lr,"rect");return null!=e&&r.setAttributeNS(null,"x",e),null!=t&&r.setAttributeNS(null,"y",t),null!=i&&r.setAttributeNS(null,"width",i),null!=n&&r.setAttributeNS(null,"height",n),Ts("primitive",r),r},Vs=function(){for(var e=Nr.document.createElementNS(Lr,"polygon"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Qr.apply(void 0,[e].concat(i)),Ts("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Qr.apply(void 0,[e].concat(i))},e},Ds=function(){for(var e=Nr.document.createElementNS(Lr,"polyline"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Qr.apply(void 0,[e].concat(i)),Ts("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Qr.apply(void 0,[e].concat(i))},e},Rs=function(e){var t=Nr.document.createElementNS(Lr,"path");return null!=e&&t.setAttributeNS(null,"d",e),Ts("primitive",t),t},qs=Object.freeze({__proto__:null,line:function(){for(var e=Nr.document.createElementNS(Lr,"line"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Jr.apply(void 0,[e].concat(i)),Ts("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Jr.apply(void 0,[e].concat(i))},e},circle:function(e,t,i){var n=Nr.document.createElementNS(Lr,"circle");return $r(n,e,t),null!=i&&n.setAttributeNS(null,"r",i),Ts("primitive",n),n.setCenter=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return $r.apply(void 0,[n].concat(t))},n.setRadius=function(e){return n.setAttributeNS(null,"r",e),n},n.radius=function(e){return n.setAttributeNS(null,"r",e),n},n},ellipse:function(e,t,i,n){var r=Nr.document.createElementNS(Lr,"ellipse");return null!=e&&r.setAttributeNS(null,"cx",e),null!=t&&r.setAttributeNS(null,"cy",t),null!=i&&r.setAttributeNS(null,"rx",i),null!=n&&r.setAttributeNS(null,"ry",n),Ts("primitive",r),r},rect:Is,polygon:Vs,polyline:Ds,path:Rs,bezier:function(e,t,i,n,r,s,a,o){var c=Nr.document.createElementNS(Lr,"path");return is(c,e,t,i,n,r,s,a,o),Ts("primitive",c),c.setBezier=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return is.apply(void 0,[c].concat(t))},c},text:function(e,t,i){var n=Nr.document.createElementNS(Lr,"text");return n.innerHTML=e,t&&n.setAttributeNS(null,"x",t),i&&n.setAttributeNS(null,"y",i),Ts("text",n),n},arc:function(e,t,i,n,r){var s=Nr.document.createElementNS(Lr,"path");return es(s,e,t,i,n,r,!1),Ts("primitive",s),s.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return es.apply(void 0,[s].concat(t))},s},wedge:function(e,t,i,n,r){var s=Nr.document.createElementNS(Lr,"path");return es(s,e,t,i,n,r,!0),Ts("primitive",s),s.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return es.apply(void 0,[s].concat(t))},s},arcEllipse:function(e,t,i,n,r,s){var a=Nr.document.createElementNS(Lr,"path");return ts(a,e,t,i,n,r,s,!1),Ts("primitive",a),a.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ts.apply(void 0,[a].concat(t))},a},wedgeEllipse:function(e,t,i,n,r,s){var a=Nr.document.createElementNS(Lr,"path");return ts(a,e,t,i,n,r,s,!0),Ts("primitive",a),a.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ts.apply(void 0,[a].concat(t))},a},parabola:function(e,t,n,r){var s=Array.from(Array(129)).map(function(e,t){return 2*((t-128)/128)+1}),a=s.map(function(t){return e+.5*((t+1)*n)}),o=s.map(function(e){return t+Me(e,2)*r}),c=s.map(function(e,t){return[a[t],o[t]]});return Ds(c)},regularPolygon:function(e,t,i,n){var s=.5*(2*Se/n),o=Ce(s)*i,r=Array.from(Array(n)).map(function(r,c){var i=-2*Se*c/n+s,a=e+o*Le(i),d=t+o*Ce(i);return[a,d]});return Vs(r)},roundRect:function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;r>i/2&&(r=i/2),r>n/2&&(r=n/2);var s=i-2*r,a=n-2*r,o="M".concat(e+(i-s)/2," ").concat(t," h").concat(s," A").concat(r," ").concat(r," 0 0 1 ").concat(e+i," ").concat(t+(n-a)/2," v").concat(a," A").concat(r," ").concat(r," 0 0 1 ").concat(e+i-r," ").concat(t+n," h").concat(-s," A").concat(r," ").concat(r," 0 0 1 ").concat(e," ").concat(t+n-r," v").concat(-a," A").concat(r," ").concat(r," 0 0 1 ").concat(e+r," ").concat(t," ");return Rs(o)},arrow:function(){var e=Nr.document.createElementNS(Lr,"g"),t=Nr.document.createElementNS(Lr,"polygon"),i=Nr.document.createElementNS(Lr,"polygon"),n=Nr.document.createElementNS(Lr,"path");t.setAttributeNS(null,"class","svg-arrow-tail"),i.setAttributeNS(null,"class","svg-arrow-head"),n.setAttributeNS(null,"class","svg-arrow-path"),t.setAttributeNS(null,"style","stroke: none; pointer-events: none;"),i.setAttributeNS(null,"style","stroke: none; pointer-events: none;"),n.setAttributeNS(null,"style","fill: none;"),e.appendChild(n),e.appendChild(t),e.appendChild(i),e.options={head:{width:.5,height:2,visible:!1,padding:0},tail:{width:.5,height:2,visible:!1,padding:0},curve:0,pinch:.618,endpoints:[]};for(var r=arguments.length,s=Array(r),a=0;a<r;a++)s[a]=arguments[a];return ns.apply(void 0,[e].concat(s)),Ts("arrow",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return ns.apply(void 0,[e].concat(i))},e}}),Xs={},Gs={},Us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ws=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Array.from(Array(e)).map(function(){return Ee(Math.random()*Us.length)}).map(function(e){return Us[e]}).reduce(function(e,t){return"".concat(e).concat(t)},"")},Ys=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t+Ws(e)},Zs=function(){var e=Nr.document.createElementNS(Lr,"svg");return e.setAttribute("version","1.1"),e.setAttribute("xmlns",Lr),Ts("svg",e,Xs),e},Ks=function(e){var t=new Nr.DOMParser().parseFromString("<root></root>","text/xml").createCDATASection("".concat(e));return t},Hs=function(e){var t=Nr.document.createElementNS(Lr,"style");return t.setAttribute("type","text/css"),Ts("style",t),t.setTextContent=function(e){t.textContent="",t.appendChild(Ks(e))},t.appendChild(Ks(e)),t},Qs=function(e){Object.keys(e).filter(function(e){return"svg"!==e}).forEach(function(t){Xs[t]=e[t]}),Object.keys(e).filter(function(e){return"svg"!==e}).filter(function(e){return"defs"!==e}).filter(function(e){return"style"!==e}).filter(function(e){return"clipPath"!==e}).filter(function(e){return"mask"!==e}).forEach(function(t){Gs[t]=e[t]})},Js=Object.freeze({__proto__:null,setConstructors:Qs,svg:Zs,group:function(){var e=Nr.document.createElementNS(Lr,"g");return Ts("group",e,Gs),e},defs:function(){var e=Nr.document.createElementNS(Lr,"defs");return Ts("defs",e,Gs),e},clipPath:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ys(8,"clip-"),t=Nr.document.createElementNS(Lr,"clipPath");return t.setAttribute("id",e),Ts("clipPath",t,Gs),t},mask:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ys(8,"mask-"),t=Nr.document.createElementNS(Lr,"mask");return t.setAttribute("id",e),Ts("mask",t,Gs),t},style:Hs,createElement:function(e){return Nr.document.createElementNS(Lr,e)}}),$s=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return"boolean"==typeof e.window});return r.reduce(function(e,t){return e.window||t.window},!1)},ea=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.filter(function(e){return e instanceof HTMLElement}).shift(),r=t.filter(function(e){return"string"==typeof e||e instanceof String}).map(function(e){return Nr.document.getElementById(e)}).shift();return null==n?null==r?Nr.document.body:r:n},ta=function(e,t){var i=t.filter(function(e){return!isNaN(e)}),n=e.getAttribute("viewBox");if(4<=i.length)e.setAttributeNS(null,"width",i[2]),e.setAttributeNS(null,"height",i[3]),Ir(e,i[0],i[1],i[2],i[3]);else if(2<=i.length)e.setAttributeNS(null,"width",i[0]),e.setAttributeNS(null,"height",i[1]),Ir(e,0,0,i[0],i[1]);else if(null==n){var r=e.getBoundingClientRect();Ir(e,0,0,r.width,r.height)}else if(4===n.split(" ").filter(function(e){return"0"===e||0===e}).length){var s=e.getBoundingClientRect();Ir(e,0,0,s.width,s.height)}},ia=function(e){var t=Tr(e);return null==t?void 0:t[2]},na=function(e){var t=Tr(e);return null==t?void 0:t[3]},ra=function(e,t){var i=Tr(e);return i[2]=t,Ir.apply(void 0,[e].concat(n(i)))},sa=function(e,t){var i=Tr(e);return i[3]=t,Ir.apply(void 0,[e].concat(n(i)))},aa=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]?Ir.apply(void 0,[t,0,0].concat(n)):4===n.length&&e(n.map(function(e){return"number"==typeof e}).reduce(function(e,t){return e&&t},!0))&&Ir.apply(void 0,[t].concat(n))},oa=function(e){var t=[0,0,0,0];if(null!=e.viewBox){var i=e.viewBox.baseVal;t=[i.x,i.y,i.width,i.height]}else if("function"==typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();t=[n.x,n.y,n.width,n.height]}return t},ca=function(e,t){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(!0===i){var r=e.parentElement;null!=r&&r.setAttribute("style","background-color: ".concat(t))}var s=Array.from(e.childNodes).filter(function(e){return"svg-background-rectangle"===e.getAttribute("class")}).shift();null==s?(s=Is.apply(void 0,n(oa(e))).fill(t).setClass("svg-background-rectangle"),e.insertBefore(s,e.firstChild)):s.setAttribute("fill",t)},da=function(e){var t=Array.from(e.childNodes),i=t.filter(function(e){return"style"===e.getAttribute("tagName")}).shift();if(i)return i;var n=t.filter(function(e){return"defs"===e.getAttribute("tagName")}).shift();if(null==n)return n;var r=Array.from(n.childNodes).filter(function(e){return"style"===e.getAttribute("tagName")}).shift();return null==r?void 0:r},la=function(e,t){var i=da(e);return null==i?(i=Hs(t),e.insertBefore(i,e.firstChild)):i.setTextContent(t),i},ga=function(e,t){Array.from(e.attributes).forEach(function(t){return e.removeAttribute(t.name)}),as(e),Array.from(t.children).forEach(function(t){t.remove(),e.appendChild(t)}),Array.from(t.attributes).forEach(function(t){return e.setAttribute(t.name,t.value)})},fa=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Zs();Wr(n),n.controls=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Zr.apply(void 0,[n].concat(t))},n.getWidth=function(){return ia(n)},n.getHeight=function(){return na(n)},n.setWidth=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ra.apply(void 0,[n].concat(t))},n.setHeight=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return sa.apply(void 0,[n].concat(t))},n.background=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ca.apply(void 0,[n].concat(t))},n.size=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return aa.apply(void 0,[n].concat(t))},n.save=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"image.svg";return Or(n,e)},n.load=function(e,t){Mr(e,function(e,i){null!=e&&ga(n,e),null!=t&&t(n,i)})},n.stylesheet=function(e){return la(n,e)};var r=function(){var e=ea.apply(void 0,t);null!=e&&e.appendChild(n),ta(n,t),$s.apply(void 0,t)&&zr(n),t.filter(function(e){return"function"==typeof e}).forEach(function(e){return e.call(n,n)})};return"loading"===Nr.document.readyState?Nr.document.addEventListener("DOMContentLoaded",r):r(),n},pa={};Object.assign(pa,Js,qs),delete pa.setConstructors,Qs(pa);var _a={};Object.keys(qs).forEach(function(e){_a[e]=qs[e]}),Object.keys(Js).filter(function(e){return"setConstructors"!==e}).forEach(function(e){_a[e]=Js[e]}),delete _a.svg,Object.keys(_a).forEach(function(e){fa[e]=_a[e]}),Object.keys(rs).forEach(function(e){fa[e]=rs[e]}),Object.keys(Rr).forEach(function(e){fa[e]=Rr[e]}),Object.keys(Fr).forEach(function(e){fa[e]=Fr[e]}),fa.NS=Lr;var ha=function(e){var t=e.vertices_coords;if(null==t||0>=t.length)return[0,0,0,0];var i=t[0].length,r=Array(i).fill(1/0),s=Array(i).fill(-Infinity);return t.forEach(function(e){return e.forEach(function(e,t){e<r[t]&&(r[t]=e),e>s[t]&&(s[t]=e)})}),isNaN(r[0])||isNaN(r[1])||isNaN(s[0])||isNaN(s[1])?[0,0,0,0]:[r[0],r[1],s[0]-r[0],s[1]-r[1]]},ua=function(e){if(null==e.edges_assignment)return{vertices:[],edges:[]};for(var n=e.edges_assignment.map(function(e){return"B"===e||"b"===e}),r=Fn(e),s=[],a=[],o=-1,c=0;c<n.length;c+=1)if(n[c]){o=c;break}if(-1===o)return{vertices:[],edges:[]};n[o]=!1,s.push(o),a.push(e.edges_vertices[o][0]);for(var d=e.edges_vertices[o][1];a[0]!==d;){if(a.push(d),o=r[d].filter(function(e){return n[e]}).shift(),void 0===o)return{vertices:[],edges:[]};if(e.edges_vertices[o][0]===d){var l=t(e.edges_vertices[o],2);d=l[1]}else{var g=t(e.edges_vertices[o],1);d=g[0]}n[o]=!1,s.push(o)}return{vertices:a,edges:s}},ma=function(e){var t=e.edges_assignment.map(function(e){return"b"!==e&&"B"!==e}).map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e}),i=_n(e,"edges",t),n=ua(e);e.faces_edges=[n.edges],e.faces_vertices=[n.vertices],_n(e,"vertices",ar(e))},va=function(e,t){var i=e.parameters.points;e.valid=qi.core.point_in_convex_poly(i[0],t)&&qi.core.point_in_convex_poly(i[1],t),e.valid_solutions=[e.valid]},ya=[null,va,va,function(e,t){var i=qi.core.intersection,n=e.parameters.lines,r=i.convex_poly_line(t,n[0][0],n[0][1]),s=i.convex_poly_line(t,n[1][0],n[1][1]);e.valid=void 0!==r&&void 0!==s,e.valid_solutions=e.solutions.map(function(e){return void 0!==e&&void 0!==i.convex_poly_line(t,e[0],e[1])})},function(e,t){var i=e.parameters,n=qi.core.intersection.line_line(i.lines[0][0],i.lines[0][1],i.points[0],[i.lines[0][1][1],-i.lines[0][1][0]]);void 0===n&&(e.valid=!1,e.valid_solutions=[!1]),e.valid=qi.core.point_in_convex_poly(n,t)&&qi.core.point_in_convex_poly(i.points[0],t),e.valid_solutions=[e.valid]},function(e,t){if(0===e.solutions.length)return e.valid=!1,void(e.valid_solutions=[!1,!1]);var i=e.parameters;e.test={},e.test.points_reflected=e.solutions.map(function(e){return qi.core.make_matrix2_reflection(e[1],e[0])}).map(function(e){return qi.core.multiply_matrix2_vector2(e,i.points[1])}),e.valid=qi.core.point_in_convex_poly(i.points[0],t)&&qi.core.point_in_convex_poly(i.points[1],t),e.valid_solutions=e.test.points_reflected.map(function(e){return qi.core.point_in_convex_poly(e,t)})},function(e,t){var i=qi.core.intersection,n=e.solutions.map(function(e){return i.convex_poly_line(t,e[0],e[1])}).filter(function(e){return void 0!==e});if(0===n.length)return e.valid=!1,void(e.valid_solutions=[!1,!1,!1]);var r=e.parameters.lines,s=i.convex_poly_line(t,r[0][0],r[0][1]),a=i.convex_poly_line(t,r[1][0],r[1][1]),o=e.parameters;for(e.test={},e.test.points_reflected=e.solutions.map(function(e){return qi.core.make_matrix2_reflection(e[1],e[0])}).map(function(e){return o.points.map(function(t){return qi.core.multiply_matrix2_vector2(e,t)})}).reduce(function(e,t){return e.concat(t)},[]),e.valid=void 0!==s&&void 0!==a&&qi.core.point_in_convex_poly(o.points[0],t)&&qi.core.point_in_convex_poly(o.points[1],t),e.valid_solutions=e.solutions.map(function(t,n){return[e.test.points_reflected[2*n],e.test.points_reflected[2*n+1]]}).map(function(e){return qi.core.point_in_convex_poly(e[0],t)&&qi.core.point_in_convex_poly(e[1],t)});3>e.valid_solutions.length;)e.valid_solutions.push(!1)},function(e,t){0===e.solutions.length&&(e.valid=!1,e.valid_solutions=[!1]);var i=e.solutions[0],n=e.parameters,r=qi.core.make_matrix2_reflection(i[1],i[0]),s=qi.core.multiply_matrix2_vector2(r,n.points[0]),a=qi.core.intersection.line_line(n.lines[1][0],n.lines[1][1],i[0],i[1]);e.test={points_reflected:[s]},e.valid=qi.core.point_in_convex_poly(n.points[0],t)&&qi.core.point_in_convex_poly(s,t)&&qi.core.point_in_convex_poly(a,t),e.valid_solutions=[e.valid]}],ka=function(e,t){return ya[e.axiom].call(null,e,t),e},xa=function(e,t,i){var n={axiom:e,parameters:i,solutions:t};return Object.defineProperty(n,"apply",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ka.apply(void 0,[n].concat(t))}}),n},ba=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];switch(e){case 1:case 2:{var s=(a=qi.core).semi_flatten_input.apply(a,i),a;if(4===s.length)return s;if(2===s.length&&1<s[0].length&&1<s[1].length)return[s[0][0],s[0][1],s[1][0],s[1][1]]}break;case 3:{var o=(c=qi.core).semi_flatten_input.apply(c,i),c;if(8===o.length)return o;if(4===o.length&&2<=o[0].length&&2<=o[1].length&&2<=o[2].length&&2<=o[3].length)return[o[0][0],o[0][1],o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]];if(2===o.length)return 4<=o[0].length&&4<=o[1].length?[o[0][0],o[0][1],o[0][2],o[0][3],o[1][0],o[1][1],o[1][2],o[1][3]]:[].concat(n(qi.core.flatten_input(o[0])),n(qi.core.flatten_input(o[1])))}break;case 4:break;case 5:break;case 6:break;case 7:break;default:}return i},Ea=function(e,t,i,n){var r=qi.core.normalize([i-e,n-t]);return xa(1,[[[e,t],r]],{points:[[e,t],[i,n]]})},Pa=function(e,t,i,n){var r=qi.core.normalize([i-e,n-t]),s=[[(e+i)/2,(t+n)/2],[r[1],-r[0]]];return xa(2,[s],{points:[[e,t],[i,n]]})},wa=function(e,t,i,n,r,s,a,o){var c=qi.core.bisect_lines2([e,t],[i,n],[r,s],[a,o]);return xa(3,c,{lines:[[[e,t],[i,n]],[[r,s],[a,o]]]})},Aa=function(e,t,i){var r=qi.core.normalize(t),s=[n(i),[r[1],-r[0]]];return xa(4,[s],{points:[i],lines:[[e,t]]})},Sa=function(e,t,i,n){var r=qi.core.get_vector(e),s=qi.core.get_vector(t),a=qi.core.get_vector(i),o=qi.core.get_vector(n),c=Oe(Me(a[0]-o[0],2)+Me(a[1]-o[1],2)),d=[r[0]+s[0],r[1]+s[1]],l=qi.core.intersection.circle_line(a,c,r,d)||[],g=l.map(function(e){var t=qi.core.midpoint2(o,e),i=qi.core.normalize(e.map(function(t,n){return e[n]-o[n]}));return[t,[-i[1],i[0]]]});return xa(5,g,{points:[a,o],lines:[[r,s]]})},Na=function(e,t,i,n,r){var s=qi.core.get_vector(e),a=qi.core.get_vector(i),o=qi.core.get_vector(r),c=qi.core.get_vector(t),d=qi.core.get_vector(n),l={points:[o],lines:[[s,c],[a,d]]},g=qi.core.intersection.line_line(s,c,o,d);if(void 0===g)return xa(7,l,[]);var f=qi.core.midpoint2(o,g),p=qi.core.normalize(o.map(function(e,t){return g[t]-o[t]})),_=[f,[-p[1],p[0]]];return xa(7,[_],l)},La=function(e){var t=Me(Ne(e),1/3);return 0>e?-t:t},Ca=function(e,n,r,s){if(1e-8>Ne(e)){if(e=n,n=r,r=s,1e-8>Ne(e))return e=n,n=r,1e-8>Ne(e)?[]:[-n/e];var o=n*n-4*e*r;return 1e-8>Ne(o)?[-n/(2*e)]:0<o?[(-n+Oe(o))/(2*e),(-n-Oe(o))/(2*e)]:[]}var d=(3*e*r-n*n)/(3*e*e),l=(2*n*n*n-9*e*n*r+27*e*e*s)/(27*e*e*e),g;if(1e-8>Ne(d))g=[La(-l)];else if(1e-8>Ne(l))g=[0].concat(0>d?[Oe(-d),-Oe(-d)]:[]);else{var f=l*l/4+d*d*d/27;if(1e-8>Ne(f))g=[-1.5*l/d,3*l/d];else if(0<f){var p=La(-l/2-Oe(f));g=[p-d/(3*p)]}else{var _=2*Oe(-d/3),h=Pe(3*l/d/_)/3,t=2*Se/3;g=[_*Ce(h),_*Ce(h-t),_*Ce(h-2*t)]}}for(var u=0;u<g.length;u+=1)g[u]-=n/(3*e);return g},ja=function(e,t,n,r,s,a){var o=s[0],c=s[1];if(Ne(t[0])>qi.core.EPSILON)var d=t[1]/t[0],l=e[1]-d*e[0];else var g=e[0];var f=a[0],p=a[1];if(Ne(r[0])>qi.core.EPSILON)var _=r[1]/r[0],h=n[1]-_*n[0];else var u=n[0];if(void 0!==d&&void 0!==_)var m=d*d+1,v=2*d*l,y=l*l-o*o-c*c,k=_*_+1,x=2*_*h,b=h*h-f*f-p*p,E=_*o+(l-c),P=o*(h-p)-f*(l-c),w=_-d,A=d*f+(h-p),S=d*o+(l-c);else if(void 0===d&&void 0===_)m=1,v=0,y=g*g-o*o-c*c,k=1,x=0,b=u*u-f*f-p*p,E=g-o,P=c*(u-f)-p*(g-o),w=0,A=u-f,S=E;else{if(void 0===d){var N=o;o=f,f=N;var L=c;c=p,p=L,d=_,_=void 0,l=h,h=void 0,u=g,g=void 0}m=d*d+1,v=2*d*l,y=l*l-o*o-c*c,k=1,x=0,b=u*u-f*f-p*p,E=o,P=(l-c)*(u-f)-o*p,w=1,A=-d*(u-f)-p,S=d*o+(l-c)}var C=m*E*E+v*E*w+y*w*w,j=2*m*E*P+v*(E*A+P*w)+2*y*w*A,O=m*P*P+v*P*A+y*A*A,M=k*w*S,F=(k*A+x*w)*S-C,B=(x*A+b*w)*S-j,T=b*A*S-O,I=Ca(M,F,B,T),V=[];if(null!=I&&0<I.length)for(var D=0;D<I.length;++D){if(void 0!==d&&void 0!==_)var R=I[D],q=_*R+h;else void 0===d&&void 0===_?(q=I[D],R=u):(q=I[D],R=u);if(q!=p){var X=-1*(R-f)/(q-p),G=(q*q-p*p+R*R-f*f)/(2*(q-p));V.push([[0,G],[1,X]])}else{var U=(R+f)/2;V.push([[U,0],[0,1]])}}return xa(6,V,{points:[s,a],lines:[[e,t],[n,r]]})},Oa=function(e){return 0<=e?Me(e,1/3):-Me(-e,1/3)},Ma=function(e,t,i,n,r,s,o){var l=qi.core.get_vector(e),g=qi.core.get_vector(i),f=qi.core.get_vector(r),p=qi.core.get_vector(s),_=qi.core.get_vector(t),h=qi.core.get_vector(n),u=f,m=qi.line(l,_),v=[-_[1],_[0]],y=m.nearestPoint(0,0).magnitude,k=p,x=qi.line(g,h),E=[-h[1],h[0]],P=x.nearestPoint(0,0).magnitude;0>qi.core.dot(v,m.nearestPoint(0,0))&&(v=[_[1],-_[0]]),0>qi.core.dot(E,x.nearestPoint(0,0))&&(E=[h[1],-h[0]]);var w=[v[1],-v[0]];if(!(Ne(u[0]-k[0])<qi.core.EPSILON&&Ne(u[1]-k[1])<qi.core.EPSILON)){var A=0;switch(o){case 0:var S=[u[0]+y*v[0]-2*k[0],u[1]+y*v[1]-2*k[1]],N=[y*v[0]-u[0],y*v[1]-u[1]],L=qi.core.dot(k,E)-P,C=2*qi.core.dot(N,w),j=qi.core.dot(N,N),O=qi.core.dot(S.map(function(e,t){return S[t]+N[t]}),w),M=qi.core.dot(S,N),F=qi.core.dot(w,E),B=qi.core.dot(N,E),z=F,a=L+O*F+B,b=L*C+M*F+O*B,c=L*j+M*B;switch(eo=Ne(z)>qi.core.EPSILON?3:Ne(a)>qi.core.EPSILON?2:Ne(b)>qi.core.EPSILON?1:0,eo){case 0:return;case 1:A=-c/b;break;case 2:var d=Me(b,2)-4*a*c;if(io=-b/(2*a),0>d)return void(to=-1);Ne(d)<qi.core.EPSILON?(to=0,A=io):(to=1,no=Oe(d)/(2*a),A=io+no);break;case 3:var I=a/z,V=b/z,q=(3*V-Me(I,2))/9,X=(9*I*V-27*(c/z)-2*Me(I,3))/54,R=Me(q,3)+Me(X,2);if(oo=-I/3,0<R){to=0;var D=Oe(R);ro=Oa(X+D);var G=Oa(X-D);A=oo+ro+G}else if(Ne(R)<qi.core.EPSILON)to=1,ro=Me(X,1/3),A=oo+2*ro;else{to=2;var T=Oe(-R),U=je(T,X)/3,W=Me(Me(X,2)-R,1/6);so=W*Ce(U),ao=W*Le(U),A=oo+2*so}}break;case 1:if(1>to)return;2===eo?A=io-no:3===eo?A=1===to?oo-ro:oo-so-Oe(3)*ao:void 0;break;case 2:if(2>to)return;3===eo?A=oo-so+Oe(3)*ao:void 0;}var Y=[y*v[0]+A*w[0],y*v[1]+A*w[1]],Z=qi.core.normalize([Y[0]-u[0],Y[1]-u[1]]),K=qi.core.dot(Z,qi.core.midpoint2(Y,u)),H=[K*Z[0],K*Z[1]],Q=[-Z[1],Z[0]];return[H,Q]}},Fa=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=ba.apply(void 0,[e].concat(i));return 1===e?Ea.apply(void 0,n(s)):2===e?Pa.apply(void 0,n(s)):3===e?wa.apply(void 0,n(s)):4===e?Aa.apply(void 0,n(s)):5===e?Sa.apply(void 0,n(s)):6===e?ja.apply(void 0,n(s)):7===e?Na.apply(void 0,n(s)):void 0},Ba=/*#__PURE__*/Object.freeze({__proto__:null,axiom1:Ea,axiom2:Pa,axiom3:wa,axiom4:Aa,axiom5:Sa,axiom7:Na,axiom6:ja,axiom6RefFinder:function(e,t,i,n,r,s){eo=0,to=0,io=0,no=0,ro=0,so=0,ao=0,oo=0;var a=[Ma(e,t,i,n,r,s,0),Ma(e,t,i,n,r,s,1),Ma(e,t,i,n,r,s,2)];return a.filter(function(e){return null!=e})},axiom6RefFinderFunc:Ma,axiom:Fa}),za=function(e,t){$i("coords").forEach(function(i){e[i]=e[i].map(function(e){return qi.core.multiply_matrix2_vector2(t,e)})}),$i("matrix").forEach(function(i){e[i]=e[i].map(function(e){return qi.core.multiply_matrices2(e,t)})})},Ta=function(e,t,i){var n=qi.core.make_matrix2_scale(t,i);za(e,n)},Ia=/*#__PURE__*/Object.freeze({__proto__:null,transform_scale:Ta,transform_translate:function(e,t,i){var n=qi.core.make_matrix2_translation(t,i);za(e,n)},transform_matrix:function(e,t){za(e,t)}}),Va=function(e,t){if(!1=="file_frames"in e||e.file_frames.length<t)return e;var i=["frame_parent","frame_inherit"],n={visited_frames:[]};return function e(t,i,r){if(-1!==n.visited_frames.indexOf(i))throw new Error("encountered a cycle in file_frames. can't flatten.");return n.visited_frames.push(i),r=[i].concat(r),0===i?r:t.file_frames[i-1].frame_inherit&&null!=t.file_frames[i-1].frame_parent?e(t,t.file_frames[i-1].frame_parent,r):r}(e,t,[]).map(function(t){if(0===t){var n=e.file_frames;e.file_frames=null;var r=vr(e);return e.file_frames=n,delete r.file_frames,i.forEach(function(e){return delete r[e]}),r}var s=vr(e.file_frames[t-1]);return i.forEach(function(e){return delete s[e]}),s}).reduce(function(e,t){return Object.assign(e,t)},{})},Da=/*#__PURE__*/Object.freeze({__proto__:null,flatten_frame:Va,merge_frame:function(e,t){var i=vr(t);["frame_parent","frame_inherit"].forEach(function(e){return delete i[e]});var n=e.file_frames;e.file_frames=null;var r=vr(e);return e.file_frames=n,delete r.file_frames,Object.assign(r,t),r}}),Ra=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.map(function(t){return"vertices_coords"===t||"edges_vertices"===t?null!=e[t]:"vertices_vertices"===t?(jn.edges_vertices_to_vertices_vertices_sorted(e),!0):"vertices_edges"==t&&(e.vertices_edges=Fn(e),!0)}).reduce(function(e,t){return e&&t},!0)},qa=function(e,t,i){return e.vertices_coords.map(function(e){return e.map(function(e,n){return e-t[n]})}).map(function(e){return e[0]*i[1]-e[1]*i[0]}).map(function(e,t){return Ne(e)<qi.core.EPSILON?t:void 0}).filter(function(e){return void 0!==e})},Xa=function(e,t,i){var n={};return qa(e,t,i).forEach(function(e){n[e]=!0}),jn.edges_vertices_to_vertices_vertices_sorted(e),e.edges_vertices.map(function(t){return n[t[0]]&&n[t[1]]&&e.vertices_vertices[t[0]].includes(t[1])}).map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},Ga=function(e,t){if(3>t.length)return!1;var n=t.map(function(t){return e.vertices_coords[t]}),r=Array.from(Array(n[0].length)),s=r.map(function(e,t){return n[1][t]-n[0][t]}),i=r.map(function(e,t){return n[2][t]-n[0][t]});return Ne(s[0]*i[1]-s[1]*i[0])<qi.core.EPSILON},Ua=function(e,t){var i=[];t.forEach(function(t){var n=t.vertices,r=t.edges,s=t.assignments[0];_n(e,"edges",r),i.push({vertices:n,assignment:s})}),i.forEach(function(t){var i=e.edges_vertices.length;e.edges_vertices[i]=t.vertices,e.edges_assignment[i]=t.assignment}),_n(e,"vertices",t.map(function(e){return e.vertex}))},Wa=function(t){Ra(t,"vertices_vertices","vertices_edges");var i=t.vertices_vertices.map(function(e,t){return 2===e.length?t:void 0}).filter(function(e){return void 0!==e}),n=i.map(function(e){return[e].concat(t.vertices_vertices[e])}).map(function(e){return Ga(t,e)?{vertex:e[0],vertices:[e[1],e[2]],edges:t.vertices_edges[e[0]]}:void 0}).filter(function(e){return void 0!==e});n.forEach(function(e){e.assignments=e.edges.map(function(i){return t.edges_assignment[i].toUpperCase()})}),n.forEach(function(e){e.valid=e.assignments.map(function(t){return t===e.assignments[0]}).reduce(function(e,t){return e&&t},!0)});var r=n.filter(function(e){return e.valid});return Ua(t,r),0<r.length},Ya=/*#__PURE__*/Object.freeze({__proto__:null,collinear_vertices:qa,collinear_edges:Xa,remove_all_collinear_vertices:Wa}),Za=function(e){var t=e.vertices_coords.length,i=Array(t).fill(!1);return e.edges_vertices.forEach(function(e){e.filter(function(e){return!i[e]}).forEach(function(e){i[e]=!0,t-=1})}),i.map(function(e,t){return e?void 0:t}).filter(function(e){return void 0!==e})},Ka=/*#__PURE__*/Object.freeze({__proto__:null,find_isolated_vertices:Za}),Ha="undefined"!=typeof window&&"undefined"!=typeof window.document,Qa="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,Ja="object"===("undefined"==typeof self?"undefined":e(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,$a=Qa?{}:window,eo,to,io,no,ro,so,ao,oo;if(Qa){var co=require("xmldom"),lo=co.DOMParser,go=co.XMLSerializer;$a.DOMParser=lo,$a.XMLSerializer=go,$a.document=new lo().parseFromString("<!DOCTYPE html><title> </title>","text/html")}var fo=function(e){return 128>e.length&&-1!==e.indexOf(".")},po=function(e){return"svg"===e.tagName||0<e.getElementsByTagName("svg").length},_o=function(e){var t=e.getElementsByTagName("object");return!!(0<t.length)&&0<Array.from(t).filter(function(e){return"oripa.DataSet"===e.className}).length},ho={SVG:"svg",Svg:"svg",svg:"svg",FOLD:"fold",Fold:"fold",fold:"fold",ORIPA:"oripa",Oripa:"oripa",oripa:"oripa",".SVG":"svg",".Svg":"svg",".svg":"svg",".FOLD":"fold",".Fold":"fold",".fold":"fold",".ORIPA":"oripa",".Oripa":"oripa",".oripa":"oripa"},uo=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];if(0>=i.length)throw new Error("convert(), load(), missing a file as a parameter");var r=i[0],s;if(2<=i.length&&"string"==typeof i[1]&&(s=ho[i[1]],void 0===s))throw new Error("expected a file type (like 'svg'), ".concat(i[1]," is unsupported"));if(void 0!==s)return"string"==typeof r?"fold"===s?{data:JSON.parse(r),type:s}:"svg"===s||"oripa"===s?{data:new $a.DOMParser().parseFromString(r,"text/xml").documentElement,type:s}:{data:r,type:s}:{data:r,type:s};var a=e(r);if("string"===a){try{var o=JSON.parse(r);if(pr(o))return{data:o,type:"fold"}}catch(e){var c=new $a.DOMParser().parseFromString(r,"text/xml").documentElement;if(!(0<c.getElementsByTagName("parsererror").length))return po(c)?{data:c,type:"svg"}:_o(c)?{data:c,type:"oripa"}:void 0;if(fo(r))throw new Error("did you provide a file name? please load the file first and pass in the data.");else throw new Error("unable to load file. tried XML, JSON")}return}if("object"===a)try{var d=JSON.parse(JSON.stringify(r));return{data:d,type:"fold"}}catch(e){return"function"==typeof r.getElementsByTagName?po(r)?{data:r,type:"svg"}:_o(r)?{data:r,type:"oripa"}:void 0:void 0}},mo=function(e){var t=e.vertices_coords.map(function(){return[]});return e.edges_vertices.forEach(function(e,n){return e.forEach(function(e){return t[e].push(n)})}),t},vo=function(e){for(var t=e.edges_assignment.map(function(e){return"B"===e||"b"===e}),n=mo(e),r=[],s=[],a=-1,o=0;o<t.length;o+=1)if(t[o]){a=o;break}if(-1===a)return{vertices:[],edges:[]};t[a]=!1,r.push(a),s.push(e.edges_vertices[a][0]);for(var c=e.edges_vertices[a][1];s[0]!==c;){if(s.push(c),a=n[c].filter(function(e){return t[e]}).shift(),void 0===a)return{vertices:[],edges:[]};if(e.edges_vertices[a][0]===c){var d=M(e.edges_vertices[a],2);c=d[1]}else{var l=M(e.edges_vertices[a],1);c=l[0]}t[a]=!1,r.push(a)}return{vertices:s,edges:r}},yo=function(e){if(!1=="vertices_coords"in e||0>=e.vertices_coords.length)return[0,0,0,0];var t=e.vertices_coords[0].length,r=Array(t).fill(1/0),s=Array(t).fill(-Infinity);return e.vertices_coords.forEach(function(e){return e.forEach(function(e,t){e<r[t]&&(r[t]=e),e>s[t]&&(s[t]=e)})}),isNaN(r[0])||isNaN(r[1])||isNaN(s[0])||isNaN(s[1])?[0,0,0,0]:[r[0],r[1],s[0]-r[0],s[1]-r[1]]},ko=function(e){var t=e.faces_vertices.length,i=Array.from(Array(t)).map(function(){return[]}),r={};return e.faces_vertices.forEach(function(e,t){if(void 0!==e){var s=e.length;e.forEach(function(e,n,a){var o=a[(n+1)%s];if(o<e){var c=[o,e];e=c[0],o=c[1]}var d="".concat(e," ").concat(o);if(d in r){var l=r[d];i[t].push(l),i[l].push(t)}else r[d]=t})}}),i},xo=function(e){return e.map(function(e){return e[0]*e[3]-e[1]*e[2]}).map(function(e){return 0<=e})},bo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=[];return n[t]=!0,Eo(e,t).forEach(function(e,t){e.forEach(function(e){n[e.face]=0==t%2})}),n},Eo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=make_vertex_pair_to_edge_map(e),n=ko(e);if(0>=n.length)return[];var r=[t],s=[[{face:t,parent:void 0,edge:void 0,level:0}]];do s[s.length]=s[s.length-1].map(function(t){var s=n[t.face].filter(function(e){return-1===r.indexOf(e)});return r=r.concat(s),s.map(function(n){var r=e.faces_vertices[n].filter(function(i){return-1!==e.faces_vertices[t.face].indexOf(i)}).sort(function(e,t){return e-t}),s=i[r.join(" ")];return{face:n,parent:t.face,edge:s,edge_vertices:r}})}).reduce(function(e,t){return e.concat(t)},[]);while(0<s[s.length-1].length);return 0<s.length&&0===s[s.length-1].length&&s.pop(),s},Po=function e(t){var n,r;if("object"!==O(t))return t;if(!t)return t;if("[object Array]"===Object.prototype.toString.apply(t)){for(n=[],r=0;r<t.length;r+=1)n[r]=e(t[r]);return n}for(r in n={},t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n},wo=function(e,t){if(!1=="file_frames"in e||e.file_frames.length<t)return e;var i=["frame_parent","frame_inherit"],n={visited_frames:[]};return function e(t,i,r){if(-1!==n.visited_frames.indexOf(i))throw new Error("encountered a cycle in file_frames. can't flatten.");return n.visited_frames.push(i),r=[i].concat(r),0===i?r:t.file_frames[i-1].frame_inherit&&null!=t.file_frames[i-1].frame_parent?e(t,t.file_frames[i-1].frame_parent,r):r}(e,t,[]).map(function(t){if(0===t){var n=e.file_frames;e.file_frames=null;var r=Po(e);return e.file_frames=n,delete r.file_frames,i.forEach(function(e){return delete r[e]}),r}var s=Po(e.file_frames[t-1]);return i.forEach(function(e){return delete s[e]}),s}).reduce(function(e,t){return Object.assign(e,t)},{})},Ao="undefined"!=typeof window&&"undefined"!=typeof window.document,So="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,No="object"===("undefined"==typeof self?"undefined":O(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,Lo=!So&&Ao?window:{};if(So){var Co=require("xmldom"),jo=Co.DOMParser,Oo=Co.XMLSerializer;Lo.DOMParser=jo,Lo.XMLSerializer=Oo,Lo.document=new jo().parseFromString("<!DOCTYPE html><title>a</title>","text/html")}var Mo=function(){var e=Lo.document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("version","1.1"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e},Fo=function(){var e=Lo.document.createElementNS("http://www.w3.org/2000/svg","g");return e},Bo=function(){var e=Lo.document.createElementNS("http://www.w3.org/2000/svg","style");return e.setAttribute("type","text/css"),e},zo=function(e,t,i,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=n/1-n,o=[t-a-s,i-a-s,n+2*a+2*s,r+2*a+2*s].join(" ");e.setAttributeNS(null,"viewBox",o)},To=function(e,t,i,n){var r=Lo.document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttributeNS(null,"x1",e),r.setAttributeNS(null,"y1",t),r.setAttributeNS(null,"x2",i),r.setAttributeNS(null,"y2",n),r},Io=function(e,t,i){var n=Lo.document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttributeNS(null,"cx",e),n.setAttributeNS(null,"cy",t),n.setAttributeNS(null,"r",i),n},Vo=function(e){var t=Lo.document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=e.reduce(function(e,t){return"".concat(e).concat(t[0],",").concat(t[1]," ")},"");return t.setAttributeNS(null,"points",i),t},Do=function(e,t,i,n,r,s,a,o){var c=[[e,t],[i,n],[r,s],[a,o]].map(function(e){return e.join(",")}),l="M ".concat(c[0]," C ").concat(c[1]," ").concat(c[2]," ").concat(c[3]),d=Lo.document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttributeNS(null,"d",l),d},Ro=function(e,t,i){var n={color:"#000",strokeWidth:.5,width:.5,length:2,bend:.3,pinch:.618,padding:.5,side:!0,start:!1,end:!0,strokeStyle:"",fillStyle:""};"object"===O(i)&&null!==i&&Object.assign(n,i);var r=["stroke:none","fill:".concat(n.color),n.fillStyle].filter(function(e){return""!==e}).join(";"),s=["fill:none","stroke:".concat(n.color),"stroke-width:".concat(n.strokeWidth),n.strokeStyle].filter(function(e){return""!==e}).join(";"),a=e,o=t,c=[o[0]-a[0],o[1]-a[1]],d=[a[0]+c[0]/2,a[1]+c[1]/2],l=Oe(c[0]*c[0]+c[1]*c[1]),g=2.5*((n.start?1+n.padding:0+n.end?1+n.padding:0)*n.length);if(l<g){var f=[c[0]/l*g,c[1]/l*g];a=[d[0]-.5*f[0],d[1]-.5*f[1]],o=[d[0]+.5*f[0],d[1]+.5*f[1]],c=[o[0]-a[0],o[1]-a[1]]}var p=[c[1],-c[0]],_=[d[0]+p[0]*(n.side?1:-1)*n.bend,d[1]+p[1]*(n.side?1:-1)*n.bend],h=[_[0]-a[0],_[1]-a[1]],u=[_[0]-o[0],_[1]-o[1]],m=Oe(h[0]*h[0]+h[1]*h[1]),v=Oe(u[0]*u[0]+u[1]*u[1]),y=[h[0]/m,h[1]/m],k=[u[0]/v,u[1]/v],x=[-y[0],-y[1]],b=[-k[0],-k[1]],E=[x[1],-x[0]],P=[b[1],-b[0]],w=[a[0]+y[0]*n.length*((n.start?1:0)+n.padding),a[1]+y[1]*n.length*((n.start?1:0)+n.padding)],A=[o[0]+k[0]*n.length*((n.end?1:0)+n.padding),o[1]+k[1]*n.length*((n.end?1:0)+n.padding)];c=[A[0]-w[0],A[1]-w[1]],p=[c[1],-c[0]],d=[w[0]+c[0]/2,w[1]+c[1]/2],_=[d[0]+p[0]*(n.side?1:-1)*n.bend,d[1]+p[1]*(n.side?1:-1)*n.bend];var S=[w[0]+(_[0]-w[0])*n.pinch,w[1]+(_[1]-w[1])*n.pinch],N=[A[0]+(_[0]-A[0])*n.pinch,A[1]+(_[1]-A[1])*n.pinch],L=[[w[0]+E[0]*-n.width,w[1]+E[1]*-n.width],[w[0]+E[0]*n.width,w[1]+E[1]*n.width],[w[0]+x[0]*n.length,w[1]+x[1]*n.length]],C=[[A[0]+P[0]*-n.width,A[1]+P[1]*-n.width],[A[0]+P[0]*n.width,A[1]+P[1]*n.width],[A[0]+b[0]*n.length,A[1]+b[1]*n.length]],j=Lo.document.createElementNS("http://www.w3.org/2000/svg","g"),M=Do(w[0],w[1],S[0],S[1],N[0],N[1],A[0],A[1]);if(M.setAttribute("style",s),j.appendChild(M),n.start){var F=Vo(L);F.setAttribute("style",r),j.appendChild(F)}if(n.end){var B=Vo(C);B.setAttribute("style",r),j.appendChild(B)}return j},qo={B:"boundary",b:"boundary",M:"mountain",m:"mountain",V:"valley",v:"valley",F:"mark",f:"mark",U:"mark",u:"mark"},Xo=function(e){return e.map(function(e,t){return{layer:e,i:t}}).sort(function(e,t){return e.layer-t.layer}).map(function(e){return e.i})},Go=function(e){var t=e["faces_re:coloring"];return null==t&&(t="faces_re:matrix"in e?xo(e["faces_re:matrix"]):bo(e,0)),t.map(function(e){return e?"front":"back"})},Uo=function(e,t){var i=null!=e["faces_re:layer"]&&e["faces_re:layer"].length===e.faces_vertices.length;return i&&Go(e).forEach(function(e,n){return t[n].setAttribute("class",e)}),i?Xo(e["faces_re:layer"]).map(function(e){return t[e]}):t},Wo=function(e){return null==e.edges_vertices||null==e.edges_assignment||e.edges_vertices.length!==e.edges_assignment.length?[]:e.edges_assignment.map(function(e){return qo[e]})},Yo=function(e){if(!1=="vertices_coords"in e||!1=="edges_vertices"in e||!1=="edges_assignment"in e)return[];var t=vo(e).vertices.map(function(t){return e.vertices_coords[t]}),i=Vo(t);return i.setAttribute("class","boundary"),[i]},Zo=function(e,t){if(!1=="vertices_coords"in e)return[];var i=t&&t.radius?t.radius:.01,n=e.vertices_coords.map(function(e){return Io(e[0],e[1],i)});return n.forEach(function(e,t){return e.setAttribute("id","".concat(t))}),n},Ko=function(e){if(!1=="edges_vertices"in e||!1=="vertices_coords"in e)return[];var t=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(t){return To(t[0][0],t[0][1],t[1][0],t[1][1])});return t.forEach(function(e,t){return e.setAttribute("id","".concat(t))}),Wo(e).forEach(function(e,n){return t[n].setAttribute("class",e)}),t},Ho=function(e){if(!1=="faces_vertices"in e||!1=="vertices_coords"in e)return[];var t=e.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(e){return Vo(e)});return t.forEach(function(e,t){return e.setAttribute("id","".concat(t))}),Uo(e,t)},Qo=function(e){if(!1=="faces_edges"in e||!1=="edges_vertices"in e||!1=="vertices_coords"in e)return[];var t=e.faces_edges.map(function(t){return t.map(function(t){return e.edges_vertices[t]}).map(function(e,t,i){var n=i[(t+1)%i.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(function(t){return e.vertices_coords[t]})}).map(function(e){return Vo(e)});return t.forEach(function(e,t){return e.setAttribute("id","".concat(t))}),Uo(e,t)},Jo=Lo.document,$o="http://www.w3.org/2000/svg",ec=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"shadow",t=Jo.createElementNS($o,"defs"),i=Jo.createElementNS($o,"filter");i.setAttribute("width","200%"),i.setAttribute("height","200%"),i.setAttribute("id",e);var n=Jo.createElementNS($o,"feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("stdDeviation","0.005"),n.setAttribute("result","blur");var r=Jo.createElementNS($o,"feOffset");r.setAttribute("in","blur"),r.setAttribute("result","offsetBlur");var s=Jo.createElementNS($o,"feFlood");s.setAttribute("flood-color","#000"),s.setAttribute("flood-opacity","0.3"),s.setAttribute("result","offsetColor");var a=Jo.createElementNS($o,"feComposite");a.setAttribute("in","offsetColor"),a.setAttribute("in2","offsetBlur"),a.setAttribute("operator","in"),a.setAttribute("result","offsetBlur");var o=Jo.createElementNS($o,"feMerge"),c=Jo.createElementNS($o,"feMergeNode"),d=Jo.createElementNS($o,"feMergeNode");return d.setAttribute("in","SourceGraphic"),o.appendChild(c),o.appendChild(d),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(s),i.appendChild(a),i.appendChild(o),t},tc={vertices:"vertices",edges:"creases",faces:"faces",boundaries:"boundaries"},ic=function(e){return!0=="faces_vertices"in e?Ho(e):!0=="faces_edges"in e?Qo(e):[]},nc={vertices:Zo,edges:Ko,faces:ic,boundaries:Yo},rc=function(e){var t=(null==e.file_classes?[]:e.file_classes).join(" "),i=(null==e.frame_classes?[]:e.frame_classes).join(" ");return[t,i].filter(function(e){return""!==e}).join(" ")},sc=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:14;return parseFloat(e.toFixed(t))},ac=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=e;null!=i.vertices_coords&&(i.vertices_coordsPreClean=i.vertices_coords,i.vertices_coords=JSON.parse(JSON.stringify(i.vertices_coords)).map(function(e){return e.map(function(e){return sc(e)})}));var n={defaults:!0,width:"500px",height:"500px",inlineStyle:!0,stylesheet:"svg * {\n  stroke-width: var(--crease-width);\n  stroke-linecap: round;\n  stroke: black;\n}\nline.mountain { stroke: red; }\nline.mark { stroke: lightgray; }\nline.valley { stroke: blue;\n  stroke-dasharray: calc(var(--crease-width) * 2) calc(var(--crease-width) * 2);\n}\npolygon { stroke: none; stroke-linejoin: bevel; }\n.foldedForm polygon { stroke: black; fill: #8881; }\n.foldedForm polygon.front { fill: white; }\n.foldedForm polygon.back { fill: lightgray; }\n.creasePattern polygon { fill: white; stroke: none; }\n.foldedForm .boundaries polygon { fill: none; stroke: none; }\n.foldedForm line { stroke: none; }\n",shadows:!1,padding:0,viewBox:null,diagram:!0,boundaries:!0,faces:!0,edges:!0,vertices:!1};Object.assign(n,t),null!=n.frame&&(i=wo(e,n.frame)),null==n.svg&&(n.svg=Mo()),n.svg.setAttribute("class",rc(i)),n.svg.setAttribute("width",n.width),n.svg.setAttribute("height",n.height);var r=Bo();n.svg.appendChild(r);var s={};if(["boundaries","faces","edges","vertices"].filter(function(e){return n[e]}).forEach(function(e){s[e]=Fo(),s[e].setAttribute("class",tc[e]),n.svg.appendChild(s[e])}),Object.keys(s).forEach(function(e){return nc[e](i).forEach(function(t){return s[e].appendChild(t)})}),"re:diagrams"in i&&n.diagram){var a=Fo();n.svg.appendChild(a),X(i,a)}if(n.shadows){var o=ec("face_shadow");n.svg.appendChild(o),Array.from(s.faces.childNodes).forEach(function(e){return e.setAttribute("filter","url(#".concat("face_shadow",")"))})}var c=yo(i);if(null==n.viewBox?zo.apply(void 0,[n.svg].concat(F(c),[n.padding])):zo.apply(void 0,[n.svg].concat(F(n.viewBox),[n.padding])),null!=i.vertices_coordsPreClean&&(i.vertices_coords=i.vertices_coordsPreClean,delete i.vertices_coordsPreClean),n.inlineStyle){var d=c[2]>c[3]?c[3]:c[2],l="\nsvg { --crease-width: ".concat(.005*d,"; }\n").concat(n.stylesheet),g=new Lo.DOMParser().parseFromString("<xml></xml>","application/xml"),f=g.createCDATASection(l);r.appendChild(f)}var p=new Lo.XMLSerializer().serializeToString(n.svg),_=q(p);return _},oc=function(e){if("object"===O(e)&&null!==e)return e;if("string"==typeof e||e instanceof String)try{var t=JSON.parse(e);return t}catch(e){throw e}throw new Error("couldn't recognize input. looking for string or object")},cc={svg:function(e,t){try{var i=oc(e);return ac(i,t)}catch(e){throw e}},webGL:function(){},components:{svg:{boundaries:Yo,vertices:Zo,edges:Ko,faces:Ho,faces_vertices:Ho,faces_edges:Qo},webGL:{}}},dc={};dc.type2fold={0:"F",1:"B",2:"M",3:"V"},dc.fold2type={};var lc=dc.type2fold;for(var gc in lc){var x=lc[gc];dc.fold2type[x]=gc}dc.fold2type_default=0,dc.prop_xml2fold={editorName:"frame_author",originalAuthorName:"frame_designer",reference:"frame_reference",title:"frame_title",memo:"frame_description",paperSize:null,mainVersion:null,subVersion:null},dc.POINT_EPS=1,dc.toFold=function(e,t){var i,r,s,a,o,c,d,g,f,p,_,h,u,v,y,x,b,E,P,w,A,S,N,L,C,O,M,F,B,z,T,I,V,D;for(r={vertices_coords:[],edges_vertices:[],edges_assignment:[],file_creator:"oripa2fold"},B=function(e,t){var i;return i=r.vertices_coords.length,r.vertices_coords.push([parseFloat(e),parseFloat(t)]),i},y=function(e,t,i,n){return null!=t&&e.tagName!==t?(console.warn("ORIPA file has "+e.tagName+" where "+t+" was expected"),null):null==i||e.hasAttribute(i)&&(null==n||e.getAttribute(i)===n)?e:(console.warn("ORIPA file has "+e.tagName+" with "+i+" = "+e.getAttribute(i)+" where "+n+" was expected"),null)},i=function(e){var t,i,n,r,s;if(e){for(r=e.childNodes,s=[],(i=0,n=r.length);i<n;i++)t=r[i],1===t.nodeType&&s.push(t);return s}return[]},b=function(e,t,n,r){var s;return s=i(e),1===s.length?y(s[0],t,n,r):(console.warn("ORIPA file has "+e.tagName+" with "+e.childNodes.length+" children, not 1"),null)},E=function(e){var t;return 1<e.childNodes.length?(console.warn("ORIPA file has "+e.tagName+" with "+e.childNodes.length+" children, not 0 or 1"),null):0===e.childNodes.length?"":(t=e.childNodes[0],3===t.nodeType?t.data:console.warn("ORIPA file has nodeType "+t.nodeType+" where 3 (text) was expected"))},I=!0===t?e:new DOMParser().parseFromString(e,"text/xml").documentElement,A=i(I),(s=0,c=A.length);s<c;s++)if(M=A[s],y(M,"object","class","oripa.DataSet"))for(S=i(M),a=0,d=S.length;a<d;a++)if(w=S[a],"lines"===w.getAttribute("property")){for(h=b(w,"array","class","oripa.OriLineProxy"),N=i(h),(o=0,g=N.length);o<g;o++)if(_=N[o],y(_,"void","index"))for(L=i(_),u=0,f=L.length;u<f;u++)if(x=L[u],y(x,"object","class","oripa.OriLineProxy")){for(z=T=V=D=F=0,C=i(x),(v=0,p=C.length);v<p;v++)if(O=C[v],y(O,"void","property"))switch(O.getAttribute("property")){case"x0":z=E(b(O,"double"));break;case"x1":T=E(b(O,"double"));break;case"y0":V=E(b(O,"double"));break;case"y1":D=E(b(O,"double"));break;case"type":F=E(b(O,"int"));}null!=z&&null!=T&&null!=V&&null!=D?(r.edges_vertices.push([B(z,V),B(T,D)]),null!=F&&(F=parseInt(F)),r.edges_assignment.push(dc.type2fold[F])):console.warn("ORIPA line has missing data: "+z+" "+T+" "+V+" "+D+" "+F)}}else w.getAttribute("property")in dc.prop_xml2fold?(P=dc.prop_xml2fold[w.getAttribute("property")],null!=P&&(r[P]=E(b(w,"string")))):console.warn("Ignoring "+w.tagName+" "+M.getAttribute("property")+" in ORIPA file");return Nn.collapseNearbyVertices(r,dc.POINT_EPS),Nn.subdivideCrossingEdges_vertices(r,dc.POINT_EPS),jn.edges_vertices_to_faces_vertices(r),r},dc.fromFold=function(e){var t,n,r,a,o,c,d,l,g,f,p,_,h;for(h in"string"==typeof e&&(e=JSON.parse(e)),f="<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n<java version=\"1.5.0_05\" class=\"java.beans.XMLDecoder\"> \n <object class=\"oripa.DataSet\"> \n  <void property=\"mainVersion\"> \n   <int>1</int> \n  </void> \n  <void property=\"subVersion\"> \n   <int>1</int> \n  </void> \n  <void property=\"paperSize\"> \n   <double>400.0</double> \n  </void> \n",g=dc.prop_xml2fold,g)r=g[h],f+=(".\n  <void property=\""+h+"\"> \n   <string>"+(e[r]||"")+"</string> \n  </void> \n").slice(2);for(l=function(){var i,r,s,a;for(s=e.edges_vertices,a=[],(n=i=0,r=s.length);i<r;n=++i)t=s[n],_=function(){var i,n,r,s,a,o;for(o=[],i=0,r=t.length;i<r;i++){for(p=t[i],a=e.vertices_coords[p].slice(2),(n=0,s=a.length);n<s;n++)a[n];o.push(e.vertices_coords[p])}return o}(),a.push({x0:_[0][0],y0:_[0][1],x1:_[1][0],y1:_[1][1],type:dc.fold2type[e.edges_assignment[n]]||dc.fold2type_default});return a}(),f+=(".\n  <void property=\"lines\"> \n   <array class=\"oripa.OriLineProxy\" length=\""+l.length+"\"> \n").slice(2),(a=o=0,c=l.length);o<c;a=++o)d=l[a],f+=(".\n    <void index=\""+a+"\"> \n     <object class=\"oripa.OriLineProxy\"> \n      <void property=\"type\"> \n       <int>"+d.type+"</int> \n      </void> \n      <void property=\"x0\"> \n       <double>"+d.x0+"</double> \n      </void> \n      <void property=\"x1\"> \n       <double>"+d.x1+"</double> \n      </void> \n      <void property=\"y0\"> \n       <double>"+d.y0+"</double> \n      </void> \n      <void property=\"y1\"> \n       <double>"+d.y1+"</double> \n      </void> \n     </object> \n    </void> \n").slice(2);return f+=".\n   </array> \n  </void> \n </object> \n</java> \n".slice(2),f};var y="undefined"!=typeof window&&"undefined"!=typeof window.document,fc="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,pc="object"===("undefined"==typeof self?"undefined":e(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,_c=!fc&&y?window:{};if(fc){var hc=require("xmldom"),uc=hc.DOMParser,mc=hc.XMLSerializer;_c.DOMParser=uc,_c.XMLSerializer=mc,_c.document=new uc().parseFromString("<!DOCTYPE html><title>a</title>","text/html")}var vc={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",orange:"#ffa500",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"},yc=Object.keys(vc),kc=function(e){var t=0,i=0,n=0,s=255;return 4===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3])):7===e.length?(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6])):5===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3]),s="0x".concat(e[4]).concat(e[4])):9===e.length&&(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6]),s="0x".concat(e[7]).concat(e[8])),[+(t/255),+(i/255),+(n/255),+(s/255)]},xc=function(e){if(null==e||"string"!=typeof e)return"U";var t=[0,0,0,1];"#"===e[0]?t=kc(e):-1!==yc.indexOf(e)&&(t=kc(vc[e]));var i=.05;return t[0]<i&&t[1]<i&&t[2]<i?"U":t[0]>t[1]&&t[0]-t[2]>i?"M":t[2]>t[1]&&t[2]-t[0]>i?"V":"U"},bc=1e-6,Ec=function(e){var t=e.map(function(e){return e*e}).reduce(function(e,t){return e+t},0);return Oe(t)},Pc=function(e,t){return e>bc&&e<1-bc&&t>bc&&t<1-bc},wc=function(e,t,i,n,r){function s(e,t){return e[0]*t[1]-t[0]*e[1]}var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:bc,o=s(t,n);if(!(Ne(o)<a)){var c=s([i[0]-e[0],i[1]-e[1]],n),d=s([e[0]-i[0],e[1]-i[1]],t),l=c/o;return r(l,d/-o,a)?[e[0]+t[0]*l,e[1]+t[1]*l]:void 0}},Ac={core:{EPSILON:bc,magnitude:Ec,normalize:function(e){var t=Ec(e);return 0===t?e:e.map(function(e){return e/t})},equivalent:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:bc,r=0;r<e.length;r+=1)if(Ne(e[r]-t[r])>n)return!1;return!0},point_on_edge_exclusive:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:bc,r=[t[0]-i[0],t[1]-i[1]],s=[t[0]-e[0],t[1]-e[1]],a=[i[0]-e[0],i[1]-e[1]],o=Oe(r[0]*r[0]+r[1]*r[1]),c=Oe(s[0]*s[0]+s[1]*s[1]),d=Oe(a[0]*a[0]+a[1]*a[1]);return Ne(o-c-d)<n},intersection:{segment_segment_exclusive:function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return wc(e,s,i,a,Pc,r)}}}},Sc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ae.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},Nc={vertices:function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return Sc([],t,i,n)},edges:function(e){var t=e.edges_vertices,i=e.edges_faces;return Sc([],t,i)},faces:function(e){var t=e.faces_vertices,i=e.faces_edges;return Sc([],t,i)}},Lc=function(e,t,i){var n=Nc[t](e),r=Array(n).fill(!1);i.forEach(function(e){r[e]=!0});var a=0,o=r.map(function(e){return e?--a:a});if(0===i.length)return o;var c="".concat(t,"_"),d="_".concat(t),l=Object.keys(e),g=l.map(function(e){return e.substring(0,c.length)===c?e:void 0}).filter(function(e){return void 0!==e}),f=l.map(function(e){return e.substring(e.length-d.length,e.length)===d?e:void 0}).filter(function(e){return void 0!==e});return f.forEach(function(t){return e[t].forEach(function(n,r){return e[t][r].forEach(function(i,n){e[t][r][n]+=o[i]})})}),g.forEach(function(t){e[t]=e[t].filter(function(e,t){return!r[t]})}),o},Cc=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},jc=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ac.core.EPSILON,r=i.map(function(e){return e.map(function(e){return t[e]})});return r.map(function(i){return t.filter(function(e){return Ac.core.point_on_edge_exclusive(e,i[0],i[1],n)})})},Oc=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=i.map(function(e){return e.map(function(e){return t[e]})}),r=n.map(function(t){return[t[1][0]-t[0][0],t[1][1]-t[0][1]]}),s=r.map(function(t){return Oe(t[0]*t[0]+t[1]*t[1])}),a=r.map(function(t,e){return[t[0]/s[e],t[1]/s[e]]});return a.map(function(t){return .707<Ne(t[0])})},Mc=function(e){for(var t=e.vertices_coords,n=e.edges_vertices,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ac.core.EPSILON,s=n.length,a=n.map(function(e){return e.map(function(e){return t[e]})}),o=Array.from(Array(s-1)).map(function(){return[]}),c=0;c<a.length-1;c+=1)for(var d=c+1;d<a.length;d+=1)o[c][d]=Ac.core.intersection.segment_segment_exclusive(a[c][0],a[c][1],a[d][0],a[d][1],r);for(var l=Array.from(Array(s)).map(function(){return[]}),g=0;g<a.length-1;g+=1)for(var f=g+1;f<a.length;f+=1)null!=o[g][f]&&(l[g].push(o[g][f]),l[f].push(o[g][f]));return l},Fc=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ac.core.EPSILON,n=function(e,t){return e[0]-t[0]},r=function(e,t){return e[1]-t[1]},s=Oc(e),a=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});a.forEach(function(t,e){return t.sort(s[e]?n:r)});var o=Mc(e,t),c=jc(e,t),d=o.map(function(e,t){return e.concat(c[t])});d.forEach(function(t,e){return t.sort(s[e]?n:r)});var l=d.map(function(e){return Array.from(Array(e.length-1)).map(function(t,n){return[e[n],e[n+1]]})});l=l.map(function(e){return e.filter(function(n){return!1===n.map(function(e,r){return Ne(n[0][r]-n[1][r])<t}).reduce(function(e,t){return e&&t},!0)})});for(var g=l.map(function(e,t){return e.map(function(){return t})}).reduce(function(e,t){return e.concat(t)},[]),f=l.map(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),p=0,_=l.map(function(e){return e.map(function(){return[p++,p++]})}).reduce(function(e,t){return e.concat(t)},[]),h=Array.from(Array(f.length)).map(function(){return[]}),u=0;u<f.length-1;u+=1)for(var m=u+1;m<f.length;m+=1)h[u][m]=Ac.core.equivalent(f[u],f[m],t);var y=f.map(function(){});h.forEach(function(e,t){return e.forEach(function(e,i){e&&(y[i]=void 0===y[t]?t:y[t])})});var k=y.map(function(e){return void 0!==e});y.forEach(function(e,t){void 0===e&&(y[t]=t)}),_.forEach(function(e,t){return e.forEach(function(e,i){_[t][i]=y[e]})});for(var x=Array.from(Array(_.length)).map(function(){return[]}),b=0;b<_.length-1;b+=1)for(var E=b+1;E<_.length;E+=1)x[b][E]=Cc(_[b],_[E]);var P=_.map(function(){});x.forEach(function(e,t){return e.forEach(function(e,i){e&&(P[t]=void 0===P[i]?i:P[i])})});var w=P.map(function(e){return void 0===e});P.forEach(function(e,t){void 0===e&&(P[t]=t)});var A=_.filter(function(e,t){return w[t]}),S=g.filter(function(e,t){return w[t]}),N={vertices_coords:f,edges_vertices:A};!0=="edges_assignment"in e&&(N.edges_assignment=S.map(function(t){return e.edges_assignment[t]})),!0=="edges_foldAngle"in e&&(N.edges_foldAngle=S.map(function(t){return e.edges_foldAngle[t]}));var L=k.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e});return Lc(N,"vertices",L),N},Bc=function(e){var t=e.edges_vertices,n={};return t.map(function(e){return e.sort(function(e,t){return e-t}).join(" ")}).forEach(function(e,t){n[e]=t}),n},zc=function(e,t,i){for(var n=e.vertices_vertices,r=[t,i];r[0]!==r[r.length-1]&&r[r.length-1]!==r[r.length-2];){var s=n[r[r.length-1]],a=s.indexOf(r[r.length-2]),o=s[(a+1)%s.length];r.push(o)}return r.pop(),r},Tc=function(e){if(null==e.vertices_coords||1>e.vertices_coords.length)return[];for(var t=0,n=1;n<e.vertices_coords.length;n+=1)e.vertices_coords[n][1]<e.vertices_coords[t][1]&&(t=n);if(-1===t)return[];for(var r=e.vertices_vertices[t],s=r.map(function(i){return[e.vertices_coords[i][0]-e.vertices_coords[t][0],e.vertices_coords[i][1]-e.vertices_coords[t][1]]}),a=s.map(function(e){return Ac.core.normalize(e)}).map(function(e){return e[0]}),o=-1,c=-Infinity,d=0;d<a.length;d+=1)a[d]>c&&(o=d,c=a[d]);var l=zc(e,t,r[o]),g=Bc(e),f=l.map(function(e,t,i){return[i[t],i[(t+1)%i.length]].sort(function(e,t){return e-t}).join(" ")}),p=f.map(function(e){return g[e]});return p},Ic={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Vc=/([astvzqmhlc])([^astvzqmhlc]*)/ig,Dc=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;J.prototype={constructor:J,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var i=te(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i)},getTangentAtLength:function(e){var i=te(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),n=Oe(t.x*t.x+t.y*t.y),r;return r=0<n?{x:t.x/n,y:t.y/n}:{x:0,y:0},r},getPropertiesAtLength:function(e){var i=te(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),n=Oe(t.x*t.x+t.y*t.y),r;r=0<n?{x:t.x/n,y:t.y/n}:{x:0,y:0};var s=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i);return{x:s.x,y:s.y,tangentX:r.x,tangentY:r.y}}};var Rc=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],qc=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Xc=[[1],[1,1],[1,2,1],[1,3,3,1]];ce.prototype={constructor:ce,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=de({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getTangentAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=de({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),i=this.getPointAtLength(e);return{x:i.x,y:i.y,tangentX:t.x,tangentY:t.y}}},me.prototype.getTotalLength=function(){return Oe(Me(this.x0-this.x1,2)+Me(this.y0-this.y1,2))},me.prototype.getPointAtLength=function(e){var t=e/Oe(Me(this.x0-this.x1,2)+Me(this.y0-this.y1,2)),i=(this.x1-this.x0)*t,n=(this.y1-this.y0)*t;return{x:this.x0+i,y:this.y0+n}},me.prototype.getTangentAtLength=function(){var e=Oe((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}},me.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),i=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:i.x,tangentY:i.y}};var Gc=128,Uc={value:0},Wc=function(e){return e.split(" ").filter(function(e){return""!==e}).map(function(e){return e.split(",").map(function(e){return parseFloat(e)})})},Yc=function(e,t){var i=t.map(function(t){for(var n=0;n<e.attributes.length;n+=1)if(e.attributes[n].nodeName===t)return n});return i.map(function(t){return void 0===t?Uc:e.attributes[t]}).map(function(e){return void 0===e.value?e.baseVal.value:e.value})},Zc=function(e){for(var t="",n=0;n<e.attributes.length;n+=1)if("points"===e.attributes[n].nodeName){t=e.attributes[n].value;break}return Wc(t).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},Kc={line:function(e){return[Yc(e,["x1","y1","x2","y2"])]},rect:function(e){var t=Yc(e,["x","y","width","height"]),i=parseFloat(t[0]),n=parseFloat(t[1]),r=parseFloat(t[2]),s=parseFloat(t[3]);return[[i,n,i+r,n],[i+r,n,i+r,n+s],[i+r,n+s,i,n+s],[i,n+s,i,n]]},circle:function(e){var t=Yc(e,["cx","cy","r"]),n=parseFloat(t[0]),s=parseFloat(t[1]),a=parseFloat(t[2]);return Array.from(Array(64)).map(function(e,t){return[n+a*Ce(2*(t/64*Se)),s+a*Le(2*(t/64*Se))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},ellipse:function(e){var t=Yc(e,["cx","cy","rx","ry"]),n=parseFloat(t[0]),r=parseFloat(t[1]),s=parseFloat(t[2]),a=parseFloat(t[3]);return Array.from(Array(64)).map(function(e,t){return[n+s*Ce(2*(t/64*Se)),r+a*Le(2*(t/64*Se))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},polygon:Zc,polyline:function(e){var t=Zc(e);return t.pop(),t},path:function(e){var t=e.getAttribute("d"),n=ve(t),r=n.getTotalLength(),s="Z"===t[t.length-1]||"z"===t[t.length-1],a=s?r/Gc:r/(Gc-1),o=Array.from(Array(Gc)).map(function(e,t){return n.getPointAtLength(t*a)}).map(function(e){return[e.x,e.y]}),c=o.map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]});return s||c.pop(),c}},Hc={};if(function(){return"undefined"==typeof window&&"undefined"!=typeof process}()){var Qc=require("xmldom"),Jc=Qc.DOMParser,$c=Qc.XMLSerializer;Hc.DOMParser=Jc,Hc.XMLSerializer=$c,Hc.document=new Jc().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else(function(){return"undefined"!=typeof window})()&&(Hc.DOMParser=window.DOMParser,Hc.XMLSerializer=window.XMLSerializer,Hc.document=window.document);var ed=function(e){var t=e.match(/(\w+\((\-?\d+\.?\d*e?\-?\d*,?\s*)+\))+/g),i=t.map(function(e){return e.match(/[\w\.\-]+/g)});return i.map(function(e){return{transform:e.shift(),parameters:e.map(function(e){return parseFloat(e)})}})},td=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5],e[2]*t[0]+e[3]*t[2]+t[4],e[2]*t[1]+e[3]*t[3]+t[5]]},id=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},nd=function(e){switch(e.length){case 1:return[1,0,0,1,e[0],0];case 2:return[1,0,0,1,e[0],e[1]];default:console.warn("improper translate, ".concat(e));}},rd=function(e){var t=Ce(e[0]/180*Se),i=Le(e[0]/180*Se);switch(e.length){case 1:return[t,i,-i,t,0,0];case 3:return[t,i,-i,t,-e[1]*t+e[2]*i+e[1],-e[1]*i-e[2]*t+e[2]];default:console.warn("improper rotate, ".concat(e));}},sd=function(e){switch(e.length){case 1:return[e[0],0,0,e[0],0,0];case 2:return[e[0],0,0,e[1],0,0];default:console.warn("improper scale, ".concat(e));}},ad=function(e){return[1,0,be(e[0]/180*Se),1,0,0]},od=function(e){return[1,be(e[0]/180*Se),0,1,0,0]},cd=function(e,t){switch(e){case"translate":return nd(t);case"rotate":return rd(t);case"scale":return sd(t);case"skewX":return ad(t);case"skewY":return od(t);case"matrix":return t;default:console.warn("unknown transform type ".concat(e));}},dd=function(e){return ed(e).map(function(e){return cd(e.transform,e.parameters)}).filter(function(e){return void 0!==e}).reduce(function(e,t){return id(e,t)},[1,0,0,1,0,0])},ld=function(e){if("function"!=typeof e.getAttribute)return[1,0,0,1,0,0];var t=e.getAttribute("transform");return null!=t&&""!==t?dd(t):[1,0,0,1,0,0]},gd=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0],n=id(i,ld(t));if(t.matrix=n,"g"===t.tagName||"svg"===t.tagName){if(null==t.childNodes)return;Array.from(t.childNodes).forEach(function(t){return e(t,n)})}},fd=Object.keys(Kc),pd="http://www.w3.org/2000/svg",_d={string:!0,svg:!1},hd=["version","xmlns","contentScriptType","contentStyleType","baseProfile","class","externalResourcesRequired","x","y","width","height","viewBox","preserveAspectRatio","zoomAndPan","style"],ud={line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:["points"],polyline:["points"],path:["d"]},md=function(e){return"string"==typeof e||e instanceof String?new Hc.DOMParser().parseFromString(e,"text/xml").documentElement:e},vd=function e(t){return"g"===t.tagName||"svg"===t.tagName?null==t.childNodes?[]:Array.from(t.childNodes).map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)},[]):[t]},yd=function(e){return Array.from(e.attributes).filter(function(t){return-1===ud[e.tagName].indexOf(t.name)})},kd=function(e){var t={};return e.forEach(function(e){t[e.nodeName]=e.value}),t},xd=function(e,t){var i=md(e);gd(i);var n=vd(i),r=n.filter(function(t){return-1!==fd.indexOf(t.tagName)}).map(function(t){return Kc[t.tagName](t).map(function(e){return td(e,t.matrix)}).map(function(e){return[].concat(G(e),[yd(t)])})}).reduce(function(e,t){return e.concat(t)},[]);r.filter(function(e){return void 0!==e[4]}).forEach(function(e){var t=e[4].filter(function(e){return"transform"!==e.nodeName});e[4]=kd(t)});var s=Object.assign(Object.assign({},_d),t);if(s.svg){var a=Hc.document.createElementNS(pd,"svg");hd.map(function(e){return{attribute:e,value:i.getAttribute(e)}}).filter(function(e){return null!=e.value&&""!==e.value}).forEach(function(e){return a.setAttribute(e.attribute,e.value)}),null===a.getAttribute("xmlns")&&a.setAttribute("xmlns",pd);var o=n.filter(function(t){return"style"===t.tagName||"defs"===t.tagName});if(0<o.length&&o.map(function(e){return e.cloneNode(!0)}).forEach(function(e){return a.appendChild(e)}),r.forEach(function(e){var t=Hc.document.createElementNS(pd,"line");t.setAttributeNS(null,"x1",e[0]),t.setAttributeNS(null,"y1",e[1]),t.setAttributeNS(null,"x2",e[2]),t.setAttributeNS(null,"y2",e[3]),null!=e[4]&&Object.keys(e[4]).forEach(function(i){return t.setAttribute(i,e[4][i])}),a.appendChild(t)}),!1===s.string)return a;var c=new Hc.XMLSerializer().serializeToString(a),d=ye(c);return d}return r},bd={convert:jn},Ed={V:180,v:180,M:-180,m:-180},Pd=function(e){return Ed[e]||0},wd=function(){return{file_spec:1.1,file_creator:"Rabbit Ear",file_classes:["singleModel"],frame_title:"",frame_classes:["creasePattern"],frame_attributes:["2D"],vertices_coords:[],vertices_vertices:[],vertices_faces:[],edges_vertices:[],edges_faces:[],edges_assignment:[],edges_foldAngle:[],edges_length:[],faces_vertices:[],faces_edges:[]}},Ad=function(e,t){var i=wd(),n=i.vertices_coords.length,r=xd(e);i.vertices_coords=r.map(function(e){return[[e[0],e[1]],[e[2],e[3]]]}).reduce(function(e,t){return e.concat(t)},i.vertices_coords),i.edges_vertices=r.map(function(e,t){return[n+2*t,n+2*t+1]}),i.edges_assignment=r.map(function(e){return e[4]}).map(function(e){return null==e?"U":xc(e.stroke)});var s=Fc(i,t.epsilon);return bd.convert.edges_vertices_to_vertices_vertices_sorted(s),bd.convert.vertices_vertices_to_faces_vertices(s),bd.convert.faces_vertices_to_faces_edges(s),s.edges_foldAngle=s.edges_assignment.map(function(e){return Pd(e)}),!1!==t.boundary&&Tc(s).forEach(function(e){s.edges_assignment[e]="B"}),s},Sd=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var i=new _c.DOMParser().parseFromString(e,"text/xml").documentElement;return Ad(i,t)}return Ad(e,t)};Sd.core={segmentize:function(){},fragment:Fc};var Nd=function(e,t,i){switch(t){case"fold":switch(i){case"fold":return e;case"oripa":return dc.fromFold(e);case"svg":return cc.svg(e);default:}break;case"oripa":switch(i){case"fold":return dc.toFold(e,!0);case"oripa":return e;case"svg":return cc.svg(dc.toFold(e,!0));default:}break;case"svg":for(var n=arguments.length,r=Array(3<n?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];switch(i){case"fold":return Sd.apply(void 0,[e].concat(r));case"oripa":return dc.fromFold(Sd.apply(void 0,[e].concat(r)));case"svg":return e;default:}break;default:}},Ld=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Cd=function(e){var t=e.toLowerCase(),i=e.toUpperCase(),n=Ld(t),r=[t,i,n];return["","to","into"].map(function(e){return r.map(function(t){return e+t})}).reduce(function(e,t){return e.concat(t)},[])},jd=function(){var e=uo.apply(void 0,arguments),t={};return["fold","svg","oripa"].forEach(function(i){return Cd(i).forEach(function(n){return Object.defineProperty(t,n,{value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nd.apply(void 0,[e.data,e.type,i].concat(n))}})})}),t},Od=/*#__PURE__*/Object.freeze({__proto__:null,copy_without_marks:function(e){var t=e.edges_vertices.filter(function(t,n){return"F"!==e.edges_assignment[n]&&"f"!==e.edges_assignment[n]}),i=e.edges_assignment.filter(function(e){return"F"!==e&&"f"!==e}),n=vr(e);Object.keys(n).filter(function(e){return"vertices_"===e.substring(0,9)}).forEach(function(e){return delete n[e]}),Object.keys(n).filter(function(e){return"edges_"===e.substring(0,6)}).forEach(function(e){return delete n[e]}),Object.keys(n).filter(function(e){return"faces_"===e.substring(0,6)}).forEach(function(e){return delete n[e]});var r=Object.assign(n,{vertices_coords:e.vertices_coords,edges_vertices:t,edges_assignment:i});return jn.edges_vertices_to_vertices_vertices_sorted(r),jn.vertices_vertices_to_faces_vertices(r),jn.faces_vertices_to_faces_edges(r),r.edges_faces=Tn(r),r.vertices_faces=Rn(r),r}}),Md=/*#__PURE__*/Object.freeze({__proto__:null,select_vertices:function(e,t){var i=qi.convexPolygon(t),n=e.vertices_coords.map(function(e){return i.contains(e)});return e.vertices_coords.map(function(e,t){return t}).filter(function(e){return n[e]})},select_edges:function(e,t){var i=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}),n=qi.convexPolygon(t),r=i.map(function(e){return n.overlaps(e)});return i.map(function(e,t){return t}).filter(function(e){return r[e]})}}),Fd=function(e,t,i){if(void 0!==e.vertices_coords){var n=e.vertices_coords.length;return e.vertices_coords[n]=[t,i],n}},Bd=function(t,i,e,r){if(!(t.edges_vertices.length<r)){var s=Fd(t,i,e),a=t.edges_vertices[r];null==t.vertices_vertices&&(t.vertices_vertices=[]),t.vertices_vertices[s]=vr(a),a.forEach(function(e,n,i){var r=i[(n+1)%i.length],a=t.vertices_vertices[e].indexOf(r);t.vertices_vertices[e][a]=s}),null!=t.edges_faces&&null!=t.edges_faces[r]&&(t.vertices_faces[s]=vr(t.edges_faces[r]));var o=[{edges_vertices:[a[0],s]},{edges_vertices:[s,a[1]]}];o.forEach(function(n,e){n.i=t.edges_vertices.length+e}),["edges_faces","edges_assignment","edges_foldAngle"].filter(function(e){return null!=t[e]&&null!=t[e][r]}).forEach(function(e){o[0][e]=vr(t[e][r]),o[1][e]=vr(t[e][r])}),o.forEach(function(e,r){var i=e.edges_vertices.map(function(e){return t.vertices_coords[e]}),s;o[r].edges_length=(s=qi.core).distance2.apply(s,n(i))}),o.forEach(function(e){return Object.keys(e).filter(function(e){return"i"!==e}).filter(function(e){return void 0!==t[e]}).forEach(function(i){t[i][e.i]=e[i]})});var c=t.edges_faces[r],d=c.map(function(e){return t.faces_vertices[e]}),l=c.map(function(e){return t.faces_edges[e]});d.forEach(function(e){return e.map(function(e,t,i){var n=(t+1)%i.length;return e===a[0]&&i[n]===a[1]||e===a[1]&&i[n]===a[0]?n:void 0}).filter(function(e){return void 0!==e}).sort(function(e,t){return t-e}).forEach(function(t){return e.splice(t,0,s)})}),l.forEach(function(e){var i=e.indexOf(r),a=e[(i+e.length-1)%e.length],c=e[(i+1)%e.length],d=[[a,r],[r,c]].map(function(e){var i=e.map(function(i){return t.edges_vertices[i]});return i[0][0]===i[1][0]||i[0][0]===i[1][1]?i[0][0]:i[0][1]}).reduce(function(e,t){return e.concat(t)},[]),l=[[d[0],s],[s,d[1]]].map(function(e){var t=e.map(function(e){return-1!==o[0].edges_vertices.indexOf(e)}).reduce(function(e,t){return e&&t},!0),i=e.map(function(e){return-1!==o[1].edges_vertices.indexOf(e)}).reduce(function(e,t){return e&&t},!0);if(t)return o[0].i;if(i)return o[1].i;throw new Error("something wrong with input graph's faces_edges construction")});return i===e.length-1?(e.splice(i,1,l[0]),e.unshift(l[1])):e.splice.apply(e,[i,1].concat(n(l))),l});var g=_n(t,"edges",[r]);return{vertices:{new:[{index:s}]},edges:{map:g,replace:[{old:r,new:o.map(function(e){return e.i})}]}}}},zd=function(e,t){for(var n=[],r=1;r<e.length;r++)e[r]!==e[r-1]&&n.push(r);for(var s=1;s<t.length;s++)if(t[s]!==t[s-1]);var a=t.slice();return n.forEach(function(e){return a.splice(e,0,0===e?0:a[e-1])}),e.map(function(e,t){return e+a[t]})},Td=function(t,r,s,o){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"F",d=t.faces_vertices[r].map(function(e){return t.vertices_coords[e]}).map(function(e){return qi.core.point_on_line(s,o,e)?e:void 0}).map(function(e,n){return{point:e,i_face:n,i_vertices:t.faces_vertices[r][n]}}).filter(function(e){return void 0!==e.point}),l=t.faces_edges[r].map(function(e){return t.edges_vertices[e]}).map(function(e){return e.map(function(i){return t.vertices_coords[i]})}).map(function(e){return qi.core.intersection.line_segment_exclusive(s,o,e[0],e[1])}).map(function(e,n){return{point:e,i_face:n,i_edges:t.faces_edges[r][n]}}).filter(function(e){return void 0!==e.point}),g=[],f=Array(t.edges_vertices.length).fill(0),p;if(2===l.length)g=l.map(function(e,n,i){var r=Bd(t,e.point[0],e.point[1],e.i_edges);return i.slice(n+1).filter(function(e){return null!=r.edges.map[e.i_edges]}).forEach(function(e){e.i_edges+=r.edges.map[e.i_edges]}),f=zd(f,r.edges.map),r.vertices["new"][0].index});else if(1===l.length&&1===d.length){var _=d.map(function(e){return e.i_vertices}),e=l.map(function(e,n,i){var r=Bd(t,e.point[0],e.point[1],e.i_edges);return i.slice(n+1).filter(function(e){return null!=r.edges.map[e.i_edges]}).forEach(function(e){e.i_edges+=r.edges.map[e.i_edges]}),f=r.edges.map,r.vertices["new"][0].index});g=_.concat(e)}else if(2===d.length){g=d.map(function(e){return e.i_vertices});var i=t.faces_vertices[r],a=d,h=i[(a[0].i_face+1)%i.length]===a[1].i_vertices,u=i[(a[1].i_face+1)%i.length]===a[0].i_vertices;if(h||u)return{}}else return{};var m=g.map(function(e){return t.faces_vertices[r].indexOf(e)}).sort(function(e,t){return e-t}),v=[{},{}];v[0].vertices=t.faces_vertices[r].slice(m[1]).concat(t.faces_vertices[r].slice(0,m[0]+1)),v[1].vertices=t.faces_vertices[r].slice(m[0],m[1]+1),v[0].edges=t.faces_edges[r].slice(m[1]).concat(t.faces_edges[r].slice(0,m[0])).concat([t.edges_vertices.length]),v[1].edges=t.faces_edges[r].slice(m[0],m[1]).concat([t.edges_vertices.length]),v[0].index=t.faces_vertices.length,v[1].index=t.faces_vertices.length+1;var y=[{index:t.edges_vertices.length,vertices:n(g),assignment:c,foldAngle:Qi(c),length:(p=qi.core).distance2.apply(p,n(g.map(function(e){return t.vertices_coords[e]}))),faces:[t.faces_vertices.length,t.faces_vertices.length+1]}],k=t.edges_vertices.length,x=t.faces_vertices.length;v.forEach(function(e,n){return Object.keys(e).filter(function(e){return"index"!==e}).forEach(function(i){t["faces_".concat(i)][x+n]=e[i]})}),y.forEach(function(e,n){return Object.keys(e).filter(function(e){return"index"!==e}).filter(function(e){return void 0!==t["edges_".concat(e)]}).forEach(function(i){t["edges_".concat(i)][k+n]=e[i]})}),y.forEach(function(e){var i=e.vertices[0],n=e.vertices[1];t.vertices_vertices[i].push(n),t.vertices_vertices[n].push(i)});var b={};t.faces_vertices.map(function(e,t){return{face:e,i:t}}).filter(function(e){return e.i===x||e.i===x+1}).forEach(function(e){return e.face.forEach(function(t){null==b[t]&&(b[t]=[]),b[t].push(e.i)})}),t.vertices_faces.forEach(function(e,s){for(var i=e.indexOf(r);-1!==i;){var a;(a=t.vertices_faces[s]).splice.apply(a,[i,1].concat(n(b[s]))),i=e.indexOf(r)}});var E={};t.faces_edges.map(function(e,t){return{face:e,i:t}}).filter(function(e){return e.i===x||e.i===x+1}).forEach(function(t){return t.face.forEach(function(i){null==E[i]&&(E[i]=[]),E[i].push(t.i)})}),t.edges_faces.forEach(function(e,s){for(var i=e.indexOf(r);-1!==i;){var a;(a=t.edges_faces[s]).splice.apply(a,[i,1].concat(n(E[s]))),i=e.indexOf(r)}});var P=_n(t,"faces",[r]);return{faces:{map:P,replace:[{old:r,new:v}]},edges:{new:y,map:f}}},Id=function(e,t){var i=e.map(function(e,n){return t[n]?n:void 0}).filter(function(e){return void 0!==e}),n=e.map(function(e,n){return t[n]?void 0:n}).filter(function(e){return void 0!==e}),r=i.slice().sort(function(t,i){return e[t]-e[i]}),s=n.slice().sort(function(t,i){return e[t]-e[i]}),a=[];s.forEach(function(e,t){a[e]=t});var o=s.length;return r.reverse().forEach(function(e,t){a[e]=o+t}),a},Vd=function(e){return{type:"flip",direction:e}},Dd=function(e,t,i,n){var r=[i[0]-e[0],i[1]-e[1]],s=t[0]*r[1]-t[1]*r[0];return n?0<s:0>s},Rd=function(e,t){return e.faces_vertices[t].map(function(t){return e.vertices_coords[t]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(i){return i/e.faces_vertices[t].length})},qd=function(e,t,i,n){var r=$n(e);e["faces_re:preindex"]=Array.from(Array(r)).map(function(e,t){return t}),!1=="faces_re:matrix"in e&&(e["faces_re:matrix"]=Gn(e,n)),e["faces_re:coloring"]=Zn(e["faces_re:matrix"]),e["faces_re:creases"]=e["faces_re:matrix"].map(function(e){return qi.core.invert_matrix2(e)}).map(function(e){return qi.core.multiply_matrix2_line2(e,t,i)}),e["faces_re:center"]=Array.from(Array(r)).map(function(t,n){return Rd(e,n)}),e["faces_re:sidedness"]=Array.from(Array(r)).map(function(t,n){return Dd(e["faces_re:creases"][n].origin,e["faces_re:creases"][n].vector,e["faces_re:center"][n],e["faces_re:coloring"][n])})},Xd=function(e){var t=$n(e);null==e["faces_re:layer"]&&(e["faces_re:layer"]=Array(t).fill(0))},Gd=function(e){var t=[0,-Infinity],i=[1/0,0],n=[-Infinity,0],r=[0,1/0];e.forEach(function(e){e[0]<i[0]&&(i=e),e[0]>n[0]&&(n=e),e[1]<r[1]&&(r=e),e[1]>t[1]&&(t=e)});var s=Ne(t[1]-r[1]),a=Ne(n[0]-i[0]);return s>a?[r,t]:[i,n]},Ud=function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"V",s=r;if("M"===r||"m"===r?s="V":("V"===r||"v"===r)&&(s="M"),null==n){var a=nr(e,t);n=void 0===a?0:a}Xd(e),qd(e,t,i,n);var o=vr(e),c=Array.from(Array($n(e))).map(function(e,t){return t}).reverse().map(function(t){var i=Td(o,t,o["faces_re:creases"][t].origin,o["faces_re:creases"][t].vector,o["faces_re:coloring"][t]?r:s);if(null!=i&&null!=i.faces)return i.faces.replace.forEach(function(t){return t["new"].map(function(e){return e.index}).map(function(e){return e+i.faces.map[e]}).forEach(function(n){o["faces_re:center"][n]=Rd(o,n),o["faces_re:sidedness"][n]=Dd(e["faces_re:creases"][t.old].origin,e["faces_re:creases"][t.old].vector,o["faces_re:center"][n],e["faces_re:coloring"][t.old]),o["faces_re:layer"][n]=e["faces_re:layer"][t.old],o["faces_re:preindex"][n]=e["faces_re:preindex"][t.old]})}),{index:t,length:i.edges["new"][0].length,edge:i.edges["new"][0].vertices.map(function(e){return o.vertices_coords[e]})}}).reverse();o["faces_re:layer"]=Id(o["faces_re:layer"],o["faces_re:sidedness"]);var d=void 0===c[0]?0:o["faces_re:preindex"].map(function(e,t){return{pre:e,new:t}}).filter(function(e){return 0===e.pre}).filter(function(e){return o["faces_re:sidedness"][e["new"]]}).shift()["new"],l=e["faces_re:matrix"][0];("M"===r||"m"===r||"V"===r||"v"===r)&&(l=void 0!==c[0]||e["faces_re:sidedness"][0]?qi.core.multiply_matrices2(e["faces_re:matrix"][0],qi.core.make_matrix2_reflection(e["faces_re:creases"][0].vector,e["faces_re:creases"][0].origin)):e["faces_re:matrix"][0]);var g=Gn(o,d).map(function(e){return qi.core.multiply_matrices2(l,e)});o["faces_re:coloring"]=Zn(g);var f=qi.core.multiply_matrix2_line2(l,e["faces_re:creases"][0].origin,e["faces_re:creases"][0].vector),p=qi.core.normalize([f.vector[1],-f.vector[0]]),_=c.map(function(t,n){return void 0===t?void 0:t.edge.map(function(t){return qi.core.multiply_matrix2_vector2(e["faces_re:matrix"][n],t)})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e.concat(t)},[]);return o["re:construction"]=0===_.length?Vd(p):{type:"fold",assignment:r,direction:p,edge:Gd(_)},o["vertices_re:foldedCoords"]=Wn(o,d,g),o["faces_re:matrix"]=g.map(function(e){return e.map(function(e){return qi.core.clean_number(e,14)})}),delete e["faces_re:creases"],delete o["faces_re:creases"],delete e["faces_re:sidedness"],delete o["faces_re:sidedness"],delete e["faces_re:preindex"],delete o["faces_re:preindex"],delete e["faces_re:coloring"],delete o["faces_re:coloring"],delete e["faces_re:center"],delete o["faces_re:center"],o},Wd=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return[0,1].map(function(e){return t.filter(function(t,n){return n%2===e}).reduce(function(e,t){return e+t},0)})},Yd=function(){return Wd.apply(void 0,arguments).map(function(e){return 0>e?e+2*Se:e}).map(function(e){return Se-e}).map(function(e){return qi.core.clean_number(e,14)})},Zd=function(e,t){return e.vertices_vertices[t].map(function(i){return[e.vertices_coords[i][0]-e.vertices_coords[t][0],e.vertices_coords[i][1]-e.vertices_coords[t][1]]})},Kd=function(e,t){return Zd(e,t).map(function(e,t,i){return qi.core.counter_clockwise_angle2(i[t],i[(t+1)%i.length])})},Hd=function(e,t){return Yd.apply(void 0,n(Kd(e,t)))},Qd=function(e){var t=Yn(e),i=Array.from(Array(e.vertices_coords.length)).map(function(n,r){return t[r]?[0,0]:Hd(e,r)});return i},Jd=function(e){var t=Array.from(Array(e.vertices_coords.length)),i=Qd(e),n=e.vertices_vertices,r=t.map(function(t,n){return Zd(e,n)}),s=t.map(function(){return[]});return i.forEach(function(e,t){0===e[0]||n[t].forEach(function(i,n){s[t][i]=[-r[t][n][1]*e[n%2],r[t][n][0]*e[n%2]]})}),s},$d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(function(e,t,i){return qi.core.counter_clockwise_angle2_radians(e,i[(t+1)%i.length])}).map(function(e,t,i){return i.slice(t+1,i.length).concat(i.slice(0,t))}).map(function(e){return Yd.apply(void 0,n(e))}).map(function(e,n){return t[n]+e[0]}).map(function(e,n){return qi.core.is_counter_clockwise_between(e,t[n],t[(n+1)%t.length])?e:void 0})},el=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.map(function(e){return je(e[1],e[0])});return $d.apply(void 0,n(r)).map(function(e){return void 0===e?void 0:[qi.core.clean_number(Ce(e),14),qi.core.clean_number(Le(e),14)]})},tl=/*#__PURE__*/Object.freeze({__proto__:null,alternating_sum:Wd,kawasaki_flatness:Yd,vertex_adjacent_vectors:Zd,vertex_sectorAngles:Kd,vertex_kawasaki_flatness:Hd,make_vertices_sectorAngles:function(e){return Array.from(Array(e.vertices_coords.length)).map(function(t,n){return Kd(e,n)})},make_vertices_kawasaki_flatness:function(e){return Array.from(Array(e.vertices_coords.length)).map(function(t,n){return Hd(e,n)})},make_vertices_kawasaki:Qd,make_vertices_nudge_matrix:Jd,kawasaki_test:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qi.core.EPSILON;if(null==e.vertices_coords)return!1;if(null==e.vertices_vertices);return Qd(e).map(function(e){return e.map(function(e){return Ne(e)<t}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},make_vertices_nudge:function(e){var t=Jd(e),n=t.map(function(e){return e.reduce(function(e,t){var i=0===t.length?0:qi.core.magnitude(t);return e>i?e:i},0)}),r=t.map(function(e,t){return e.map(function(e){return qi.core.magnitude(e)/n[t]})}),s=r.map(function(e){return e.map(function(e){return 1/e})}),a=t.map(function(e,t){return e.map(function(e,i){return e.map(function(e){return e*s[t][i]})})}),o=a.map(function(e){return e.reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0])});return o},kawasaki_solutions_radians:$d,kawasaki_solutions:el,kawasaki_collapse:ke}),il=JSON.parse("{\n  \"ar\": [null,\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0628\u0646\u0642\u0637\u062A\u064A\u0646\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u0639\u0646 \u0637\u0631\u064A\u0642 \u0637\u064A \u0646\u0642\u0637\u0629 \u0648\u0627\u062D\u062F\u0629 \u0625\u0644\u0649 \u0623\u062E\u0631\u0649\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u0639\u0646 \u0637\u0631\u064A\u0642 \u0637\u064A \u062E\u0637 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0622\u062E\u0631\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0639\u0628\u0631 \u0646\u0642\u0637\u0629 \u0648\u0627\u062D\u062F\u0629 \u0648\u064A\u062C\u0639\u0644 \u062E\u0637\u0627\u064B \u0648\u0627\u062D\u062F\u0627\u064B \u0641\u0648\u0642 \u0646\u0641\u0633\u0647\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0628\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0648\u064A\u062C\u0639\u0644 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0639\u0644\u0649 \u0627\u0644\u062E\u0637\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u062C\u0644\u0628 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0625\u0644\u0649 \u0627\u0644\u062E\u0637 \u0627\u0644\u0623\u0648\u0644 \u0648\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0625\u0644\u0649 \u0627\u0644\u062E\u0637 \u0627\u0644\u062B\u0627\u0646\u064A\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u062C\u0644\u0628 \u0646\u0642\u0637\u0629 \u0625\u0644\u0649 \u062E\u0637 \u0648\u064A\u062C\u0639\u0644 \u062E\u0637 \u062B\u0627\u0646\u064A \u0641\u0648\u0642 \u0646\u0641\u0633\u0647\"\n  ],\n  \"de\": [null,\n    \"Falte eine Linie durch zwei Punkte\",\n    \"Falte zwei Punkte aufeinander\",\n    \"Falte zwei Linien aufeinander\",\n    \"Falte eine Linie auf sich selbst, falte dabei durch einen Punkt\",\n    \"Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt\",\n    \"Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie\",\n    \"Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen\"\n  ],\n  \"en\": [null,\n    \"fold a line through two points\",\n    \"fold two points together\",\n    \"fold two lines together\",\n    \"fold a line on top of itself, creasing through a point\",\n    \"fold a point to a line, creasing through another point\",\n    \"fold a point to a line and another point to another line\",\n    \"fold a point to a line and another line onto itself\"\n  ],\n  \"es\": [null,\n    \"dobla una l\xEDnea entre dos puntos\",\n    \"dobla dos puntos juntos\",\n    \"dobla y une dos l\xEDneas\",\n    \"dobla una l\xEDnea sobre s\xED misma, dobl\xE1ndola hacia un punto\",\n    \"dobla un punto hasta una l\xEDnea, dobl\xE1ndola a trav\xE9s de otro punto\",\n    \"dobla un punto hacia una l\xEDnea y otro punto hacia otra l\xEDnea\",\n    \"dobla un punto hacia una l\xEDnea y otra l\xEDnea sobre s\xED misma\"\n  ],\n  \"fr\":[null,\n    \"cr\xE9ez un pli passant par deux points\",\n    \"pliez pour superposer deux points\",\n    \"pliez pour superposer deux lignes\",\n    \"rabattez une ligne sur elle-m\xEAme \xE0 l'aide d'un pli qui passe par un point\",\n    \"rabattez un point sur une ligne \xE0 l'aide d'un pli qui passe par un autre point\",\n    \"rabattez un point sur une ligne et un autre point sur une autre ligne\",\n    \"rabattez un point sur une ligne et une autre ligne sur elle-m\xEAme\"\n  ],\n  \"hi\": [null,\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u0926\u094B \u0938\u094D\u0925\u093E\u0928\u094B\u0902 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u092A\u0930 \u092E\u094B\u0921\u093C\u0915\u0930 \u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901\",\n    \"\u090F\u0915 \u0930\u0947\u0916\u093E \u092A\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u0915\u094B \u092E\u094B\u0921\u093C\u0915\u0930 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948 \u0914\u0930 \u090F\u0915 \u0930\u0947\u0916\u093E \u0915\u094B \u0938\u094D\u0935\u092F\u0902 \u0915\u0947 \u090A\u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u092A\u0939\u0932\u0947 \u0938\u094D\u0925\u093E\u0928 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u092A\u0939\u0932\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u092A\u0939\u0932\u0940 \u0930\u0947\u0916\u093E \u092A\u0930 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u090F\u0915 \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u0915\u094B \u0938\u094D\u0935\u092F\u0902 \u0915\u0947 \u090A\u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\"\n  ],\n  \"jp\": [null,\n    \"2\u70B9\u306B\u6CBF\u3063\u3066\u6298\u308A\u76EE\u3092\u4ED8\u3051\u307E\u3059\",\n    \"2\u70B9\u3092\u5408\u308F\u305B\u3066\u6298\u308A\u307E\u3059\",\n    \"2\u3064\u306E\u7DDA\u3092\u5408\u308F\u305B\u3066\u6298\u308A\u307E\u3059\",\n    \"\u70B9\u3092\u901A\u904E\u3055\u305B\u3001\u65E2\u306B\u3042\u308B\u7DDA\u306B\u6CBF\u3063\u3066\u6298\u308A\u307E\u3059\",\n    \"\u70B9\u3092\u7DDA\u6CBF\u3044\u306B\u5408\u308F\u305B\u5225\u306E\u70B9\u3092\u901A\u904E\u3055\u305B\u6298\u308A\u307E\u3059\",\n    \"\u7DDA\u306B\u5411\u304B\u3063\u3066\u70B9\u3092\u6298\u308A\u3001\u540C\u6642\u306B\u3082\u3046\u4E00\u65B9\u306E\u7DDA\u306B\u5411\u304B\u3063\u3066\u3082\u3046\u4E00\u65B9\u306E\u70B9\u3092\u6298\u308A\u307E\u3059\",\n    \"\u7DDA\u306B\u5411\u304B\u3063\u3066\u70B9\u3092\u6298\u308A\u3001\u540C\u6642\u306B\u5225\u306E\u7DDA\u3092\u305D\u306E\u4E0A\u306B\u6298\u308A\u307E\u3059\"\n  ],\n  \"ko\": [null,\n    \"\uB450 \uC810\uC744 \uD1B5\uACFC\uD558\uB294 \uC120\uC73C\uB85C \uC811\uC73C\uC138\uC694\",\n    \"\uB450 \uC810\uC744 \uD568\uAED8 \uC811\uC73C\uC138\uC694\",\n    \"\uB450 \uC120\uC744 \uD568\uAED8 \uC811\uC73C\uC138\uC694\",\n    \"\uADF8 \uC704\uC5D0 \uC120\uC744 \uC811\uC73C\uBA74\uC11C \uC810\uC744 \uD1B5\uACFC\uD558\uAC8C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uC73C\uBA74\uC11C, \uB2E4\uB978 \uC810\uC744 \uC9C0\uB098\uAC8C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uACE0 \uB2E4\uB978 \uC810\uC744 \uB2E4\uB978 \uC120\uC73C\uB85C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uACE0 \uB2E4\uB978 \uC120\uC744 \uADF8 \uC704\uC5D0 \uC811\uC73C\uC138\uC694\"\n  ],\n  \"ms\": [null,\n    \"lipat garisan melalui dua titik\",\n    \"lipat dua titik bersama\",\n    \"lipat dua garisan bersama\",\n    \"lipat satu garisan di atasnya sendiri, melipat melalui satu titik\",\n    \"lipat satu titik ke garisan, melipat melalui titik lain\",\n    \"lipat satu titik ke garisan dan satu lagi titik ke garisan lain\",\n    \"lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri\"\n  ],\n  \"pt\": [null,\n    \"dobre uma linha entre dois pontos\",\n    \"dobre os dois pontos para uni-los\",\n    \"dobre as duas linhas para uni-las\",\n    \"dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto\",\n    \"dobre um ponto at\xE9 uma linha, criando uma dobra ao longo de outro ponto\",\n    \"dobre um ponto at\xE9 uma linha e outro ponto at\xE9 outra linha\",\n    \"dobre um ponto at\xE9 uma linha e outra linha sobre si mesma\"\n  ],\n  \"ru\": [null,\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u043B\u0438\u043D\u0438\u044E \u0447\u0435\u0440\u0435\u0437 \u0434\u0432\u0435 \u0442\u043E\u0447\u043A\u0438\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u043B\u0438\u043D\u0438\u0438 \u0432\u043C\u0435\u0441\u0442\u0435\",\n    \"\u0441\u0432\u0435\u0440\u043D\u0438\u0442\u0435 \u043B\u0438\u043D\u0438\u044E \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u0435\u0431\u044F, \u0441\u0433\u0438\u0431\u0430\u044F \u0447\u0435\u0440\u0435\u0437 \u0442\u043E\u0447\u043A\u0443\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E, \u0441\u0433\u0438\u0431\u0430\u044F \u0447\u0435\u0440\u0435\u0437 \u0434\u0440\u0443\u0433\u0443\u044E \u0442\u043E\u0447\u043A\u0443\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E \u0438 \u0434\u0440\u0443\u0433\u0443\u044E \u0442\u043E\u0447\u043A\u0443 \u0432 \u0434\u0440\u0443\u0433\u0443\u044E \u043B\u0438\u043D\u0438\u044E\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E \u0438 \u0434\u0440\u0443\u0433\u0443\u044E \u043B\u0438\u043D\u0438\u044E \u043D\u0430 \u0441\u0435\u0431\u044F\"\n  ],\n  \"tr\": [null,\n    \"iki noktadan ge\xE7en bir \xE7izgi boyunca katla\",\n    \"iki noktay\u0131 birbirine katla\",\n    \"iki \xE7izgiyi birbirine katla\",\n    \"bir noktadan k\u0131v\u0131rarak kendi \xFCzerindeki bir \xE7izgi boyunca katla\",\n    \"ba\u015Fka bir noktadan k\u0131v\u0131rarak bir noktay\u0131 bir \xE7izgiye katla\",\n    \"bir noktay\u0131 bir \xE7izgiye ve ba\u015Fka bir noktay\u0131 ba\u015Fka bir \xE7izgiye katla\",\n    \"bir noktay\u0131 bir \xE7izgiye ve ba\u015Fka bir \xE7izgiyi kendi \xFCzerine katla\"\n  ],\n  \"vi\": [null,\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua hai \u0111i\u1EC3m\",\n    \"t\u1EA1o n\u1EBFp g\u1EA5p b\u1EB1ng c\xE1ch g\u1EA5p m\u1ED9t \u0111i\u1EC3m n\xE0y sang \u0111i\u1EC3m kh\xE1c\",\n    \"t\u1EA1o n\u1EBFp g\u1EA5p b\u1EB1ng c\xE1ch g\u1EA5p m\u1ED9t \u0111\u01B0\u1EDDng l\xEAn m\u1ED9t \u0111\u01B0\u1EDDng kh\xE1c\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua m\u1ED9t \u0111i\u1EC3m v\xE0 \u0111\u01B0a m\u1ED9t \u0111\u01B0\u1EDDng l\xEAn tr\xEAn ch\xEDnh n\xF3\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua \u0111i\u1EC3m \u0111\u1EA7u ti\xEAn v\xE0 \u0111\u01B0a \u0111i\u1EC3m th\u1EE9 hai l\xEAn \u0111\u01B0\u1EDDng th\u1EB3ng\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p mang \u0111i\u1EC3m \u0111\u1EA7u ti\xEAn \u0111\u1EBFn \u0111\u01B0\u1EDDng \u0111\u1EA7u ti\xEAn v\xE0 \u0111i\u1EC3m th\u1EE9 hai cho \u0111\u01B0\u1EDDng th\u1EE9 hai\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p mang l\u1EA1i m\u1ED9t \u0111i\u1EC3m cho m\u1ED9t \u0111\u01B0\u1EDDng v\xE0 \u0111\u01B0a m\u1ED9t \u0111\u01B0\u1EDDng th\u1EE9 hai l\xEAn tr\xEAn ch\xEDnh n\xF3\"\n  ],\n  \"zh\": [null,\n    \"\u901A\u904E\u5169\u9EDE\u6298\u4E00\u689D\u7DDA\",\n    \"\u5C07\u5169\u9EDE\u6298\u758A\u8D77\u4F86\",\n    \"\u5C07\u5169\u689D\u7DDA\u6298\u758A\u5728\u4E00\u8D77\",\n    \"\u901A\u904E\u4E00\u500B\u9EDE\u6298\u758A\u4E00\u689D\u7DDA\u5728\u81EA\u8EAB\u4E0A\u9762\",\n    \"\u5C07\u4E00\u500B\u9EDE\uFF0C\u901A\u904E\u53E6\u4E00\u500B\u9EDE\u6298\u758A\u6210\u4E00\u689D\u7DDA\uFF0C\",\n    \"\u5C07\u4E00\u500B\u9EDE\u6298\u758A\u70BA\u4E00\u689D\u7DDA\uFF0C\u518D\u5C07\u53E6\u4E00\u500B\u9EDE\u6298\u758A\u5230\u53E6\u4E00\u689D\u7DDA\",\n    \"\u5C07\u4E00\u500B\u9EDE\u6298\u758A\u6210\u4E00\u689D\u7DDA\uFF0C\u53E6\u4E00\u689D\u7DDA\u6298\u758A\u5230\u5B83\u81EA\u8EAB\u4E0A\"\n  ]\n}\n"),nl=function(e){if(!(isNaN(e)||null==e||1>e||7<e)){var t={};return Object.keys(il).forEach(function(i){t[i]=il[i][e]}),t}},rl=function(e){var t=e.axiom||0;return!isNaN(t)&&null!=t&&0<t&&8>t?nl(t):"assignment"in e?{en:"".concat(Ki[e.assignment]," fold")}:{en:""}},sl=function(e,t){var i=e.axiom||0,n=e.edge,r=e.direction,s=e;if(2===i)return[s.parameters.points[1],s.parameters.points[0]];if(5===i)return[s.parameters.points[1],s.test.points_reflected[1]];if(7===i)return[s.parameters.points[0],s.test.points_reflected[0]];var a=[n[1][0]-n[0][0],n[1][1]-n[0][1]],o;o=4===i?qi.core.nearest_point_on_line(n[0],a,s.parameters.lines[0][0],function(e){return e}):7===i?qi.core.nearest_point_on_line(n[0],a,s.parameters.points[0],function(e){return e}):qi.core.average(n[0],n[1]);var c=ua(t).vertices.map(function(e){return t.vertices_coords[e]}),d=qi.core.intersection.convex_poly_line(c,o,r);if(void 0===d)return[];var l=[d[0],d[1]].map(function(e){return qi.core.distance2(e,o)}).sort(function(e,t){return e-t}).shift();7===i&&(l=qi.core.distance2(e.parameters.points[0],o));var g=r.map(function(e){return e*l});return[o.map(function(e,t){return e-g[t]}),o.map(function(e,t){return e+g[t]})]},al=function(e,t){var n={vertices:Qn(e),edges:Jn(e),faces:$n(e)};return t["new"]&&Object.keys(t["new"]).forEach(function(r){return t["new"][r].forEach(function(t,s){return Object.keys(t).forEach(function(i){e[i][n[r]+s]=t[i]})})}),t.update&&Object.keys(t.update).forEach(function(n){return Object.keys(t.update[n]).forEach(function(i){e[i][n]=t.update[n][i]})}),t.remove&&(t.remove.faces&&_n(e,"faces",t.remove.faces),t.remove.edges&&_n(e,"edges",t.remove.edges),t.remove.vertices&&_n(e,"vertices",t.remove.vertices)),t},ol=function(e,t,i){var n=Ji(e,t),r={};return n.forEach(function(t){r[t]=e[t][i]}),r},cl=function(t,i,e,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"U",a=qi.segment(i,e,n,r),o=[0,1].map(function(e){return t.vertices_coords.map(function(t){return Oe(Me(a[e][0]-t[0],2)+Me(a[e][1]-t[1],2))}).map(function(e,t){return e<qi.core.EPSILON?t:void 0}).filter(function(e){return void 0!==e}).shift()}),c=t.edges_vertices.map(function(e){return e.map(function(e){return t.vertices_coords[e]})}),d=[0,1].map(function(t){return c.map(function(i){return qi.core.point_on_segment(i[0],i[1],a[t])}).map(function(e,t){return e?t:void 0}).filter(function(t){return void 0!==t}).shift()}),l=[0,1].map(function(e){return void 0===o[e]?void 0===d[e]?"new":"edge":"vertex"}),g={new:{vertices:[],edges:[{edges_vertices:[]}]},remove:{edges:[]}},f=Qn(t),p=function(e){g["new"].vertices.push({vertices_coords:[a[e][0],a[e][1]]}),f+=1,g["new"].edges[0].edges_vertices[e]=f-1};return[0,1].forEach(function(n){switch(l[n]){case"vertex":g["new"].edges[0].edges_vertices[n]=o[n];break;case"edge":{p(n);var i=ol(t,"edges",d[n]);[vr(i),vr(i)].forEach(function(e,i){e.edges_vertices=[t.edges_vertices[d[n]][i],f-1],g["new"].edges.push(e)}),g.remove.edges.push(d[n])}break;default:p(n);}}),g["new"].edges.filter(function(t){return void 0===t.edges_assignment}).forEach(function(t){t.edges_assignment=s}),g.apply=function(){return al(t,g)},g},dl=function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var s=Object.keys(e).map(function(e){return"edges_"===e.substring(0,6)?e:void 0}).filter(function(e){return void 0!==e}),a=Array.from(Array(n.length)).map(function(){return{}});return n.forEach(function(n,r){return s.filter(function(i){return void 0!==e[i][t]}).forEach(function(i){a[r][i]=e[i][t]})}),n.forEach(function(e,t){return Object.keys(e).forEach(function(e){a[t][e]=n[t][e]})}),a},ll=function(e,t,r){var s=[];t.forEach(function(e){s[e]={}});var a=[1,0].map(function(e){return t[e]});t.forEach(function(t,r){s[t].vertices_vertices=void 0===e.vertices_vertices[t]?[a[r]]:n(e.vertices_vertices[t])});var o=t.map(function(e,t){return s[e].vertices_vertices.indexOf(a[t])});return t.forEach(function(e,t){s[e].vertices_vertices[o[t]]=r}),s},gl=function(e,t,n){for(var r=e.length,s=e.map(function(e,n,i){return e===t[0]&&i[(n+1)%r]===t[1]||e===t[1]&&i[(n+1)%r]===t[0]?(n+1)%r:void 0}).filter(function(e){return void 0!==e}),a=[],o=0,c=0;c<r+s.length;c+=1)s.includes(c)?(o-=1,a[c]=n):a[c]=e[c+o];return a},fl=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=n.map(function(i){return t.edges_vertices[i]});return s[0][0]===s[1][0]||s[0][0]===s[1][1]?s[0][0]:s[0][1]},pl=function(e,t,i,n,r,s,a){var o=t.length,c=t.indexOf(i),d=[t[(c+o-1)%o],i,t[(c+1)%o]],l=[0,1].map(function(t){return fl(e,d[t],d[t+1])}),g=a[0]===l[0]||a[1]===l[0]?[r,s]:[s,r],f=t.slice();return c===o-1?(f.splice(c,1,g[0]),f.unshift(g[1])):f.splice.apply(f,[c,1].concat(g)),f},_l="http://www.w3.org/2000/svg",hl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"shadow",t=document.createElementNS(_l,"filter");t.setAttribute("width","200%"),t.setAttribute("height","200%"),t.setAttribute("id",e);var i=document.createElementNS(_l,"feGaussianBlur");i.setAttribute("in","SourceAlpha"),i.setAttribute("stdDeviation","0.01"),i.setAttribute("result","blur");var n=document.createElementNS(_l,"feOffset");n.setAttribute("in","blur"),n.setAttribute("result","offsetBlur");var r=document.createElementNS(_l,"feFlood");r.setAttribute("flood-color","#000"),r.setAttribute("flood-opacity","0.4"),r.setAttribute("result","offsetColor");var s=document.createElementNS(_l,"feComposite");s.setAttribute("in","offsetColor"),s.setAttribute("in2","offsetBlur"),s.setAttribute("operator","in"),s.setAttribute("result","offsetBlur");var a=document.createElementNS(_l,"feMerge"),o=document.createElementNS(_l,"feMergeNode"),c=document.createElementNS(_l,"feMergeNode");return c.setAttribute("in","SourceGraphic"),a.appendChild(o),a.appendChild(c),t.appendChild(i),t.appendChild(n),t.appendChild(r),t.appendChild(s),t.appendChild(a),t},ul=function(e,t){if(!1!="faces_vertices"in e&&!1!="edges_vertices"in e&&!1!="vertices_coords"in e){var i=ha(e),n=i[2]>i[3]?i[3]:i[2],r=.04*n,s={vertices:"fill:#27b;font-family:sans-serif;font-size:".concat(r,"px;"),edges:"fill:#e53;font-family:sans-serif;font-size:".concat(r,"px;"),faces:"fill:black;font-family:sans-serif;font-size:".concat(r,"px;")},a=[.33*r,.4*r];e.vertices_coords.map(function(e,n){return t.text("".concat(n),e[0]-a[0],e[1]+a[1])}).forEach(function(e){return e.setAttribute("style",s.vertices)}),e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(e){return qi.core.average(e)}).map(function(e,n){return t.text("".concat(n),e[0]-a[0],e[1]+a[1])}).forEach(function(e){return e.setAttribute("style",s.edges)}),e.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(e){return qi.core.average(e)}).map(function(e,n){return t.text("".concat(n),e[0]-a[0],e[1]+a[1])}).forEach(function(e){return e.setAttribute("style",s.faces)})}},ml=function(e,t){var i=ha(e),n=i[2]>i[3]?i[3]:i[2],r=.005*n,s={faces_vertices:"fill:#555;stroke:none;stroke-width:".concat(r,";"),faces_edges:"fill:#aaa;stroke:none;stroke-width:".concat(r,";")};e.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(e){return qi.convexPolygon(e).scale(.666).points}).map(function(e){return t.polygon(e)}).forEach(function(e){return e.setAttribute("style",s.faces_vertices)}),e.faces_edges.map(function(t){return t.map(function(t){return e.edges_vertices[t]}).map(function(e,t,i){var n=i[(t+1)%i.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(function(t){return e.vertices_coords[t]})}).map(function(e){return qi.convexPolygon(e).scale(.333).points}).map(function(e){return t.polygon(e)}).forEach(function(e){return e.setAttribute("style",s.faces_edges)})},vl=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=ha(e),r=n[2]>n[3]?n[3]:n[2],s=e["re:diagrams"];null==s||s.map(function(e){return e["re:diagram_arrows"]}).filter(function(e){return null!=e}).forEach(function(e){return e.map(function(e){return e["re:diagram_arrow_coords"]}).filter(function(e){return 0<e.length}).map(function(e){var n=e[0][0]<e[1][0];.1>Ne(e[0][0]-e[1][0])&&(n=e[0][1]<e[1][1]?.5>e[0][0]:.5<e[0][0]),.1>Ne(e[0][1]-e[1][1])&&(n=e[0][0]<e[1][0]?.5<e[0][1]:.5>e[0][1]);var s={side:n,strokeWidth:.02*r};return i.arrowColor&&(s.color=i.arrowColor),t.arrow(e[0],e[1],s).curve(.3).head({width:.035*r,height:.09*r}).fill("black").stroke("black")})})},yl="\nline.boundary { stroke: black; }\nline.mark { stroke: lightgray; }\nline.mountain { stroke: red; }\nline.valley { stroke: blue;\n  stroke-dasharray: calc(var(--crease-width) * 2) calc(var(--crease-width) * 2);\n}\n/* polygon { fill: none; stroke: none; stroke-linejoin: bevel; } */\n.foldedForm polygon { stroke: black; fill: #8881; }\n.foldedForm polygon.front { fill: white; }\n.foldedForm polygon.back { fill: lightgray; }\n.creasePattern .boundaries polygon { fill: white; stroke: none; }\n.creasePattern .faces polygon { fill: none; stroke: none; stroke-linejoin: bevel; }\n.foldedForm .boundaries polygon { fill: none; stroke: none; }\n.foldedForm line { stroke: none; }\n",kl=Object.freeze({boundaries:!0,faces:!0,edges:!0,vertices:!1,diagram:!1,labels:!1,debug:!1,autofit:!0,padding:0,shadows:!1,strokeWidth:.01,style:void 0,arrowColor:void 0}),xl=function(){var t=Object.keys(kl),i={};return Array.apply(void 0,arguments).filter(function(t){return"object"===e(t)}).forEach(function(e){return Object.keys(e).filter(function(e){return t.includes(e)}).forEach(function(t){i[t]=e[t]})}),i},bl=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var s=fa.apply(void 0,i),a=s.stylesheet(yl),o=s.defs();o.appendChild(hl("faces_shadow"));var c={};["boundaries","faces","edges","vertices","diagram","labels"].forEach(function(e){c[e]=s.group(),c[e].setAttribute("class",e),c[e].pointerEvents("none")});var d={};Object.assign(d,kl);var l=xl.apply(void 0,i);Object.keys(l).forEach(function(e){d[e]=l[e]});var g=function(){var t=ha(e),i=t[2]>t[3]?t[3]:t[2];fa.setViewBox(s,t[0],t[1],t[2],t[3],d.padding*i)};return Object.defineProperty(s,"draw",{value:function(){var t=(null==e.file_classes?[]:e.file_classes).join(" "),i=null==e.frame_classes?"":e.frame_classes,n=[t,i].filter(function(e){return""!==e}).join(" ");s.setAttribute("class",n),Object.keys(c).forEach(function(e){return c[e].removeChildren()}),Object.keys(c).filter(function(e){return d[e]}).filter(function(e){return void 0!==cc.components.svg[e]}).forEach(function(t){return cc.components.svg[t](e).forEach(function(e){return c[t].appendChild(e)})}),d.autofit&&g(),d.diagram&&vl(e,c.diagram),d.labels&&ul(e,c.labels),d.debug&&ml(e,c.labels),d.shadows&&Array.from(c.faces.childNodes).forEach(function(e){return e.setAttribute("filter","url(#faces_shadow)")});var o=ha(e),r=o[2]>o[3]?o[3]:o[2],l=o[2]>o[3]?o[2]:o[3],f=(r+l)/2*d.strokeWidth;["boundaries","faces","edges"].forEach(function(e){return c[e].strokeWidth(f)}),d.style&&a.setTextContent(yl+d.style)}}),Object.defineProperty(s,"fit",{value:g}),Object.defineProperty(s,"setViewBox",{value:function(e,t,i,n,r){return fa.setViewBox(s,e,t,i,n,r)}}),Object.defineProperty(s,"options",{get:function(){return d}}),Object.defineProperty(s,"groups",{get:function(){return c}}),s},El={file_spec:1.1,file_creator:"",file_author:"",file_classes:["singleModel"],frame_title:"",frame_attributes:["2D"],frame_classes:["creasePattern"],vertices_coords:[[0,0],[1,0],[1,1],[0,1]],vertices_vertices:[[1,3],[2,0],[3,1],[0,2]],vertices_faces:[[0],[0],[0],[0]],edges_vertices:[[0,1],[1,2],[2,3],[3,0]],edges_faces:[[0],[0],[0],[0]],edges_assignment:["B","B","B","B"],edges_foldAngle:[0,0,0,0],edges_length:[1,1,1,1],faces_vertices:[[0,1,2,3]],faces_edges:[[0,1,2,3]]},Pl=function(e){!1=="faces_re:matrix"in e&&(e["faces_re:matrix"]=Gn(e,0))},wl=function(e,t){Pl(e);var i=0,n=vr(e),r=!0=="vertices_re:unfoldedCoords"in e;t.mousePressed=function(t){r=!0=="vertices_re:unfoldedCoords"in e,n=vr(e);var s={faces_vertices:e.faces_vertices,"faces_re:layer":e["faces_re:layer"],vertices_coords:r?e["vertices_re:foldedCoords"]||e.vertices_coords:e["vertices_re:unfoldedCoords"]||e.vertices_coords},a=rr(s,t),o=sr(s,a);i=null==o?0:o,r&&(n.vertices_coords=e["vertices_re:unfoldedCoords"].slice())},t.mouseMoved=function(t){if(t.isPressed){e.load(n);var s=Pa(t.position[0],t.position[1],t.pressed[0],t.pressed[1]);e.crease(s.solutions[0],i),r&&e.collapse()}}},Al=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(function(e){return"string"==typeof e}).filter(function(e){return 1===e.length}).shift()},Sl=function(e,t){return Object.defineProperty(t,"valley",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="V"}),t}}),Object.defineProperty(t,"mountain",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="M"}),t}}),Object.defineProperty(t,"mark",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="F"}),t}}),t},Nl={rebuild:!0,change:!0},Ll=function(t){if("object"!==e(t)||null===t)return!1;for(var n=Object.keys(t),r=Object.keys(Nl),s=0;s<n.length;s+=1)if(r.includes(n[s]))return!0;return!1},Cl=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return Ll(e)}).shift();return void 0===r?vr(Nl):Object.assign(vr(Nl),r)},jl=function(e){var t=this,i=function(i){for(var r=arguments.length,s=Array(1<r?r-1:0),a=1,o,c,d,g;a<r;a++)s[a-1]=arguments[a];"edge"===i?d=(o=qi.core).get_vector_of_vectors.apply(o,s):(g=(c=qi.core).get_line.apply(c,s),d=[g.origin,g.vector]);var f={line:qi.core.intersection.convex_poly_line,ray:qi.core.intersection.convex_poly_ray,edge:qi.core.intersection.convex_poly_segment};return e.map(function(e){return e.vertices.map(function(e){return t.vertices_coords[e]})}).map(function(e){return f[i].apply(f,[e].concat(n(d)))}).filter(function(e){return void 0!==e})};return e.clipLine=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["line"].concat(t))},e.clipRay=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["ray"].concat(t))},e.clipSegment=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["edge"].concat(t))},e},Ol=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=Object.assign(Object.create(Pr()),cn(),t,{file_spec:Xi,file_creator:Gi});i.square=function(){var e=this;Object.keys(this).forEach(function(t){return delete e[t]});var t=ln(1,1);Object.keys(t).forEach(function(i){e[i]=t[i]})},i.regularPolygon=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;Object.keys(this).forEach(function(t){return delete e[t]});var n=gn(t,i);Object.keys(n).forEach(function(t){e[t]=n[t]})};var n=function(){return jl.call(this,[ua(this)])},r=function(){if(!1!="frame_classes"in this){var e=this.frame_classes.indexOf("creasePattern"),t=this.frame_classes.indexOf("foldedForm");return-1===e&&-1===t||-1!==e&&-1!==t?void 0:-1!==t}};i.clean2=function(){wn(this),Wa(this)&&wn(this),_n(this,"vertices",Za(this)),this["faces_re:matrix"]=Gn(this),null!=this[Ui.FACES_LAYER]&&null!=this.faces_vertices&&this[Ui.FACES_LAYER].length!==this.faces_vertices.length&&delete this[Ui.FACES_LAYER]};i.scale=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];Ta.apply(void 0,[this].concat(t))};var a=function(){this.didChange.forEach(function(e){return e()})};return i.segment=function(){var e=(s=qi.core).flatten_input.apply(s,arguments).filter(function(e){return"number"==typeof e}),t=n.call(this),i=t.clipSegment([e[0],e[1]],[e[2],e[3]]),r=Al.apply(void 0,arguments)||"F",s;cl(this,i[0],i[1],i[2],i[3],r).apply(),ur(this),a.call(this);var o=Xa(this,[i[0],i[1]],[i[2]-i[0],i[3]-i[1]]);return Sl(this,o)},i.line=function(){var e=(s=qi.core).flatten_input.apply(s,arguments).filter(function(e){return"number"==typeof e}),t=n.call(this),i=t.clipLine([e[0],e[1]],[e[2],e[3]]),r=Al.apply(void 0,arguments)||"F",s;cl(this,i[0],i[1],i[2],i[3],r).apply(),ur(this),a.call(this);var o=Xa(this,[i[0],i[1]],[i[2]-i[0],i[3]-i[1]]);return Sl(this,o)},i.axiom=function(){var e;RabbitEar.axiom(2,start[0],start[1],end[0],end[1]).solutions.forEach(function(e){return app.origami.line(e[0][0],e[0][1],e[1][0],e[1][1])}),xn(this),this.clean2();var t=(e=qi.core).flatten_input.apply(e,arguments).filter(function(e){return"number"==typeof e}),i=n.call(this),r=i.clipLine([t[0],t[1]],[t[2],t[3]]),s=Al.apply(void 0,arguments)||"F";cl(this,r[0],r[1],r[2],r[3],s).apply(),ur(this),a.call(this);var o=Xa(this,[r[0],r[1]],[r[2]-r[0],r[3]-r[1]]);return Sl(this,o)},i.mark=function(){var e=(n=qi.core).get_vector_of_vectors.apply(n,arguments),t=Cl.apply(void 0,arguments),i=Al.apply(void 0,arguments)||"F",n;cl(this,e[0][0],e[0][1],e[1][0],e[1][1],i).apply(),t.rebuild&&ur(this),t.change&&this.didChange.forEach(function(e){return e()})},i.crease=function(){for(var t=this,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=n.filter(function(t){return"object"===e(t)}),o=qi.core.get_line(n),c=Al.apply(void 0,n)||"V",d=n.filter(function(e){return null!==e&&!isNaN(e)}).shift();if(!qi.core.is_vector(o.origin)||!qi.core.is_vector(o.vector))return void console.warn("fold was not supplied the correct parameters");var l=Ud(this,o.origin,o.vector,d,c);Object.keys(l).forEach(function(e){t[e]=l[e]}),!0=="re:construction"in this&&0<s.length&&!0=="axiom"in s[0]&&(this["re:construction"].axiom=s[0].axiom,this["re:construction"].parameters=s[0].parameters),a.call(this)},i.creaseRay=function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=qi.ray(i),s=this.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}),a=s.map(function(e,t){return void 0===qi.core.intersection.convex_poly_ray_exclusive(e,r.origin,r.vector)?void 0:t}).filter(function(e){return void 0!==e}).sort(function(e,t){return t-e});a.forEach(function(t){return Td(e,t,r.origin,r.vector,"F")})},i.kawasaki=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=ke.apply(void 0,[this].concat(t));return a.call(this),n},Object.defineProperty(i,"boundaries",{get:n}),Object.defineProperty(i,"isFolded",{value:r}),Object.defineProperty(i,"clear",{value:function(){var e=this;ma(this),Object.keys(this).filter(function(e){return e.includes("re:")}).forEach(function(t){return delete e[t]}),delete this.vertices_vertices,delete this.vertices_faces,delete this.edges_faces,this.didChange.forEach(function(e){return e()})}}),i.didChange=[],i},Ml=Object.freeze({touchFold:!1}),Fl=function(){var t=Object.keys(Ml),i={};return Array.apply(void 0,arguments).filter(function(t){return"object"===e(t)}).forEach(function(e){return Object.keys(e).filter(function(e){return t.includes(e)}).forEach(function(t){i[t]=e[t]})}),i},Bl={gl:"webgl",GL:"webgl",webGL:"webgl",WebGL:"webgl",webgl:"webgl",Webgl:"webgl",svg:"svg",SVG:"svg","2d":"svg","2D":"svg","3d":"webgl","3D":"webgl"},zl=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return!0=="view"in e}).shift();if(void 0===r){if(Qa)return;if(Ha)return"svg"}return Bl[r.view]},Tl=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Object.assign(Object.create(Ol()),t.filter(function(e){return pr(e)}).shift()||dn());n.clean(),n.populate();var r=function(e){var t=n.isFolded(),i=e?"creasePattern":"foldedForm",r=e?"foldedForm":"creasePattern";for(null==n.frame_classes&&(n.frame_classes=[]);-1!==n.frame_classes.indexOf(i);)n.frame_classes.splice(n.frame_classes.indexOf(i),1);-1===n.frame_classes.indexOf(r)&&n.frame_classes.push(r);var s=e?"vertices_re:foldedCoords":"vertices_re:unfoldedCoords",a=e?"vertices_re:unfoldedCoords":"vertices_re:foldedCoords";!0==s in n&&(n[a]=n.vertices_coords,n.vertices_coords=n[s],delete n[s]),n.didChange.forEach(function(e){return e()})},s=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return!1=="faces_re:matrix"in n&&(n["faces_re:matrix"]=Gn(n,e.face)),!1=="vertices_re:foldedCoords"in n&&(n["vertices_re:foldedCoords"]=Wn(n,null,n["faces_re:matrix"])),r(!0),n},a=function(e){var t=en(n,e),i=n.svg||n.gl;return Object.defineProperty(t,"visible",{get:function(){return i.options[e]},set:function(t){i.options[e]=!!t,n.didChange.forEach(function(e){return e()})}}),null!=n.svg&&t.forEach(function(t,r){t.svg=n.svg.groups[e].childNodes[r]}),"edges"===e&&t.forEach(function(t){t.vector=function(){var e=n.vertices_coords[t.vertices[0]],i=n.vertices_coords[t.vertices[1]];return[i[0]-e[0],i[1]-e[1]]}}),t},o={};Object.assign(o,Ml);var c=Fl.apply(void 0,t);Object.keys(c).forEach(function(e){o[e]=c[e]}),Object.defineProperty(n,"load",{value:function(e,t){Yi.forEach(function(e){return delete n[e]});var i=jd(e).fold(t);Object.assign(n,i),null==n.edges_vertices||(n.clean(),n.populate(),n.didChange.forEach(function(e){return e()}))}}),Object.defineProperty(n,"collapse",{value:s}),Object.defineProperty(n,"flatten",{value:function(){return r(!1),n}}),Object.defineProperty(n,"fold",{value:function(){return n}}),Object.defineProperty(n,"unfold",{value:function(){return n}}),Object.defineProperty(n,"nearest",{value:function(){var e={vertex:"vertices",edge:"edges",face:"faces"},t=(r=qi.core).get_vector.apply(r,arguments),i={vertex:n.nearestVertex(n,t),edge:n.nearestEdge(n,t),face:n.nearestFace(n,t)},r;return Object.keys(i).filter(function(e){return null==i[e]}).forEach(function(e){return delete i[e]}),null!=n.svg&&Object.keys(i).forEach(function(t){i[t].svg=n.svg.groups[e[t]].childNodes[i[t].index]}),null!=i.edge&&(i.edge.vector=function(){var e=n.vertices_coords[i.edge.vertices[0]],t=n.vertices_coords[i.edge.vertices[1]];return[t[0]-e[0],t[1]-e[1]]}),i}}),Object.defineProperty(n,"vertices",{get:function(){return a.call(n,"vertices")}}),Object.defineProperty(n,"edges",{get:function(){return a.call(n,"edges")}}),Object.defineProperty(n,"faces",{get:function(){return a.call(n,"faces")}});var d=function(){return JSON.stringify(n)};return d.json=function(){return JSON.stringify(n)},d.fold=function(){return JSON.stringify(n)},d.svg=function(){return null==n.svg?cc.svg(n):new $a.XMLSerializer().serializeToString(n.svg)},Object.defineProperty(n,"snapshot",{get:function(){return d}}),Object.defineProperty(n,"export",{get:function(){return d}}),Object.defineProperty(n,"options",{get:function(){return o}}),n},Il=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(function(e){return"string"==typeof e}).filter(function(e){return 1===e.length}).shift()},Vl=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.vertices_didChange=function(){},t.edges_didChange=function(){},t.faces_didChange=function(){},t.copy=function(){return Object.assign(Object.create(e()),vr(this))};return t.rebuild=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qi.core.EPSILON;ur(this,e)},t.populate=function(){mr(this)},t.fragment=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:qi.core.EPSILON;xn(this,e)},t.clean=function(){var e="vertices_coords"in this&&"vertices_vertices"in this&&"edges_vertices"in this&&"edges_assignment"in this&&"faces_vertices"in this&&"faces_edges"in this;e||wn(this)},t.clear=function(){var e=this;ma(this),Object.keys(this).filter(function(e){return e.includes("re:")}).forEach(function(t){return delete e[t]}),delete this.vertices_vertices,delete this.vertices_faces,delete this.edges_faces},t.nearestVertex=function(){var e=tr(this,(i=qi.core).get_vector.apply(i,arguments)),t=tn(this,"vertices",e),i;return t.index=e,t},t.nearestEdge=function(){var e=ir(this,(i=qi.core).get_vector.apply(i,arguments)),t=tn(this,"edges",e),i;return t.index=e,t},t.nearestFace=function(){var e=nr(this,(t=qi.core).get_vector.apply(t,arguments)),t;if(void 0!==e){var i=tn(this,"faces",e);return i.index=e,i}},t.nearest=function(){var e=(i=qi.core).get_vector.apply(i,arguments),t={vertex:this.nearestVertex(this,e),edge:this.nearestEdge(this,e),face:this.nearestFace(this,e)},i;return Object.keys(t).filter(function(e){return null==t[e]}).forEach(function(e){return delete t[e]}),t},t.scale=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];Ta.apply(void 0,[this].concat(t))},t.segment=function(){var e=(i=qi.core).flatten_input.apply(i,arguments).filter(function(e){return"number"==typeof e}),t=Il.apply(void 0,arguments)||"F",i;cl(this,e[0],e[1],e[2],e[3],t).apply(),ur(this)},Object.defineProperty(t,"boundaries",{get:function(){return[ua(this)]}}),Object.defineProperty(t,"vertices",{get:function(){return en(this,"vertices")}}),Object.defineProperty(t,"edges",{get:function(){return en(this,"edges")}}),Object.defineProperty(t,"faces",{get:function(){return en(this,"faces")}}),Object.freeze(t)},Dl=Object.freeze({touchFold:!1}),Rl=function(){var t=Object.keys(Dl),i={};return Array.apply(void 0,arguments).filter(function(t){return"object"===e(t)}).forEach(function(e){return Object.keys(e).filter(function(e){return t.includes(e)}).forEach(function(t){i[t]=e[t]})}),i},ql={gl:"webgl",GL:"webgl",webGL:"webgl",WebGL:"webgl",webgl:"webgl",Webgl:"webgl",svg:"svg",SVG:"svg","2d":"svg","2D":"svg","3d":"webgl","3D":"webgl"},Xl=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return!0=="view"in e}).shift();if(void 0===r){if(Qa)return;if(Ha)return"svg"}return ql[r.view]},Gl=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Object.assign(Object.create(Vl()),t.filter(function(e){return pr(e)}).shift()||dn());wn(n);var r=function(e){var t=en(n,e),i=n.svg||n.gl;return Object.defineProperty(t,"visible",{get:function(){return i.options[e]},set:function(t){i.options[e]=!!t,n.didChange.forEach(function(e){return e()})}}),null!=n.svg&&t.forEach(function(t,r){t.svg=n.svg.groups[e].childNodes[r]}),t},s={};Object.assign(s,Dl);var a=Rl.apply(void 0,t);Object.keys(a).forEach(function(e){s[e]=a[e]}),Object.defineProperty(n,"nearest",{value:function(){var e={vertex:"vertices",edge:"edges",face:"faces"},t=(r=qi.core).get_vector.apply(r,arguments),i={vertex:n.nearestVertex(n,t),edge:n.nearestEdge(n,t),face:n.nearestFace(n,t)},r;return Object.keys(i).filter(function(e){return null==i[e]}).forEach(function(e){return delete i[e]}),null!=n.svg&&Object.keys(i).forEach(function(t){i[t].svg=n.svg.groups[e[t]].childNodes[i[t].index]}),i}}),Object.defineProperty(n,"vertices",{get:function(){return r.call(n,"vertices")}}),Object.defineProperty(n,"edges",{get:function(){return r.call(n,"edges")}}),Object.defineProperty(n,"faces",{get:function(){return r.call(n,"faces")}});var o=function(){return JSON.stringify(n)};return o.json=function(){return JSON.stringify(n)},o.fold=function(){return JSON.stringify(n)},o.svg=function(){return null==n.svg?cc.svg(n):new $a.XMLSerializer().serializeToString(n.svg)},Object.defineProperty(n,"clean",{value:function(){return wn(n)}}),Object.defineProperty(n,"snapshot",{get:function(){return o}}),Object.defineProperty(n,"export",{get:function(){return o}}),Object.defineProperty(n,"options",{get:function(){return s}}),n},Ul=Object.create(null);Object.assign(Ul,Da,yr,Ya,Ka,nn,Ia,hr,Kn,Od,Md,cr,tl,Ba),Ul.build_diagram_frame=function(e){var t=e["re:construction"];if(null==t)return console.warn("couldn't build diagram. construction info doesn't exist"),{};switch(t.type){case"flip":return{"re:diagram_arrows":[{"re:diagram_arrow_classes":["flip"],"re:diagram_arrow_coords":[]}],"re:diagram_instructions":{en:"flip over"}};case"fold":return{"re:diagram_lines":[{"re:diagram_line_classes":[Ki[t.assignment]],"re:diagram_line_coords":t.edge}],"re:diagram_arrows":[{"re:diagram_arrowClasses":[],"re:diagram_arrow_coords":sl(t,e)}],"re:diagram_instructions":rl(t)};case"squash":case"sink":case"pleat":default:return{error:"construction type (".concat(t.type,") not yet defined")};}},Ul.add_edge=cl,Ul.split_edge_run=function(e,t,i,r){var s=e.vertices_coords.length,a=e.edges_vertices.length;if(!(a<r)){var o={remove:{edges:[r]},update:ll(e,e.edges_vertices[r],s),new:{vertices:[{vertices_coords:[t,i],vertices_vertices:n(e.edges_vertices[r]),vertices_faces:e.edges_faces?e.edges_faces[r]:void 0}],edges:dl.apply(void 0,[e,r].concat(n(e.edges_vertices[r].map(function(e){return{edges_vertices:[e,s]}})))),faces:[]}};return e.edges_faces&&e.edges_faces[r].forEach(function(t){void 0===o.update[t]&&(o.update[t]={}),o.update[t].faces_vertices=gl(e.faces_vertices[t],e.edges_vertices[r],s),o.update[t].faces_edges=pl(e,e.faces_edges[t],r,s,a,a+1,o["new"].edges[0].edges_vertices,o["new"].edges[1].edges_vertices)}),o}},Ul.apply_run=al,Ul.merge_run=function(e,t,r){var s=Qn(e),a=Jn(e),o=$n(e),c=0,d=0,l=0;void 0!==t["new"]&&(void 0!==t["new"].vertices&&(c=t["new"].vertices.length),void 0!==t["new"].edges&&(d=t["new"].edges.length),void 0!==t["new"].faces&&(l=t["new"].faces.length));var g={vertices:{length:s,change:c},edges:{length:a,change:d},faces:{length:o,change:l}},f=[];void 0!==r["new"]&&Object.keys(r["new"]).forEach(function(e){r["new"][e].forEach(function(t,s){["vertices","edges","faces"].forEach(function(i){var n="_".concat(i),a=Object.keys(t).map(function(e){return e.substring(e.length-n.length,e.length)===n?e:void 0}).filter(function(e){return void 0!==e});a.forEach(function(t){r["new"][e][s][t].forEach(function(i,n){r["new"][e][s][t][n]>=g[e].length&&(r["new"][e][s][t][n]+=g[e].change)})})})}),f=f.concat(r["new"].vertices)});var p={};void 0!==t["new"]&&(p["new"]=t["new"]),void 0!==t.update&&(p.update=t.update),void 0!==t.remove&&(p.remove=t.remove),void 0!==r["new"]&&(void 0!==r["new"].vertices&&(void 0===p["new"].vertices&&(p["new"].vertices=[]),p["new"].vertices=p["new"].vertices.concat(r["new"].vertices)),void 0!==r["new"].edges&&(void 0===p["new"].edges&&(p["new"].edges=[]),p["new"].edges=p["new"].edges.concat(r["new"].edges)),void 0!==r["new"].faces&&(void 0===p["new"].faces&&(p["new"].faces=[]),p["new"].faces=p["new"].faces.concat(r["new"].faces))),void 0!==r.update&&Object.keys(r.update).forEach(function(e){if(null==p.update[e])p.update[e]=r.update[e];else{var t=Object.keys(p.update[e]),i=Object.keys(r.update[e]),n=t.filter(function(e){return i.includes(e)});if(0<n.length){var s=n.join(", ");return void console.warn("cannot merge. two diffs contain overlap at ".concat(s))}Object.assign(p.update[e],r.update[e])}}),void 0!==r.remove&&(void 0!==r.remove.vertices&&(void 0===p.remove.vertices&&(p.remove.vertices=[]),p.remove.vertices=p.remove.vertices.concat(r.remove.vertices)),void 0!==r.remove.edges&&(void 0===p.remove.edges&&(p.remove.edges=[]),p.remove.edges=p.remove.edges.concat(r.remove.edges)),void 0!==r.remove.faces&&(void 0===p.remove.faces&&(p.remove.faces=[]),p.remove.faces=p.remove.faces.concat(r.remove.faces))),Object.assign(t,r)},Ul.apply_axiom=xa,Ul.fragment=xn,Ul.clean=wn,Ul.remove=_n,Ul.rebuild=ur,Ul.populate=mr,Ul.validate=fr;var Wl={empty:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_title\": \"\",\n\t\"file_description\": \"\",\n\t\"file_classes\": [],\n\t\"file_frames\": [],\n\n\t\"frame_author\": \"\",\n\t\"frame_title\": \"\",\n\t\"frame_description\": \"\",\n\t\"frame_attributes\": [],\n\t\"frame_classes\": [],\n\t\"frame_unit\": \"\",\n\n\t\"vertices_coords\": [],\n\t\"vertices_vertices\": [],\n\t\"vertices_faces\": [],\n\n\t\"edges_vertices\": [],\n\t\"edges_faces\": [],\n\t\"edges_assignment\": [],\n\t\"edges_foldAngle\": [],\n\t\"edges_length\": [],\n\n\t\"faces_vertices\": [],\n\t\"faces_edges\": [],\n\n\t\"edgeOrders\": [],\n\t\"faceOrders\": []\n}\n"),square:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [1,0], [1,1], [0,1]],\n\t\"vertices_vertices\": [[1,3], [2,0], [3,1], [0,2]],\n\t\"vertices_faces\": [[0], [0], [0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,0]],\n\t\"edges_faces\": [[0], [0], [0], [0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0],\n\t\"edges_length\": [1, 1, 1, 1],\n\t\"faces_vertices\": [[0,1,2,3]],\n\t\"faces_edges\": [[0,1,2,3]]\n}"),book:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,1], [0.5,1], [0,1]],\n\t\"vertices_vertices\": [[1,5], [2,4,0], [3,1], [4,2], [5,1,3], [0,4]],\n\t\"vertices_faces\": [[0], [0,1], [1], [1], [1,0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,0], [1,4]],\n\t\"edges_faces\": [[0], [1], [1], [1], [0], [0], [0,1]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180],\n\t\"edges_length\": [0.5, 0.5, 1, 0.5, 0.5, 1, 1],\n\t\"faces_vertices\": [[1,4,5,0], [4,1,2,3]],\n\t\"faces_edges\": [[6,4,5,0], [6,1,2,3]]\n}"),blintz:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"blintz base\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,0.5], [1,1], [0.5,1], [0,1], [0,0.5]],\n\t\"vertices_vertices\": [[1,7], [2,3,7,0], [3,1], [4,5,1,2], [5,3], [6,7,3,4], [7,5], [0,1,5,6]],\n\t\"vertices_faces\": [[0], [1,4,0], [1], [2,4,1], [2], [3,4,2], [3], [0,4,3]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0], [1,3], [3,5], [5,7], [7,1]],\n\t\"edges_faces\": [[0], [1], [1], [2], [2], [3], [3], [0], [1,4], [2,4], [3,4], [0,4]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\",\"V\",\"V\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\"edges_length\": [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.7071067811865476, 0.7071067811865476, 0.7071067811865476, 0.7071067811865476],\n\t\"faces_vertices\": [[0,1,7], [2,3,1], [4,5,3], [6,7,5], [1,3,5,7]],\n\t\"faces_edges\": [[0,11,7], [2,8,1], [4,9,3], [6,10,5], [8,9,10,11]],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedForm\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [[0.5,0.5], [0.5,0.0], [0.5,0.5], [1.0,0.5], [0.5,0.5], [0.5,1.0], [0.5,0.5], [0.0,0.5]],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 180, 180, 180, 180],\n\t\t\"faceOrders\": [[0,4,1], [1,4,1], [2,4,1], [3,4,1]]\n\t}]\n}"),kite:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"kite base\",\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [\n\t\t[0,0],\n\t\t[0.414213562373095,0],\n\t\t[1,0],\n\t\t[1,0.585786437626905],\n\t\t[1,1],\n\t\t[0,1]\n\t],\n\t\"vertices_vertices\": [ [1,5], [2,5,0], [3,5,1], [4,5,2], [5,3], [0,1,2,3,4] ],\n\t\"vertices_faces\": [ [0], [1,0], [2,1], [3,2], [3], [0,1,2,3] ],\n\t\"edges_vertices\": [\n\t\t[0,1],\n\t\t[1,2],\n\t\t[2,3],\n\t\t[3,4],\n\t\t[4,5],\n\t\t[5,0],\n\t\t[5,1],\n\t\t[3,5],\n\t\t[5,2]\n\t],\n\t\"edges_faces\": [[0], [1], [2], [3], [3], [0], [0,1], [3,2], [1,2]],\n\t\"edges_assignment\": [\"B\", \"B\", \"B\", \"B\", \"B\", \"B\", \"V\", \"V\", \"F\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180, 180, 0],\n\t\"edges_length\": [0.414213562373095, 0.585786437626905, 0.585786437626905, 0.414213562373095, 1, 1, 1.082392200292394, 1.082392200292394, 1.414213562373095],\n\t\"faces_vertices\": [\n\t\t[0,1,5],\n\t\t[1,2,5],\n\t\t[2,3,5],\n\t\t[3,4,5]\n\t],\n\t\"faces_edges\": [\n\t\t[0,6,5],\n\t\t[1,8,6],\n\t\t[2,7,8],\n\t\t[3,4,7]\n\t],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedForm\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [\n\t\t\t[0.707106781186548,0.292893218813452],\n\t\t\t[1,0],\n\t\t\t[0.707106781186548,0.292893218813452],\n\t\t\t[0,1],\n\t\t\t[0.414213562373095,0],\n\t\t\t[1,0.585786437626905]\n\t\t],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180, 180, 0],\n\t\t\"faceOrders\": [[0,1,1], [3,2,1]]\n\t}]\n}"),fish:JSON.parse("{\n  \"file_spec\": 1.1,\n  \"file_creator\": \"\",\n  \"file_author\": \"\",\n  \"file_classes\": [\"singleModel\"],\n  \"frame_title\": \"\",\n  \"frame_classes\": [\"creasePattern\"],\n  \"frame_attributes\": [\"2D\"],\n  \"vertices_coords\": [\n    [0,0],\n    [1,0],\n    [1,1],\n    [0,1],\n    [0.292893218813452,0.292893218813452],\n    [0.707106781186548,0.707106781186548],\n    [0.292893218813452,0],\n    [1,0.707106781186548]\n  ],\n  \"edges_vertices\": [\n  \t[2,3], [3,0], [3,1], [0,4], [1,4], [3,4], [1,5], [2,5], [3,5], [4,6], [0,6], [6,1], [5,7], [1,7], [7,2]\n  ],\n  \"edges_assignment\": [\n  \t\"B\", \"B\", \"F\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"V\", \"B\", \"B\", \"V\", \"B\", \"B\"\n  ],\n  \"file_frames\": [{\n    \"frame_classes\": [\"foldedForm\"],\n    \"frame_parent\": 0,\n    \"frame_inherit\": true,\n    \"vertices_coords\":[[0.707106781186548,0.292893218813452],[1,0],[0.707106781186548,0.292893218813452],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.5,0.5],[0.5,0.5]]\n  }],\n  \"vertices_vertices\": [\n    [6,4,3],\n    [7,5,3,4,6],\n    [5,7,3],\n    [0,4,1,5,2],\n    [0,6,1,3],\n    [1,7,2,3],\n    [1,4,0],\n    [1,2,5]\n  ],\n  \"faces_vertices\": [\n    [4,0,6],\n    [3,0,4],\n    [5,1,7],\n    [3,1,5],\n    [4,1,3],\n    [6,1,4],\n    [5,2,3],\n    [7,2,5]\n  ],\n  \"faces_edges\": [\n    [3,10,9],\n    [1,3,5],\n    [6,13,12],\n    [2,6,8],\n    [4,2,5],\n    [11,4,9],\n    [7,0,8],\n    [14,7,12]\n  ],\n  \"edges_faces\": [[6], [1], [3,4], [0,1], [4,5], [1,4], [2,3], [6,7], [3,6], [0,5], [0], [5], [2,7], [2], [7]],\n  \"vertices_faces\": [[0,1], [2,3,4,5], [6,7], [1,3,4,6], [0,1,4,5], [2,3,6,7], [0,5], [2,7]],\n  \"edges_length\": [1, 1, 1.4142135623730951, 0.41421356237309437, 0.7653668647301798, 0.7653668647301798, 0.7653668647301798, 0.41421356237309437, 0.7653668647301798, 0.292893218813452, 0.292893218813452, 0.707106781186548, 0.292893218813452, 0.707106781186548, 0.292893218813452],\n  \"edges_foldAngle\": [0, 0, 0, -180, -180, -180, -180, -180, -180, 180, 0, 0, 180, 0, 0],\n  \"faces_faces\": [\n  \t[1,5], [0,4], [3,7], [2,4,6], [3,1,5], [4,0], [3,7], [6,2]\n  ],\n  \"vertices_edges\": [\n    [1,3,10],\n    [2,4,6,11,13],\n    [0,7,14],\n    [0,1,2,5,8],\n    [3,4,5,9],\n    [6,7,8,12],\n    [9,10,11],\n    [12,13,14]\n  ]\n}\n"),bird:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0.207106781186548,0.5],[0.5,0.207106781186548],[0.792893218813452,0.5],[0.5,0.792893218813452],[0.353553390593274,0.646446609406726],[0.646446609406726,0.646446609406726],[0.646446609406726,0.353553390593274],[0.353553390593274,0.353553390593274],[0,0.5],[0.5,0],[1,0.5],[0.5,1]],\n\t\"edges_vertices\": [[3,5],[5,9],[3,9],[3,13],[5,13],[0,5],[0,13],[0,12],[5,12],[4,5],[4,12],[4,9],[0,6],[6,12],[0,14],[6,14],[1,6],[1,14],[1,11],[6,11],[4,6],[4,11],[1,7],[7,11],[1,15],[7,15],[2,7],[2,15],[2,10],[7,10],[4,7],[4,10],[2,8],[8,10],[2,16],[8,16],[3,8],[3,16],[8,9],[4,8]],\n\t\"edges_faces\": [[0,1],[0,5],[21,0],[1],[2,1],[2,3],[2],[3,6],[4,3],[4,5],[11,4],[5,22],[6,7],[6,11],[7],[8,7],[8,9],[8],[9,12],[10,9],[10,11],[17,10],[12,13],[12,17],[13],[14,13],[14,15],[14],[15,18],[16,15],[16,17],[23,16],[18,19],[18,23],[19],[20,19],[20,21],[20],[22,21],[22,23]],\n\t\"edges_assignment\": [\"M\",\"F\",\"V\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"V\",\"F\",\"M\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"M\"],\n\t\"faces_vertices\": [[3,5,9],[5,3,13],[0,5,13],[5,0,12],[4,5,12],[5,4,9],[0,6,12],[6,0,14],[1,6,14],[6,1,11],[4,6,11],[6,4,12],[1,7,11],[7,1,15],[2,7,15],[7,2,10],[4,7,10],[7,4,11],[2,8,10],[8,2,16],[3,8,16],[8,3,9],[4,8,9],[8,4,10]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,4,6],[5,7,8],[9,8,10],[9,11,1],[12,13,7],[12,14,15],[16,15,17],[16,18,19],[20,19,21],[20,10,13],[22,23,18],[22,24,25],[26,25,27],[26,28,29],[30,29,31],[30,21,23],[32,33,28],[32,34,35],[36,35,37],[36,2,38],[39,38,11],[39,31,33]]\n}"),frog:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0,0.5],[0.5,0],[1,0.5],[0.5,1],[0.146446609406726,0.353553390593274],[0.353553390593274,0.146446609406726],[0.646446609406726,0.146446609406726],[0.853553390593274,0.353553390593274],[0.853553390593274,0.646446609406726],[0.646446609406726,0.853553390593274],[0.353553390593274,0.853553390593274],[0.146446609406726,0.646446609406726],[0,0.353553390593274],[0,0.646446609406726],[0.353553390593274,0],[0.646446609406726,0],[1,0.353553390593274],[1,0.646446609406726],[0.646446609406726,1],[0.353553390593274,1]],\n\t\"edges_vertices\": [[0,4],[4,9],[0,9],[0,10],[4,10],[2,4],[2,14],[4,14],[4,13],[2,13],[3,4],[4,15],[3,15],[3,16],[4,16],[1,4],[1,12],[4,12],[4,11],[1,11],[4,5],[5,9],[5,16],[4,6],[6,11],[6,10],[4,7],[7,13],[7,12],[4,8],[8,15],[8,14],[9,17],[0,17],[5,17],[0,19],[10,19],[6,19],[11,20],[1,20],[6,20],[1,21],[12,21],[7,21],[13,22],[2,22],[7,22],[2,23],[14,23],[8,23],[15,24],[3,24],[8,24],[3,18],[16,18],[5,18]],\n\t\"edges_faces\": [[0,1],[0,8],[16,0],[1,18],[11,1],[3,2],[2,26],[15,2],[3,12],[24,3],[4,5],[4,14],[28,4],[5,30],[9,5],[7,6],[6,22],[13,6],[7,10],[20,7],[8,9],[8,17],[31,9],[10,11],[10,21],[19,11],[12,13],[12,25],[23,13],[14,15],[14,29],[27,15],[16,17],[16],[17],[18],[19,18],[19],[20,21],[20],[21],[22],[23,22],[23],[24,25],[24],[25],[26],[27,26],[27],[28,29],[28],[29],[30],[31,30],[31]],\n\t\"edges_assignment\": [\"F\",\"M\",\"M\",\"M\",\"M\",\"F\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\"],\n\t\"faces_vertices\": [[0,4,9],[4,0,10],[4,2,14],[2,4,13],[3,4,15],[4,3,16],[4,1,12],[1,4,11],[4,5,9],[5,4,16],[4,6,11],[6,4,10],[4,7,13],[7,4,12],[4,8,15],[8,4,14],[0,9,17],[9,5,17],[10,0,19],[6,10,19],[1,11,20],[11,6,20],[12,1,21],[7,12,21],[2,13,22],[13,7,22],[14,2,23],[8,14,23],[3,15,24],[15,8,24],[16,3,18],[5,16,18]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,6,7],[5,8,9],[10,11,12],[10,13,14],[15,16,17],[15,18,19],[20,21,1],[20,14,22],[23,24,18],[23,4,25],[26,27,8],[26,17,28],[29,30,11],[29,7,31],[2,32,33],[21,34,32],[3,35,36],[25,36,37],[19,38,39],[24,40,38],[16,41,42],[28,42,43],[9,44,45],[27,46,44],[6,47,48],[31,48,49],[12,50,51],[30,52,50],[13,53,54],[22,54,55]]\n}")},b=Object.create(null);Object.defineProperty(b,"empty",{get:function(){return Ul.clone(Wl.empty)}}),Object.defineProperty(b,"square",{get:function(){return Ul.clone(Wl.square)}}),Object.defineProperty(b,"book",{get:function(){return Ul.clone(Wl.book)}}),Object.defineProperty(b,"blintz",{get:function(){return Ul.clone(Wl.blintz)}}),Object.defineProperty(b,"kite",{get:function(){return Ul.clone(Wl.kite)}}),Object.defineProperty(b,"fish",{get:function(){return Ul.clone(Wl.fish)}}),Object.defineProperty(b,"bird",{get:function(){return Ul.clone(Wl.bird)}}),Object.defineProperty(b,"frog",{get:function(){return Ul.clone(Wl.frog)}});var Yl={CreasePattern:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Gl.apply(void 0,t),r;switch(Xl.apply(void 0,t)){case"svg":r=bl.apply(void 0,[n].concat(t)),Object.defineProperty(n,"svg",{get:function(){return r}}),!0===n.options.touchFold&&wl(n,n.svg),n.svg.fit(),n.svg.draw();break;case"webgl":r=xe.apply(void 0,[n].concat(t)),Object.defineProperty(n,"canvas",{get:function(){return r}});break;default:}return n},Origami:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Tl.apply(void 0,t),r;switch(zl.apply(void 0,t)){case"svg":r=bl.apply(void 0,[n].concat(t)),n.didChange.push(r.draw),Object.defineProperty(n,"svg",{get:function(){return r}}),!0===n.options.touchFold&&wl(n,n.svg),n.svg.fit(),n.svg.draw();break;case"webgl":r=xe.apply(void 0,[n].concat(t)),Object.defineProperty(n,"canvas",{get:function(){return r}});break;default:}return n},graph:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.create(Pr()),cn(),e,{file_spec:Xi,file_creator:Gi})},svg:fa,fold:Ud,convert:jd,core:Ul,bases:b,math:qi.core,axiom:Fa,equivalent:qi.core.equivalent};return Object.keys(qi).filter(function(e){return"core"!==e}).forEach(function(e){Yl[e]=qi[e]}),Yl});
