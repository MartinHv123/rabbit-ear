/* Rabbit Ear v0.1.91 (c) Robby Kraft, MIT License */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.RabbitEar=t())})(this,function(){'use strict';var J=Math.tan,$=Math.floor,ee=Math.acos,te=Math.min,ie=Math.max,ne=Math.PI,re=Math.abs,se=Math.sin,ae=Math.cos,ce=Math.atan2,oe=Math.sqrt,de=Math.pow;function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function i(e,t){return s(e)||c(e,t)||l()}function n(e){return r(e)||a(e)||o()}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function s(e){if(Array.isArray(e))return e}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var a=e[Symbol.iterator](),c;!(n=(c=a.next()).done)&&(i.push(c.value),!(t&&i.length===t));n=!0);}catch(e){r=!0,s=e}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function g(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",c=null!=t&&"string"==typeof t?t:"\t",o=["\n"],d=0;100>d;d+=1)o.push(o[d]+c);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=o[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s]+i[l]:a+=-1<i[l].search(/<\?/)?o[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?o[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function f(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",c=null!=t&&"string"==typeof t?t:"\t",o=["\n"],d=0;100>d;d+=1)o.push(o[d]+c);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=o[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s]+i[l]:a+=-1<i[l].search(/<\?/)?o[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?o[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function p(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Bn(t)}function _(){var e=Array.from(arguments),t=e.filter(function(e){return!isNaN(e)}),i=e.filter(function(e){return e.constructor===Array});if(0===e.length)return{vector:[],origin:[]};if(!isNaN(e[0])&&4<=t.length)return{origin:[e[0],e[1]],vector:[e[2],e[3]]};if(0<i.length){if(1===i.length)return _.apply(void 0,n(i[0]));if(2===i.length)return{origin:[i[0][0],i[0][1]],vector:[i[1][0],i[1][1]]};if(4===i.length)return{origin:[i[0],i[1]],vector:[i[2],i[3]]}}if(e[0].constructor===Object){var r=[],s=[];return null==e[0].vector?null!=e[0].direction&&(r=Fn(e[0].direction)):r=Fn(e[0].vector),null==e[0].point?null!=e[0].origin&&(s=Fn(e[0].origin)):s=Fn(e[0].point),{origin:s,vector:r}}return{origin:[],vector:[]}}function u(){return _.apply(void 0,arguments)}function h(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(0!==i.length){if(1===i.length&&void 0!==i[0])return h.apply(void 0,n(i[0]));var s=Array.from(i),a=s.filter(function(e){return!isNaN(e)}),c=s.filter(function(t){return"object"===e(t)}).filter(function(e){return e.constructor===Array});return 4<=a.length?[[a[0],a[1]],[a[2],a[3]]]:2<=c.length&&!isNaN(c[0][0])?c:1!==c.length||isNaN(c[0][0][0])?void 0:c[0]}}function m(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?void 0:1===t.length&&void 0!==t[0]?m.apply(void 0,n(t[0])):Array.from(t)}function v(e,t){var i=null==t?{}:t,n=function(e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return this.compare_function(e,t)&&!0},r=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return this.compare_function(e,i)&&t>=-i},s=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return this.compare_function(e,i)&&t>=-i&&t<=1+i};return Object.defineProperty(i,"isParallel",{value:function(e){if(null==e.vector)throw new Error("isParallel() argument is missing a vector");var t=this.vector.length<e.vector.length,i=t?this.vector:e.vector,n=t?e.vector:this.vector;return Jn(i,n)}}),Object.defineProperty(i,"isDegenerate",{value:function(){return Qn(this.vector)}}),Object.defineProperty(i,"nearestPoint",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t);return Qr(Yr(this.origin,this.vector,n,this.clip_function))}}),Object.defineProperty(i,"reflection",{value:function(){return Jr.makeReflection(this.vector,this.origin)}}),Object.defineProperty(i,"intersect",{value:function(e){var t=this;return yr(this.origin,this.vector,e.origin,e.vector,function(i,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return t.compare_function(i,r)&&e.compare_function(n,r)})}}),Object.defineProperty(i,"intersectLine",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=_(t);return yr(this.origin,this.vector,r.origin,r.vector,n.bind(this))}}),Object.defineProperty(i,"intersectRay",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=u(t);return yr(this.origin,this.vector,n.origin,n.vector,r.bind(this))}}),Object.defineProperty(i,"intersectSegment",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=p(t),r=[n[1][0]-n[0][0],n[1][1]-n[0][1]];return yr(this.origin,this.vector,n[0],r,s.bind(this))}}),Object.defineProperty(i,"bisectLine",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=_(t);return Fr(this.origin,this.vector,n.origin,n.vector)}}),Object.defineProperty(i,"bisectRay",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=u(t);return Fr(this.origin,this.vector,n.origin,n.vector)}}),Object.defineProperty(i,"bisectSegment",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=p(t),r=[n[1][0]-n[0][0],n[1][1]-n[0][1]];return Fr(this.origin,this.vector,n[0],r)}}),Object.freeze(i)}function k(e){var t={},i=e,n=function(){return Dr(this.points)},r=function(){return this.points.map(function(e,t,i){var n=(t+i.length-1)%i.length,r=(t+1)%i.length,s=e,c=i[n].map(function(e,t){return e-s[t]}),a=i[r].map(function(e,t){return e-s[t]});return ns(a,c,s)})};return Object.defineProperty(t,"area",{value:n}),Object.defineProperty(t,"centroid",{value:function(){return Rr(this.points)}}),Object.defineProperty(t,"midpoint",{value:function(){return nn(this.points)}}),Object.defineProperty(t,"enclosingRectangle",{value:function(){return qr(this.points)}}),Object.defineProperty(t,"contains",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return er(Fn(t),this.points)}}),Object.defineProperty(t,"nearest",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t),r=this.sides.map(function(e){return e.nearestPoint(n)}),s=1/0,a;return r.map(function(e){return sn(n,e)}).forEach(function(e,t){e<s&&(s=e,a=t)}),{point:r[a],edge:this.sides[a]}}}),Object.defineProperty(t,"clipSegment",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=p(i),s=Cr(this.points,r[0],r[1]);return void 0===s?void 0:is(s)}}),Object.defineProperty(t,"clipLine",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=_(i),s=Or(this.points,r.origin,r.vector);return void 0===s?void 0:is(s)}}),Object.defineProperty(t,"clipRay",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=_(i),s=jr(this.points,r.origin,r.vector);return void 0===s?void 0:is(s)}}),Object.defineProperty(t,"split",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=_(t);return Gr(this.points,r.origin,r.vector).map(function(e){return i(e)})}}),Object.defineProperty(t,"scale",{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rr(this.points),n=this.points.map(function(e){return[0,1].map(function(n,r){return e[r]-t[r]})}).map(function(n){return n.map(function(r,s){return t[s]+n[s]*e})});return i(n)}}),Object.defineProperty(t,"rotate",{value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rr(this.points),n=this.points.map(function(i){var n=[i[0]-t[0],i[1]-t[1]],r=oe(de(n[0],2)+de(n[1],2)),s=ce(n[1],n[0]);return[t[0]+ae(s+e)*r,t[1]+se(s+e)*r]});return i(n)}}),Object.defineProperty(t,"translate",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Fn(t),s=this.points.map(function(e){return e.map(function(e,t){return e+r[t]})});return i(s)}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Rn(t),s=this.points.map(function(e){return Qr(dn(r,e))});return i(s)}}),Object.defineProperty(t,"edges",{get:function(){return this.sides}}),Object.defineProperty(t,"sectors",{get:function(){return r.call(this)}}),Object.defineProperty(t,"signedArea",{value:n}),Object.freeze(t)}function E(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"F",r=po(e,t),s=e.vertices_coords[t];Bc(e,i,s,r[i],n)}function P(e,t){for(var i=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),n=i.length,r=!1,s=0,a="",c=null!=t&&"string"==typeof t?t:"\t",o=["\n"],d=0;100>d;d+=1)o.push(o[d]+c);for(var l=0;l<n;l+=1)-1<i[l].search(/<!/)?(a+=o[s]+i[l],r=!0,(-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)||-1<i[l].search(/!DOCTYPE/))&&(r=!1)):-1<i[l].search(/-->/)||-1<i[l].search(/\]>/)?(a+=i[l],r=!1):/^<\w/.exec(i[l-1])&&/^<\/\w/.exec(i[l])&&/^<[\w:\-\.\,]+/.exec(i[l-1])==/^<\/[\w:\-\.\,]+/.exec(i[l])[0].replace("/","")?(a+=i[l],r||(s-=1)):-1<i[l].search(/<\w/)&&-1===i[l].search(/<\//)&&-1===i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s++]+i[l]:-1<i[l].search(/<\w/)&&-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[s]+i[l]:-1<i[l].search(/<\//)?a=r?a+=i[l]:a+=o[--s]+i[l]:-1<i[l].search(/\/>/)?a=r?a+=i[l]:a+=o[s]+i[l]:a+=-1<i[l].search(/<\?/)?o[s]+i[l]:-1<i[l].search(/xmlns\:/)||-1<i[l].search(/xmlns\=/)?o[s]+i[l]:i[l];return"\n"===a[0]?a.slice(1):a}function A(e){var t=[];return e.replace(nd,function(e,i,n){var r=i.toLowerCase();for(n=w(n),"m"===r&&2<n.length&&(t.push([i].concat(n.splice(0,2))),r="l",i="m"===i?"l":"L");0<=n.length;){if(n.length===id[r])return n.unshift(i),t.push(n);if(n.length<id[r])throw new Error("malformed path data");t.push([i].concat(n.splice(0,id[r])))}}),t}function w(e){var t=e.match(rd);return t?t.map(Number):[]}function N(e,t,i,n,r,s,a,c){return new L(e,t,i,n,r,s,a,c)}function L(e,i,n,r,s,a,c,o){this.a={x:e,y:i},this.b={x:n,y:r},this.c={x:s,y:a},this.d={x:c,y:o},null!==c&&void 0!==c&&null!==o&&void 0!==o?(this.getArcLength=t,this.getPoint=T,this.getDerivative=j):(this.getArcLength=z,this.getPoint=M,this.getDerivative=O),this.init()}function O(e,i,n){return{x:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1]),y:2*(1-n)*(i[1]-i[0])+2*n*(i[2]-i[1])}}function j(e,i,n){var t=M([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(i[1]-i[0]),3*(i[2]-i[1]),3*(i[3]-i[2])],n);return t}function C(e,i,n,r,s){for(var a=1,c=e/i,o=(e-n(r,s,c))/i,d=0;.001<a;){var l=n(r,s,c+o),g=n(r,s,c-o),f=re(e-l)/i,p=re(e-g)/i;if(f<a?(a=f,c+=o):p<a?(a=p,c-=o):o/=2,d++,500<d)break}return c}function M(e,i,n){var t=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],r=(1-n)*(1-n)*i[0]+2*(1-n)*n*i[1]+n*n*i[2];return{x:t,y:r}}function T(e,i,n){var t=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],r=(1-n)*(1-n)*(1-n)*i[0]+3*(1-n)*(1-n)*n*i[1]+3*(1-n)*n*n*i[2]+n*n*n*i[3];return{x:t,y:r}}function z(e,i,n){var r=Math.log;void 0===n&&(n=1);var s=e[0]-2*e[1]+e[2],a=i[0]-2*i[1]+i[2],c=2*e[1]-2*e[0],o=2*i[1]-2*i[0],d=4*(s*s+a*a);if(0===d)return n*oe(de(e[2]-e[0],2)+de(i[2]-i[0],2));var l=4*(s*c+a*o)/(2*d),g=n+l,f=(c*c+o*o)/d-l*l,p=0<g*g+f?oe(g*g+f):0,_=0<l*l+f?oe(l*l+f):0,u=0===l+oe(l*l+f)?0:f*r(re((g+p)/(l+_)));return oe(d)/2*(g*p-l*_+u)}function I(e,t){return cd[e][t]}function F(e,i,t){var r=t.length-1,n,s,a;if(0==r)return 0;if(0===e){for(s=0,a=0;a<=r;a++)s+=I(r,a)*de(1-i,r-a)*de(i,a)*t[a];return s}for(n=Array(r),a=0;a<r;a++)n[a]=r*(t[a+1]-t[a]);return F(e-1,i,n)}function V(e,i,n){var t=F(1,n,e),r=F(1,n,i);return oe(t*t+r*r)}function t(e,n,r){var s,a,c,o;void 0===r&&(r=1);for(s=r/2,a=0,c=0;20>c;c++)o=s*sd[20][c]+s,a+=ad[20][c]*V(e,n,o);return s*a}function B(e,t,i,n,r,s,a,c,o){return new D(e,t,i,n,r,s,a,c,o)}function D(e,i,n,r,s,a,c,o,d){this.x0=e,this.y0=i,this.rx=n,this.ry=r,this.xAxisRotate=s,this.LargeArcFlag=a,this.SweepFlag=c,this.x1=o,this.y1=d;var t=q(300,function(l){return R({x:e,y:i},n,r,s,a,c,{x:o,y:d},l)});this.length=t.arcLength}function R(e,i,n,r,s,a,c,o){i=re(i),n=re(n),r=X(r,360);var t=Y(r);if(e.x===c.x&&e.y===c.y)return e;if(0===i||0===n)return this.pointOnLine(e,c,o);var d=(e.x-c.x)/2,l=(e.y-c.y)/2,g={x:ae(t)*d+se(t)*l,y:-se(t)*d+ae(t)*l},f=de(g.x,2)/de(i,2)+de(g.y,2)/de(n,2);1<f&&(i=oe(f)*i,n=oe(f)*n);var p=de(i,2)*de(n,2)-de(i,2)*de(g.y,2)-de(n,2)*de(g.x,2),_=de(i,2)*de(g.y,2)+de(n,2)*de(g.x,2),u=p/_;u=0>u?0:u;var h=(s===a?-1:1)*oe(u),m={x:h*(i*g.y/n),y:h*(-(n*g.x)/i)},v={x:ae(t)*m.x-se(t)*m.y+(e.x+c.x)/2,y:se(t)*m.x+ae(t)*m.y+(e.y+c.y)/2},y={x:(g.x-m.x)/i,y:(g.y-m.y)/n},k=K({x:1,y:0},y),x={x:(-g.x-m.x)/i,y:(-g.y-m.y)/n},b=K(y,x);!a&&0<b?b-=2*ne:a&&0>b&&(b+=2*ne),b%=2*ne;var E=k+b*o,P=i*ae(E),A=n*se(E),w={x:ae(t)*P-se(t)*A+v.x,y:se(t)*P+ae(t)*A+v.y};return w.ellipticalArcStartAngle=k,w.ellipticalArcEndAngle=k+b,w.ellipticalArcAngle=E,w.ellipticalArcCenter=v,w.resultantRx=i,w.resultantRy=n,w}function q(e,n){e=e?e:500;for(var r=0,s=[],a=[],c=n(0),o=0,d,l;o<e;o++)l=Z(o*(1/e),0,1),d=n(l),r+=G(c,d),a.push([c,d]),s.push({t:l,arcLength:r}),c=d;return d=n(1),a.push([c,d]),r+=G(c,d),s.push({t:1,arcLength:r}),{arcLength:r,arcLengthMap:s,approximationLines:a}}function X(e,t){return(e%t+t)%t}function Y(e){return e*(ne/180)}function G(e,t){return oe(de(t.x-e.x,2)+de(t.y-e.y,2))}function Z(e,t,i){return te(ie(e,t),i)}function K(e,t){var i=e.x*t.x+e.y*t.y,r=oe((de(e.x,2)+de(e.y,2))*(de(t.x,2)+de(t.y,2))),n=0>e.x*t.y-e.y*t.x?-1:1,s=n*ee(i/r);return s}function W(e,t,i,n){return new H(e,t,i,n)}function H(e,t,i,n){this.x0=e,this.x1=t,this.y0=i,this.y1=n}function Q(e){function t(e){if(!e)return null;for(var a=A(e),c=[0,0],o=[0,0],d=0,l,g;d<a.length;d++)"M"===a[d][0]?(c=[a[d][1],a[d][2]],g=[c[0],c[1]],s.push(null)):"m"===a[d][0]?(c=[a[d][1]+c[0],a[d][2]+c[1]],g=[c[0],c[1]],s.push(null)):"L"===a[d][0]?(n+=oe(de(c[0]-a[d][1],2)+de(c[1]-a[d][2],2)),s.push(new W(c[0],a[d][1],c[1],a[d][2])),c=[a[d][1],a[d][2]]):"l"===a[d][0]?(n+=oe(de(a[d][1],2)+de(a[d][2],2)),s.push(new W(c[0],a[d][1]+c[0],c[1],a[d][2]+c[1])),c=[a[d][1]+c[0],a[d][2]+c[1]]):"H"===a[d][0]?(n+=re(c[0]-a[d][1]),s.push(new W(c[0],a[d][1],c[1],c[1])),c[0]=a[d][1]):"h"===a[d][0]?(n+=re(a[d][1]),s.push(new W(c[0],c[0]+a[d][1],c[1],c[1])),c[0]=a[d][1]+c[0]):"V"===a[d][0]?(n+=re(c[1]-a[d][1]),s.push(new W(c[0],c[0],c[1],a[d][1])),c[1]=a[d][1]):"v"===a[d][0]?(n+=re(a[d][1]),s.push(new W(c[0],c[0],c[1],c[1]+a[d][1])),c[1]=a[d][1]+c[1]):"z"===a[d][0]||"Z"===a[d][0]?(n+=oe(de(g[0]-c[0],2)+de(g[1]-c[1],2)),s.push(new W(c[0],g[0],c[1],g[1])),c=[g[0],g[1]]):"C"===a[d][0]?(l=new N(c[0],c[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6]),n+=l.getTotalLength(),c=[a[d][5],a[d][6]],s.push(l)):"c"===a[d][0]?(l=new N(c[0],c[1],c[0]+a[d][1],c[1]+a[d][2],c[0]+a[d][3],c[1]+a[d][4],c[0]+a[d][5],c[1]+a[d][6]),0<l.getTotalLength()?(n+=l.getTotalLength(),s.push(l),c=[a[d][5]+c[0],a[d][6]+c[1]]):s.push(new W(c[0],c[0],c[1],c[1]))):"S"===a[d][0]?(l=0<d&&-1<["C","c","S","s"].indexOf(a[d-1][0])?new N(c[0],c[1],2*c[0]-a[d-1][a[d-1].length-4],2*c[1]-a[d-1][a[d-1].length-3],a[d][1],a[d][2],a[d][3],a[d][4]):new N(c[0],c[1],c[0],c[1],a[d][1],a[d][2],a[d][3],a[d][4]),n+=l.getTotalLength(),c=[a[d][3],a[d][4]],s.push(l)):"s"===a[d][0]?(l=0<d&&-1<["C","c","S","s"].indexOf(a[d-1][0])?new N(c[0],c[1],c[0]+l.d.x-l.c.x,c[1]+l.d.y-l.c.y,c[0]+a[d][1],c[1]+a[d][2],c[0]+a[d][3],c[1]+a[d][4]):new N(c[0],c[1],c[0],c[1],c[0]+a[d][1],c[1]+a[d][2],c[0]+a[d][3],c[1]+a[d][4]),n+=l.getTotalLength(),c=[a[d][3]+c[0],a[d][4]+c[1]],s.push(l)):"Q"===a[d][0]?(l=c[0]==a[d][1]&&c[1]==a[d][2]?new W(a[d][1],a[d][3],a[d][2],a[d][4]):new N(c[0],c[1],a[d][1],a[d][2],a[d][3],a[d][4]),n+=l.getTotalLength(),s.push(l),c=[a[d][3],a[d][4]],o=[a[d][1],a[d][2]]):"q"===a[d][0]?(l=0==a[d][1]&&0==a[d][2]?new W(c[0]+a[d][1],c[0]+a[d][3],c[1]+a[d][2],c[1]+a[d][4]):new N(c[0],c[1],c[0]+a[d][1],c[1]+a[d][2],c[0]+a[d][3],c[1]+a[d][4]),n+=l.getTotalLength(),o=[c[0]+a[d][1],c[1]+a[d][2]],c=[a[d][3]+c[0],a[d][4]+c[1]],s.push(l)):"T"===a[d][0]?(l=0<d&&-1<["Q","q","T","t"].indexOf(a[d-1][0])?new N(c[0],c[1],2*c[0]-o[0],2*c[1]-o[1],a[d][1],a[d][2]):new W(c[0],a[d][1],c[1],a[d][2]),s.push(l),n+=l.getTotalLength(),o=[2*c[0]-o[0],2*c[1]-o[1]],c=[a[d][1],a[d][2]]):"t"===a[d][0]?(l=0<d&&-1<["Q","q","T","t"].indexOf(a[d-1][0])?new N(c[0],c[1],2*c[0]-o[0],2*c[1]-o[1],c[0]+a[d][1],c[1]+a[d][2]):new W(c[0],c[0]+a[d][1],c[1],c[1]+a[d][2]),n+=l.getTotalLength(),o=[2*c[0]-o[0],2*c[1]-o[1]],c=[a[d][1]+c[0],a[d][2]+c[0]],s.push(l)):"A"===a[d][0]?(l=new B(c[0],c[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6],a[d][7]),n+=l.getTotalLength(),c=[a[d][6],a[d][7]],s.push(l)):"a"===a[d][0]&&(l=new B(c[0],c[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],c[0]+a[d][6],c[1]+a[d][7]),n+=l.getTotalLength(),c=[c[0]+a[d][6],c[1]+a[d][7]],s.push(l)),r.push(n);return t}var n=0,r=[],s=[];t.getTotalLength=function(){return n},t.getPointAtLength=function(e){var t=a(e);return s[t.i].getPointAtLength(t.fraction)},t.getTangentAtLength=function(e){var t=a(e);return s[t.i].getTangentAtLength(t.fraction)},t.getPropertiesAtLength=function(e){var t=a(e);return s[t.i].getPropertiesAtLength(t.fraction)},t.getParts=function(){for(var e=[],t=0;t<s.length;t++)if(null!=s[t]){var n={};n.start=s[t].getPointAtLength(0),n.end=s[t].getPointAtLength(r[t]-r[t-1]),n.length=r[t]-r[t-1],function(e){n.getPointAtLength=function(t){return e.getPointAtLength(t)},n.getTangentAtLength=function(t){return e.getTangentAtLength(t)},n.getPropertiesAtLength=function(t){return e.getPropertiesAtLength(t)}}(s[t]),e.push(n)}return e};var a=function(e){0>e?e=0:e>n&&(e=n);for(var t=r.length-1;r[t]>=e&&0<r[t];)t--;return t++,{fraction:e-r[t-1],i:t}};return t(e)}var le="undefined"!=typeof window&&"undefined"!=typeof window.document,ge="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,fe="object"===("undefined"==typeof self?"undefined":e(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,pe="undefined"!=typeof window&&"undefined"!=typeof window.document,_e="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,ue=function(){var e={};if(_e){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else pe&&(e=window);return e}(),he="http://www.w3.org/2000/svg",me=function(){var e=ue.document.createElementNS(he,"svg");return e.setAttribute("version","1.1"),e.setAttribute("xmlns",he),e},ve=function(e){var t=ue.document.createElementNS(he,"g");return e&&e.appendChild(t),t},ye=function e(t){var e=ue.document.createElementNS(he,"defs");return t&&t.appendChild(e),e},ke=function(e){var t=ue.document.createElementNS(he,"style");return t.setAttribute("type","text/css"),e&&e.appendChild(t),t},xe=function(e,t,i,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=n/1-n,c=[t-a-s,i-a-s,n+2*a+2*s,r+2*a+2*s].join(" ");e.setAttributeNS(null,"viewBox",c)},be=function(e,t,i,n){var r=ue.document.createElementNS(he,"line");return r.setAttributeNS(null,"x1",e),r.setAttributeNS(null,"y1",t),r.setAttributeNS(null,"x2",i),r.setAttributeNS(null,"y2",n),r},Ee=function(e,t,i){var n=ue.document.createElementNS(he,"circle");return n.setAttributeNS(null,"cx",e),n.setAttributeNS(null,"cy",t),n.setAttributeNS(null,"r",i),n},Pe=function(e){var t=ue.document.createElementNS(he,"polygon"),i=e.map(function(e){return"".concat(e[0],",").concat(e[1])}).join(" ");return t.setAttributeNS(null,"points",i),t},Ae=function(e){var t=ue.document.createElementNS(he,"path");return t.setAttributeNS(null,"d",e),t},we=function(e,t){if(!1=="vertices_coords"in e)return[];var i=t&&t.radius?t.radius:.01,n=e.vertices_coords.map(function(e){return Ee(e[0],e[1],i)});return n.forEach(function(e,t){return e.setAttribute("index",t)}),n},Se={B:"boundary",b:"boundary",M:"mountain",m:"mountain",V:"valley",v:"valley",F:"mark",f:"mark",U:"unassigned",u:"unassigned"},Ne={B:"b",b:"b",M:"m",m:"m",V:"v",v:"v",F:"f",f:"f",U:"u",u:"u"},Le=function(e){var t=e.vertices_coords,i=e.edges_vertices;return null==i||null==t?[]:i.map(function(e){return e.map(function(e){return t[e]})})},Oe=function(e){var t=e.edges_assignment,n={u:[],f:[],v:[],m:[],b:[]};return t.map(function(e){return Ne[e]}).forEach(function(e,t){return n[e].push(t)}),n},je=function(e){return null==e.edges_vertices||null==e.edges_assignment||e.edges_vertices.length!==e.edges_assignment.length?[]:e.edges_assignment.map(function(e){return Se[e]})},Ce=function(e){return"M".concat(e[0][0]," ").concat(e[0][1],"L").concat(e[1][0]," ").concat(e[1][1])},Me=function(e){var t=Le(e).map(function(e){return Ce(e)}).join("");return""===t?void 0:t},Te=function(e){if(null==e.edges_vertices||null==e.vertices_coords||null==e.edges_assignment)return[];var t=Le(e),i=Oe(e),n=Object.keys(i).map(function(e){return i[e].map(function(e){return t[e]})}).map(function(e){return e.map(function(e){return Ce(e)}).join("")}),r={};return Object.keys(i).map(function(e,t){""!==n[t]&&(r[e]=n[t])}),r},ze=function(e){if(null==e.edges_assignment){var t=Me(e);return void 0===t?[]:[Ae(t)]}var i=Te(e);return Object.keys(i).map(function(e){var t=Ae(i[e]);return t.setAttributeNS(null,"class",Se[e]),t})},Ie=function(e){var t=e.edges_vertices;if(t){var n=[];return t.forEach(function(e,t){return e.forEach(function(e){void 0===n[e]&&(n[e]=[]),n[e].push(t)})}),n}},Fe=function(e){var t=e.faces_vertices;if(t){var i=t.length,n=Array.from(Array(i)).map(function(){return[]}),r={};return t.forEach(function(e,t){if(void 0!==e){var s=e.length;e.forEach(function(e,a,i){var c=i[(a+1)%s];if(c<e){var o=[c,e];e=o[0],c=o[1]}var d="".concat(e," ").concat(c);if(d in r){var l=r[d];n[t].push(l),n[l].push(t)}else r[d]=t})}}),n}},Be=function(e){var t=e.edges_vertices;if(!t)return{};var n={};return t.map(function(e){return e.sort(function(e,t){return e-t}).join(" ")}).forEach(function(e,t){n[e]=t}),n},Ve=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=Be(e),n=Fe(e);if(0>=n.length)return[];var r=[t],s=[[{face:t,parent:void 0,edge:void 0,level:0}]];do s[s.length]=s[s.length-1].map(function(t){var s=n[t.face].filter(function(e){return-1===r.indexOf(e)});return r=r.concat(s),s.map(function(n){var r=e.faces_vertices[n].filter(function(i){return-1!==e.faces_vertices[t.face].indexOf(i)}).sort(function(e,t){return e-t}),s=i[r.join(" ")];return{face:n,parent:t.face,edge:s,edge_vertices:r}})}).reduce(function(e,t){return e.concat(t)},[]);while(0<s[s.length-1].length);return 0<s.length&&0===s[s.length-1].length&&s.pop(),s},De=function(e){return e.map(function(e){return e[0]*e[3]-e[1]*e[2]}).map(function(e){return 0<=e})},Re=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=[];return n[t]=!0,Ve(e,t).forEach(function(e,t){return e.forEach(function(e){n[e.face]=0==t%2})}),n},qe=function(e){return e.map(function(e,t){return{layer:e,i:t}}).sort(function(e,t){return e.layer-t.layer}).map(function(e){return e.i})},Xe=function(e){var t=e["faces_re:coloring"];return null==t&&(t="faces_re:matrix"in e?De(e["faces_re:matrix"]):Re(e,0)),t.map(function(e){return e?"front":"back"})},Ue=function(e,t){var i=null!=e["faces_re:layer"]&&e["faces_re:layer"].length===e.faces_vertices.length;return i&&Xe(e).forEach(function(e,n){return t[n].setAttribute("class",e)}),i?qe(e["faces_re:layer"]).map(function(e){return t[e]}):t},Ye=function(e){if(!1=="faces_vertices"in e||!1=="vertices_coords"in e)return[];var t=e.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}).map(function(e){return Pe(e)});return t.forEach(function(e,t){return e.setAttribute("index",t)}),Ue(e,t)},Ge=function(e){if(!1=="faces_edges"in e||!1=="edges_vertices"in e||!1=="vertices_coords"in e)return[];var t=e.faces_edges.map(function(t){return t.map(function(t){return e.edges_vertices[t]}).map(function(e,t,i){var n=i[(t+1)%i.length];return e[1]===n[0]||e[1]===n[1]?e[0]:e[1]}).map(function(t){return e.vertices_coords[t]})}).map(function(e){return Pe(e)});return t.forEach(function(e,t){return e.setAttribute("index",t)}),Ue(e,t)},Ze=function(e){var t=e.vertices_coords;if(null==t||0>=t.length)return[0,0,0,0];var i=t[0].length,r=Array(i).fill(1/0),s=Array(i).fill(-Infinity);return t.forEach(function(e){return e.forEach(function(e,t){e<r[t]&&(r[t]=e),e>s[t]&&(s[t]=e)})}),isNaN(r[0])||isNaN(r[1])||isNaN(s[0])||isNaN(s[1])?[0,0,0,0]:[r[0],r[1],s[0]-r[0],s[1]-r[1]]},Ke=function(e){if(null==e.edges_assignment)return{vertices:[],edges:[]};for(var t=e.edges_assignment.map(function(e){return"B"===e||"b"===e}),n=Ie(e),r=[],s=[],a=-1,c=0;c<t.length;c+=1)if(t[c]){a=c;break}if(-1===a)return{vertices:[],edges:[]};t[a]=!1,r.push(a),s.push(e.edges_vertices[a][0]);for(var o=e.edges_vertices[a][1];s[0]!==o;){if(s.push(o),a=n[o].filter(function(e){return t[e]}).shift(),void 0===a)return{vertices:[],edges:[]};if(e.edges_vertices[a][0]===o){var d=i(e.edges_vertices[a],2);o=d[1]}else{var l=i(e.edges_vertices[a],1);o=l[0]}t[a]=!1,r.push(a)}return{vertices:s,edges:r}},We=function t(n){var r,s;if("object"!==e(n))return n;if(!n)return n;if("[object Array]"===Object.prototype.toString.apply(n)){for(r=[],s=0;s<n.length;s+=1)r[s]=t(n[s]);return r}for(s in r={},n)n.hasOwnProperty(s)&&(r[s]=t(n[s]));return r},He=function t(i){return(Object.freeze(i),void 0===i)?i:(Object.getOwnPropertyNames(i).filter(function(t){return null!==i[t]&&("object"===e(i[t])||"function"==typeof i[t])&&!Object.isFrozen(i[t])}).forEach(function(e){return t(i[e])}),i)},Qe=function(e,t){if(!1=="file_frames"in e||e.file_frames.length<t)return e;var i=["frame_parent","frame_inherit"],n={visited_frames:[]};return function e(t,i,r){if(-1!==n.visited_frames.indexOf(i))throw new Error("encountered a cycle in file_frames. can't flatten.");return n.visited_frames.push(i),r=[i].concat(r),0===i?r:t.file_frames[i-1].frame_inherit&&null!=t.file_frames[i-1].frame_parent?e(t,t.file_frames[i-1].frame_parent,r):r}(e,t,[]).map(function(t){if(0===t){var n=e.file_frames;e.file_frames=null;var r=We(e);return e.file_frames=n,delete r.file_frames,i.forEach(function(e){return delete r[e]}),r}var s=We(e.file_frames[t-1]);return i.forEach(function(e){return delete s[e]}),s}).reduce(function(e,t){return Object.assign(e,t)},{})},Je=function(e){var t=(null==e.file_classes?[]:e.file_classes).join(" "),i=(null==e.frame_classes?[]:e.frame_classes).join(" ");return[t,i].filter(function(e){return""!==e}).join(" ")},$e=ue.document,et="http://www.w3.org/2000/svg",tt=Object.freeze({blur:.005,opacity:.3,color:"#000"}),it=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:tt;("object"!==e(t)||null===t)&&(t={}),Object.keys(tt).filter(function(e){return!(e in t)}).forEach(function(e){t[e]=tt[e]});var i=$e.createElementNS(et,"filter");i.setAttribute("width","200%"),i.setAttribute("height","200%"),i.setAttribute("id","shadow");var n=$e.createElementNS(et,"feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("stdDeviation",t.blur),n.setAttribute("result","blur");var r=$e.createElementNS(et,"feOffset");r.setAttribute("in","blur"),r.setAttribute("result","offsetBlur");var s=$e.createElementNS(et,"feFlood");s.setAttribute("flood-color",t.color),s.setAttribute("flood-opacity",t.opacity),s.setAttribute("result","offsetColor");var a=$e.createElementNS(et,"feComposite");a.setAttribute("in","offsetColor"),a.setAttribute("in2","offsetBlur"),a.setAttribute("operator","in"),a.setAttribute("result","offsetBlur");var c=$e.createElementNS(et,"feMerge"),o=$e.createElementNS(et,"feMergeNode"),d=$e.createElementNS(et,"feMergeNode");return d.setAttribute("in","SourceGraphic"),c.appendChild(o),c.appendChild(d),i.appendChild(n),i.appendChild(r),i.appendChild(s),i.appendChild(a),i.appendChild(c),i},nt=function(e){if(!1=="vertices_coords"in e||!1=="edges_vertices"in e||!1=="edges_assignment"in e)return[];var t=Ke(e).vertices.map(function(t){return e.vertices_coords[t]});if(0===t.length)return[];var i=Pe(t);return i.setAttribute("class","boundary"),[i]},rt={vertices:we,edges:ze,faces:function(e){return null==e.faces_vertices?Ge(e):Ye(e)},boundaries:nt},st=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return He({input:"string",output:"string",padding:null,file_frame:null,stylesheet:null,shadows:null,diagrams:!0,boundaries:!0,faces:!0,edges:!0,vertices:!1,attributes:{svg:{width:"500px",height:"500px",stroke:"black",fill:"none","stroke-linejoin":"bevel","stroke-width":e/200},boundaries:{fill:"white"},faces:{stroke:"none",front:{stroke:"black",fill:"gray"},back:{stroke:"black",fill:"white"}},edges:{boundary:{},mountain:{stroke:"red"},valley:{stroke:"blue"},mark:{stroke:"lightgray"},unassigned:{stroke:"lightgray"}},vertices:{stroke:"none",fill:"black",r:e/200}}})},at=function t(i,n){Object.keys(n).forEach(function(r){"object"===e(n[r])&&null!==n[r]?(!(r in i)&&(i[r]={}),t(i[r],n[r])):!(r in i)&&(i[r]=n[r])})},ct=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r="number"==typeof i.file_frame?Qe(t,i.file_frame):t,s=Ze(r),a=te(s[2],s[3]);at(i,st(a));var c=me();xe.apply(void 0,[c].concat(n(s),[i.padding]));var o=Je(r);""!==o&&c.setAttribute("class",o),Object.keys(i.attributes.svg).forEach(function(e){return c.setAttribute(e,i.attributes.svg[e])});var d=null!=i.stylesheet||null!=i.shadows?ye(c):void 0;if(null!=i.stylesheet){var l=ke(d),f=new ue.DOMParser().parseFromString("<xml></xml>","application/xml").createCDATASection(i.stylesheet);l.appendChild(f)}if(null!=i.shadows){var p="object"===e(i.shadows)&&null!==i.shadows?i.shadows:{blur:a/200};d.appendChild(it(p))}var _={};if(["boundaries","edges","faces","vertices"].filter(function(e){return!0===i[e]}).forEach(function(e){_[e]=ve(),_[e].setAttribute("class",e)}),Object.keys(_).forEach(function(e){return rt[e](r,i).forEach(function(t){return _[e].appendChild(t)})}),Object.keys(_).filter(function(e){return 0<_[e].childNodes.length}).forEach(function(e){return c.appendChild(_[e])}),_.edges){var u=["unassigned","mark","valley","mountain","boundary"];Object.keys(i.attributes.edges).filter(function(e){return!u.includes(e)}).forEach(function(e){return _.edges.setAttribute(e,i.attributes.edges[e])}),Array.from(_.edges.childNodes).forEach(function(e){return Object.keys(i.attributes.edges[e.getAttribute("class")]||{}).forEach(function(t){return e.setAttribute(t,i.attributes.edges[e.getAttribute("class")][t])})})}if(_.faces){var h=["front","back"];Object.keys(i.attributes.faces).filter(function(e){return!h.includes(e)}).forEach(function(e){return _.faces.setAttribute(e,i.attributes.faces[e])}),Array.from(_.faces.childNodes).forEach(function(e){return Object.keys(i.attributes.faces[e.getAttribute("class")]||{}).forEach(function(t){return e.setAttribute(t,i.attributes.faces[e.getAttribute("class")][t])})}),null!=i.shadows&&Array.from(_.faces.childNodes).forEach(function(e){return e.setAttribute("filter","url(#shadow)")})}if(_.vertices&&(Object.keys(i.attributes.vertices).filter(function(e){return"r"!==e}).forEach(function(e){return _.vertices.setAttribute(e,i.attributes.vertices[e])}),Array.from(_.vertices.childNodes).forEach(function(e){return e.setAttribute("r",i.attributes.vertices.r)})),_.boundaries&&Object.keys(i.attributes.boundaries).forEach(function(e){return _.boundaries.setAttribute(e,i.attributes.boundaries[e])}),"svg"===i.output)return c;var m=new ue.XMLSerializer().serializeToString(c),v=g(m);return v},ot=function(t){if(null==t)return{};if("object"===e(t)&&null!==t)return t;if("string"==typeof t||t instanceof String)try{var i=JSON.parse(t);return i}catch(e){throw e}throw new TypeError("required 'String' or 'Object'")},dt=function(e,t){try{var i=ot(e);return ct(i,t)}catch(e){throw e}};dt.vertices_circle=we,dt.edges_path_data=Me,dt.edges_by_assignment_paths_data=Te,dt.edges_path=ze,dt.edges_line=function(e){var t=Le(e).map(function(t){return be(t[0][0],t[0][1],t[1][0],t[1][1])});return t.forEach(function(e,t){return e.setAttributeNS(null,"index",t)}),je(e).forEach(function(e,n){return t[n].setAttributeNS(null,"class",e)}),t},dt.faces_vertices_polygon=Ye,dt.faces_edges_polygon=Ge;var lt="undefined"!=typeof window&&"undefined"!=typeof window.document,gt="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,ft=function(){var e={};if(gt){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else lt&&(e=window);return e}(),pt="http://www.w3.org/2000/svg",_t=function(e,t){var i=new ft.Blob([t],{type:"text/plain"}),n=ft.document.createElement("a");n.setAttribute("href",ft.URL.createObjectURL(i)),n.setAttribute("download",e),ft.document.body.appendChild(n),n.click(),ft.document.body.removeChild(n)},ut=function(){for(var e=[],t=0,i;t<ft.document.styleSheets.length;t+=1){i=ft.document.styleSheets[t];try{for(var n=("cssRules"in i)?i.cssRules:i.rules,a=0,c;a<n.length;a+=1)c=n[a],"cssText"in c?e.push(c.cssText):e.push("".concat(c.selectorText," {\n").concat(c.style.cssText,"\n}\n"))}catch(e){console.warn(e)}}return e.join("\n")},ht=function(){return{output:"string",windowStyle:!1,filename:"image.svg"}},mt=function(t,i){if("string"==typeof i||i instanceof String){var n=i;i=ht(),i.filename=n}else if("object"!==e(i)||null===i)i=ht();else{var r=ht();Object.keys(i).forEach(function(e){r[e]=i[e]}),i=r}if(i.windowStyle){var s=ft.document.createElementNS(pt,"style");s.setAttribute("type","text/css"),s.innerHTML=ut(),t.appendChild(s)}var a=new ft.XMLSerializer().serializeToString(t),c=f(a);return lt&&!gt&&_t(i.filename,c),"svg"===i.output?t:c},vt=function(e,t){if("string"==typeof e||e instanceof String){var i=new ft.DOMParser().parseFromString(e,"text/xml"),n=i.getElementsByTagName("parsererror");if(0===n.length){var r=i.documentElement;return null!=t&&t(r),r}fetch(e).then(function(e){return e.text()}).then(function(e){return new ft.DOMParser().parseFromString(e,"text/xml")}).then(function(e){var i=e.getElementsByTagName("svg");if(null==i||0===i.length)throw new Error("error, valid XML found, but no SVG element");return null!=t&&t(i[0]),i[0]})}else if(e instanceof Document)return t(e),e},yt=Object.freeze({__proto__:null,save:mt,load:vt}),kt=function(e,t){Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]}).forEach(function(i){t[i]=e[i].bind(e)});var i=["svg","style","setPoints","setArc","setEllipticalArc","setBezier"];Object.keys(ft.SVG).filter(function(e){return void 0===t[e]}).filter(function(e){return-1===i.indexOf(e)}).forEach(function(e){t[e]=ft.SVG[e]}),Object.defineProperty(ft,"mousePressed",{set:function(t){e.mousePressed=t},get:function(){return e.mousePressed}}),Object.defineProperty(ft,"mouseReleased",{set:function(t){e.mouseReleased=t},get:function(){return e.mouseReleased}}),Object.defineProperty(ft,"mouseMoved",{set:function(t){e.mouseMoved=t},get:function(){return e.mouseMoved}}),Object.defineProperty(ft,"scroll",{set:function(t){e.scroll=t},get:function(){return e.scroll}}),Object.defineProperty(ft,"animate",{set:function(t){e.animate=t},get:function(){return e.animate}}),Object.defineProperty(ft,"fps",{set:function(t){e.fps=t},get:function(){return e.fps}})},xt=function(e){var t=e;if(null==t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];t=ft.SVG.apply(ft,n)}return kt(t,ft),t},bt=function(e){var t=e.getAttribute("viewBox");return null==t?void 0:t.split(" ").map(function(e){return parseFloat(e)})},Et=function(e,t,i,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=n/1-n,c=[t-a-s,i-a-s,n+2*a+2*s,r+2*a+2*s].join(" ");e.setAttributeNS(null,"viewBox",c)},Pt=function(e){var t=e.getBoundingClientRect(),i=0===t.width?640:t.width,n=0===t.height?480:t.height;Et(e,0,0,i,n)},At=function(e,t,i){var n=e.createSVGPoint();n.x=t,n.y=i;var r=n.matrixTransform(e.getScreenCTM().inverse()),s=[r.x,r.y];return s.x=r.x,s.y=r.y,s},wt=Object.freeze({__proto__:null,getViewBox:bt,setViewBox:Et,convertToViewBox:At,translateViewBox:function(e,t,i){var n=bt(e);null==n&&Pt(e),n[0]+=t,n[1]+=i,e.setAttributeNS(null,"viewBox",n.join(" "))},scaleViewBox:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;1e-8>re(t)&&(t=.01);var s=e.createSVGMatrix().translate(n,r).scale(1/t).translate(-n,-r),a=bt(e);null==a&&Pt(e);var c=e.createSVGPoint(),o=e.createSVGPoint(),d=i(a,2);c.x=d[0],c.y=d[1],o.x=a[0]+a[2],o.y=a[1]+a[3];var l=c.matrixTransform(s),g=o.matrixTransform(s);Et(e,l.x,l.y,g.x-l.x,g.y-l.y)}}),St=function(t){var n=Object.create(null);Object.assign(n,{isPressed:!1,position:[0,0],pressed:[0,0],drag:[0,0],previous:[0,0],x:0,y:0});var r=[0,0];n.position.x=r[0],n.position.y=r[1];var s=[0,0];n.pressed.x=s[0],n.pressed.y=s[1];var a=[0,0];n.drag.x=a[0],n.drag.y=a[1];var c=[0,0];n.previous.x=c[0],n.previous.y=c[1];var o=function(e,r){n.position=At(t,e,r);var s=i(n.position,2);n.x=s[0],n.y=s[1]},d=function(){n.drag=[n.position[0]-n.pressed[0],n.position[1]-n.pressed[1]];var e=i(n.drag,2);n.drag.x=e[0],n.drag.y=e[1]},l={};return Object.defineProperty(l,"release",{value:function(){return n.isPressed=!1,l}}),Object.defineProperty(l,"move",{value:function(e,r){var s=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(s&&!n.isPressed&&(n.pressed=At(t,e,r)),n.isPressed=s,n.previous=n.position,o(e,r),n.isPressed)d();else{n.drag=[0,0],n.pressed=[0,0];var a=i(n.drag,2);n.drag.x=a[0],n.drag.y=a[1];var c=i(n.pressed,2);n.pressed.x=c[0],n.pressed.y=c[1]}return l}}),Object.defineProperty(l,"get",{value:function(){var t=n.position.slice();return Object.keys(n).filter(function(t){return"object"===e(t)}).forEach(function(e){t[e]=n[e].slice()}),Object.keys(n).filter(function(t){return"object"!==e(t)}).forEach(function(e){t[e]=n[e]}),Object.freeze(t)}}),l},Nt=function(t){var n=St(t),r={mousemove:[],touchmove:[],mousedown:[],touchstart:[],mouseup:[],touchend:[],scroll:[]},s=function(t,i){i.preventDefault();var r=n.move(i.clientX,i.clientY,0<i.buttons).get();return t(r),r},a=function(t,i){i.preventDefault();var r=n.move(i.touches[0].clientX,i.touches[0].clientY,!0).get();return t(r),r},c=function(t,i){i.preventDefault();var r=n.move(i.clientX,i.clientY,!0).get();return t(r),r},o=function(t,i){i.preventDefault();var r=n.move(i.touches[0].clientX,i.touches[0].clientY,!0).get();return t(r),r},d=function(t,i){i.preventDefault();var r=n.release().get();return t(r),r},l=function(n,r){var s={deltaX:r.deltaX,deltaY:r.deltaY,deltaZ:r.deltaZ,position:At(t,r.clientX,r.clientY)},e=i(s.position,2);return s.x=e[0],s.y=e[1],r.preventDefault(),n(s),s};return Object.defineProperty(t,"mouse",{get:function(){return n.get()},enumerable:!0}),Object.defineProperty(t,"mouseMoved",{set:function(e){var i=function(t){return s(e,t)};r.mousemove.push(i),r.touchmove.push(i),t.addEventListener("mousemove",i),t.addEventListener("touchmove",function(t){return a(e,t)})},enumerable:!0}),Object.defineProperty(t,"mousePressed",{set:function(e){var i=function(t){return c(e,t)},n=function(t){return o(e,t)};r.mousedown.push(i),r.touchstart.push(n),t.addEventListener("mousedown",i),t.addEventListener("touchstart",n)},enumerable:!0}),Object.defineProperty(t,"mouseReleased",{set:function(e){var i=function(t){return d(e,t)},n=function(t){return d(e,t)};r.mouseup.push(i),r.touchend.push(n),t.addEventListener("mouseup",i),t.addEventListener("touchend",n)},enumerable:!0}),Object.defineProperty(t,"scroll",{set:function(e){var i=function(t){return l(e,t)};r.mouseup.push(i),t.addEventListener("scroll",i)},enumerable:!0}),{clear:function(){Object.keys(r).forEach(function(e){return r[e].forEach(function(i){return t.removeEventListener(e,i)})}),Object.keys(r).forEach(function(e){r[e]=[]})},pointer:n}},Lt=1e3/60,Ot=function(e){var t=[],i=Lt,n=function(){for(;0<t.length;)clearInterval(t.shift());o=void 0},r=function(){"function"!=typeof o||t.push(setInterval(function(){o({time:e.getCurrentTime(),frame:c+=1})},i))},s=function(e){n(),o=e,"function"==typeof o&&(c=0,r())},a=function(e){var t=parseFloat(e);return!isNaN(t)&&isFinite(t)?t:Lt},c,o;return Object.defineProperty(e,"animate",{set:function(e){return s(e)},enumerable:!0}),Object.defineProperty(e,"clear",{value:function(){return n()},enumerable:!0}),{clear:n,setLoop:s,setFPS:function(e){n(),i=a(1e3/e),r()}}},jt=function(e){var t=Ot(e),i=Nt(e);Object.defineProperty(e,"stopAnimations",{value:t.clear,enumerated:!0}),Object.defineProperty(e,"freeze",{value:function(){i.clear(),t.clear()},enumerated:!0}),Object.defineProperty(e,"fps",{set:function(e){return t.setFPS(e)},enumerated:!0})},Ct=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=[0,0],r=!1,s=function(){null!=o&&(null==o.parentNode&&t.appendChild(o),o.setAttribute("cx",n[0]),o.setAttribute("cy",n[1]))},a=new Proxy(n,{set:function(e,t,i){return e[t]=i,s(),!0}}),c=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(0!==i.length){var c=e(i[0]);"number"===c&&(n[0]=i[0],n[1]=i[1],s()),"object"===c&&("number"==typeof i[0][0]?(n[0]=i[0][0],n[1]=i[0][1],s()):"number"==typeof i[0].x&&(n[0]=i[0].x,n[1]=i[0].y,s())),"function"==typeof n.delegate&&n.delegate.apply(n.pointsContainer,[a,n.pointsContainer])}},o;c(i.position);var d=function(e){return e},l=function(e){r&&c(d(e))};return n.delegate=void 0,n.setPosition=c,n.onMouseMove=l,n.onMouseUp=function(){r=!1},n.distance=function(e){return[0,1].map(function(t){return e[t]-n[t]}).map(function(t){return de(t,2)}).reduce(function(e,t){return e+t},0)},Object.defineProperty(n,"x",{get:function(){return n[0]},set:function(e){n[0]=e}}),Object.defineProperty(n,"y",{get:function(){return n[1]},set:function(e){n[1]=e}}),Object.defineProperty(n,"svg",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(n,"positionDidUpdate",{set:function(e){d=e}}),Object.defineProperty(n,"selected",{set:function(e){r=e}}),Object.defineProperty(n,"remove",{value:function(){null!=o&&t.removeChild(o)}}),a},Mt=function(t,i,n){var r=Array.from(Array(i)).map(function(){return Ct(t,n)}),s,a;r.forEach(function(t,r){"object"===e(n)&&"function"==typeof n.position&&t.setPosition(n.position(r))});var c=function(e){"function"==typeof a&&a.call(r,r,e)};r.forEach(function(e){e.delegate=c,e.pointsContainer=r});var o=function(e){0<r.length&&(s=r.map(function(t,n){return{i:n,d:t.distance(e)}}).sort(function(e,t){return e.d-t.d}).shift().i,r[s].selected=!0)};return t.mousePressed=o,t.mouseMoved=function(e){r.forEach(function(t){return t.onMouseMove(e)})},t.mouseReleased=function(){r.forEach(function(e){return e.onMouseUp()}),s=void 0},Object.defineProperty(r,"selectedIndex",{get:function(){return s}}),Object.defineProperty(r,"selected",{get:function(){return r[s]}}),Object.defineProperty(r,"add",{value:function(e){r.push(Ct(t,e))}}),r.removeAll=function(){for(;0<r.length;)r.pop().remove()},r.onChange=function(e,t){return"function"==typeof e&&(a=e,!0===t&&e.call(r,r,void 0)),r},r.position=function(e){return"function"==typeof e&&r.forEach(function(t,n){return t.setPosition(e.call(r,n))}),r},r.svg=function(e){return"function"==typeof e&&r.forEach(function(t,n){t.svg=e.call(r,n)}),r},r.parent=function(e){return null!=e&&null!=e.appendChild&&r.forEach(function(t){e.appendChild(t.svg)}),r},r},Tt=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},zt=function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];switch(i.length){case void 0:case 0:return i;case 1:return Tt(i[0])&&"string"!=typeof i[0]?e.apply(void 0,n(i[0])):[i[0]];default:return Array.from(i).map(function(t){return Tt(t)?n(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},It=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=zt.apply(void 0,n),a="";return"number"==typeof s[0]&&(a=Array.from(Array($(s.length/2))).reduce(function(e,t,n){return"".concat(e).concat(s[2*n],",").concat(s[2*n+1]," ")},"")),"object"===e(s[0])&&("number"==typeof s[0].x&&(a=s.reduce(function(e,t){return"".concat(e).concat(t.x,",").concat(t.y," ")},"")),"number"==typeof s[0][0]&&(a=s.reduce(function(e,t){return"".concat(e).concat(t[0],",").concat(t[1]," ")},""))),t.setAttributeNS(null,"points",a),t},Ft=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=zt.apply(void 0,n),a=[];return"number"==typeof s[0]&&(a=s),"object"===e(s[0])&&("number"==typeof s[0].x&&(a=s.map(function(e){return[e[0],e[1]]}).reduce(function(e,t){return e.concat(t)},[])),"number"==typeof s[0][0]&&(a=s.reduce(function(e,t){return e.concat(t)},[]))),null!=a[0]&&t.setAttributeNS(null,"x1",a[0]),null!=a[1]&&t.setAttributeNS(null,"y1",a[1]),null!=a[2]&&t.setAttributeNS(null,"x2",a[2]),null!=a[3]&&t.setAttributeNS(null,"y2",a[3]),t},Bt=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=zt.apply(void 0,i);return"number"==typeof r[0]&&(null!=r[0]&&e.setAttributeNS(null,"cx",r[0]),null!=r[1]&&e.setAttributeNS(null,"cy",r[1])),"number"==typeof r.x&&(null!=r.x&&e.setAttributeNS(null,"cx",r.x),null!=r.y&&e.setAttributeNS(null,"cy",r.y)),e},Vt=function(e,t,i,n,r,s){var a=!!(6<arguments.length&&void 0!==arguments[6])&&arguments[6];if(null!=s){var c=[t+ae(r)*n,i+se(r)*n],o=[ae(r)*n,se(r)*n],l=[ae(s)*n,se(s)*n],g=[l[0]-o[0],l[1]-o[1]],f=o[0]*l[1]-o[1]*l[0],p=o[0]*l[0]+o[1]*l[1],_=0<ce(f,p)?0:1,u=a?"M ".concat(t,",").concat(i," l ").concat(o[0],",").concat(o[1]," "):"M ".concat(c[0],",").concat(c[1]," ");return u+=["a ",n,n,0,_,1,g[0],g[1]].join(" "),a&&(u+=" Z"),e.setAttributeNS(null,"d",u),e}},Dt=function(e,t,i,n,r,s,a){var c=!!(7<arguments.length&&void 0!==arguments[7])&&arguments[7];if(null!=a){var o=[t+ae(s)*n,i+se(s)*r],l=[ae(s)*n,se(s)*r],g=[ae(a)*n,se(a)*r],f=[g[0]-l[0],g[1]-l[1]],p=l[0]*g[1]-l[1]*g[0],_=l[0]*g[0]+l[1]*g[1],u=0<ce(p,_)?0:1,h=c?"M ".concat(t,",").concat(i," l ").concat(l[0],",").concat(l[1]," "):"M ".concat(o[0],",").concat(o[1]," ");return h+=["a ",n,r,0,u,1,f[0],f[1]].join(" "),c&&(h+=" Z"),e.setAttributeNS(null,"d",h),e}},Rt=function(e,t,i,n,r,s,a,c,o){if(null!=o){var l=[[t,i],[n,r],[s,a],[c,o]].map(function(e){return e.join(",")}),g="M ".concat(l[0]," C ").concat(l[1]," ").concat(l[2]," ").concat(l[3]);return e.setAttributeNS(null,"d",g),e}},qt=function(t){for(var i=Array.from(t.childNodes),n=i.filter(function(e){return"path"===e.tagName}).shift(),r=["svg-arrow-head","svg-arrow-tail"].map(function(e){return i.filter(function(t){return t.getAttribute("class")===e}).shift()}),s=arguments.length,a=Array(1<s?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var d=zt.apply(void 0,a),l=[];if("number"==typeof d[0]&&(l=d),"object"===e(d[0])&&("number"==typeof d[0].x&&(l=d.map(function(e){return[e[0],e[1]]}).reduce(function(e,t){return e.concat(t)},[])),"number"==typeof d[0][0]&&(l=d.reduce(function(e,t){return e.concat(t)},[]))),l.length||null==t.endpoints||(l=t.endpoints),!l.length)return t;t.endpoints=l;var g=t.options,o=[l[0],l[1]],f=[l[2],l[3]],p=[f[0]-o[0],f[1]-o[1]],_=[o[0]+p[0]/2,o[1]+p[1]/2],u=oe(de(p[0],2)+de(p[1],2)),h=(g.tail.visible?2.5*((1+g.tail.padding)*g.tail.height):0)+(g.head.visible?2.5*((1+g.head.padding)*g.head.height):0);if(u<h){var m=0===u?[h,0]:[p[0]/u*h,p[1]/u*h];o=[_[0]-.5*m[0],_[1]-.5*m[1]],f=[_[0]+.5*m[0],_[1]+.5*m[1]],p=[f[0]-o[0],f[1]-o[1]]}var v=[p[1],-p[0]],y=[_[0]+v[0]*g.curve,_[1]+v[1]*g.curve],k=[y[0]-o[0],y[1]-o[1]],x=[y[0]-f[0],y[1]-f[1]],b=oe(de(k[0],2)+de(k[1],2)),E=oe(de(x[0],2)+de(x[1],2)),P=0===b?k:[k[0]/b,k[1]/b],A=0===b?x:[x[0]/E,x[1]/E],w=[-P[0],-P[1]],S=[-A[0],-A[1]],N=[w[1],-w[0]],L=[S[1],-S[0]],O=[o[0]+P[0]*g.tail.height*((g.tail.visible?1:0)+g.tail.padding),o[1]+P[1]*g.tail.height*((g.tail.visible?1:0)+g.tail.padding)],j=[f[0]+A[0]*g.head.height*((g.head.visible?1:0)+g.head.padding),f[1]+A[1]*g.head.height*((g.head.visible?1:0)+g.head.padding)];p=[j[0]-O[0],j[1]-O[1]],v=[p[1],-p[0]],_=[O[0]+p[0]/2,O[1]+p[1]/2],y=[_[0]+v[0]*g.curve,_[1]+v[1]*g.curve];var C=[O[0]+(y[0]-O[0])*g.pinch,O[1]+(y[1]-O[1])*g.pinch],M=[j[0]+(y[0]-j[0])*g.pinch,j[1]+(y[1]-j[1])*g.pinch],T=[[O[0]+N[0]*-g.tail.width,O[1]+N[1]*-g.tail.width],[O[0]+N[0]*g.tail.width,O[1]+N[1]*g.tail.width],[O[0]+w[0]*g.tail.height,O[1]+w[1]*g.tail.height]],z=[[j[0]+L[0]*-g.head.width,j[1]+L[1]*-g.head.width],[j[0]+L[0]*g.head.width,j[1]+L[1]*g.head.width],[j[0]+S[0]*g.head.height,j[1]+S[1]*g.head.height]];return n.setAttribute("d","M".concat(O[0],",").concat(O[1],"C").concat(C[0],",").concat(C[1],",").concat(M[0],",").concat(M[1],",").concat(j[0],",").concat(j[1])),g.head.visible?(r[0].removeAttribute("display"),It(r[0],z)):r[0].setAttribute("display","none"),g.tail.visible?(r[1].removeAttribute("display"),It(r[1],T)):r[1].setAttribute("display","none"),t},Xt=Object.freeze({__proto__:null,setPoints:It,setLinePoints:Ft,setCenter:Bt,setArc:Vt,setEllipticalArc:Dt,setBezier:Rt,setArrowPoints:qt}),Ut=["accumulate","additive","alignment-baseline","amplitude","attributeName","azimuth","baseFrequency","baseline-shift","baseProfile","bbox","begin","bias","by","CSection","calcMode","cap-height","clip","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","contentScriptType","contentStyleType","cursor","DSection","decelerate","descent","diffuseConstant","direction","display","divisor","dominant-baseline","dur","ESection","edgeMode","elevation","enable-background","end","exponent","externalResourcesRequired","FSection","fill","fill-opacity","fill-rule","filter","filterRes","filterUnits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","format","from","fr","fx","fy","GSection","g1","g2","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","glyphRef","gradientTransform","gradientUnits","HSection","hanging","href","hreflang","horiz-adv-x","horiz-origin-x","ISection","image-rendering","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","keyPoints","keySplines","keyTimes","LSection","lang","letter-spacing","lighting-color","limitingConeAngle","local","MSection","marker-end","marker-mid","marker-start","markerHeight","markerUnits","markerWidth","mathematical","max","media","method","min","mode","NSection","name","numOctaves","OSection","opacity","operator","order","orient","overflow","overline-position","overline-thickness","PSection","paint-order","patternContentUnits","patternTransform","patternUnits","pointer-events","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","RSection","radius","refX","refY","rendering-intent","repeatCount","repeatDur","requiredFeatures","restart","result","SSection","seed","shape-rendering","spacing","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","surfaceScale","TSection","tabindex","tableValues","target","targetX","targetY","text-anchor","text-decoration","text-rendering","to","transform-origin","type","USection","u1","u2","underline-position","underline-thickness","unicode","unicode-range","units-per-em","user-select","VSection","v-alphabetic","v-hanging","v-ideographic","v-mathematical","values","vector-effect","version","vert-adv-y","vert-origin-x","vert-origin-y","viewTarget","visibility","WSection","widths","word-spacing","writing-mode","XSection","xChannelSelector","YSection","yChannelSelector","ZSection"],Yt=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},Gt=function(e,t){return null!=t&&t.appendChild(e),e},Zt=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()},Kt=function(e){var t=e.getAttribute("class");return null==t?[]:t.split(" ").filter(function(e){return""!==e})},Wt=Object.freeze({__proto__:null,removeChildren:Yt,appendTo:Gt,setAttributes:function(e,t){return Object.keys(t).forEach(function(i){e.setAttribute(Zt(i),t[i])}),e},addClass:function(e,t){if(null==e)return e;var i=Kt(e).filter(function(e){return e!==t});return i.push(t),e.setAttributeNS(null,"class",i.join(" ")),e},removeClass:function(e,t){if(null==e)return e;var i=Kt(e).filter(function(e){return e!==t});return e.setAttributeNS(null,"class",i.join(" ")),e},setClass:function(e,t){return e.setAttributeNS(null,"class",t),e},setID:function(e,t){return e.setAttributeNS(null,"id",t),e}}),Ht=function(t,i){"object"===e(i)?t.setAttribute("transform",i.join(" ")):"string"==typeof i&&t.setAttribute("transform",i)},Qt=function(e){var t=e.getAttribute("transform");return null==t?void 0:t.split(" ")},Jt=Object.freeze({__proto__:null,translate:function(e,t,i){var n=Qt(e)||[];return n.push("translate(".concat(t,", ").concat(i,")")),Ht(e,n),e},rotate:function(e,t){var i=Qt(e)||[];return i.push("rotate(".concat(t,")")),Ht(e,i),e},scale:function(e,t,i){var n=Qt(e)||[];return n.push("scale(".concat(t,", ").concat(i,")")),Ht(e,n),e},clearTransforms:function(e){return e.setAttribute("transform",""),e}}),$t=function(e){var t=e.getAttribute("d");return null==t&&(t=""),t},d=function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var s=zt(n).join(",");return e.setAttribute("d","".concat($t(e)).concat(t).concat(s)),e},ei=Object.freeze({__proto__:null,command:function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return d.apply(void 0,[e,t].concat(n))},moveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"M"].concat(i))},_moveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"m"].concat(i))},lineTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"L"].concat(i))},_lineTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"l"].concat(i))},verticalLineTo:function(e,t){return d(e,"V",t)},_verticalLineTo:function(e,t){return d(e,"v",t)},horizontalLineTo:function(e,t){return d(e,"H",t)},_horizontalLineTo:function(e,t){return d(e,"h",t)},ellipseTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"A"].concat(i))},_ellipseTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"a"].concat(i))},curveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"C"].concat(i))},_curveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"c"].concat(i))},smoothCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"S"].concat(i))},_smoothCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"s"].concat(i))},quadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"Q"].concat(i))},_quadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"q"].concat(i))},smoothQuadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"T"].concat(i))},_smoothQuadCurveTo:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return d.apply(void 0,[e,"t"].concat(i))},close:function(e){return d(e,"Z")},clear:function(e){return e.setAttribute("d",""),e}}),ti=function(e){e.appendTo=function(t){return Gt(e,t)}},ii=function(e,t){Object.keys(t).filter(function(t){return void 0===e[t]}).forEach(function(i){e[i]=function(){var n=t[i].apply(t,arguments);return e.appendChild(n),n}})},ni=function(t){t.head=function(i){return"object"===e(i)?(Object.assign(t.options.head,i),void 0===i.visible&&(t.options.head.visible=!0)):"boolean"==typeof i?t.options.head.visible=i:null==i&&(t.options.head.visible=!0),qt(t),t},t.tail=function(i){return"object"===e(i)?(Object.assign(t.options.tail,i),void 0===i.visible&&(t.options.tail.visible=!0),t.options.tail.visible=!0):"boolean"==typeof i?t.options.tail.visible=i:null==i&&(t.options.tail.visible=!0),qt(t),t},t.curve=function(e){return t.options.curve=e,qt(t),t},t.pinch=function(e){return t.options.pinch=e,qt(t),t}},ri=function(e){Object.keys(ei).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return ei[t].apply(ei,[e].concat(n))}})},si=function(e){Object.keys(Wt).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return Wt[t].apply(Wt,[e].concat(n))}})},ai=function(e){Object.keys(Jt).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return Jt[t].apply(Jt,[e].concat(n))}})},ci=function(e){Object.keys(wt).filter(function(t){return void 0===e[t]}).forEach(function(t){e[t]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return wt[t].apply(wt,[e].concat(n))}})},oi=function(e){return e.replace(/([-_][a-z])/ig,function(e){return e.toUpperCase().replace("-","").replace("_","")})},di=function(e){Ut.filter(function(t){return void 0===e[oi(t)]}).forEach(function(t){e[oi(t)]=function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e.setAttribute.apply(e,[t].concat(n)),e}})},li=function(e,t){void 0===e.clipPath&&(e.clipPath=function(){var i=t.clipPath.apply(t,arguments);return e.appendChild(i),i}),void 0===e.mask&&(e.mask=function(){var i=t.mask.apply(t,arguments);return e.appendChild(i),i})},gi=function(e){if(null!=e){if("string"==typeof e)return"url"===e.slice(0,3)?e:"url(#".concat(e,")");if(null!=e.getAttribute){var t=e.getAttribute("id");return"url(#".concat(t,")")}return"url(#)"}},fi=function(e){void 0===e.clipPath&&(e.clipPath=function(t){var i=gi(t);return void 0===i?e:(e.setAttribute("clip-path",i),e)}),void 0===e.mask&&(e.mask=function(t){var i=gi(t);return void 0===i?e:(e.setAttribute("mask",i),e)})},pi=function(e){di(e),si(e),ai(e),fi(e),"path"===e.tagName&&ri(e)},_i=function(e){di(e),si(e),ai(e),fi(e),ni(e)},ui=function(e){di(e),si(e),ai(e),fi(e)},hi=function(e,t){si(e),ai(e),ci(e),di(e),li(e,t),ii(e,t)},mi=function(e,t){di(e),si(e),ai(e),fi(e),ii(e,t)},vi=function(e,t){di(e),si(e),ai(e),fi(e),ii(e,t)},yi=function(e){ti(e)},ki=function(e,t,i){"svg"===e?hi(t,i):"primitive"===e?pi(t):"arrow"===e?_i(t):"defs"===e||"group"===e?mi(t,i):"text"===e?ui(t):"clipPath"===e||"mask"===e?vi(t,i):"style"===e?yi(t):console.warn("prepare missing valid type (svg, group..")},xi=function(e,t,i,n){var r=ft.document.createElementNS(pt,"rect");return null!=e&&r.setAttributeNS(null,"x",e),null!=t&&r.setAttributeNS(null,"y",t),null!=i&&r.setAttributeNS(null,"width",i),null!=n&&r.setAttributeNS(null,"height",n),ki("primitive",r),r},bi=function(){for(var e=ft.document.createElementNS(pt,"polygon"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return It.apply(void 0,[e].concat(i)),ki("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return It.apply(void 0,[e].concat(i))},e},Ei=function(){for(var e=ft.document.createElementNS(pt,"polyline"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return It.apply(void 0,[e].concat(i)),ki("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return It.apply(void 0,[e].concat(i))},e},Pi=function(e){var t=ft.document.createElementNS(pt,"path");return null!=e&&t.setAttributeNS(null,"d",e),ki("primitive",t),t},Ai=Object.freeze({__proto__:null,line:function(){for(var e=ft.document.createElementNS(pt,"line"),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Ft.apply(void 0,[e].concat(i)),ki("primitive",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return Ft.apply(void 0,[e].concat(i))},e},circle:function(e,t,i){var n=ft.document.createElementNS(pt,"circle");return Bt(n,e,t),null!=i&&n.setAttributeNS(null,"r",i),ki("primitive",n),n.setCenter=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Bt.apply(void 0,[n].concat(t))},n.setRadius=function(e){return n.setAttributeNS(null,"r",e),n},n.radius=function(e){return n.setAttributeNS(null,"r",e),n},n},ellipse:function(e,t,i,n){var r=ft.document.createElementNS(pt,"ellipse");return null!=e&&r.setAttributeNS(null,"cx",e),null!=t&&r.setAttributeNS(null,"cy",t),null!=i&&r.setAttributeNS(null,"rx",i),null!=n&&r.setAttributeNS(null,"ry",n),ki("primitive",r),r},rect:xi,polygon:bi,polyline:Ei,path:Pi,bezier:function(e,t,i,n,r,s,a,c){var o=ft.document.createElementNS(pt,"path");return Rt(o,e,t,i,n,r,s,a,c),ki("primitive",o),o.setBezier=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Rt.apply(void 0,[o].concat(t))},o},text:function(e,t,i){var n=ft.document.createElementNS(pt,"text");return n.innerHTML=e,t&&n.setAttributeNS(null,"x",t),i&&n.setAttributeNS(null,"y",i),ki("text",n),n},arc:function(e,t,i,n,r){var s=ft.document.createElementNS(pt,"path");return Vt(s,e,t,i,n,r,!1),ki("primitive",s),s.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Vt.apply(void 0,[s].concat(t))},s},wedge:function(e,t,i,n,r){var s=ft.document.createElementNS(pt,"path");return Vt(s,e,t,i,n,r,!0),ki("primitive",s),s.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Vt.apply(void 0,[s].concat(t))},s},arcEllipse:function(e,t,i,n,r,s){var a=ft.document.createElementNS(pt,"path");return Dt(a,e,t,i,n,r,s,!1),ki("primitive",a),a.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Dt.apply(void 0,[a].concat(t))},a},wedgeEllipse:function(e,t,i,n,r,s){var a=ft.document.createElementNS(pt,"path");return Dt(a,e,t,i,n,r,s,!0),ki("primitive",a),a.setArc=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Dt.apply(void 0,[a].concat(t))},a},parabola:function(e,t,n,r){var s=Array.from(Array(129)).map(function(e,t){return 2*((t-128)/128)+1}),a=s.map(function(t){return e+.5*((t+1)*n)}),c=s.map(function(e){return t+de(e,2)*r}),o=s.map(function(e,t){return[a[t],c[t]]});return Ei(o)},regularPolygon:function(e,t,i,n){var s=.5*(2*ne/n),c=ae(s)*i,r=Array.from(Array(n)).map(function(r,o){var i=-2*ne*o/n+s,a=e+c*se(i),d=t+c*ae(i);return[a,d]});return bi(r)},roundRect:function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;r>i/2&&(r=i/2),r>n/2&&(r=n/2);var s=i-2*r,a=n-2*r,c="M".concat(e+(i-s)/2," ").concat(t," h").concat(s," A").concat(r," ").concat(r," 0 0 1 ").concat(e+i," ").concat(t+(n-a)/2," v").concat(a," A").concat(r," ").concat(r," 0 0 1 ").concat(e+i-r," ").concat(t+n," h").concat(-s," A").concat(r," ").concat(r," 0 0 1 ").concat(e," ").concat(t+n-r," v").concat(-a," A").concat(r," ").concat(r," 0 0 1 ").concat(e+r," ").concat(t," ");return Pi(c)},arrow:function(){var e=ft.document.createElementNS(pt,"g"),t=ft.document.createElementNS(pt,"polygon"),i=ft.document.createElementNS(pt,"polygon"),n=ft.document.createElementNS(pt,"path");t.setAttributeNS(null,"class","svg-arrow-tail"),i.setAttributeNS(null,"class","svg-arrow-head"),n.setAttributeNS(null,"class","svg-arrow-path"),t.setAttributeNS(null,"style","stroke: none; pointer-events: none;"),i.setAttributeNS(null,"style","stroke: none; pointer-events: none;"),n.setAttributeNS(null,"style","fill: none;"),e.appendChild(n),e.appendChild(t),e.appendChild(i),e.options={head:{width:.5,height:2,visible:!1,padding:0},tail:{width:.5,height:2,visible:!1,padding:0},curve:0,pinch:.618,endpoints:[]};for(var r=arguments.length,s=Array(r),a=0;a<r;a++)s[a]=arguments[a];return qt.apply(void 0,[e].concat(s)),ki("arrow",e),e.setPoints=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return qt.apply(void 0,[e].concat(i))},e}}),wi={},Ni={},Li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Oi=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return Array.from(Array(e)).map(function(){return $(Math.random()*Li.length)}).map(function(e){return Li[e]}).reduce(function(e,t){return"".concat(e).concat(t)},"")},ji=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t+Oi(e)},Ci=function(){var e=ft.document.createElementNS(pt,"svg");return e.setAttribute("version","1.1"),e.setAttribute("xmlns",pt),ki("svg",e,wi),e},Mi=function(e){var t=new ft.DOMParser().parseFromString("<root></root>","text/xml").createCDATASection("".concat(e));return t},Ti=function(e){var t=ft.document.createElementNS(pt,"style");return t.setAttribute("type","text/css"),ki("style",t),t.setTextContent=function(e){t.textContent="",t.appendChild(Mi(e))},t.appendChild(Mi(e)),t},zi=function(e){Object.keys(e).filter(function(e){return"svg"!==e}).forEach(function(t){wi[t]=e[t]}),Object.keys(e).filter(function(e){return"svg"!==e}).filter(function(e){return"defs"!==e}).filter(function(e){return"style"!==e}).filter(function(e){return"clipPath"!==e}).filter(function(e){return"mask"!==e}).forEach(function(t){Ni[t]=e[t]})},Ii=Object.freeze({__proto__:null,setConstructors:zi,svg:Ci,group:function(){var e=ft.document.createElementNS(pt,"g");return ki("group",e,Ni),e},defs:function(){var e=ft.document.createElementNS(pt,"defs");return ki("defs",e,Ni),e},clipPath:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ji(8,"clip-"),t=ft.document.createElementNS(pt,"clipPath");return t.setAttribute("id",e),ki("clipPath",t,Ni),t},mask:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ji(8,"mask-"),t=ft.document.createElementNS(pt,"mask");return t.setAttribute("id",e),ki("mask",t,Ni),t},style:Ti,createElement:function(e){return ft.document.createElementNS(pt,e)}}),Fi=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return"boolean"==typeof e.window});return r.reduce(function(e,t){return e.window||t.window},!1)},Bi=function(){for(var e=ft.document.createElement("a").constructor,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return t instanceof e}).shift(),s=i.filter(function(e){return"string"==typeof e||e instanceof String}).map(function(e){return ft.document.getElementById(e)}).shift();return null==r?null==s?ft.document.body:s:r},Vi=function(e,t){var i=t.filter(function(e){return!isNaN(e)}),n=e.getAttribute("viewBox");if(4<=i.length)e.setAttributeNS(null,"width",i[2]),e.setAttributeNS(null,"height",i[3]),Et(e,i[0],i[1],i[2],i[3]);else if(2<=i.length)e.setAttributeNS(null,"width",i[0]),e.setAttributeNS(null,"height",i[1]),Et(e,0,0,i[0],i[1]);else if(null==n){var r=e.getBoundingClientRect();Et(e,0,0,r.width,r.height)}else if(4===n.split(" ").filter(function(e){return"0"===e||0===e}).length){var s=e.getBoundingClientRect();Et(e,0,0,s.width,s.height)}},Di=function(e){var t=bt(e);return null==t?void 0:t[2]},Ri=function(e){var t=bt(e);return null==t?void 0:t[3]},qi=function(e,t){var i=bt(e);return i[2]=t,Et.apply(void 0,[e].concat(n(i)))},Xi=function(e,t){var i=bt(e);return i[3]=t,Et.apply(void 0,[e].concat(n(i)))},Ui=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]?Et.apply(void 0,[t,0,0].concat(n)):4===n.length&&e(n.map(function(e){return"number"==typeof e}).reduce(function(e,t){return e&&t},!0))&&Et.apply(void 0,[t].concat(n))},Yi=function(e){var t=[0,0,0,0];if(null!=e.viewBox){var i=e.viewBox.baseVal;t=[i.x,i.y,i.width,i.height]}else if("function"==typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();t=[n.x,n.y,n.width,n.height]}return t},Gi=function(e,t){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(!0===i){var r=e.parentElement;null!=r&&r.setAttribute("style","background-color: ".concat(t))}var s=Array.from(e.childNodes).filter(function(e){return"svg-background-rectangle"===e.getAttribute("class")}).shift();null==s?(s=xi.apply(void 0,n(Yi(e))).fill(t).setClass("svg-background-rectangle"),e.insertBefore(s,e.firstChild)):s.setAttribute("fill",t)},Zi=function(e){var t=Array.from(e.childNodes),i=t.filter(function(e){return"style"===e.getAttribute("tagName")}).shift();if(i)return i;var n=t.filter(function(e){return"defs"===e.getAttribute("tagName")}).shift();if(null==n)return n;var r=Array.from(n.childNodes).filter(function(e){return"style"===e.getAttribute("tagName")}).shift();return null==r?void 0:r},Ki=function(e,t){var i=Zi(e);return null==i?(i=Ti(t),e.insertBefore(i,e.firstChild)):i.setTextContent(t),i},Wi=function(e,t){Array.from(e.attributes).forEach(function(t){return e.removeAttribute(t.name)}),Yt(e),Array.from(t.childNodes).forEach(function(i){t.removeChild(i),e.appendChild(i)}),Array.from(t.attributes).forEach(function(t){return e.setAttribute(t.name,t.value)})},Hi=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Ci();jt(n),n.controls=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Mt.apply(void 0,[n].concat(t))},n.getWidth=function(){return Di(n)},n.getHeight=function(){return Ri(n)},n.setWidth=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return qi.apply(void 0,[n].concat(t))},n.setHeight=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Xi.apply(void 0,[n].concat(t))},n.background=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Gi.apply(void 0,[n].concat(t))},n.size=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ui.apply(void 0,[n].concat(t))},n.save=function(e){return mt(n,e)},n.load=function(e,t){vt(e,function(e,i){null!=e&&Wi(n,e),null!=t&&t(n,i)})},n.stylesheet=function(e){return Ki(n,e)};var r=function(){var e=Bi.apply(void 0,t);null!=e&&e.appendChild(n),Vi(n,t),Fi.apply(void 0,t)&&xt(n),t.filter(function(e){return"function"==typeof e}).forEach(function(e){return e.call(n,n)})};return"loading"===ft.document.readyState?ft.document.addEventListener("DOMContentLoaded",r):r(),n},Qi={};Object.assign(Qi,Ii,Ai),delete Qi.setConstructors,zi(Qi);var Ji={};Object.keys(Ai).forEach(function(e){Ji[e]=Ai[e]}),Object.keys(Ii).filter(function(e){return"setConstructors"!==e}).forEach(function(e){Ji[e]=Ii[e]}),delete Ji.svg,Object.keys(Ji).forEach(function(e){Hi[e]=Ji[e]}),Object.keys(Xt).forEach(function(e){Hi[e]=Xt[e]}),Object.keys(wt).forEach(function(e){Hi[e]=wt[e]}),Object.keys(yt).forEach(function(e){Hi[e]=yt[e]}),Hi.NS=pt;var $i=function(e){var t=e.map(function(e){return e*e}).reduce(function(e,t){return e+t},0);return oe(t)},en=function(e){var t=$i(e);return 0===t?e:e.map(function(e){return e/t})},tn=function(e,t){return e.map(function(n,r){return e[r]*t[r]}).reduce(function(e,t){return e+t},0)},nn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=0<t.length?t[0].length:0,r=Array(n).fill(0);return t.forEach(function(e){return r.forEach(function(t,n){r[n]+=e[n]||0})}),r.map(function(e){return e/t.length})},rn=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[0]*t[2]-e[2]*t[0],e[0]*t[1]-e[1]*t[0]]},sn=function(e,t){var i=e[0]-t[0],n=e[1]-t[1];return oe(i*i+n*n)},an=function(e,t){for(var n=e.length,r=0,s=0;s<n;s+=1)r+=de(e[s]-t[s],2);return oe(r)},cn=function(e,t){return e.map(function(n,r){return(e[r]+t[r])/2})},on=Object.freeze({__proto__:null,magnitude:$i,normalize:en,dot:tn,average:nn,cross2:function(e,t){return[e[0]*t[1],e[1]*t[0]]},cross3:rn,distance2:sn,distance3:function(t,i){var n=t[0]-i[0],r=t[1]-i[1],s=t[2]-i[2];return oe(n*n+r*r+s*s)},distance:an,midpoint2:cn}),dn=function(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]]},ln=function(e,t,i){return{origin:[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]],vector:[e[0]*i[0]+e[2]*i[1],e[1]*i[0]+e[3]*i[1]]}},gn=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},fn=function(e){return e[0]*e[3]-e[1]*e[2]},pn=function(e){var t=fn(e);return 1e-6>re(t)||isNaN(t)||!isFinite(e[4])||!isFinite(e[5])?void 0:[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},_n=function(e,t){return[1,0,0,1,e,t]},un=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0];return[e,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1]]},hn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=ae(e),n=se(e);return[i,n,-n,i,t[0],t[1]]},mn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=ce(e[1],e[0]),n=ae(i),r=se(i),s=ae(-i),o=se(-i),l=n*s+r*o,a=n*-o+r*s,g=r*s+-n*o,c=r*-o+-n*s,d=t[0]+l*-t[0]+-t[1]*g,f=t[1]+a*-t[0]+-t[1]*c;return[l,a,g,c,d,f]},vn=Object.freeze({__proto__:null,multiply_matrix2_vector2:dn,multiply_matrix2_line2:ln,multiply_matrices2:gn,matrix2_determinant:fn,invert_matrix2:pn,make_matrix2_translate:_n,make_matrix2_scale:un,make_matrix2_rotate:hn,make_matrix2_reflection:mn}),yn=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]]},kn=function(e,t,i){return{origin:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]],vector:[e[0]*i[0]+e[3]*i[1]+e[6]*i[2],e[1]*i[0]+e[4]*i[1]+e[7]*i[2],e[2]*i[0]+e[5]*i[1]+e[8]*i[2]]}},xn=function(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]]},bn=function(e){return e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2]},En=function(e){var t=bn(e);if(!(1e-6>re(t))&&!isNaN(t)&&isFinite(e[9])&&isFinite(e[10])&&isFinite(e[11])){var i=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]];return i.map(function(e){return e*(1/t)})}},Pn=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return[1,0,0,0,1,0,0,0,1,e,t,i]},An=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=ae(e),n=se(e);return[1,0,0,0,i,n,0,-n,i,t[0]||0,t[1]||0,t[2]||0]},wn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=ae(e),n=se(e);return[i,0,-n,0,1,0,n,0,i,t[0]||0,t[1]||0,t[2]||0]},Sn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=ae(e),n=se(e);return[i,n,0,-n,i,0,0,0,1,t[0]||0,t[1]||0,t[2]||0]},Nn=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0,0],s=en(n),o=Array.from([,,,]).map(function(e,t){return r[t]||0}),l=i(s,3),g=l[0],a=l[1],f=l[2],c=ae(e),p=se(e),_=oe(s[1]*s[1]+s[2]*s[2]),d=1e-6>re(_)?0:a/_,u=1e-6>re(_)?1:f/_,h=[1,0,0,0,1,0,0,0,1,o[0],o[1],o[2]],t=[1,0,0,0,1,0,0,0,1,-o[0],-o[1],-o[2]];return xn(t,xn([1,0,0,0,u,-d,0,d,u,0,0,0],xn([_,0,-g,0,1,0,g,0,_,0,0,0],xn([c,p,0,-p,c,0,0,0,1,0,0,0],xn([_,0,g,0,1,0,-g,0,_,0,0,0],xn([1,0,0,0,u,d,0,-d,u,0,0,0],h))))))},Ln=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[e,0,0,0,e,0,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1],e*-t[2]+t[2]]},On=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[0,0],i=ce(e[1],e[0]),n=ae(i),r=se(i),s=ae(-i),o=se(-i),l=n*s+r*o,a=n*-o+r*s,g=r*s+-n*o,c=r*-o+-n*s,d=t[0]+l*-t[0]+-t[1]*g,f=t[1]+a*-t[0]+-t[1]*c;return[l,a,0,g,c,0,0,0,0,d,f,0]},jn=Object.freeze({__proto__:null,multiply_matrix3_vector3:yn,multiply_matrix3_line3:kn,multiply_matrices3:xn,matrix3_determinant:bn,invert_matrix3:En,make_matrix3_translate:Pn,make_matrix3_rotateX:An,make_matrix3_rotateY:wn,make_matrix3_rotateZ:Sn,make_matrix3_rotate:Nn,make_matrix3_scale:Ln,make_matrix3_reflectionZ:On}),Cn=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?ie(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},Mn=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:15,i=parseFloat(e.toFixed(t));return Cn(i)===te(t,Cn(e))?e:i},Tn=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},zn=function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];switch(i.length){case void 0:case 0:return i;case 1:return Tn(i[0])&&"string"!=typeof i[0]?e.apply(void 0,n(i[0])):[i[0]];default:return Array.from(i).map(function(t){return Tn(t)?n(e(t)):t}).reduce(function(e,t){return e.concat(t)},[]);}},In=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t;1===r.length&&r[0].length;){var s=r,a=i(s,1);r=a[0]}return r},Fn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=zn(t).filter(function(e){return void 0!==e});if(void 0!==n)return 0===n.length?void 0:(isNaN(n[0].x)||(n=["x","y","z"].map(function(e){return n[0][e]}).filter(function(e){return void 0!==e})),n.filter(function(e){return"number"==typeof e}))},Bn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return In(t).map(function(e){return Fn(e)})},Vn=[1,0,0,1,0,0],Dn=[1,0,0,0,1,0,0,0,1,0,0,0],Rn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Fn(t);return void 0===r?void 0:6===r.length?r:6<r.length?[r[0],r[1],r[2],r[3],r[4],r[5]]:6>r.length?Vn.map(function(e,t){return r[t]||e}):void 0},qn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Fn(t);if(void 0!==r){switch(r.length){case 4:return[r[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,0,0,0,1];case 6:return[r[0],r[1],0,r[2],r[3],0,0,0,1,r[4],r[5],0];case 9:return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],0,0,0];case 12:return r;case 16:return[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10],r[12],r[13],r[14]];}return 12<r.length?[r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10],r[12],r[13],r[14]]:12>r.length?Dn.map(function(e,t){return r[t]||e}):void 0}},Xn=1e-6,Un=function(e,t){return Array.from(Array(e.length-1)).map(function(n,r){return t(e[0],e[r+1])}).reduce(function(e,t){return e&&t},!0)},Yn=function e(){var t=Bn.apply(void 0,arguments);if(0===t.length)return!1;if(1===t.length&&void 0!==t[0])return e.apply(void 0,n(t[0]));var i=t[0].length,r=Array.from(Array(i));return Array.from(Array(t.length-1)).map(function(e,n){return r.map(function(e,i){return re(t[n][i]-t[n+1][i])<Xn}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)&&Array.from(Array(t.length-1)).map(function(e,n){return t[0].length===t[n+1].length}).reduce(function(e,t){return e&&t},!0)},Gn=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=In(i);if(1>s.length)return!1;var a=e(s[0]);if("undefined"===a)return!1;switch(s[0].constructor===Array&&(s=s.map(function(e){return In(e)})),a){case"number":return Un(s,function(e,t){return re(e-t)<Xn});case"boolean":return Un(s,function(e,t){return e===t});case"string":return Un(s,function(e,t){return e===t});case"object":return s[0].constructor===Array?Yn.apply(void 0,n(s)):(console.warn("comparing array of objects for equivalency by slow JSON.stringify with no epsilon check"),Un(s,function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));default:console.warn("incapable of determining comparison method");}return!1},Zn=Object.freeze({__proto__:null,EPSILON:Xn,equivalent_numbers:function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return 0!==i.length&&(1===i.length&&void 0!==i[0]?e.apply(void 0,n(i[0])):Un(i,function(e,t){return re(e-t)<Xn}))},equivalent_vectors:Yn,equivalent:Gn}),Kn=function(e,t,i,n,r){var s=function(e,t){return e[0]*t[1]-t[0]*e[1]},a=s(t,n),c=s([i[0]-e[0],i[1]-e[1]],n),o=s([e[0]-i[0],e[1]-i[1]],t);if(re(a)<Xn)return!1;return r(c/a,o/-a)},Wn=function(e,t){return e>=-Xn&&e<=1+Xn&&t>=-Xn&&t<=1+Xn},Hn=function(e,t,i,n){var r=[t[0]-e[0],t[1]-e[1]],s=[n[0]-i[0],n[1]-i[1]];return Kn(e,r,i,s,Wn)},Qn=function(e){return re(e.reduce(function(e,t){return e+t},0))<Xn},Jn=function(e,t){return 1-re(tn(en(e),en(t)))<Xn},$n=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Xn,r=[i[0]-e[0],i[1]-e[1]],s=r[0]*t[1]-r[1]*t[0];return re(s)<n},er=function(e,t){for(var n=!1,r=0,s=t.length-1;r<t.length;s=r++)t[r][1]>e[1]!=t[s][1]>e[1]&&e[0]<(t[s][0]-t[r][0])*(e[1]-t[r][1])/(t[s][1]-t[r][1])+t[r][0]&&(n=!n);return n},tr=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var s=i[(r+1)%i.length],c=[s[0]-t[0],s[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return c[0]*a[1]-c[1]*a[0]>-n}).map(function(e,t,i){return e===i[0]}).reduce(function(e,t){return e&&t},!0)},ir=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn;return!!(null!=t&&0<t.length)&&t.map(function(t,r,i){var s=i[(r+1)%i.length],c=[s[0]-t[0],s[1]-t[1]],a=[e[0]-t[0],e[1]-t[1]];return c[0]*a[1]-c[1]*a[0]>n}).map(function(e,t,i){return e===i[0]}).reduce(function(e,t){return e&&t},!0)},nr=function(e,t){for(var n=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}),r=t.map(function(e,t,i){return[e,i[(t+1)%i.length]]}),s=0;s<n.length;s+=1)for(var a=0;a<r.length;a+=1)if(Hn(n[s][0],n[s][1],r[a][0],r[a][1]))return!0;return!!er(t[0],e)||!!er(e[0],t)},rr=Object.freeze({__proto__:null,overlap_function:Kn,segment_segment_overlap:Hn,degenerate:Qn,parallel:Jn,point_on_line:$n,point_on_segment:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Xn,r=[e[0]-t[0],e[1]-t[1]],s=[e[0]-i[0],e[1]-i[1]],a=[t[0]-i[0],t[1]-i[1]],c=oe(r[0]*r[0]+r[1]*r[1]),o=oe(s[0]*s[0]+s[1]*s[1]),d=oe(a[0]*a[0]+a[1]*a[1]);return re(c-o-d)<n},point_in_poly:er,point_in_convex_poly:tr,point_in_convex_poly_exclusive:ir,convex_polygons_overlap:nr,convex_polygon_is_enclosed:function(e,t){var i=t.map(function(t){return tr(t,e)}).reduce(function(e,t){return e||t},!1);return!i&&void 0},convex_polygons_enclose:function(e,t){var i=t.map(function(t){return tr(t,e)}).reduce(function(e,t){return e||t},!1),n=e.map(function(t){return tr(t,e)}).reduce(function(e,t){return e&&t},!0);return!i&&n},is_counter_clockwise_between:function(e,t,i){for(;i<t;)i+=2*ne;for(;e<t;)e+=2*ne;return e<i}}),sr=function(){return!0},ar=function(e,t){return t>=-Xn},cr=function(e,t){return t>=-Xn&&t<=1+Xn},or=function(e,t){return e>=-Xn&&t>=-Xn},dr=function(e,t){return e>=-Xn&&t>=-Xn&&t<=1+Xn},lr=function(e,t){return e>=-Xn&&e<=1+Xn&&t>=-Xn&&t<=1+Xn},gr=function(e,t){return t>Xn},fr=function(e,t){return t>Xn&&t<1-Xn},pr=function(e,t){return e>Xn&&t>Xn},_r=function(e,t){return e>Xn&&t>Xn&&t<1-Xn},ur=function(e,t){return e>Xn&&e<1-Xn&&t>Xn&&t<1-Xn},hr=function(e){return e},mr=function(e){return e<-Xn?0:e},vr=function(e){return e<-Xn?0:e>1+Xn?1:e},yr=function(e,t,i,n,r){function s(e,t){return e[0]*t[1]-t[0]*e[1]}var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Xn,c=s(t,n);if(!(re(c)<a)){var o=s([i[0]-e[0],i[1]-e[1]],n),d=s([e[0]-i[0],e[1]-i[1]],t),l=o/c;return r(l,d/-c,a)?[e[0]+t[0]*l,e[1]+t[1]*l]:void 0}},kr=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return yr(e,t,i,s,cr,r)},xr=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return yr(e,t,i,s,dr,r)},br=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return yr(e,t,i,s,fr,r)},Er=function(e,t,i,n,r){var s=[n[0]-i[0],n[1]-i[1]];return yr(e,t,i,s,_r,r)},Pr=function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return yr(e,s,i,a,ur,r)},Ar=function(e,t,i,n){function r(e){return e<-s?-1:1}var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Xn,a=i[0]-e[0],c=i[1]-e[1],o=n[0]-e[0],d=n[1]-e[1],l=o-a,g=d-c,f=a*d-o*c,p=f*f,_=t*t,u=re(l*l+g*g),h=_*u-p;if(!(h<-s)){var m=oe(_*u-p),v=[e[0]+(f*g+r(g)*l*m)/u,e[1]+(-f*l+re(g)*m)/u];if(h>s){var y=[e[0]+(f*g-r(g)*l*m)/u,e[1]+(-f*l-re(g)*m)/u];return[v,y]}return[v]}},wr=function(){throw"circle_ray has not been written yet"},Nr=function(e,t,i,n){function r(e){return 0>e?-1:1}var s=de(t,2),a=i[0]-e[0],c=i[1]-e[1],o=n[0]-e[0],d=n[1]-e[1],l=o-a,g=d-c,f=l*l+g*g,p=a*d-o*c,_=(p*g+r(g)*l*oe(s*f-p*p))/f,u=(p*g-r(g)*l*oe(s*f-p*p))/f,h=(-p*l+re(g)*oe(s*f-p*p))/f,m=(-p*l-re(g)*oe(s*f-p*p))/f,v=isNaN(_),y=isNaN(u);return v||y?v&&y?void 0:v?y?void 0:[[u+e[0],m+e[1]]]:[[_+e[0],h+e[1]]]:[[_+e[0],h+e[1]],[u+e[0],m+e[1]]]},Lr=function(e,t){return re(e[0]-t[0])<Xn&&re(e[1]-t[1])<Xn},Or=function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return kr(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[r[0],r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!Lr(r[0],r[s]))return[r[0],r[s]];}},jr=function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return xr(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!Lr(r[0],r[s]))return[r[0],r[s]];}},Cr=function(e,t,i){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return Pr(t,i,e[0],e[1])}).filter(function(e){return null!=e}),s=ir(t,e),a=ir(i,e),c=tr(t,e),o=tr(i,e);if(0===r.length&&(s||a))return[t,i];if(0===r.length&&c&&o)return[t,i];switch(r.length){case 0:return s?[n(t),n(i)]:void 0;case 1:return c?[n(t),r[0]]:[n(i),r[0]];case 2:return r;default:throw new Error("clipping segment in a convex polygon resulting in 3 or more points");}},Mr=Object.freeze({__proto__:null,limit_line:hr,limit_ray:mr,limit_segment:vr,intersection_function:yr,line_line:function(e,t,i,n,r){return yr(e,t,i,n,sr,r)},line_ray:function(e,t,i,n,r){return yr(e,t,i,n,ar,r)},line_segment:kr,ray_ray:function(e,t,i,n,r){return yr(e,t,i,n,or,r)},ray_segment:xr,segment_segment:function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return yr(e,s,i,a,lr,r)},line_ray_exclusive:function(e,t,i,n,r){return yr(e,t,i,n,gr,r)},line_segment_exclusive:br,ray_ray_exclusive:function(e,t,i,n,r){return yr(e,t,i,n,pr,r)},ray_segment_exclusive:Er,segment_segment_exclusive:Pr,circle_line:Ar,circle_ray:wr,circle_segment:Nr,convex_poly_line:Or,convex_poly_ray:jr,convex_poly_segment:Cr,convex_poly_ray_exclusive:function(e,t,n){var r=e.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return Er(t,n,e[0],e[1])}).filter(function(e){return null!=e});switch(r.length){case 0:return;case 1:return[t,r[0]];case 2:return r;default:for(var s=1;s<r.length;s+=1)if(!Lr(r[0],r[s]))return[r[0],r[s]];}}}),Tr=function(e,t){var i=e[0]*t[0]+e[1]*t[1],n=e[0]*t[1]-e[1]*t[0],r=ce(n,i);return 0>r&&(r+=2*ne),r},zr=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.map(function(e){return ce(e[1],e[0])}),r=Array.from(Array(n.length)).map(function(e,t){return t}).sort(function(e,t){return n[e]-n[t]});return r.slice(r.indexOf(0),r.length).concat(r.slice(0,r.indexOf(0)))},Ir=function(e,t){var n=en(e),r=en(t),i=n.map(function(e,t){return n[t]+r[t]}),s=en(i),a=n.map(function(e,t){return-n[t]+-r[t]});return[s,en(a)]},Fr=function(e,i,n,r){var s=i[0]*r[1]-r[0]*i[1];if(re(s)<Xn){var a=[cn(e,n),[i[0],i[1]]],c=[a,a],o=i[0]*r[0]+i[1]*r[1];return delete c[0<o?1:0],c}var d=(n[0]-e[0])*r[1]-r[0]*(n[1]-e[1]),l=d/s,t=e[0]+i[0]*l,g=e[1]+i[1]*l,f=Ir(i,r);return f[1]=[f[1][1],-f[1][0]],f.map(function(e){return[[t,g],e]})},Br=function(e,t,i){var n=Tr(t,i)/e;return Array.from(Array(e-1)).map(function(e,r){return t+n*r})},Vr=function(e,t,i){var n=ce(t[1],t[0]),r=ce(i[1],i[0]);return Br(e,n,r).map(function(e){return[ae(e),se(e)]})},Dr=function(e){return .5*e.map(function(e,t,i){var n=i[(t+1)%i.length];return e[0]*n[1]-n[0]*e[1]}).reduce(function(e,t){return e+t},0)},Rr=function(e){var t=1/(6*Dr(e));return e.map(function(e,t,i){var n=i[(t+1)%i.length],r=e[0]*n[1]-n[0]*e[1];return[(e[0]+n[0])*r,(e[1]+n[1])*r]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(e){return e*t})},qr=function(e){var t=e[0].length,n=Array.from(Array(t)).map(function(){return 1/0}),r=Array.from(Array(t)).map(function(){return-Infinity});e.forEach(function(e){return e.forEach(function(e,t){e<n[t]&&(n[t]=e),e>r[t]&&(r[t]=e)})});var s=r.map(function(e,t){return e-n[t]});return[n,s]},Xr=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=.5*(2*ne/e),c=i/ae(s);return Array.from(Array($(e))).map(function(r,o){var i=-2*ne*o/e+s,a=Mn(t+c*se(i),14),d=Mn(n+c*ae(i),14);return[a,d]})},Ur=function(e,t,n){for(var r=t.map(function(t,r){return{o:t,i:r,d:n(e,t)}}),s=1/0,a=0,c;a<r.length;a+=1)r[a].d<s&&(c=a,s=r[a].d);return c},Yr=function(e,t,n,r){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Xn,a=de(t[0],2)+de(t[1],2),c=[0,1].map(function(t,r){return n[r]-e[r]}),o=[0,1].map(function(e,n){return t[n]*c[n]}).reduce(function(e,t){return e+t},0),l=r(o/a,s);return[0,1].map(function(n,r){return e[r]+t[r]*l})},Gr=function(e,t,n){var r=e.map(function(e,r){var i=$n(t,n,e);return{type:"v",point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),s=e.map(function(e,r,i){var s=br(t,n,e,i[(r+1)%i.length]);return{type:"e",point:s,at_index:r}}).filter(function(e){return null!=e.point}),a=r.concat(s).sort(function(e,t){return re(e.point[0]-t.point[0])<Xn?e.point[1]-t.point[1]:e.point[0]-t.point[0]});return console.log(a),e},Zr=function(e,t,n){var r=e.map(function(e,r){var i=$n(t,n,e);return{point:i?e:null,at_index:r}}).filter(function(e){return null!=e.point}),s=e.map(function(e,r,i){var s=br(t,n,e,i[(r+1)%i.length]);return{point:s,at_index:r}}).filter(function(e){return null!=e.point});if(2==s.length){var a=s.slice().sort(function(e,t){return e.at_index-t.at_index}),c=e.slice(a[1].at_index+1).concat(e.slice(0,a[0].at_index+1));c.push(a[0].point),c.push(a[1].point);var o=e.slice(a[0].at_index+1,a[1].at_index+1);return o.push(a[1].point),o.push(a[0].point),[c,o]}if(1==s.length&&1==r.length){r[0].type="v",s[0].type="e";var d=r.concat(s).sort(function(e,t){return e.at_index-t.at_index}),l=e.slice(d[1].at_index+1).concat(e.slice(0,d[0].at_index+1));"e"===d[0].type&&l.push(d[0].point),l.push(d[1].point);var g=e.slice(d[0].at_index+1,d[1].at_index+1);return"e"===d[1].type&&g.push(d[1].point),g.push(d[0].point),[l,g]}if(2==r.length){var f=r.slice().sort(function(e,t){return e.at_index-t.at_index}),p=e.slice(f[1].at_index).concat(e.slice(0,f[0].at_index+1)),_=e.slice(f[0].at_index,f[1].at_index+1);return[p,_]}return[e.slice()]},Kr=function(t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xn,n=t.slice().sort(function(e,t){return re(e[1]-t[1])<i?e[0]-t[0]:e[1]-t[1]}),r=[];r.push(n[0]);var s=0,a=0,c=function(){a+=1;var e=r.length-1,t=n.filter(function(t){return!(re(t[0]-r[e][0])<i&&re(t[1]-r[e][1])<i)}).map(function(t){for(var i=ce(r[e][1]-t[1],r[e][0]-t[0]);i<s;)i+=2*ne;return{node:t,angle:i,distance:void 0}}).sort(function(e,t){return e.angle<t.angle?-1:e.angle>t.angle?1:0});if(0===t.length)return{v:void 0};var c=t[0];return t=t.filter(function(e){return re(c.angle-e.angle)<i}).map(function(t){var i=oe(de(r[e][0]-t.node[0],2)+de(r[e][1]-t.node[1],2));return t.distance=i,t}).sort(function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0}),0<r.filter(function(e){return e===t[0].node}).length?{v:r}:void(r.push(t[0].node),s=ce(r[e][1]-t[0].node[1],r[e][0]-t[0].node[0]))};do{var o=c();if("object"===e(o))return o.v}while(a<1e4)},Wr=Object.freeze({__proto__:null,clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*ne;for(;0>t;)t+=2*ne;var i=e-t;return 0<=i?i:2*ne-(t-e)},counter_clockwise_angle2_radians:function(e,t){for(;0>e;)e+=2*ne;for(;0>t;)t+=2*ne;var i=t-e;return 0<=i?i:2*ne-(e-t)},clockwise_angle2:function(e,t){var i=t[0]*e[0]+t[1]*e[1],n=t[0]*e[1]-t[1]*e[0],r=ce(n,i);return 0>r&&(r+=2*ne),r},counter_clockwise_angle2:Tr,counter_clockwise_vector_order:zr,interior_angles2:function(e,t){var i=Tr(e,t);return[i,2*ne-i]},interior_angles:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(function(e,t,i){return Tr(e,i[(t+1)%i.length])})},bisect_vectors:Ir,bisect_lines2:Fr,subsect_radians:Br,subsect:Vr,signed_area:Dr,centroid:Rr,enclosing_rectangle:qr,make_regular_polygon:Xr,nearest_point2:function(e,t){var i=Ur(e,t,sn);return void 0===i?void 0:t[i]},nearest_point:function(e,t){var i=Ur(e,t,an);return void 0===i?void 0:t[i]},nearest_point_on_line:Yr,split_polygon:Gr,split_convex_polygon:Zr,convex_hull:Kr}),Hr=function(e){var t=[],r=e,s=function(){return r(en(A))},a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t);return this.length>n.length?tn(n,A):tn(A,n)},c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t),s=A.slice();return null==s[2]&&(s[2]=0),null==n[2]&&(n[2]=0),r(rn(s,n))},o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t),r=A.length<n.length?A.length:n.length,s=Array.from(Array(r)).map(function(e,t){return de(A[t]-n[t],2)}).reduce(function(e,t){return e+t},0);return oe(s)},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Rn(t);return r(dn(n,A))},l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t);return r(A.map(function(e,t){return e+n[t]}))},g=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t);return r(A.map(function(e,t){return e-n[t]}))},f=function(e,t){var i=hn(e,t);return r(dn(i,A))},p=function(){return r(-A[1],A[0])},u=function(){return r(-A[0],-A[1])},h=function(){return r(A[1],-A[0])},m=function(){return r.apply(void 0,n(A.map(function(e){return-e})))},v=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=_(t),s=mn(n.vector,n.origin);return r(dn(s,A))},y=function(e,t){var n=Fn(e),s=A.length<n.length?A.length:n.length,a=Array.from(Array(s)).map(function(e,r){return A[r]*t+n[r]*(1-t)});return r(a)},k=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t),r=A.length<n.length?A:n,s=A.length<n.length?n:A;return Gn(r,s)},x=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t),r=A.length<n.length?A:n,s=A.length<n.length?n:A;return Jn(r,s)},b=function(e){return r(A.map(function(t){return t*e}))},E=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var s=Fn(t),a=A.length<s.length?A.slice():s,c=A.length<s.length?s:A.slice(),o=a.length;o<c.length;o+=1)a[o]=0;return r(c.map(function(e,t){return .5*(a[t]+c[t])}))},P=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t);return Ir(A,n).map(function(e){return r(e)})},A;return Object.defineProperty(t,"normalize",{value:s}),Object.defineProperty(t,"dot",{value:a}),Object.defineProperty(t,"cross",{value:c}),Object.defineProperty(t,"distanceTo",{value:o}),Object.defineProperty(t,"transform",{value:d}),Object.defineProperty(t,"add",{value:l}),Object.defineProperty(t,"subtract",{value:g}),Object.defineProperty(t,"rotateZ",{value:f}),Object.defineProperty(t,"rotateZ90",{value:p}),Object.defineProperty(t,"rotateZ180",{value:u}),Object.defineProperty(t,"rotateZ270",{value:h}),Object.defineProperty(t,"flip",{value:m}),Object.defineProperty(t,"reflect",{value:v}),Object.defineProperty(t,"lerp",{value:y}),Object.defineProperty(t,"isEquivalent",{value:k}),Object.defineProperty(t,"isParallel",{value:x}),Object.defineProperty(t,"scale",{value:b}),Object.defineProperty(t,"midpoint",{value:E}),Object.defineProperty(t,"bisect",{value:P}),Object.defineProperty(t,"copy",{value:function(){return r.apply(void 0,n(A))}}),Object.defineProperty(t,"magnitude",{get:function(){return $i(A)}}),Object.defineProperty(t,"bind",{value:function(e){A=e}}),t},Qr=function e(){var t=Hr(e),i=Object.create(t);t.bind(i);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];return Fn(r).forEach(function(e){return i.push(e)}),Object.defineProperty(i,"x",{get:function(){return i[0]}}),Object.defineProperty(i,"y",{get:function(){return i[1]}}),Object.defineProperty(i,"z",{get:function(){return i[2]}}),i};Qr.withAngle=function(e){return Qr(ae(e),se(e))};var Jr=function e(){for(var t=[1,0,0,1,0,0],i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=Rn(n);void 0!==s&&s.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"multiply",{value:function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e(gn(t,Rn(n)).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"determinant",{value:function(){return Mn(fn(t))}}),Object.defineProperty(t,"inverse",{value:function(){return e(pn(t).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"translate",{value:function(i,n){var r=_n(i,n);return e(gn(t,r).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"scale",{value:function(){var i=un.apply(void 0,arguments);return e(gn(t,i).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"rotate",{value:function(){var i=hn.apply(void 0,arguments);return e(gn(t,i).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"reflect",{value:function(){var i=mn.apply(void 0,arguments);return e(gn(t,i).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=Fn(i);return Qr(dn(t,r).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transformVector",{value:function(i){return e(dn(t,i).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transformLine",{value:function(i,n){return e(ln(t,i,n).map(function(e){return Mn(e,13)}))}}),Object.freeze(t)};Jr.makeIdentity=function(){return Jr(1,0,0,1,0,0)},Jr.makeTranslation=function(e,t){return Jr(_n(e,t))},Jr.makeRotation=function(e,t){return Jr(hn(e,t).map(function(e){return Mn(e,13)}))},Jr.makeScale=function(e,t){return Jr(un(e,t).map(function(e){return Mn(e,13)}))},Jr.makeReflection=function(e,t){return Jr(mn(e,t).map(function(e){return Mn(e,13)}))};var $r=function e(){for(var t=[1,0,0,0,1,0,0,0,1,0,0,0],i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=qn(n);void 0!==s&&s.forEach(function(e,n){t[n]=e});return Object.defineProperty(t,"multiply",{value:function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return e(xn(t,qn(n)).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"determinant",{value:function(){return Mn(bn(t),13)}}),Object.defineProperty(t,"inverse",{value:function(){return e(En(t).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"translate",{value:function(i,n,r){var s=Pn(i,n,r);return e(xn(t,s).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"rotateX",{value:function(i){var n=An(i);return e(xn(t,n).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"rotateY",{value:function(i){var n=wn(i);return e(xn(t,n).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"rotateZ",{value:function(i){var n=Sn(i);return e(xn(t,n).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"rotate",{value:function(i,n,r){var s=Nn(i,n,r);return e(xn(t,s).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"scale",{value:function(i){var n=Ln(i);return e(xn(t,n).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"reflectZ",{value:function(i,n){var r=On(i,n);return e(xn(t,r).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transform",{value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=Fn(i);return Qr(yn(r,t).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transformVector",{value:function(i){return e(yn(t,i).map(function(e){return Mn(e,13)}))}}),Object.defineProperty(t,"transformLine",{value:function(i,n){return e(kn(t,i,n).map(function(e){return Mn(e,13)}))}}),Object.freeze(t)};$r.makeIdentity=function(){return $r(1,0,0,0,1,0,0,0,1,0,0,0)},$r.makeTranslation=function(e,t,i){return $r(Pn(e,t,i))},$r.makeRotationX=function(e){return $r(An(e).map(function(e){return Mn(e,13)}))},$r.makeRotationY=function(e){return $r(wn(e).map(function(e){return Mn(e,13)}))},$r.makeRotationZ=function(e){return $r(Sn(e).map(function(e){return Mn(e,13)}))},$r.makeRotation=function(e,t,i){return $r(Nn(e,t,i).map(function(e){return Mn(e,13)}))},$r.makeScale=function(e,t){return $r(Ln(e,t).map(function(e){return Mn(e,13)}))},$r.makeReflectionZ=function(e,t){return $r(On(e,t).map(function(e){return Mn(e,13)}))};var es=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=_(i),s=r.origin,a=r.vector,c=v.bind(this),o=Object.create(c(e));return Object.defineProperty(o,"compare_function",{value:function(){return!0}}),Object.defineProperty(o,"clip_function",{value:hr}),Object.defineProperty(o,"origin",{get:function(){return Qr(s)}}),Object.defineProperty(o,"vector",{get:function(){return Qr(a)}}),Object.defineProperty(o,"length",{get:function(){return 1/0}}),Object.defineProperty(o,"transform",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Rn(i),c=ln(r,s,a);return e(c[0],c[1])}}),o};es.fromPoints=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=h(t);return es({origin:n[0],vector:en([n[1][0]-n[0][0],n[1][1]-n[0][1]])})},es.perpendicularBisector=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=h(t),r=en([n[1][0]-n[0][0],n[1][1]-n[0][1]]);return es({origin:nn(n[0],n[1]),vector:[r[1],-r[0]]})};var ts=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=_(i),s=r.origin,a=r.vector,c=v.bind(this),o=Object.create(c(e));return Object.defineProperty(o,"origin",{get:function(){return Qr(s)}}),Object.defineProperty(o,"vector",{get:function(){return Qr(a)}}),Object.defineProperty(o,"length",{get:function(){return 1/0}}),Object.defineProperty(o,"transform",{value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Rn(i),c=a.map(function(e,t){return e+s[t]}),o=dn(r,s),d=dn(r,c).map(function(e,t){return e-o[t]});return e(o,d)}}),Object.defineProperty(o,"rotate180",{value:function(){return e(s[0],s[1],-a[0],-a[1])}}),Object.defineProperty(o,"compare_function",{value:function(e,t){return e>=-t}}),Object.defineProperty(o,"clip_function",{value:mr}),o};ts.fromPoints=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=h(t);return ts({origin:n[0],vector:en([n[1][0]-n[0][0],n[1][1]-n[0][1]])})};var is=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=h(i),s=v.bind(this),a=0<r.length?r.map(function(e){return Qr(e)}):void 0;if(void 0!==a){var c=Object.create(s(e,a)),o=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=Rn(i),s=c.map(function(e){return dn(r,e)});return e(s)},d=function(t){var i=nn(c[0],c[1]),n=c.map(function(e){return e.lerp(i,t)});return e(n)},l=function(){return Qr(c[1][0]-c[0][0],c[1][1]-c[0][1])},g=function(){return Qr(nn(c[0],c[1]))},f=function(){return oe(de(c[1][0]-c[0][0],2)+de(c[1][1]-c[0][1],2))},p=function(e,t){return e>=-t&&e<=1+t};return Object.defineProperty(c,"origin",{get:function(){return c[0]}}),Object.defineProperty(c,"vector",{get:function(){return l()}}),Object.defineProperty(c,"midpoint",{value:g}),Object.defineProperty(c,"magnitude",{get:function(){return f()}}),Object.defineProperty(c,"transform",{value:o}),Object.defineProperty(c,"scale",{value:d}),Object.defineProperty(c,"compare_function",{value:p}),Object.defineProperty(c,"clip_function",{value:vr}),c}},ns=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],s=[Fn(e),Fn(t)];return{contains:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Fn(t).map(function(e,t){return e+r[t]}),a=(n[1]-s[0][1])*-s[0][0]-(n[0]-s[0][0])*-s[0][1],c=n[1]*s[1][0]-n[0]*s[1][1];return 0>a&&0>c},bisect:function(){var e=Tr(s[0],s[1]),t=s.map(function(e){return ce(e[1],e[0])}),i=t[0]+.5*e;return Qr(ae(i),se(i))},subsect:function(e){return Vr(e,s[0],s[1]).map(function(e){return Qr(e[0],e[1])})},get center(){return r},get vectors(){return s},get angle(){return Tr(s[0],s[1])}}};ns.fromVectors=function(e,t){return ns(e,t)},ns.fromPoints=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0],r=[e,t].map(function(e){return e.map(function(t,r){return e[r]-n[r]})});return ns(r[0],r[1],n)};var rs=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Bn(t).map(function(e){return Qr(e)});if(void 0!==n){var r=n.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return is(e[0][0],e[0][1],e[1][0],e[1][1])}),s=k.bind(this),a=Object.create(s());return Object.defineProperty(a,"points",{get:function(){return n}}),Object.defineProperty(a,"sides",{get:function(){return r}}),a}};rs.regularPolygon=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=Xr(e,t,i,n);return rs(r)},rs.convexHull=function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=Kr(e,t);return rs(i)};var ss=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=m(i).map(function(e){return Qr(e)});if(void 0!==r){var s=r.map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return is(e[0][0],e[0][1],e[1][0],e[1][1])}),a=k.bind(this),c=Object.create(a(e)),o=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var s=_(i);return Zr(r,s.origin,s.vector).map(function(t){return e(t)})},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=m(t);return nr(r,n)},l=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rr(c.points),r=c.points.map(function(e){return[0,1].map(function(t,r){return e[r]-n[r]})}).map(function(e){return e.map(function(r,s){return n[s]+e[s]*t})});return e(r)},g=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rr(c.points),n=c.points.map(function(e){var n=[e[0]-i[0],e[1]-i[1]],r=oe(de(n[0],2)+de(n[1],2)),s=ce(n[1],n[0]);return[i[0]+ae(s+t)*r,i[1]+se(s+t)*r]});return e(n)};return Object.defineProperty(c,"points",{get:function(){return r}}),Object.defineProperty(c,"sides",{get:function(){return s}}),Object.defineProperty(c,"split",{value:o}),Object.defineProperty(c,"overlaps",{value:d}),Object.defineProperty(c,"scale",{value:l}),Object.defineProperty(c,"rotate",{value:g}),c}};ss.regularPolygon=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=Xr(e,t,i,n);return ss(r)},ss.convexHull=function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],i=Kr(e,t);return ss(i)};var as=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=Bn(t);if(void 0!==r){var s=zr.apply(void 0,n(r)),a=function(){return s.map(function(e){return r[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return ns.fromVectors(e[0],e[1])})},c=function(){return s.map(function(e){return r[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]}).map(function(e){return Tr(e[0],e[1])})};return{sectors:a,angles:c,get vectors(){return r},get vectorOrder(){return n(s)}}}};as.fromVectors=function(){return as.apply(void 0,arguments)},as.fromPoints=function(e,t){var i=t.map(function(t){return t.map(function(n,r){return t[r]-e[r]})});return as.fromVectors(i)};var cs=Object.create(null);Object.assign(cs,on,vn,jn,Wr,rr,Zn),cs.clean_number=Mn,cs.is_number=function(e){return null!=e&&!isNaN(e)},cs.is_vector=function(e){return null!=e&&null!=e[0]&&!isNaN(e[0])},cs.is_iterable=Tn,cs.flatten_input=zn,cs.semi_flatten_input=In,cs.get_vector=Fn,cs.get_vector_of_vectors=Bn,cs.get_matrix2=Rn,cs.get_segment=p,cs.get_line=_,cs.get_ray=u,cs.get_two_vec2=h,cs.get_array_of_vec=m,cs.get_array_of_vec2=function(){var e=Array.from(arguments),t=e.filter(function(e){return e.constructor===Array});return 2<=t.length&&!isNaN(t[0][0])?t:1===t.length&&1<=t[0].length?t[0]:e},cs.intersection=Mr,Object.freeze(cs);var os={vector:Qr,matrix2:Jr,matrix:$r,line:es,ray:ts,segment:is,circle:function(){for(var e=arguments.length,t=Array(e),n=0,r,s;n<e;n++)t[n]=arguments[n];var a=Array.from(t),c=a.filter(function(e){return!isNaN(e)});if(3===c.length){r=Qr(c[0],c[1]);var o=i(c,3);s=o[2]}var d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=_(t),a=[n.origin[0]+n.vector[0],n.origin[1]+n.vector[1]],c=Ar(r,s,n.origin,a);return void 0===c?void 0:c.map(function(e){return Qr(e)})},l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=u(t),a=wr(r,s,n[0],n[1]);return void 0===a?void 0:a.map(function(e){return Qr(e)})},g=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=h(t),a=Nr(r,s,n[0],n[1]);return void 0===a?void 0:a.map(function(e){return Qr(e)})};return{intersectionLine:d,intersectionRay:l,intersectionSegment:g,get origin(){return r},get radius(){return s},set origin(e){r=Qr(e)},set radius(e){s=e}}},polygon:rs,convexPolygon:ss,rectangle:function e(){for(var t=arguments.length,n=Array(t),r=0,s,a,c;r<t;r++)n[r]=arguments[r];var o=Array.from(n),d=o.filter(function(e){return!isNaN(e)}),l=o.filter(function(e){return e.constructor===Array});if(4===d.length){s=d.slice(0,2);var g=i(d,4);a=g[2],c=g[3]}1===l.length&&(l=l[0]),2===l.length&&"number"==typeof l[0][0]&&(s=l[0].slice(),a=l[1][0],c=l[1][1]);var f=[[s[0],s[1]],[s[0]+a,s[1]],[s[0]+a,s[1]+c],[s[0],s[1]+c]],p=k.bind(this),_=Object.create(p(e)),u=function(t,i){var n=null==i?[s[0]+a,s[1]+c]:i,r=s[0]+(n[0]-s[0])*(1-t),o=s[1]+(n[1]-s[1])*(1-t);return e(r,o,a*t,c*t)};return Object.defineProperty(_,"origin",{get:function(){return s}}),Object.defineProperty(_,"width",{get:function(){return a}}),Object.defineProperty(_,"height",{get:function(){return c}}),Object.defineProperty(_,"area",{get:function(){return a*c}}),Object.defineProperty(_,"scale",{value:u}),Object.defineProperty(_,"rotate",{value:function(){var e;return(e=ss(f)).rotate.apply(e,arguments)}}),Object.defineProperty(_,"transform",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ss(f).transform(t)}}),_},junction:as,sector:ns,core:cs},ds=function(e){var t=e.edges_vertices;if(t){var n=[];return t.forEach(function(e,t){return e.forEach(function(e){void 0===n[e]&&(n[e]=[]),n[e].push(t)})}),n}},ls=function(e){var t=e.faces_vertices;if(t){var i=t.length,n=Array.from(Array(i)).map(function(){return[]}),r={};return t.forEach(function(e,t){if(void 0!==e){var s=e.length;e.forEach(function(e,a,i){var c=i[(a+1)%s];if(c<e){var o=[c,e];e=o[0],c=o[1]}var d="".concat(e," ").concat(c);if(d in r){var l=r[d];n[t].push(l),n[l].push(t)}else r[d]=t})}}),n}},gs=function(e){var t=e.edges_vertices,n=e.vertices_edges;return t&&n?t.map(function(e,t){var i=e[0],r=e[1],s=n[i].filter(function(i){return i!==t}),a=n[r].filter(function(i){return i!==t});return s.concat(a)}):void 0},fs=function(e){var t=e.edges_vertices,i=e.faces_edges;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(t,i){return n[i].push(t)})}),n}},ps=function(e){var t=e.vertices_coords,i=e.edges_vertices;return t&&i?i.map(function(e){return e.map(function(e){return t[e]})}).map(function(e){var t;return(t=os.core).distance.apply(t,n(e))}):void 0},_s={M:-180,m:-180,V:180,v:180},us=function(e){var t=e.edges_vertices;if(!t)return{};var n={};return t.map(function(e){return e.sort(function(e,t){return e-t}).join(" ")}).forEach(function(e,t){n[e]=t}),n},hs=function(e){var t=e.vertices_coords,i=e.faces_vertices;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(e,t){return n[t].push(e)})}),n}},ms=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=us(e),n=ls(e);if(0>=n.length)return[];var r=[t],s=[[{face:t,parent:void 0,edge:void 0,level:0}]];do s[s.length]=s[s.length-1].map(function(t){var s=n[t.face].filter(function(e){return-1===r.indexOf(e)});return r=r.concat(s),s.map(function(n){var r=e.faces_vertices[n].filter(function(i){return-1!==e.faces_vertices[t.face].indexOf(i)}).sort(function(e,t){return e-t}),s=i[r.join(" ")];return{face:n,parent:t.face,edge:s,edge_vertices:r}})}).reduce(function(e,t){return e.concat(t)},[]);while(0<s[s.length-1].length);return 0<s.length&&0===s[s.length-1].length&&s.pop(),s},vs=function(e){return"f"===e||"F"===e||"u"===e||"U"===e},ys=function(e,t){if(null!=e.faces_vertices&&null!=e.edges_vertices){var i=!0=="edges_assignment"in e,n=i?e.edges_assignment.map(function(e){return!vs(e)}):e.edges_vertices.map(function(){return!0}),r=e.faces_vertices.map(function(){return[1,0,0,1,0,0]});return ms(e,t).forEach(function(t){t.filter(function(e){return null!=e.parent}).forEach(function(t){var i=t.edge_vertices.map(function(t){return e.vertices_coords[t]}),s=[i[1][0]-i[0][0],i[1][1]-i[0][1]],a=n[t.edge]?os.core.make_matrix2_reflection(s,i[0]):[1,0,0,1,0,0];r[t.face]=os.core.multiply_matrices2(r[t.parent],a)})}),r}},ks=function(e,t){var i=!0=="edges_assignment"in e?e.edges_assignment.map(function(e){return!vs(e)}):e.edges_vertices.map(function(){return!0}),n=e.faces_vertices.map(function(){return[1,0,0,1,0,0]});return ms(e,t).forEach(function(t){t.filter(function(e){return null!=e.parent}).forEach(function(t){var r=t.edge_vertices.map(function(t){return e.vertices_coords[t]}),s=[r[1][0]-r[0][0],r[1][1]-r[0][1]],a=i[t.edge]?os.core.make_matrix2_reflection(s,r[0]):[1,0,0,1,0,0];n[t.face]=os.core.multiply_matrices2(a,n[t.parent])})}),n},xs=function(e,t,n){if(null!=e.vertices_coords&&null!=e.faces_vertices){if(null==t&&(t=0),null==n)n=ys(e,t);else{var r=null==e.faces_vertices?e.faces_edges:e.faces_vertices,s=null==r?0:r.length;n.length!==s&&(n=ys(e,t))}var a=e.vertices_coords.map(function(n,r){for(var i=0;i<e.faces_vertices.length;i+=1)if(e.faces_vertices[i].includes(r))return i;return t});return e.vertices_coords.map(function(e,t){return os.core.multiply_matrix2_vector2(n[a[t]],e).map(function(e){return os.core.clean_number(e)})})}},bs=function(e){var t=ds(e),i=e.edges_assignment.map(function(e){return"b"===e||"B"===e});return t.map(function(e){return e.map(function(t){return i[t]}).reduce(function(e,t){return e||t},!1)})},Es=function(e){return e.map(function(e){return e[0]*e[3]-e[1]*e[2]}).map(function(e){return 0<=e})},Ps=/*#__PURE__*/Object.freeze({__proto__:null,make_vertices_edges:ds,make_edges_vertices:function(e){var t=e.edges_vertices,i=e.faces_edges;if(t&&i){var n=Array.from(Array(t.length)).map(function(){return[]});return i.forEach(function(e,t){var i=[];e.forEach(function(e){i[e]=t}),i.forEach(function(t,i){return n[i].push(t)})}),n}},make_faces_faces:ls,make_edges_edges:gs,make_edges_faces:fs,make_edges_length:ps,make_edges_foldAngle:function(e){var t=e.edges_assignment;return t?t.map(function(e){return _s[e]||0}):void 0},make_vertex_pair_to_edge_map:us,make_vertices_faces:hs,make_face_walk_tree:ms,make_faces_matrix:ys,make_faces_matrix_inv:ks,make_vertices_coords_folded:xs,make_vertices_isBoundary:bs,make_faces_coloring_from_faces_matrix:Es,make_faces_coloring:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=[];return n[t]=!0,ms(e,t).forEach(function(e,t){return e.forEach(function(e){n[e.face]=0==t%2})}),n}}),As=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ie.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},ws=function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return As([],t,i,n)},Ss=function(e){var t=e.edges_vertices,i=e.edges_faces;return As([],t,i)},Ns=function(e){var t=e.faces_vertices,i=e.faces_edges;return As([],t,i)},Ls=function(e){var t=e.faces_vertices,i=e.edges_vertices,n=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(t){t>n&&(n=t)})})}),n+1},Os=function(e,t){var i=e.vertices_coords;if(void 0!==i&&0!==i.length){var r=n(t);return null==r[2]&&(r[2]=0),i.map(function(e){return e.map(function(e,t){return de(e-r[t],2)}).reduce(function(e,t){return e+t},0)}).map(function(e,t){return{d:oe(e),i:t}}).sort(function(e,t){return e.d-t.d}).shift().i}},js=function(e,t){var n=e.vertices_coords,r=e.edges_vertices;if(null!=n&&0!==n.length&&null!=r&&0!==r.length){for(var s=function(e){return e<-os.core.EPSILON?0:e>1+os.core.EPSILON?1:e},a=r.map(function(t){return t.map(function(e){return n[e]})}).map(function(t){return[t[0],[t[1][0]-t[0][0],t[1][1]-t[0][1]]]}).map(function(e){return os.core.nearest_point_on_line(e[0],e[1],t,s)}).map(function(e,n){return{p:e,i:n,d:os.core.distance2(t,e)}}),c=1/0,o=0,d;o<a.length;o+=1)a[o].d<c&&(d=o,c=a[o].d);return d}},Cs=function(e,t){var i=e.vertices_coords,n=e.faces_vertices;if(null!=i&&0!==i.length&&null!=n&&0!==n.length){var r=n.map(function(e,t){return{face:e.map(function(e){return i[e]}),i:t}}).filter(function(e){return os.core.point_in_poly(t,e.face)}).shift();return null==r?void 0:r.i}},Ms=function(t){for(var n=t.edges_vertices,r=t.vertices_coords,s=r.length,a=Array(s).fill(!0),c=s,o=0;o<n.length&&0<c;o+=1)for(var d=0,l;d<n[o].length;d+=1)l=n[o][d],a[l]&&(c-=1,a[l]=!1);return 0===c?[]:a.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},Ts=function(e){for(var t=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},n=Array.from(Array(e.edges_vertices.length)).map(function(){return[]}),r=0;r<e.edges_vertices.length-1;r+=1)for(var s=r+1;s<e.edges_vertices.length;s+=1)n[r][s]=t(e.edges_vertices[r],e.edges_vertices[s]);var a=e.edges_vertices.map(function(){});n.forEach(function(e,t){return e.forEach(function(e,i){e&&(a[i]=void 0===a[t]?t:a[t])})});var c=a.map(function(e){return void 0!==e});return a.forEach(function(e,t){void 0===e&&(a[t]=t)}),c.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},zs=/*#__PURE__*/Object.freeze({__proto__:null,vertices_count:ws,edges_count:Ss,faces_count:Ns,implied_vertices_count:Ls,implied_edges_count:function(e){var t=e.faces_edges,i=e.vertices_edges,n=e.edgeOrders,r=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(t){t>r&&(r=t)})})}),void 0!==n&&n.forEach(function(e){return e.forEach(function(t,e){2!==e&&t>r&&(r=t)})}),r+1},implied_faces_count:function(e){var t=e.vertices_faces,i=e.edges_faces,n=e.facesOrders,r=-1;return[t,i].filter(function(e){return void 0!==e}).forEach(function(e){return e.forEach(function(e){return e.forEach(function(e){e>r&&(r=e)})})}),void 0!==n&&n.forEach(function(e){return e.forEach(function(e,t){2!==t&&e>r&&(r=e)})}),r+1},nearest_vertex:Os,nearest_edge:js,face_containing_point:Cs,folded_faces_containing_point:function(e,t,i){var n=e.vertices_coords,r=e.faces_vertices,s=i.map(function(e){return os.core.multiply_matrix2_vector2(e,t)});return r.map(function(e,t){return{face:e.map(function(e){return n[e]}),i:t}}).filter(function(e,t){return os.core.intersection.point_in_poly(s[t],e.face)}).map(function(e){return e.i})},faces_containing_point:function(e,t){var i=e.vertices_coords,n=e.faces_vertices;return n.map(function(e,t){return{face:e.map(function(e){return i[e]}),i:t}}).filter(function(e){return os.core.point_in_poly(t,e.face)}).map(function(e){return e.i})},topmost_face:function(e,t){if(null==t&&(t=Array.from(Array(Ns(e))).map(function(e,t){return t})),0!==t.length){if(1===t.length)return t[0];for(var n=e["faces_re:layer"].map(function(e,t){return{layer:e,i:t}}).sort(function(e,t){return t.layer-e.layer}).map(function(e){return e.i}),r=0;r<n.length;r+=1)if(t.includes(n[r]))return n[r]}},get_collinear_vertices:function(e){var t=e.edges_vertices,i=e.vertices_coords,n=ds({edges_vertices:t});return Array.from(Array(i.length)).map(function(e,t){return t}).filter(function(){return 2===n.length}).map(function(e){var t=n[e],r=t[0][0]===e?t[0][1]:t[0][0],s=t[1][0]===e?t[1][1]:t[1][0],a=os.core.distance2(i[r],i[e]),c=os.core.distance2(i[s],i[e]),o=os.core.distance2(i[r],i[s]);return re(o-a-c)<os.core.EPSILON?e:void 0}).filter(function(e){return void 0!==e})},get_isolated_vertices:Ms,get_duplicate_vertices:function(e){for(var t=e.vertices_coords,n=Array.from(Array(t.length)).map(function(){return[]}),r=0;r<t.length-1;r+=1)for(var s=r+1;s<t.length;s+=1)n[r][s]=os.core.equivalent_vectors(t[r],t[s]);var a=t.map(function(){});n.forEach(function(e,t){return e.forEach(function(e,i){e&&(a[i]=void 0===a[t]?t:a[t])})});var c=a.map(function(e){return void 0!==e});return a.forEach(function(e,t){void 0===e&&(a[t]=t)}),c.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},get_duplicate_edges:function(e){for(var t=e.edges_vertices,n=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},r=Array.from(Array(t.length)).map(function(){return[]}),s=0;s<t.length-1;s+=1)for(var a=s+1;a<t.length;a+=1)r[s][a]=n(t[s],t[a]);var c=[];return r.forEach(function(e,t){return e.forEach(function(e,i){e&&(c[i]=void 0===c[t]?t:c[t])})}),c},get_duplicate_edges_old:Ts,find_collinear_face_edges:function(e,t,i){var n=t.map(function(e){return i[e]}).map(function(e,t,i){return[e,i[(t+1)%i.length]]});return e.map(function(r){var s=n.map(function(e,t){return{index:t,edge:e}}).filter(function(t){return os.core.intersection.point_on_edge(t.edge[0],t.edge[1],r)}).shift().index;return[t[s],t[(s+1)%t.length]].sort(function(e,t){return e-t})})}}),Is=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ie.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},Fs={vertices:function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return Is([],t,i,n)},edges:function(e){var t=e.edges_vertices,i=e.edges_faces;return Is([],t,i)},faces:function(e){var t=e.faces_vertices,i=e.faces_edges;return Is([],t,i)}},Bs=function(e,t,i){var n=Fs[t](e),r=Array(n).fill(!1);i.forEach(function(e){r[e]=!0});var a=0,c=r.map(function(e){return e?--a:a});if(0===i.length)return c;var o="".concat(t,"_"),d="_".concat(t),l=Object.keys(e),g=l.map(function(e){return e.substring(0,o.length)===o?e:void 0}).filter(function(e){return void 0!==e}),f=l.map(function(e){return e.substring(e.length-d.length,e.length)===d?e:void 0}).filter(function(e){return void 0!==e});return f.forEach(function(t){return e[t].forEach(function(n,r){return e[t][r].forEach(function(i,n){e[t][r][n]+=c[i]})})}),g.forEach(function(t){e[t]=e[t].filter(function(e,t){return!r[t]})}),c},Vs=function(e){var t=e.vertices_coords;if(null==t||0>=t.length)return[0,0,0,0];var i=t[0].length,r=Array(i).fill(1/0),s=Array(i).fill(-Infinity);return t.forEach(function(e){return e.forEach(function(e,t){e<r[t]&&(r[t]=e),e>s[t]&&(s[t]=e)})}),isNaN(r[0])||isNaN(r[1])||isNaN(s[0])||isNaN(s[1])?[0,0,0,0]:[r[0],r[1],s[0]-r[0],s[1]-r[1]]},Ds=function(e){if(null==e.edges_assignment)return{vertices:[],edges:[]};for(var t=e.edges_assignment.map(function(e){return"B"===e||"b"===e}),n=ds(e),r=[],s=[],a=-1,c=0;c<t.length;c+=1)if(t[c]){a=c;break}if(-1===a)return{vertices:[],edges:[]};t[a]=!1,r.push(a),s.push(e.edges_vertices[a][0]);for(var o=e.edges_vertices[a][1];s[0]!==o;){if(s.push(o),a=n[o].filter(function(e){return t[e]}).shift(),void 0===a)return{vertices:[],edges:[]};if(e.edges_vertices[a][0]===o){var d=i(e.edges_vertices[a],2);o=d[1]}else{var l=i(e.edges_vertices[a],1);o=l[0]}t[a]=!1,r.push(a)}return{vertices:s,edges:r}},Rs=function(e){var t=e.edges_assignment.map(function(e){return"b"!==e&&"B"!==e}).map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e}),i=Bs(e,"edges",t),n=Ds(e);e.faces_edges=[n.edges],e.faces_vertices=[n.vertices],Bs(e,"vertices",Ms(e))},qs=function(){var e={};if(ge){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else le&&(e=window);return e}(),Xs=function(e,t){var i=e.parameters.points;e.valid=os.core.point_in_convex_poly(i[0],t)&&os.core.point_in_convex_poly(i[1],t),e.valid_solutions=[e.valid]},Us=[null,Xs,Xs,function(e,t){var i=os.core.intersection,n=e.parameters.lines,r=i.convex_poly_line(t,n[0][0],n[0][1]),s=i.convex_poly_line(t,n[1][0],n[1][1]);e.valid=void 0!==r&&void 0!==s,e.valid_solutions=e.solutions.map(function(e){return void 0!==e&&void 0!==i.convex_poly_line(t,e[0],e[1])})},function(e,t){var i=e.parameters,n=os.core.intersection.line_line(i.lines[0][0],i.lines[0][1],i.points[0],[i.lines[0][1][1],-i.lines[0][1][0]]);void 0===n&&(e.valid=!1,e.valid_solutions=[!1]),e.valid=os.core.point_in_convex_poly(n,t)&&os.core.point_in_convex_poly(i.points[0],t),e.valid_solutions=[e.valid]},function(e,t){if(0===e.solutions.length)return e.valid=!1,void(e.valid_solutions=[!1,!1]);var i=e.parameters;e.test={},e.test.points_reflected=e.solutions.map(function(e){return os.core.make_matrix2_reflection(e[1],e[0])}).map(function(e){return os.core.multiply_matrix2_vector2(e,i.points[1])}),e.valid=os.core.point_in_convex_poly(i.points[0],t)&&os.core.point_in_convex_poly(i.points[1],t),e.valid_solutions=e.test.points_reflected.map(function(e){return os.core.point_in_convex_poly(e,t)})},function(e,t){var i=os.core.intersection,n=e.solutions.map(function(e){return i.convex_poly_line(t,e[0],e[1])}).filter(function(e){return void 0!==e});if(0===n.length)return e.valid=!1,void(e.valid_solutions=[!1,!1,!1]);var r=e.parameters.lines,s=i.convex_poly_line(t,r[0][0],r[0][1]),a=i.convex_poly_line(t,r[1][0],r[1][1]),c=e.parameters;for(e.test={},e.test.points_reflected=e.solutions.map(function(e){return os.core.make_matrix2_reflection(e[1],e[0])}).map(function(e){return c.points.map(function(t){return os.core.multiply_matrix2_vector2(e,t)})}).reduce(function(e,t){return e.concat(t)},[]),e.valid=void 0!==s&&void 0!==a&&os.core.point_in_convex_poly(c.points[0],t)&&os.core.point_in_convex_poly(c.points[1],t),e.valid_solutions=e.solutions.map(function(t,n){return[e.test.points_reflected[2*n],e.test.points_reflected[2*n+1]]}).map(function(e){return os.core.point_in_convex_poly(e[0],t)&&os.core.point_in_convex_poly(e[1],t)});3>e.valid_solutions.length;)e.valid_solutions.push(!1)},function(e,t){0===e.solutions.length&&(e.valid=!1,e.valid_solutions=[!1]);var i=e.solutions[0],n=e.parameters,r=os.core.make_matrix2_reflection(i[1],i[0]),s=os.core.multiply_matrix2_vector2(r,n.points[0]),a=os.core.intersection.line_line(n.lines[1][0],n.lines[1][1],i[0],i[1]);e.test={points_reflected:[s]},e.valid=os.core.point_in_convex_poly(n.points[0],t)&&os.core.point_in_convex_poly(s,t)&&os.core.point_in_convex_poly(a,t),e.valid_solutions=[e.valid]}],Ys=function(e,t){return Us[e.axiom].call(null,e,t),e},Gs=function(e,t,i){var n={axiom:e,parameters:i,solutions:t};return Object.defineProperty(n,"apply",{value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ys.apply(void 0,[n].concat(t))}}),n},Zs=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];switch(e){case 1:case 2:{var s=(a=os.core).semi_flatten_input.apply(a,i),a;if(4===s.length)return s;if(2===s.length&&1<s[0].length&&1<s[1].length)return[s[0][0],s[0][1],s[1][0],s[1][1]]}break;case 3:{var c=(o=os.core).semi_flatten_input.apply(o,i),o;if(8===c.length)return c;if(4===c.length&&2<=c[0].length&&2<=c[1].length&&2<=c[2].length&&2<=c[3].length)return[c[0][0],c[0][1],c[1][0],c[1][1],c[2][0],c[2][1],c[3][0],c[3][1]];if(2===c.length)return 4<=c[0].length&&4<=c[1].length?[c[0][0],c[0][1],c[0][2],c[0][3],c[1][0],c[1][1],c[1][2],c[1][3]]:[].concat(n(os.core.flatten_input(c[0])),n(os.core.flatten_input(c[1])))}}return i},Ks=function(e,t,i,n){var r=os.core.normalize([i-e,n-t]);return Gs(1,[[[e,t],r]],{points:[[e,t],[i,n]]})},Ws=function(e,t,i,n){var r=os.core.normalize([i-e,n-t]),s=[[(e+i)/2,(t+n)/2],[r[1],-r[0]]];return Gs(2,[s],{points:[[e,t],[i,n]]})},Hs=function(e,t,i,n,r,s,a,c){var o=os.core.bisect_lines2([e,t],[i,n],[r,s],[a,c]);return Gs(3,o,{lines:[[[e,t],[i,n]],[[r,s],[a,c]]]})},Qs=function(e,t,i){var r=os.core.normalize(t),s=[n(i),[r[1],-r[0]]];return Gs(4,[s],{points:[i],lines:[[e,t]]})},Js=function(e,t,i,n){var r=os.core.get_vector(e),s=os.core.get_vector(t),a=os.core.get_vector(i),c=os.core.get_vector(n),o=oe(de(a[0]-c[0],2)+de(a[1]-c[1],2)),d=[r[0]+s[0],r[1]+s[1]],l=os.core.intersection.circle_line(a,o,r,d)||[],g=l.map(function(e){var t=os.core.midpoint2(c,e),i=os.core.normalize(e.map(function(t,n){return e[n]-c[n]}));return[t,[-i[1],i[0]]]});return Gs(5,g,{points:[a,c],lines:[[r,s]]})},$s=function(e,t,i,n,r){var s=os.core.get_vector(e),a=os.core.get_vector(i),c=os.core.get_vector(r),o=os.core.get_vector(t),d=os.core.get_vector(n),l={points:[c],lines:[[s,o],[a,d]]},g=os.core.intersection.line_line(s,o,c,d);if(void 0===g)return Gs(7,l,[]);var f=os.core.midpoint2(c,g),p=os.core.normalize(c.map(function(e,t){return g[t]-c[t]})),_=[f,[-p[1],p[0]]];return Gs(7,[_],l)},ea=function(e){var t=de(re(e),1/3);return 0>e?-t:t},ta=function(e,n,r,s){if(1e-8>re(e)){if(e=n,n=r,r=s,1e-8>re(e))return e=n,n=r,1e-8>re(e)?[]:[-n/e];var o=n*n-4*e*r;return 1e-8>re(o)?[-n/(2*e)]:0<o?[(-n+oe(o))/(2*e),(-n-oe(o))/(2*e)]:[]}var d=(3*e*r-n*n)/(3*e*e),l=(2*n*n*n-9*e*n*r+27*e*e*s)/(27*e*e*e),g;if(1e-8>re(d))g=[ea(-l)];else if(1e-8>re(l))g=[0].concat(0>d?[oe(-d),-oe(-d)]:[]);else{var f=l*l/4+d*d*d/27;if(1e-8>re(f))g=[-1.5*l/d,3*l/d];else if(0<f){var p=ea(-l/2-oe(f));g=[p-d/(3*p)]}else{var _=2*oe(-d/3),u=ee(3*l/d/_)/3,t=2*ne/3;g=[_*ae(u),_*ae(u-t),_*ae(u-2*t)]}}for(var h=0;h<g.length;h+=1)g[h]-=n/(3*e);return g},ia=function(e,t,n,r,s,a){var c=s[0],o=s[1];if(re(t[0])>os.core.EPSILON)var d=t[1]/t[0],l=e[1]-d*e[0];else var g=e[0];var f=a[0],p=a[1];if(re(r[0])>os.core.EPSILON)var _=r[1]/r[0],u=n[1]-_*n[0];else var h=n[0];if(void 0!==d&&void 0!==_)var m=d*d+1,v=2*d*l,y=l*l-c*c-o*o,k=_*_+1,x=2*_*u,b=u*u-f*f-p*p,E=_*c+(l-o),P=c*(u-p)-f*(l-o),A=_-d,w=d*f+(u-p),S=d*c+(l-o);else if(void 0===d&&void 0===_)m=1,v=0,y=g*g-c*c-o*o,k=1,x=0,b=h*h-f*f-p*p,E=g-c,P=o*(h-f)-p*(g-c),A=0,w=h-f,S=E;else{if(void 0===d){var N=c;c=f,f=N;var L=o;o=p,p=L,d=_,_=void 0,l=u,u=void 0,h=g,g=void 0}m=d*d+1,v=2*d*l,y=l*l-c*c-o*o,k=1,x=0,b=h*h-f*f-p*p,E=c,P=(l-o)*(h-f)-c*p,A=1,w=-d*(h-f)-p,S=d*c+(l-o)}var O=m*E*E+v*E*A+y*A*A,j=2*m*E*P+v*(E*w+P*A)+2*y*A*w,C=m*P*P+v*P*w+y*w*w,M=k*A*S,T=(k*w+x*A)*S-O,I=(x*w+b*A)*S-j,F=b*w*S-C,B=ta(M,T,I,F),V=[];if(null!=B&&0<B.length)for(var D=0;D<B.length;++D){if(void 0!==d&&void 0!==_)var R=B[D],q=_*R+u;else void 0===d&&void 0===_?(q=B[D],R=h):(q=B[D],R=h);if(q!=p){var X=-1*(R-f)/(q-p),U=(q*q-p*p+R*R-f*f)/(2*(q-p));V.push([[0,U],[1,X]])}else{var Y=(R+f)/2;V.push([[Y,0],[0,1]])}}return Gs(6,V,{points:[s,a],lines:[[e,t],[n,r]]})},na=function(e){return 0<=e?de(e,1/3):-de(-e,1/3)},ra=function(e,t,i,n,r,s,o){var l=os.core.get_vector(e),g=os.core.get_vector(i),f=os.core.get_vector(r),p=os.core.get_vector(s),_=os.core.get_vector(t),u=os.core.get_vector(n),h=f,m=os.line(l,_),v=[-_[1],_[0]],y=m.nearestPoint(0,0).magnitude,k=p,x=os.line(g,u),E=[-u[1],u[0]],P=x.nearestPoint(0,0).magnitude;0>os.core.dot(v,m.nearestPoint(0,0))&&(v=[_[1],-_[0]]),0>os.core.dot(E,x.nearestPoint(0,0))&&(E=[u[1],-u[0]]);var A=[v[1],-v[0]];if(!(re(h[0]-k[0])<os.core.EPSILON&&re(h[1]-k[1])<os.core.EPSILON)){var w=0;switch(o){case 0:var S=[h[0]+y*v[0]-2*k[0],h[1]+y*v[1]-2*k[1]],N=[y*v[0]-h[0],y*v[1]-h[1]],L=os.core.dot(k,E)-P,O=2*os.core.dot(N,A),j=os.core.dot(N,N),C=os.core.dot(S.map(function(e,t){return S[t]+N[t]}),A),M=os.core.dot(S,N),z=os.core.dot(A,E),I=os.core.dot(N,E),F=z,a=L+C*z+I,b=L*O+M*z+C*I,c=L*j+M*I;switch(Ia=re(F)>os.core.EPSILON?3:re(a)>os.core.EPSILON?2:re(b)>os.core.EPSILON?1:0,Ia){case 0:return;case 1:w=-c/b;break;case 2:var d=de(b,2)-4*a*c;if(Ba=-b/(2*a),0>d)return void(Fa=-1);re(d)<os.core.EPSILON?(Fa=0,w=Ba):(Fa=1,Va=oe(d)/(2*a),w=Ba+Va);break;case 3:var B=a/F,V=b/F,q=(3*V-de(B,2))/9,X=(9*B*V-27*(c/F)-2*de(B,3))/54,R=de(q,3)+de(X,2);if(Xa=-B/3,0<R){Fa=0;var D=oe(R);Da=na(X+D);var U=na(X-D);w=Xa+Da+U}else if(re(R)<os.core.EPSILON)Fa=1,Da=de(X,1/3),w=Xa+2*Da;else{Fa=2;var T=oe(-R),Y=ce(T,X)/3,G=de(de(X,2)-R,1/6);Ra=G*ae(Y),qa=G*se(Y),w=Xa+2*Ra}}break;case 1:if(1>Fa)return;2===Ia?w=Ba-Va:3===Ia?w=1===Fa?Xa-Da:Xa-Ra-oe(3)*qa:void 0;break;case 2:if(2>Fa)return;3===Ia?w=Xa-Ra+oe(3)*qa:void 0;}var Z=[y*v[0]+w*A[0],y*v[1]+w*A[1]],K=os.core.normalize([Z[0]-h[0],Z[1]-h[1]]),W=os.core.dot(K,os.core.midpoint2(Z,h)),H=[W*K[0],W*K[1]],Q=[-K[1],K[0]];return[H,Q]}},sa=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=Zs.apply(void 0,[e].concat(i));return 1===e?Ks.apply(void 0,n(s)):2===e?Ws.apply(void 0,n(s)):3===e?Hs.apply(void 0,n(s)):4===e?Qs.apply(void 0,n(s)):5===e?Js.apply(void 0,n(s)):6===e?ia.apply(void 0,n(s)):7===e?$s.apply(void 0,n(s)):void 0},aa=/*#__PURE__*/Object.freeze({__proto__:null,axiom1:Ks,axiom2:Ws,axiom3:Hs,axiom4:Qs,axiom5:Js,axiom7:$s,axiom6:ia,axiom6RefFinder:function(e,t,i,n,r,s){Ia=0,Fa=0,Ba=0,Va=0,Da=0,Ra=0,qa=0,Xa=0;var a=[ra(e,t,i,n,r,s,0),ra(e,t,i,n,r,s,1),ra(e,t,i,n,r,s,2)];return a.filter(function(e){return null!=e})},axiom6RefFinderFunc:ra,axiom:sa}),ca=function t(n){var r,s;if("object"!==e(n))return n;if(!n)return n;if("[object Array]"===Object.prototype.toString.apply(n)){for(r=[],s=0;s<n.length;s+=1)r[s]=t(n[s]);return r}for(s in r={},n)n.hasOwnProperty(s)&&(r[s]=t(n[s]));return r},oa=/*#__PURE__*/Object.freeze({__proto__:null,clone:ca,recursive_freeze:function t(i){return(Object.freeze(i),void 0===i)?i:(Object.getOwnPropertyNames(i).filter(function(t){return null!==i[t]&&("object"===e(i[t])||"function"==typeof i[t])&&!Object.isFrozen(i[t])}).forEach(function(e){return t(i[e])}),i)}}),da={gl:"webgl",GL:"webgl",webGL:"webgl",WebGL:"webgl",webgl:"webgl",Webgl:"webgl",svg:"svg",SVG:"svg","2d":"svg","2D":"svg","3d":"webgl","3D":"webgl"},la=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return!0=="view"in e}).shift();if(void 0===r){if(ge)return;if(le)return"svg"}return da[r.view]},ga=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var s=i.filter(function(e){return"function"!=typeof e}),a=Hi.apply(void 0,n(s)),c=["boundaries","edges","faces","vertices"],o=function(){var t=dt(e,{output:"svg"}),i=Array.from(t.childNodes),n=c.map(function(e){return i.filter(function(t){return e===t.getAttribute("class")}).shift()}).filter(function(e){return void 0!==e}),r=Array.from(a.childNodes),s=c.map(function(e){return r.filter(function(t){return e===t.getAttribute("class")}).shift()}).filter(function(e){return void 0!==e});0<s.length?n.forEach(function(e){return a.insertBefore(e,s[0])}):n.forEach(function(e){return a.appendChild(e)}),s.forEach(function(e){return a.removeChild(e)}),n.forEach(function(e){return e.setAttribute("pointerEvents","none")}),Array.from(t.attributes).forEach(function(e){return a.setAttribute(e.name,e.value)})};(function(){var t=Vs(e);a.setViewBox.apply(a,n(t))})(),o(),e.didChange.push(o),Object.defineProperty(e,"draw",{value:o}),Object.defineProperty(e,"svg",{get:function(){return a}});var d=function(){i.filter(function(e){return"function"==typeof e}).forEach(function(t){return t.call(e,e)})};"loading"===qs.document.readyState?qs.document.addEventListener("DOMContentLoaded",d):d()},fa=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];switch(la.apply(void 0,i)){case"svg":ga.apply(void 0,[e].concat(i));}},pa=1.1,_a="Rabbit Ear",ua={FACES_MATRIX:"faces_re:matrix",FACES_LAYER:"faces_re:layer",SECTORS_VERTICES:"re:sectors_vertices",SECTORS_EDGES:"re:sectors_edges",SECTORS_ANGLES:"re:sectors_angles",VERTICES_SECTORS_VERTICES:"vertices_re:sectors_vertices"},ha={file:["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"],frame:["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"],graph:["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],orders:["edgeOrders","faceOrders"]},ma=Object.freeze([].concat(ha.file).concat(ha.frame).concat(ha.graph).concat(ha.orders)),va=["B","b","M","m","V","v","F","f","U","u"],ya={B:"boundary",b:"boundary",M:"mountain",m:"mountain",V:"valley",v:"valley",F:"mark",f:"mark",U:"unassigned",u:"unassigned"},ka={M:-180,m:-180,V:180,v:180},xa=function(e){return ka[e]||0},ba=function(e,t){var i="".concat(t,"_");return Object.keys(e).map(function(e){return e.substring(0,i.length)===i?e:void 0}).filter(function(e){return void 0!==e})},Ea=function(e,t){return Object.keys(e).map(function(e){return e.substring(e.length-t.length,e.length)===t?e:void 0}).filter(function(e){return void 0!==e})},Pa=function(e,t){var i=ba(e,t);if(0===i.length)return[];var r=ie.apply(Math,n(i.map(function(t){return e[t].length}))),s=Array.from(Array(r)).map(function(){return{}});return i.map(function(e){return{long:e,short:e.substring(t.length+1)}}).forEach(function(t){return s.forEach(function(n,r){s[r][t.short]=e[t.long][r]})}),s},Aa=function(e,t,i){var n=ba(e,t);if(0===n.length)return[];var r={};return n.map(function(e){return{long:e,short:e.substring(t.length+1)}}).forEach(function(t){r[t.short]=e[t.long][i]}),r},wa=/*#__PURE__*/Object.freeze({__proto__:null,file_spec:pa,file_creator:_a,future_spec:ua,fold_keys:ha,file_classes:["singleModel","multiModel","animation","diagrams"],frame_classes:["creasePattern","foldedForm","graph","linkage"],frame_attributes:["2D","3D","abstract","manifold","nonManifold","orientable","nonOrientable","selfTouching","nonSelfTouching","selfIntersecting","nonSelfIntersecting"],keys:ma,edges_assignment_values:va,edges_assignment_names:ya,edge_assignment_to_foldAngle:xa,get_geometry_keys_with_prefix:ba,get_geometry_keys_with_suffix:function(e,t){var i="_".concat(t);return Object.keys(e).map(function(e){return e.substring(e.length-i.length,e.length)===i?e:void 0}).filter(function(e){return void 0!==e})},get_keys_with_ending:Ea,transpose_geometry_arrays:Pa,transpose_geometry_array_at_index:Aa}),Sa=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:os.core.EPSILON,r=2>e.length?e.length:2,s=0;s<r;s+=1)if(re(e[s]-t[s])>n)return!1;return!0},Na=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:os.core.EPSILON,r=[t[0]-i[0],t[1]-i[1]],s=[t[0]-e[0],t[1]-e[1]],a=[i[0]-e[0],i[1]-e[1]],c=oe(r[0]*r[0]+r[1]*r[1]),o=oe(s[0]*s[0]+s[1]*s[1]),d=oe(a[0]*a[0]+a[1]*a[1]);return re(c-o-d)<n},La=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},Oa=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:os.core.EPSILON,r=i.map(function(e){return e.map(function(e){return t[e]})});return r.map(function(i){return t.filter(function(e){return Na(e,i[0],i[1],n)})})},ja=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=i.map(function(e){return e.map(function(e){return t[e]})}),r=n.map(function(t){return[t[1][0]-t[0][0],t[1][1]-t[0][1]]}),s=r.map(function(t){return oe(t[0]*t[0]+t[1]*t[1])}),a=r.map(function(t,e){return[t[0]/s[e],t[1]/s[e]]});return a.map(function(t){return .707<re(t[0])})},Ca=function(e){for(var t=e.vertices_coords,n=e.edges_vertices,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:os.core.EPSILON,s=n.length,a=n.map(function(e){return e.map(function(e){return t[e]})}),c=Array.from(Array(s-1)).map(function(){return[]}),o=0;o<a.length-1;o+=1)for(var d=o+1;d<a.length;d+=1)c[o][d]=os.core.intersection.segment_segment_exclusive(a[o][0],a[o][1],a[d][0],a[d][1],r);for(var l=Array.from(Array(s)).map(function(){return[]}),g=0;g<a.length-1;g+=1)for(var f=g+1;f<a.length;f+=1)null!=c[g][f]&&(l[g].push(c[g][f]),l[f].push(c[g][f]));return l},Ma=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:os.core.EPSILON,n=function(e,t){return e[0]-t[0]},r=function(e,t){return e[1]-t[1]},s=ja(e),a=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});a.forEach(function(t,e){return t.sort(s[e]?n:r)});var c=Ca(e,t),o=Oa(e,t),d=c.map(function(e,t){return e.concat(o[t])});d.forEach(function(t,e){return t.sort(s[e]?n:r)});var l=d.map(function(e){return Array.from(Array(e.length-1)).map(function(t,n){return[e[n],e[n+1]]})});l=l.map(function(e){return e.filter(function(n){return!1===n.map(function(e,r){return re(n[0][r]-n[1][r])<t}).reduce(function(e,t){return e&&t},!0)})});for(var g=l.map(function(e,t){return e.map(function(){return t})}).reduce(function(e,t){return e.concat(t)},[]),f=l.map(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),p=0,_=l.map(function(e){return e.map(function(){return[p++,p++]})}).reduce(function(e,t){return e.concat(t)},[]),u=Array.from(Array(f.length)).map(function(){return[]}),h=0;h<f.length-1;h+=1)for(var m=h+1;m<f.length;m+=1)u[h][m]=Sa(f[h],f[m],t);var y=f.map(function(){});u.forEach(function(e,t){return e.forEach(function(e,i){e&&(y[i]=void 0===y[t]?t:y[t])})});var k=y.map(function(e){return void 0!==e});y.forEach(function(e,t){void 0===e&&(y[t]=t)}),_.forEach(function(e,t){return e.forEach(function(e,i){_[t][i]=y[e]})});for(var x=Array.from(Array(_.length)).map(function(){return[]}),b=0;b<_.length-1;b+=1)for(var E=b+1;E<_.length;E+=1)x[b][E]=La(_[b],_[E]);var P=_.map(function(){});x.forEach(function(e,t){return e.forEach(function(e,i){e&&(P[t]=void 0===P[i]?i:P[i])})});var A=P.map(function(e){return void 0===e});P.forEach(function(e,t){void 0===e&&(P[t]=t)});var w=_.filter(function(e,t){return A[t]}),S=g.filter(function(e,t){return A[t]}),N={vertices_coords:f,edges_vertices:w};null!=e.edges_assignment&&(N.edges_assignment=S.map(function(t){return e.edges_assignment[t]||"U"})),null!=e.edges_foldAngle&&(N.edges_foldAngle=S.map(function(t,i){return e.edges_foldAngle[t]||xa(N.edges_assignment[i])}));var L=k.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e});return Bs(N,"vertices",L),ha.graph.forEach(function(t){return delete e[t]}),Object.keys(N).forEach(function(t){e[t]=N[t]}),N},Ta={},za=function(e,t){return(+e%(t=+t)+t)%t},Ia,Fa,Ba,Va,Da,Ra,qa,Xa;Ta.EPS=1e-6,Ta.sum=function(e,t){return e+t},Ta.min=function(e,t){return e<t?e:t},Ta.max=function(e,t){return e>t?e:t},Ta.all=function(e,t){return e&&t},Ta.next=function(e,t,n){return null==n&&(n=1),za(e+n,t)},Ta.rangesDisjoint=function(e,t){var i,n,r,s,a,c;return i=e[0],n=e[1],r=t[0],s=t[1],r<(a=te(i,n))&&a>s||r>(c=ie(i,n))&&c<s},Ta.topologicalSort=function(e){var t,i,n,r,s,a,c;for(t=0,n=e.length;t<n;t++)c=e[t],a=[!1,null],c.visited=a[0],c.parent=a[1];for(s=[],i=0,r=e.length;i<r;i++)c=e[i],c.visited||(s=Ta.visit(c,s));return s},Ta.visit=function(e,t){var i,n,r,s;for(e.visited=!0,r=e.children,(i=0,n=r.length);i<n;i++)(s=r[i],!!!s.visited)&&(s.parent=e,t=Ta.visit(s,t));return t.concat([e])},Ta.magsq=function(e){return Ta.dot(e,e)},Ta.mag=function(e){return oe(Ta.magsq(e))},Ta.unit=function(e,t){var i;return null==t&&(t=Ta.EPS),i=Ta.magsq(e),i<t?null:Ta.mul(e,1/Ta.mag(e))},Ta.ang2D=function(e,t){return null==t&&(t=Ta.EPS),Ta.magsq(e)<t?null:ce(e[1],e[0])},Ta.mul=function(e,t){var n,r,s,a;for(a=[],r=0,s=e.length;r<s;r++)n=e[r],a.push(n*t);return a},Ta.linearInterpolate=function(e,t,i){return Ta.plus(Ta.mul(t,1-e),Ta.mul(i,e))},Ta.plus=function(e,t){var n,r,s,a,c;for(c=[],r=s=0,a=e.length;s<a;r=++s)n=e[r],c.push(n+t[r]);return c},Ta.sub=function(e,t){return Ta.plus(e,Ta.mul(t,-1))},Ta.dot=function(e,t){var n,r;return function(){var i,s,a;for(a=[],r=i=0,s=e.length;i<s;r=++i)n=e[r],a.push(n*t[r]);return a}().reduce(Ta.sum)},Ta.distsq=function(e,t){return Ta.magsq(Ta.sub(e,t))},Ta.dist=function(e,t){return oe(Ta.distsq(e,t))},Ta.closestIndex=function(e,t){var n,r,s,a,c,o,d;for(o=2e308,s=a=0,c=t.length;a<c;s=++a)n=t[s],o>(r=Ta.dist(e,n))&&(o=r,d=s);return d},Ta.dir=function(e,t){return Ta.unit(Ta.sub(t,e))},Ta.ang=function(e,t){var i,n,r,s;return i=function(){var i,n,r,a;for(r=[e,t],a=[],(i=0,n=r.length);i<n;i++)s=r[i],a.push(Ta.unit(s));return a}(),n=i[0],r=i[1],null==n||null==r?null:ee(Ta.dot(n,r))},Ta.cross=function(e,t){var n,r,s,a;return e.length===(s=t.length)&&2===s?e[0]*t[1]-e[1]*t[0]:e.length===(a=t.length)&&3===a?function(){var i,s,a,c,o;for(a=[[1,2],[2,0],[0,1]],o=[],(i=0,s=a.length);i<s;i++)c=a[i],n=c[0],r=c[1],o.push(e[n]*t[r]-e[r]*t[n]);return o}():null},Ta.parallel=function(e,t,i){var n,r,s,a;return null==i&&(i=Ta.EPS),n=function(){var i,n,r,s;for(r=[e,t],s=[],(i=0,n=r.length);i<n;i++)a=r[i],s.push(Ta.unit(a));return s}(),r=n[0],s=n[1],null==r||null==s?null:1-re(Ta.dot(r,s))<i},Ta.rotate=function(e,n,r){var t,s,a,c,o,d,l,g,f,_;if(n=Ta.unit(n),null==n)return null;for(l=[ae(r),se(r)],t=l[0],_=l[1],g=[[0,1,2],[1,2,0],[2,0,1]],f=[],(a=0,c=g.length);a<c;a++)o=g[a],f.push(function(){var i,r,a,c;for(a=[t,-_*n[o[2]],_*n[o[1]]],c=[],(s=i=0,r=a.length);i<r;s=++i)d=a[s],c.push(e[o[s]]*(n[o[0]]*n[o[s]]*(1-t)+d));return c}().reduce(Ta.sum));return f},Ta.interiorAngle=function(e,t,i){var n;return n=Ta.ang2D(Ta.sub(e,t))-Ta.ang2D(Ta.sub(i,t)),n+(0>n?2*ne:0)},Ta.turnAngle=function(e,t,i){return ne-Ta.interiorAngle(e,t,i)},Ta.triangleNormal=function(e,t,i){return Ta.unit(Ta.cross(Ta.sub(t,e),Ta.sub(i,t)))},Ta.polygonNormal=function(e,t){var n,r;return null==t&&(t=Ta.EPS),Ta.unit(function(){var t,i,s;for(s=[],n=t=0,i=e.length;t<i;n=++t)r=e[n],s.push(Ta.cross(r,e[Ta.next(n,e.length)]));return s}().reduce(Ta.plus),t)},Ta.twiceSignedArea=function(e){var t,n,r;return function(){var i,s,a;for(a=[],t=i=0,s=e.length;i<s;t=++i)n=e[t],r=e[Ta.next(t,e.length)],a.push(n[0]*r[1]-r[0]*n[1]);return a}().reduce(Ta.sum)},Ta.polygonOrientation=function(e){var t=Math.sign;return t(Ta.twiceSignedArea(e))},Ta.sortByAngle=function(e,t,i){return null==t&&(t=[0,0]),null==i&&(i=function(e){return e}),t=i(t),e.sort(function(e,n){var r,s;return r=Ta.ang2D(Ta.sub(i(e),t)),s=Ta.ang2D(Ta.sub(i(n),t)),r-s})},Ta.segmentsCross=function(e,t){var i,n,r,s;return i=e[0],r=e[1],n=t[0],s=t[1],!(Ta.rangesDisjoint([i[0],r[0]],[n[0],s[0]])||Ta.rangesDisjoint([i[1],r[1]],[n[1],s[1]]))&&Ta.polygonOrientation([i,r,n])!==Ta.polygonOrientation([i,r,s])&&Ta.polygonOrientation([n,s,i])!==Ta.polygonOrientation([n,s,r])},Ta.parametricLineIntersect=function(e,t){var i,n,r,s,a;return n=e[0],r=e[1],s=t[0],a=t[1],i=(a[1]-s[1])*(r[0]-n[0])+(s[0]-a[0])*(r[1]-n[1]),0===i?[null,null]:[(a[0]*(n[1]-s[1])+a[1]*(s[0]-n[0])+s[1]*n[0]-n[1]*s[0])/i,(s[0]*(r[1]-n[1])+s[1]*(n[0]-r[0])+n[1]*r[0]-r[1]*n[0])/i]},Ta.segmentIntersectSegment=function(e,i){var n,r,a;return n=Ta.parametricLineIntersect(e,i),r=n[0],a=n[1],null!=r&&0<=r&&1>=r&&0<=a&&1>=a?Ta.linearInterpolate(r,e[0],e[1]):null},Ta.lineIntersectLine=function(e,i){var n,r,a;return n=Ta.parametricLineIntersect(e,i),r=n[0],a=n[1],null==r?null:Ta.linearInterpolate(r,e[0],e[1])},Ta.pointStrictlyInSegment=function(e,t,i){var n,r;return null==i&&(i=Ta.EPS),n=Ta.sub(e,t[0]),r=Ta.sub(e,t[1]),Ta.parallel(n,r,i)&&0>Ta.dot(n,r)},Ta.centroid=function(e){return Ta.mul(e.reduce(Ta.plus),1/e.length)},Ta.basis=function(e,t){var i,r,s,a,c,o,l,g;return(null==t&&(t=Ta.EPS),function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)c=e[t],n.push(3!==c.length);return n}().reduce(Ta.all))?null:(r=function(){var i,n,r;for(r=[],i=0,n=e.length;i<n;i++)c=e[i],Ta.distsq(c,e[0])>t&&r.push(Ta.dir(c,e[0]));return r}(),0===r.length)?[]:(o=r[0],function(){var e,n,s;for(s=[],e=0,n=r.length;e<n;e++)i=r[e],s.push(Ta.parallel(i,o,t));return s}().reduce(Ta.all))?[o]:(a=function(){var e,t,n;for(n=[],e=0,t=r.length;e<t;e++)i=r[e],n.push(Ta.unit(Ta.cross(i,o)));return n}(),a=function(){var e,t,i;for(i=[],e=0,t=a.length;e<t;e++)s=a[e],null!=s&&i.push(s);return i}(),g=a[0],l=Ta.cross(g,o),function(){var e,i,n;for(n=[],e=0,i=a.length;e<i;e++)s=a[e],n.push(Ta.parallel(s,g,t));return n}().reduce(Ta.all)?[o,l]:[o,l,g])},Ta.above=function(e,t,i,n){var r,s,a,c,o;return null==n&&(n=Ta.EPS),a=function(){var n,r,s,a;for(s=[e,t],a=[],(n=0,r=s.length);n<r;n++)o=s[n],a.push(function(){var e,t,n;for(n=[],e=0,t=o.length;e<t;e++)c=o[e],n.push(Ta.dot(c,i));return n}());return a}(),r=a[0],s=a[1],s.reduce(Ta.max)-r.reduce(Ta.min)<n?1:r.reduce(Ta.max)-s.reduce(Ta.min)<n?-1:0},Ta.separatingDirection2D=function(e,r,s,n){var a,c,d,g,f,_,u,h,v,y,x,b,E,P;for(null==n&&(n=Ta.EPS),b=[e,r],(d=0,f=b.length);d<f;d++)for(P=b[d],a=g=0,_=P.length;g<_;a=++g)for(y=P[a],c=v=0,u=P.length;v<u;c=++v)if((x=P[c],!!(a<c))&&(h=Ta.unit(Ta.cross(Ta.sub(y,x),s)),null!=h&&(E=Ta.above(e,r,h,n),0!==E)))return Ta.mul(h,E);return null},Ta.separatingDirection3D=function(e,t,n){var s,a,c,d,g,f,_,u,h,v,y,x,b,E,P,A,w,S,N;for(null==n&&(n=Ta.EPS),P=[[e,t],[t,e]],(c=0,g=P.length);c<g;c++)for(A=P[c],S=A[0],N=A[1],(d=0,f=S.length);d<f;d++)for(y=S[d],s=v=0,_=N.length;v<_;s=++v)for(x=N[s],a=E=0,u=N.length;E<u;a=++E)if((b=N[a],!!(s<a))&&(h=Ta.unit(Ta.cross(Ta.sub(y,x),Ta.sub(y,b))),null!=h&&(w=Ta.above(e,t,h,n),0!==w)))return Ta.mul(h,w);return null},Ta.circleCross=function(e,t,i){var n,r;return n=(e*e-i*i+t*t)/e/2,r=oe(t*t-n*n),[n,r]},Ta.creaseDir=function(e,t,i,n,r){var s,a,c,o,d,l;return null==r&&(r=Ta.EPS),s=ae(i)+ae(n),a=ae(i)-ae(n),c=Ta.plus(e,t),o=Ta.sub(e,t),d=Ta.unit(Ta.cross(o,c)),c=Ta.mul(c,s/Ta.magsq(c)),o=Ta.mul(o,Ta.magsq(o)<r?0:a/Ta.magsq(o)),l=oe(1-Ta.magsq(c)-Ta.magsq(o)),d=Ta.mul(d,l),[c,o,d].reduce(Ta.plus)},Ta.quadSplit=function(e,i,n,r){if(Ta.magsq(i)>n*n)throw new Error("STOP! Trying to split expansive quad.");return Ta.mul(e,(n*n-Ta.magsq(i))/2/(n*ae(r)-Ta.dot(e,i)))};var Ua={},Ya=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};Ua.edgesAssigned=function(e,t){var n,r,s,a,c,o;for(c=e.edges_assignment,o=[],(r=s=0,a=c.length);s<a;r=++s)n=c[r],n===t&&o.push(r);return o},Ua.mountainEdges=function(e){return Ua.edgesAssigned(e,"M")},Ua.valleyEdges=function(e){return Ua.edgesAssigned(e,"V")},Ua.flatEdges=function(e){return Ua.edgesAssigned(e,"F")},Ua.boundaryEdges=function(e){return Ua.edgesAssigned(e,"B")},Ua.unassignedEdges=function(e){return Ua.edgesAssigned(e,"U")},Ua.keysStartingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(0,t.length)===t&&n.push(i);return n},Ua.keysEndingWith=function(e,t){var i,n;for(i in n=[],e)i.slice(-t.length)===t&&n.push(i);return n},Ua.remapField=function(e,t,n){var r,s,a,c,o,d,g,f,p,_,u,h,v,y;for(u=[],s=c=0,g=n.length;c<g;s=++c)a=n[s],null!=a&&(u[a]=s);for(v=Ua.keysStartingWith(e,t+"_"),d=0,f=v.length;d<f;d++)o=v[d],e[o]=function(){var t,i,n;for(n=[],i=0,t=u.length;i<t;i++)h=u[i],n.push(e[o][h]);return n}();for(y=Ua.keysEndingWith(e,"_"+t),_=0,p=y.length;_<p;_++)o=y[_],e[o]=function(){var t,i,s,a;for(s=e[o],a=[],(i=0,t=s.length);i<t;i++)r=s[i],a.push(function(){var e,t,i;for(i=[],t=0,e=r.length;t<e;t++)h=r[t],i.push(n[h]);return i}());return a}();return e},Ua.remapFieldSubset=function(e,t,i){var n,r,s;return n=0,r=function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)s=i[e],s?r.push(n++):r.push(null);return r}(),Ua.remapField(e,t,r),r},Ua.numType=function(e,t){var i,n,r;return i=function(){var i,s,a,c;for(a=Ua.keysStartingWith(e,t+"_"),c=[],(i=0,s=a.length);i<s;i++)(n=a[i],r=e[n],null!=r.length)&&c.push(r.length);return c}(),i.length||(i=function(){var i,r,s,a;for(s=Ua.keysEndingWith(e,"_"+t),a=[],(i=0,r=s.length);i<r;i++)n=s[i],a.push(1+ie.apply(Math,e[n]));return a}()),i.length?ie.apply(Math,i):0},Ua.numVertices=function(e){return Ua.numType(e,"vertices")},Ua.numEdges=function(e){return Ua.numType(e,"edges")},Ua.numFaces=function(e){return Ua.numType(e,"faces")},Ua.removeDuplicateEdges_vertices=function(e){var t,i,n,r,s,a,c;return s={},i=0,r=function(){var r,o,d,l;for(d=e.edges_vertices,l=[],(r=0,o=d.length);r<o;r++)t=d[r],a=t[0],c=t[1],n=a<c?a+","+c:c+","+a,n in s||(s[n]=i,i+=1),l.push(s[n]);return l}(),Ua.remapField(e,"edges",r),r},Ua.edges_verticesIncident=function(e,t){var i,n,r;for(i=0,n=e.length;i<n;i++)if(r=e[i],0<=Ya.call(t,r))return r;return null};var Ga=function(){var t=Math.round;function e(e,t){var i,n,r,s,a,c,o;for(this.vertices_coords=e,this.epsilon=t,this.hash={},c=this.vertices_coords,(o=r=0,s=c.length);r<s;o=++r)n=c[o],(null==(i=this.hash)[a=this.key(n)]?i[a]=[]:i[a]).push(o)}return e.prototype.lookup=function(e){var i,n,r,s,a,c,o,d,g,f,p,_,u,h,b,E,P,A;for(u=e[0],E=e[1],h=t(u/this.epsilon),P=t(E/this.epsilon),d=[h,h-1,h+1],(i=0,s=d.length);i<s;i++)for(b=d[i],g=[P,P-1,P+1],(r=0,a=g.length);r<a;r++)for(A=g[r],n=b+","+A,p=null==(f=this.hash[n])?[]:f,(o=0,c=p.length);o<c;o++)if(_=p[o],this.epsilon>Ta.dist(this.vertices_coords[_],e))return _;return null},e.prototype.key=function(e){var i,n,r,s,a;return n=e[0],s=e[1],r=t(n/this.epsilon),a=t(s/this.epsilon),i=r+","+a},e.prototype.insert=function(e){var t,i,n;return(n=this.lookup(e),null!=n)?n:((null==(t=this.hash)[i=this.key(e)]?t[i]=[]:t[i]).push(n=this.vertices_coords.length),this.vertices_coords.push(e),n)},e}();Ua.collapseNearbyVertices=function(e,t){var i,n,r;return r=new Ga([],t),n=function(){var t,n,s,a;for(s=e.vertices_coords,a=[],(t=0,n=s.length);t<n;t++)i=s[t],a.push(r.insert(i));return a}(),Ua.remapField(e,"vertices",n)},Ua.maybeAddVertex=function(e,t,n){var r;return r=Ta.closestIndex(t,e.vertices_coords),null!=r&&n>=Ta.dist(t,e.vertices_coords[r])?r:e.vertices_coords.push(t)-1},Ua.addVertexLike=function(e,t){var i,n,r,s,a;for(a=Ua.numVertices(e),s=Ua.keysStartingWith(e,"vertices_"),(i=0,r=s.length);i<r;i++)switch(n=s[i],n.slice(6)){case"vertices":break;default:e[n][a]=e[n][t];}return a},Ua.addEdgeLike=function(e,t,i,n){var r,s,a,c,o;for(r=e.edges_vertices.length,o=Ua.keysStartingWith(e,"edges_"),(s=0,c=o.length);s<c;s++)switch(a=o[s],a.slice(6)){case"vertices":e.edges_vertices.push([null==i?e.edges_vertices[t][0]:i,null==n?e.edges_vertices[t][1]:n]);break;case"edges":break;default:e[a][r]=e[a][t];}return r},Ua.addVertexAndSubdivide=function(t,n,r){var a,c,o,d,l,g,f,p,_,h;if(h=Ua.maybeAddVertex(t,n,r),a=[],h===t.vertices_coords.length-1)for(f=t.edges_vertices,o=l=0,g=f.length;l<g;o=++l)(c=f[o],!(0<=Ya.call(c,h)))&&(p=function(){var e,i,n;for(n=[],e=0,i=c.length;e<i;e++)_=c[e],n.push(t.vertices_coords[_]);return n}(),Ta.pointStrictlyInSegment(n,p)&&(d=Ua.addEdgeLike(t,o,h,c[1]),a.push(o,d),c[1]=h));return[h,a]},Ua.removeLoopEdges=function(e){var t;return Ua.remapFieldSubset(e,"edges",function(){var i,n,r,s;for(r=e.edges_vertices,s=[],(i=0,n=r.length);i<n;i++)t=r[i],s.push(t[0]!==t[1]);return s}())},Ua.subdivideCrossingEdges_vertices=function(t,r,a){var c,d,g,f,_,o,h,y,x,b,E,P,A,w,S,N,L,O,j,C,M,T,z,I,F,B,V,D,R,q;for(d=[[],[]],c=function(e,i,n,r){var s;return s=Ua.addEdgeLike(t,n,e,i),d[r].push(n,s)},y=null==a?0:a;y<t.edges_vertices.length;){for(_=t.edges_vertices[y],F=function(){var e,i,n;for(n=[],e=0,i=_.length;e<i;e++)D=_[e],n.push(t.vertices_coords[D]);return n}(),M=t.vertices_coords,(R=E=0,A=M.length);E<A;R=++E)(C=M[R],!(0<=Ya.call(_,R)))&&Ta.pointStrictlyInSegment(C,F)&&(c(R,_[1],y,0),_[1]=R);y++}for(q=new Ga(t.vertices_coords,r),x=null==a?0:a;x<t.edges_vertices.length;){for(o=t.edges_vertices[x],B=function(){var e,i,n;for(n=[],e=0,i=o.length;e<i;e++)R=o[e],n.push(t.vertices_coords[R]);return n}(),T=t.edges_vertices.slice(0,x),(b=P=0,w=T.length);P<w;b=++P)if(h=T[b],V=function(){var e,i,n;for(n=[],i=0,e=h.length;i<e;i++)R=h[i],n.push(t.vertices_coords[R]);return n}(),!Ua.edges_verticesIncident(o,h)&&Ta.segmentsCross(B,V)){if(g=Ta.lineIntersectLine(B,V),null==g)continue;f=q.insert(g),0<=Ya.call(o,f)&&0<=Ya.call(h,f)||(0>Ya.call(o,f)&&(c(f,o[1],x,0),o[1]=f,B[1]=t.vertices_coords[f]),0>Ya.call(h,f)&&(c(f,h[1],b,1),h[1]=f))}x++}for(j=Ua.removeDuplicateEdges_vertices(t),z=[0,1],(L=0,S=z.length);L<S;L++)y=z[L],d[y]=function(){var e,t,i,r;for(i=d[y],r=[],(t=0,e=i.length);t<e;t++)_=i[t],r.push(j[_]);return r}();for(j=Ua.removeLoopEdges(t),I=[0,1],(O=0,N=I.length);O<N;O++)y=I[O],d[y]=function(){var e,t,i,n;for(i=d[y],n=[],(t=0,e=i.length);t<e;t++)_=i[t],n.push(j[_]);return n}();return null==a?d[0].concat(d[1]):d},Ua.addEdgeAndSubdivide=function(t,n,r,s){var a,c,o,d,l,g,f,p,_,u,h,m,v;if(null!=n.length&&(_=Ua.addVertexAndSubdivide(t,n,s),n=_[0],c=_[1]),null!=r.length&&(u=Ua.addVertexAndSubdivide(t,r,s),r=u[0],o=u[1]),n===r)return[[],[]];for(h=t.edges_vertices,l=f=0,p=h.length;f<p;l=++f)if(d=h[l],d[0]===n&&d[1]===r||d[0]===r&&d[1]===n)return[[l],[]];return g=t.edges_vertices.push([n,r])-1,g?(a=Ua.subdivideCrossingEdges_vertices(t,s,g),0>Ya.call(a[0],g)&&a[0].push(g)):a=[[g],[]],null!=c&&(m=a[1]).push.apply(m,c),null!=o&&(v=a[1]).push.apply(v,o),a},Ua.cutEdges=function(s,a){var c,d,g,f,p,_,u,h,y,x,b,E,P,A,w,S,N,L,O,j,C,M,T,z,I,F,B,V,D,R,X,U,Y,G,Z,K,W,H,Q,J,$,ee,ne,re,se,ae,ce,oe,de;for(de=[],X=Ua.boundaryEdges(s),(A=0,S=X.length);A<S;A++)for(f=X[A],U=s.edges_vertices[f],(w=0,N=U.length);w<N;w++)se=U[w],(null==de[se]?de[se]=[]:de[se]).push(f);for(z=0,L=a.length;z<L;z++){for(p=a[z],_=Ua.addEdgeLike(s,p),G=s.edges_vertices[p],(h=I=0,O=G.length);I<O;h=++I)se=G[h],oe=s.vertices_edges[se],oe.splice(oe.indexOf(p)+h,0,_);for(Z=s.edges_vertices[p],h=V=0,j=Z.length;V<j;h=++V)if(ae=Z[h],ne=s.edges_vertices[p][1-h],re=s.edges_vertices[_][1-h],g=null==(K=de[ae])?void 0:K.length,2<=g){if(2<g)throw new Error(de[ae].length+" boundary edges at vertex "+ae);if(W=de[ae],c=W[0],d=W[1],B=s.vertices_edges[ae],y=B.indexOf(c),x=B.indexOf(d),x===(y+1)%B.length)0!==x&&(B=B.slice(x).concat(B.slice(0,+y+1||9e9)));else if(y===(x+1)%B.length)0!==y&&(B=B.slice(y).concat(B.slice(0,+x+1||9e9)));else throw new Error("Nonadjacent boundary edges at vertex "+ae);for(E=B.indexOf(p),P=B.indexOf(_),b=te(E,P),s.vertices_edges[ae]=B.slice(0,+b+1||9e9),ce=Ua.addVertexLike(s,ae),s.vertices_edges[ce]=B.slice(1+b),H=s.vertices_edges[ce],(D=0,C=H.length);D<C;D++)F=H[D],u=s.edges_vertices[F],u[u.indexOf(ae)]=ce}for(null!=(Q=s.edges_assignment)&&(Q[p]="B"),null!=(J=s.edges_assignment)&&(J[_]="B"),$=s.edges_vertices[p],(h=R=0,M=$.length);R<M;h=++R)se=$[h],(null==de[se]?de[se]=[]:de[se]).push(p);for(Y=s.edges_vertices[_],h=ee=0,T=Y.length;ee<T;h=++ee)se=Y[h],(null==de[se]?de[se]=[]:de[se]).push(_)}return delete s.vertices_vertices,s},Ua.edges_vertices_to_vertices_vertices=function(e){var t,i,n,r,s,a,c,o;for(r=Ua.numVertices(e),c=function(){var e,t,i;for(i=[],a=e=0,t=r;0<=t?e<t:e>t;a=0<=t?++e:--e)i.push([]);return i}(),s=e.edges_vertices,(i=0,n=s.length);i<n;i++){for(t=s[i],a=t[0],o=t[1];a>=c.length;)c.push([]);for(;o>=c.length;)c.push([]);c[a].push(o),c[o].push(a)}return c};var Za={},Ka=function(e,t){return(+e%(t=+t)+t)%t},Wa={}.hasOwnProperty;Za.edges_vertices_to_vertices_vertices_unsorted=function(e){return e.vertices_vertices=Ua.edges_vertices_to_vertices_vertices(e),e},Za.edges_vertices_to_vertices_vertices_sorted=function(e){return Za.edges_vertices_to_vertices_vertices_unsorted(e),Za.sort_vertices_vertices(e)},Za.edges_vertices_to_vertices_edges_sorted=function(e){return Za.edges_vertices_to_vertices_vertices_sorted(e),Za.vertices_vertices_to_vertices_edges(e)},Za.sort_vertices_vertices=function(e){var t,i,n,r,s;if(2!==(null==(i=e.vertices_coords)||null==(n=i[0])?void 0:n.length))throw console.log("fold.vertices_coords",e.vertices_coords),new Error("sort_vertices_vertices: Vertex coordinates missing or not two dimensional");for(s in null==e.vertices_vertices&&Za.edges_vertices_to_vertices_vertices(e),r=e.vertices_vertices,r)t=r[s],Ta.sortByAngle(t,s,function(t){return e.vertices_coords[t]});return e},Za.vertices_vertices_to_faces_vertices=function(e){var t,n,r,s,a,c,o,d,g,f,p,_,h,m,y,b,E,P,A,S;for(p={},_=e.vertices_vertices,(P=r=0,o=_.length);r<o;P=++r)for(f=_[P],n=s=0,d=f.length;s<d;n=++s)b=f[n],p[b+","+P]=f[Ka(n-1,f.length)];for(e.faces_vertices=[],h=function(){var e;for(a in e=[],p)e.push(a);return e}(),(c=0,g=h.length);c<g;c++)if(E=h[c],A=p[E],null!=A){for(p[E]=null,m=E.split(","),b=m[0],P=m[1],b=parseInt(b),P=parseInt(P),t=[b,P];A!==t[0];){if(null==A){console.warn("Confusion with face "+t);break}t.push(A),y=[P,A],b=y[0],P=y[1],A=p[b+","+P],p[b+","+P]=null}p[t[t.length-1]+","+t[0]]=null,null!=A&&0<Ta.polygonOrientation(function(){var i,n,r;for(r=[],n=0,i=t.length;n<i;n++)S=t[n],r.push(e.vertices_coords[S]);return r}())&&e.faces_vertices.push(t)}return e},Za.vertices_edges_to_faces_vertices_edges=function(t){var n,r,s,a,c,o,d,g,f,p,_,u,h,y,b,E,P,A,w,S,N,L;for(b=[],P=t.vertices_edges,(w=o=0,f=P.length);o<f;w=++o)for(y=P[w],b[w]={},(c=d=0,p=y.length);d<p;c=++d)n=y[c],b[w][n]=y[Ka(c-1,y.length)];for(t.faces_vertices=[],t.faces_edges=[],(S=g=0,_=b.length);g<_;S=++g)for(r in E=b[S],E)if(s=E[r],null!=s){if(r=parseInt(r),E[r]=null,a=[r],N=[Ua.edges_verticesIncident(t.edges_vertices[r],t.edges_vertices[s])],null==N[0])throw new Error("Confusion at edges "+r+" and "+s);for(;s!==a[0];){if(null==s){console.warn("Confusion with face containing edges "+a);break}for(a.push(s),A=t.edges_vertices[s],(h=0,u=A.length);h<u;h++)if(w=A[h],w!==N[N.length-1]){N.push(w);break}r=s,s=b[w][r],b[w][r]=null}null!=s&&0<Ta.polygonOrientation(function(){var e,i,r;for(r=[],i=0,e=N.length;i<e;i++)L=N[i],r.push(t.vertices_coords[L]);return r}())&&(t.faces_vertices.push(N),t.faces_edges.push(a))}return t},Za.edges_vertices_to_faces_vertices=function(e){return Za.edges_vertices_to_vertices_vertices_sorted(e),Za.vertices_vertices_to_faces_vertices(e)},Za.edges_vertices_to_faces_vertices_edges=function(e){return Za.edges_vertices_to_vertices_edges_sorted(e),Za.vertices_edges_to_faces_vertices_edges(e)},Za.vertices_vertices_to_vertices_edges=function(e){var t,n,r,s,a,c,o,d,l,g,f;for(n={},c=e.edges_vertices,(t=s=0,a=c.length);s<a;t=++s)o=c[t],d=o[0],l=o[1],n[d+","+l]=t,n[l+","+d]=t;return e.vertices_edges=function(){var t,i,s,a;for(s=e.vertices_vertices,a=[],(g=t=0,i=s.length);t<i;g=++t)f=s[g],a.push(function(){var e,t,i;for(i=[],r=e=0,t=f.length;0<=t?e<t:e>t;r=0<=t?++e:--e)i.push(n[g+","+f[r]]);return i}());return a}()},Za.faces_vertices_to_faces_edges=function(e){var t,n,r,s,a,c,o,d,l,g,f;for(n={},o=e.edges_vertices,(t=a=0,c=o.length);a<c;t=++a)d=o[t],l=d[0],g=d[1],n[l+","+g]=t,n[g+","+l]=t;return e.faces_edges=function(){var t,i,a,c;for(a=e.faces_vertices,c=[],(r=t=0,i=a.length);t<i;r=++t)f=a[r],c.push(function(){var e,t,i;for(i=[],s=e=0,t=f.length;0<=t?e<t:e>t;s=0<=t?++e:--e)i.push(n[f[s]+","+f[(s+1)%f.length]]);return i}());return c}()},Za.faces_vertices_to_edges=function(e){var t,n,r,s,a,c,o,d,l;for(r in e.edges_vertices=[],e.edges_faces=[],e.faces_edges=[],e.edges_assignment=[],n={},c=e.faces_vertices,c)l=c[r],r=parseInt(r),e.faces_edges.push(function(){var i,c,g;for(g=[],s=i=0,c=l.length;i<c;s=++i)o=l[s],o=parseInt(o),d=l[(s+1)%l.length],a=o<=d?o+","+d:d+","+o,a in n?t=n[a]:(t=n[a]=e.edges_vertices.length,o<=d?e.edges_vertices.push([o,d]):e.edges_vertices.push([d,o]),e.edges_faces.push([null,null]),e.edges_assignment.push("B")),o<=d?e.edges_faces[t][0]=r:e.edges_faces[t][1]=r,g.push(t);return g}());return e},Za.deepCopy=function(t){var i,n,r,s,a,c,o,d;if("number"===(c=e(t))||"string"===c||"boolean"===c)return t;if(Array.isArray(t)){for(o=[],r=0,a=t.length;r<a;r++)n=t[r],o.push(Za.deepCopy(n));return o}for(s in i={},t)Wa.call(t,s)&&(d=t[s],i[s]=Za.deepCopy(d));return i},Za.toJSON=function(e){var t,i,n;return"{\n"+function(){var r=[];for(var s=Object.keys(e),a=0;a<s.length;a++)t=s[a],n=e[t],r.push("  "+JSON.stringify(t)+": "+(Array.isArray(n)?"[\n"+function(){var e,t,r;for(r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push("    "+JSON.stringify(i));return r}().join(",\n")+"\n  ]":JSON.stringify(n)));return r}().join(",\n")+"\n}\n"},Za.extensions={},Za.converters={},Za.getConverter=function(e,t){return e===t?function(e){return e}:Za.converters[""+e+t]},Za.setConverter=function(e,t,i){return Za.extensions[e]=!0,Za.extensions[t]=!0,Za.converters[""+e+t]=i},Za.convertFromTo=function(e,t,i){var n;if("."!==t[0]&&(t="."+t),"."!==i[0]&&(i="."+i),n=Za.getConverter(t,i),null==n){if(t===i)return e;throw new Error("No converter from "+t+" to "+i)}return n(e)},Za.convertFrom=function(e,t){return Za.convertFromTo(e,t,".fold")},Za.convertTo=function(e,t){return Za.convertFromTo(e,".fold",t)};var Ha=function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.map(function(t){return"vertices_coords"===t||"edges_vertices"===t?null!=e[t]:"vertices_vertices"===t?(Za.edges_vertices_to_vertices_vertices_sorted(e),!0):"vertices_edges"==t&&(e.vertices_edges=ds(e),!0)}).reduce(function(e,t){return e&&t},!0)},Qa=function(e,t,i){return e.vertices_coords.map(function(e){return e.map(function(e,n){return e-t[n]})}).map(function(e){return e[0]*i[1]-e[1]*i[0]}).map(function(e,t){return re(e)<os.core.EPSILON?t:void 0}).filter(function(e){return void 0!==e})},Ja=function(e,t,i){var n={};return Qa(e,t,i).forEach(function(e){n[e]=!0}),Za.edges_vertices_to_vertices_vertices_sorted(e),e.edges_vertices.map(function(t){return n[t[0]]&&n[t[1]]&&e.vertices_vertices[t[0]].includes(t[1])}).map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e})},$a=function(e,t){if(3>t.length)return!1;var n=t.map(function(t){return e.vertices_coords[t]}),r=Array.from(Array(n[0].length)),s=r.map(function(e,t){return n[1][t]-n[0][t]}),i=r.map(function(e,t){return n[2][t]-n[0][t]});return re(s[0]*i[1]-s[1]*i[0])<os.core.EPSILON},ec=function(e,t){var i=[];t.forEach(function(t){var n=t.vertices,r=t.edges,s=t.assignments[0];Bs(e,"edges",r),i.push({vertices:n,assignment:s})}),i.forEach(function(t){var i=e.edges_vertices.length;e.edges_vertices[i]=t.vertices,e.edges_assignment[i]=t.assignment}),Bs(e,"vertices",t.map(function(e){return e.vertex}))},tc=function(t){Ha(t,"vertices_vertices","vertices_edges");var i=t.vertices_vertices.map(function(e,t){return 2===e.length?t:void 0}).filter(function(e){return void 0!==e}),n=i.map(function(e){return[e].concat(t.vertices_vertices[e])}).map(function(e){return $a(t,e)?{vertex:e[0],vertices:[e[1],e[2]],edges:t.vertices_edges[e[0]]}:void 0}).filter(function(e){return void 0!==e});n.forEach(function(e){e.assignments=e.edges.map(function(i){return t.edges_assignment[i].toUpperCase()})}),n.forEach(function(e){e.valid=e.assignments.map(function(t){return t===e.assignments[0]}).reduce(function(e,t){return e&&t},!0)});var r=n.filter(function(e){return e.valid});return ec(t,r),0<r.length},ic=/*#__PURE__*/Object.freeze({__proto__:null,collinear_vertices:Qa,collinear_edges:Ja,remove_all_collinear_vertices:tc}),nc=function(e){if(null==e.vertices_coords)return[];var t=e.vertices_coords.length,i=Array(t).fill(!1);return e.edges_vertices&&e.edges_vertices.forEach(function(e){e.filter(function(e){return!i[e]}).forEach(function(e){i[e]=!0,t-=1})}),e.faces_vertices&&e.faces_vertices.forEach(function(e){e.filter(function(e){return!i[e]}).forEach(function(e){i[e]=!0,t-=1})}),i.map(function(e,t){return e?void 0:t}).filter(function(e){return void 0!==e})},rc=/*#__PURE__*/Object.freeze({__proto__:null,find_edge_isolated_vertices:function(e){if(null==e.vertices_coords)return[];var t=e.vertices_coords.length,i=Array(t).fill(!1);return e.edges_vertices&&e.edges_vertices.forEach(function(e){e.filter(function(e){return!i[e]}).forEach(function(e){i[e]=!0,t-=1})}),i.map(function(e,t){return e?void 0:t}).filter(function(e){return void 0!==e})},find_face_isolated_vertices:function(e){if(null==e.vertices_coords)return[];var t=e.vertices_coords.length,i=Array(t).fill(!1);return e.faces_vertices&&e.faces_vertices.forEach(function(e){e.filter(function(e){return!i[e]}).forEach(function(e){i[e]=!0,t-=1})}),i.map(function(e,t){return e?void 0:t}).filter(function(e){return void 0!==e})},find_isolated_vertices:nc}),sc=Object.freeze({circular:!0,duplicate:!0}),ac=function(e){var t=e.edges_vertices.map(function(e,t){return e[0]===e[1]?t:void 0}).filter(function(e){return void 0!==e});Bs(e,"edges",t)},cc=function(e,t,i){return e.edges_vertices[t][0]===e.edges_vertices[i][0]&&e.edges_vertices[t][1]===e.edges_vertices[i][1]||e.edges_vertices[t][0]===e.edges_vertices[i][1]&&e.edges_vertices[t][1]===e.edges_vertices[i][0]},oc=function(e){var t=e.edges_vertices.map(function(t,n){for(var i=n+1;i<e.edges_vertices-1-n;i+=1)if(cc(e,n,i))return i});Bs(e,"edges",t)},dc=function(t,i){"object"!==e(i)&&(i={}),Object.keys(sc).filter(function(e){return!(e in i)}).forEach(function(e){i[e]=sc[e]}),!0===i.circular&&ac(t),!0===i.duplicate&&oc(t),!0===i.collinear&&(tc(t),!0===i.circular&&ac(t),!0===i.duplicate&&oc(t)),!0===i.isolated&&Bs(t,"vertices",nc(t))},lc=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:os.core.EPSILON;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(re(e[r]-t[r])>n)return!1;return!0},gc=function(e,t,n){for(var r=t.vertices_coords.map(function(){}),s=0;s<e.vertices_coords.length;s+=1)for(var a=0;a<t.vertices_coords.length;a+=1)lc(e.vertices_coords[s],t.vertices_coords[a],n)&&(r[a]=s,a=t.vertices_coords.length);return r},fc=/*#__PURE__*/Object.freeze({__proto__:null,similar_vertices_coords:gc}),pc=function(t){if("object"===e(t)){if(null==t.vertices_vertices&&(t.vertices_coords&&t.edges_vertices?Za.edges_vertices_to_vertices_vertices_sorted(t):t.edges_vertices&&Za.edges_vertices_to_vertices_vertices_unsorted(t)),null==t.faces_vertices&&t.vertices_coords&&t.vertices_vertices&&Za.vertices_vertices_to_faces_vertices(t),null==t.faces_edges&&t.faces_vertices&&Za.faces_vertices_to_faces_edges(t),null==t.edges_faces){var i=fs(t);void 0!==i&&(t.edges_faces=i)}if(null==t.vertices_faces){var n=hs(t);void 0!==n&&(t.vertices_faces=n)}if(null==t.edges_length){var r=ps(t);void 0!==r&&(t.edges_length=r)}if(null==t.edges_foldAngle&&null!=t.edges_assignment&&(t.edges_foldAngle=t.edges_assignment.map(function(e){return xa(e)})),null==t.edges_assignment&&null!=t.edges_foldAngle&&(t.edges_assignment=t.edges_foldAngle.map(function(e){return 0===e?"F":0>e?"M":0<e?"V":"U"})),null==t.faces_faces){var s=ls(t);void 0!==s&&(t.faces_faces=s)}if(null==t.vertices_edges){var a=ds(t);void 0!==a&&(t.vertices_edges=a)}if(null==t.edges_edges){var c=gs(t);void 0!==c&&(t.edges_edges=c)}}},_c=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:os.core.EPSILON,r=gc(e,t,n),s=t.vertices_coords.filter(function(e,t){return void 0===r[t]}),a=e.vertices_coords.length,c=0;c<r.length;c+=1)void 0===r[c]&&(r[c]=a,a+=1);var o=t.edges_vertices.map(function(e){return e.map(function(e){return r[e]})});return e.vertices_coords=e.vertices_coords.concat(s),e.edges_vertices=e.edges_vertices.concat(o),delete e.vertices_vertices,delete e.vertices_edges,delete e.vertices_faces,delete e.edges_edges,delete e.edges_faces,delete e.faces_vertices,delete e.faces_edges,delete e.faces_faces,dc(e),Ma(e),pc(e),e},uc=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"number",n=!0;return t.forEach(function(t){t.forEach(function(t){if(e(t)!==i)return void(n=!1)})}),n},hc=function(e){return e.map(function(e){return e.map(function(e){return!isNaN(e)}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},mc=function(e,t){return e.map(function(e){return e.map(function(e){return t(e)}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},vc={};vc.vertices_coords=function(e){var t=e.vertices_coords;return null!=t&&uc(t,"number")&&hc(t)},vc.vertices_vertices=function(e){var t=e.vertices_coords,i=e.vertices_vertices,n=e.edges_vertices;if(null==i)return!1;var r=i.map(function(e){return e.length}).reduce(function(e,t){return e+t},0);if(1<re(1*r-2*n.length)&&console.warn("Validate.vertices_vertices, expected array length deviated by more than 1"),null!=i){if(i.length!==t.length)return!1;var s=i.map(function(e,t){return e.map(function(e){return[t,e]})}).reduce(function(e,t){return e.concat(t)},[]);return 0===s.map(function(t){return 0<n.filter(function(i){return t[0]===i[0]&&t[1]===i[1]||t[0]===i[1]&&t[1]===i[0]}).length}).map(function(e,t){return{test:e,i:t}}).filter(function(e){return!e.test}).length}return!1},vc.vertices_faces=function(e){var t=e.vertices_faces,n=e.faces_vertices;return null!=n&&null!=t&&0===t.map(function(e,t){return e.map(function(e){return{test:-1!==n[e].indexOf(t),face:e,i:t}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]).length},vc.edges_vertices=function(e){var t=e.vertices_coords,i=e.edges_vertices;if(null==t)return!0;var r=t.length;return null!=i&&uc(i,"number")&&hc(i)&&mc(i,function(e){return e<r})},vc.edges_faces=function(e){var t=e.edges_faces,i=e.faces_edges;return!1},vc.faces_faces=function(){return!1},vc.vertices_edges=function(){return!1},vc.edges_assignment=function(e){var t=e.edges_vertices,i=e.edges_assignment;return null!=t&&null!=i&&i.length===t.length&&i.filter(function(e){return va.includes(e)}).reduce(function(e,t){return e&&t},!0)},vc.edges_foldAngle=function(){return!1},vc.edges_length=function(){return!1},vc.faces_vertices=function(e){var t=e.vertices_faces,i=e.faces_vertices;return null!=t&&0===i.map(function(e,n){return e.map(function(e){return{test:-1!==t[e].indexOf(n),face:e,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]).length},vc.faces_edges=function(){return!1};var yc=function(t){if("object"!==e(t)||null===t)return!1;for(var n=Object.keys(t),r=0;r<n.length;r+=1)if(ma.includes(n[r]))return!0;return!1},kc=function(e){var t={vertices:["coords","vertices","faces"],edges:["vertices","faces","assignment","foldAngle","length"],faces:["vertices","edges"]};["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","faces_vertices","faces_edges"].filter(function(t){return t in e}).forEach(function(t){if(e[t].map(function(e){return 0<e.filter(function(e){return null==e}).length}).reduce(function(e,t){return e||t},!1))throw new Error("".concat(t," contains a null"))}),["edges_assignment","edges_foldAngle","edges_length"].filter(function(t){return t in e}).forEach(function(t){if(0<e[t].filter(function(e){return null==e}).length)throw new Error("".concat(t," contains a null"))});var i=Object.keys(t).map(function(e){return{prefix:e,suffixes:t[e]}}).map(function(t){return t.suffixes.map(function(e){return"".concat(t.prefix,"_").concat(e)}).filter(function(t){return null!=e[t]}).map(function(t,i,n){return e[t].length===e[n[0]].length}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0);if(!i)throw new Error("validate failed: arrays with common keys have mismatching lengths");var n={vertices:e.vertices_coords.length,edges:e.edges_vertices.length,faces:e.faces_vertices.length||e.faces_edges.length},r=Object.keys(t).map(function(e){return{prefix:e,suffixes:t[e]}}).map(function(t){return t.suffixes.map(function(e){return{key:"".concat(t.prefix,"_").concat(e),suffix:e}}).filter(function(t){return null!=e[t.key]&&null!=n[t.suffix]}).map(function(t){return{key:t.key,test:e[t.key].reduce(function(e,i){return i.reduce(function(e,i){return e&&i<n[t.suffix]},!0)},!0)}})}).reduce(function(e,t){return e.concat(t)},[]);if(r.filter(function(e){return!e.test}).forEach(function(t){throw console.log(e),new Error("".concat(t.key," contains a index too large, larger than the reference array to which it points"))}),"vertices_vertices"in e){var s=e.vertices_vertices.map(function(e,t){return e.map(function(e){return[t,e]})}).reduce(function(e,t){return e.concat(t)},[]),a=s.map(function(t){return 0<e.edges_vertices.filter(function(i){return t[0]===i[0]&&t[1]===i[1]||t[0]===i[1]&&t[1]===i[0]}).length}).map(function(e,t){return{test:e,i:t}}).filter(function(e){return!e.test});if(0<a.length)throw new Error("vertices_vertices at index ".concat(a[0].i," declares an edge that doesn't exist in edges_vertices"))}if("vertices_faces"in e){var c=e.vertices_faces.map(function(t,n){return t.map(function(t){return{test:-1!==e.faces_vertices[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);if(0<c.length)throw new Error("vertex ".concat(c[0].i," in vertices_faces connects to face ").concat(c[0].face,", whereas in faces_vertices this same connection in reverse doesn't exist."))}if("edges_faces"in e){var o=e.edges_faces.map(function(t,n){return t.map(function(t){return{test:-1!==e.faces_edges[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);if(0<o.length)throw new Error("edges_faces ".concat(o[0].i," connects to face ").concat(o[0].face,", whereas in faces_edges this same connection in reverse doesn't exist."))}if("faces_vertices"in e&&"vertices_faces"in e)e.faces_vertices.map(function(t,n){return t.map(function(t){return{test:-1!==e.vertices_faces[t].indexOf(n),face:t,i:n}}).filter(function(e){return!e.test})}).reduce(function(e,t){return e.concat(t)},[]);return!0},xc=/*#__PURE__*/Object.freeze({__proto__:null,arrayOfType:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"number",n=!0;return t.forEach(function(t){if(e(t)!==i)return void(n=!1)}),n},arrayOfArrayOfType:uc,possibleFoldObject:yc,default:vc,validate_first:kc}),bc=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:os.core.EPSILON;["vertices_vertices","vertices_edges","vertices_faces","edges_faces","edges_edges","faces_vertices","faces_edges","faces_faces"].filter(function(t){return t in e}).forEach(function(t){return delete e[t]}),Object.keys(e).filter(function(e){return e.includes("re:")}).forEach(function(t){return delete e[t]});var i=Ma(e,t);Bs(i,"edges",Ts(i)),Za.edges_vertices_to_vertices_vertices_sorted(i),Za.vertices_vertices_to_faces_vertices(i),Za.faces_vertices_to_faces_edges(i),i.edges_faces=fs(i),i.vertices_faces=hs(i),i.edges_length=ps(i),Object.assign(e,i),vc.edges_assignment(e)||(e.edges_assignment=Array(e.edges_vertices.length).fill("F")),!1=="file_spec"in e&&(e.file_spec=1.1),!1=="frame_attributes"in e&&(e.frame_attributes=["2D"]),!1=="frame_classes"in e&&(e.frame_classes=["creasePattern"])},Ec=function(e,t){Ea(e,"coords").forEach(function(i){e[i]=e[i].map(function(e){return os.core.multiply_matrix2_vector2(t,e)})}),Ea(e,"matrix").forEach(function(i){e[i]=e[i].map(function(e){return os.core.multiply_matrices2(e,t)})})},Pc=function(e,t){var i=os.core.make_matrix2_scale(t);Ec(e,i)},Ac=function(e,t,i){var n=os.core.make_matrix2_translate(t,i);Ec(e,n)},wc=/*#__PURE__*/Object.freeze({__proto__:null,transform_scale:Pc,transform_translate:Ac,transform_matrix:function(e,t){Ec(e,t)}}),Sc=function(e,t){var i=this;Object.defineProperty(e,"degree",{get:function(){return i.vertices_vertices&&i.vertices_vertices[t]?i.vertices_vertices[t].length:null}})},Nc=function(t,e){var i=this;Object.defineProperty(t,"coords",{get:function(){return i.edges_vertices&&i.edges_vertices[e]&&i.vertices_coords?i.edges_vertices[e].map(function(e){return i.vertices_coords[e]}):void 0}})},Lc=function(e,t){var i=this;Object.defineProperty(e,"simple",{get:function(){if(!i.faces_vertices||!i.faces_vertices[t])return null;for(var n=0;n<e.length-1;n+=1)for(var r=n+1;r<e.length;r+=1)if(i.faces_vertices[t][n]===i.faces_vertices[t][r])return!1;return!0}})},Oc=function(e,t){var i=this;Object.defineProperty(e,"coords",{get:function(){return i.faces_vertices&&i.faces_vertices[t]&&i.vertices_coords?i.faces_vertices[t].map(function(e){return i.vertices_coords[e]}):void 0}})},jc=function(e,t){Sc.call(this,e,t)},Cc=function(t,e){Nc.call(this,t,e)},Mc=function(e,t){Lc.call(this,e,t),Oc.call(this,e,t)},Tc=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.load=function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!0!==i.append&&ma.forEach(function(e){return delete t[e]}),Object.assign(this,{file_spec:pa,file_creator:_a},ca(e))},t.join=function(e,t){_c(this,e,t)},t.clear=function(){var e=this;ha.graph.forEach(function(t){return delete e[t]})},t.copy=function(){return Object.assign(Object.create(e()),ca(this))},t.clean=function(){dc(this)},t.populate=function(){pc(this)},t.fragment=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e-6;Ma(this,e)},t.rebuild=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e-6;bc(this,e)},t.translate=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];Ac.apply(wc,[this].concat(t))},t.scale=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];Pc.apply(wc,[this].concat(t))};return t.nearestVertex=function(){var e=Os(this,(i=os.core).get_vector.apply(i,arguments)),t=Aa(this,"vertices",e),i;return jc.call(this,t,e),t.index=e,t},t.nearestEdge=function(){var e=js(this,(i=os.core).get_vector.apply(i,arguments)),t=Aa(this,"edges",e),i;return Cc.call(this,t,e),t.index=e,t},t.nearestFace=function(){var e=Cs(this,(t=os.core).get_vector.apply(t,arguments)),t;if(void 0!==e){var i=Aa(this,"faces",e);return Mc.call(this,i,e),i.index=e,i}},t.nearest=function(){var e=(i=os.core).get_vector.apply(i,arguments),t={vertex:this.nearestVertex(this,e),edge:this.nearestEdge(this,e),face:this.nearestFace(this,e)},i;return Object.keys(t).filter(function(e){return null==t[e]}).forEach(function(e){return delete t[e]}),t},Object.defineProperty(t,"vertices",{get:function(){var e=Pa(this,"vertices"),t=0===e.length?Array.from(Array(Ls(this))).map(function(){return{}}):e;return t.forEach(jc.bind(this)),t}}),Object.defineProperty(t,"edges",{get:function(){var e=Pa(this,"edges");return e.forEach(Cc.bind(this)),e}}),Object.defineProperty(t,"faces",{get:function(){var e=Pa(this,"faces");return e.forEach(Mc.bind(this)),e}}),Object.freeze(t)},zc=function(e,t,i){if(void 0!==e.vertices_coords){var n=e.vertices_coords.length;return e.vertices_coords[n]=[t,i],n}},Ic=function(t,i,e,r){if(!(t.edges_vertices.length<r)){var s=zc(t,i,e),a=t.edges_vertices[r];null==t.vertices_vertices&&(t.vertices_vertices=[]),t.vertices_vertices[s]=ca(a),a.forEach(function(e,n,i){var r=i[(n+1)%i.length],a=t.vertices_vertices[e].indexOf(r);t.vertices_vertices[e][a]=s}),null!=t.edges_faces&&null!=t.edges_faces[r]&&(t.vertices_faces[s]=ca(t.edges_faces[r]));var c=[{edges_vertices:[a[0],s]},{edges_vertices:[s,a[1]]}];c.forEach(function(n,e){n.i=t.edges_vertices.length+e}),["edges_faces","edges_assignment","edges_foldAngle"].filter(function(e){return null!=t[e]&&null!=t[e][r]}).forEach(function(e){c[0][e]=ca(t[e][r]),c[1][e]=ca(t[e][r])}),c.forEach(function(e,r){var i=e.edges_vertices.map(function(e){return t.vertices_coords[e]}),s;c[r].edges_length=(s=os.core).distance2.apply(s,n(i))}),c.forEach(function(e){return Object.keys(e).filter(function(e){return"i"!==e}).filter(function(e){return void 0!==t[e]}).forEach(function(i){t[i][e.i]=e[i]})});var o=t.edges_faces[r],d=o.map(function(e){return t.faces_vertices[e]}),l=o.map(function(e){return t.faces_edges[e]});d.forEach(function(e){return e.map(function(e,t,i){var n=(t+1)%i.length;return e===a[0]&&i[n]===a[1]||e===a[1]&&i[n]===a[0]?n:void 0}).filter(function(e){return void 0!==e}).sort(function(e,t){return t-e}).forEach(function(t){return e.splice(t,0,s)})}),l.forEach(function(e){var i=e.indexOf(r),a=e[(i+e.length-1)%e.length],o=e[(i+1)%e.length],d=[[a,r],[r,o]].map(function(e){var i=e.map(function(i){return t.edges_vertices[i]});return i[0][0]===i[1][0]||i[0][0]===i[1][1]?i[0][0]:i[0][1]}).reduce(function(e,t){return e.concat(t)},[]),l=[[d[0],s],[s,d[1]]].map(function(e){var t=e.map(function(e){return-1!==c[0].edges_vertices.indexOf(e)}).reduce(function(e,t){return e&&t},!0),i=e.map(function(e){return-1!==c[1].edges_vertices.indexOf(e)}).reduce(function(e,t){return e&&t},!0);if(t)return c[0].i;if(i)return c[1].i;throw new Error("something wrong with input graph's faces_edges construction")});return i===e.length-1?(e.splice(i,1,l[0]),e.unshift(l[1])):e.splice.apply(e,[i,1].concat(n(l))),l});var g=Bs(t,"edges",[r]);return{vertices:{new:[{index:s}]},edges:{map:g,replace:[{old:r,new:c.map(function(e){return e.i})}]}}}},Fc=function(e,t){for(var n=[],r=1;r<e.length;r++)e[r]!==e[r-1]&&n.push(r);for(var s=1;s<t.length;s++)if(t[s]!==t[s-1]);var a=t.slice();return n.forEach(function(e){return a.splice(e,0,0===e?0:a[e-1])}),e.map(function(e,t){return e+a[t]})},Bc=function(t,r,s,c){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"F",d=t.faces_vertices[r].map(function(e){return t.vertices_coords[e]}).map(function(e){return os.core.point_on_line(s,c,e)?e:void 0}).map(function(e,n){return{point:e,i_face:n,i_vertices:t.faces_vertices[r][n]}}).filter(function(e){return void 0!==e.point}),l=t.faces_edges[r].map(function(e){return t.edges_vertices[e]}).map(function(e){return e.map(function(i){return t.vertices_coords[i]})}).map(function(e){return os.core.intersection.line_segment_exclusive(s,c,e[0],e[1])}).map(function(e,n){return{point:e,i_face:n,i_edges:t.faces_edges[r][n]}}).filter(function(e){return void 0!==e.point}),g=[],f=Array(t.edges_vertices.length).fill(0),p;if(2===l.length)g=l.map(function(e,n,i){var r=Ic(t,e.point[0],e.point[1],e.i_edges);return i.slice(n+1).filter(function(e){return null!=r.edges.map[e.i_edges]}).forEach(function(e){e.i_edges+=r.edges.map[e.i_edges]}),f=Fc(f,r.edges.map),r.vertices["new"][0].index});else if(1===l.length&&1===d.length){var _=d.map(function(e){return e.i_vertices}),e=l.map(function(e,n,i){var r=Ic(t,e.point[0],e.point[1],e.i_edges);return i.slice(n+1).filter(function(e){return null!=r.edges.map[e.i_edges]}).forEach(function(e){e.i_edges+=r.edges.map[e.i_edges]}),f=r.edges.map,r.vertices["new"][0].index});g=_.concat(e)}else if(2===d.length){g=d.map(function(e){return e.i_vertices});var i=t.faces_vertices[r],a=d,u=i[(a[0].i_face+1)%i.length]===a[1].i_vertices,h=i[(a[1].i_face+1)%i.length]===a[0].i_vertices;if(u||h)return{}}else return{};var m=g.map(function(e){return t.faces_vertices[r].indexOf(e)}).sort(function(e,t){return e-t}),v=[{},{}];v[0].vertices=t.faces_vertices[r].slice(m[1]).concat(t.faces_vertices[r].slice(0,m[0]+1)),v[1].vertices=t.faces_vertices[r].slice(m[0],m[1]+1),v[0].edges=t.faces_edges[r].slice(m[1]).concat(t.faces_edges[r].slice(0,m[0])).concat([t.edges_vertices.length]),v[1].edges=t.faces_edges[r].slice(m[0],m[1]).concat([t.edges_vertices.length]),v[0].index=t.faces_vertices.length,v[1].index=t.faces_vertices.length+1;var y=[{index:t.edges_vertices.length,vertices:n(g),assignment:o,foldAngle:xa(o),length:(p=os.core).distance2.apply(p,n(g.map(function(e){return t.vertices_coords[e]}))),faces:[t.faces_vertices.length,t.faces_vertices.length+1]}],k=t.edges_vertices.length,x=t.faces_vertices.length;v.forEach(function(e,n){return Object.keys(e).filter(function(e){return"index"!==e}).forEach(function(i){t["faces_".concat(i)][x+n]=e[i]})}),y.forEach(function(e,n){return Object.keys(e).filter(function(e){return"index"!==e}).filter(function(e){return void 0!==t["edges_".concat(e)]}).forEach(function(i){t["edges_".concat(i)][k+n]=e[i]})}),y.forEach(function(e){var i=e.vertices[0],n=e.vertices[1];t.vertices_vertices[i].push(n),t.vertices_vertices[n].push(i)});var b={};t.faces_vertices.map(function(e,t){return{face:e,i:t}}).filter(function(e){return e.i===x||e.i===x+1}).forEach(function(e){return e.face.forEach(function(t){null==b[t]&&(b[t]=[]),b[t].push(e.i)})}),t.vertices_faces.forEach(function(e,s){for(var i=e.indexOf(r);-1!==i;){var a;(a=t.vertices_faces[s]).splice.apply(a,[i,1].concat(n(b[s]))),i=e.indexOf(r)}});var E={};t.faces_edges.map(function(e,t){return{face:e,i:t}}).filter(function(e){return e.i===x||e.i===x+1}).forEach(function(t){return t.face.forEach(function(i){null==E[i]&&(E[i]=[]),E[i].push(t.i)})}),t.edges_faces.forEach(function(e,s){for(var i=e.indexOf(r);-1!==i;){var a;(a=t.edges_faces[s]).splice.apply(a,[i,1].concat(n(E[s]))),i=e.indexOf(r)}});var P=Bs(t,"faces",[r]);return{faces:{map:P,replace:[{old:r,new:v}]},edges:{new:y,map:f}}},Vc=function(e,t){var i=e.map(function(e,n){return t[n]?n:void 0}).filter(function(e){return void 0!==e}),n=e.map(function(e,n){return t[n]?void 0:n}).filter(function(e){return void 0!==e}),r=i.slice().sort(function(t,i){return e[t]-e[i]}),s=n.slice().sort(function(t,i){return e[t]-e[i]}),a=[];s.forEach(function(e,t){a[e]=t});var c=s.length;return r.reverse().forEach(function(e,t){a[e]=c+t}),a},Dc=function(e){return{type:"flip",direction:e}},Rc=function(e,t,i,n){var r=[i[0]-e[0],i[1]-e[1]],s=t[0]*r[1]-t[1]*r[0];return n?0<s:0>s},qc=function(e,t){return e.faces_vertices[t].map(function(t){return e.vertices_coords[t]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(i){return i/e.faces_vertices[t].length})},Xc=function(e,t,i,n){var r=Ns(e);e["faces_re:preindex"]=Array.from(Array(r)).map(function(e,t){return t}),!1=="faces_re:matrix"in e&&(e["faces_re:matrix"]=ys(e,n)),e["faces_re:coloring"]=Es(e["faces_re:matrix"]),e["faces_re:creases"]=e["faces_re:matrix"].map(function(e){return os.core.invert_matrix2(e)}).map(function(e){return os.core.multiply_matrix2_line2(e,t,i)}),e["faces_re:center"]=Array.from(Array(r)).map(function(t,n){return qc(e,n)}),e["faces_re:sidedness"]=Array.from(Array(r)).map(function(t,n){return Rc(e["faces_re:creases"][n].origin,e["faces_re:creases"][n].vector,e["faces_re:center"][n],e["faces_re:coloring"][n])})},Uc=function(e){var t=Ns(e);null==e["faces_re:layer"]&&(e["faces_re:layer"]=Array(t).fill(0))},Yc=function(e){var t=[0,-Infinity],i=[1/0,0],n=[-Infinity,0],r=[0,1/0];e.forEach(function(e){e[0]<i[0]&&(i=e),e[0]>n[0]&&(n=e),e[1]<r[1]&&(r=e),e[1]>t[1]&&(t=e)});var s=re(t[1]-r[1]),a=re(n[0]-i[0]);return s>a?[r,t]:[i,n]},Gc=function(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"V",s=r;if("M"===r||"m"===r?s="V":("V"===r||"v"===r)&&(s="M"),null==n){var a=Cs(e,t);n=void 0===a?0:a}Uc(e),Xc(e,t,i,n);var c=ca(e),o=Array.from(Array(Ns(e))).map(function(e,t){return t}).reverse().map(function(t){var i=Bc(c,t,c["faces_re:creases"][t].origin,c["faces_re:creases"][t].vector,c["faces_re:coloring"][t]?r:s);if(null!=i&&null!=i.faces)return i.faces.replace.forEach(function(t){return t["new"].map(function(e){return e.index}).map(function(e){return e+i.faces.map[e]}).forEach(function(n){c["faces_re:center"][n]=qc(c,n),c["faces_re:sidedness"][n]=Rc(e["faces_re:creases"][t.old].origin,e["faces_re:creases"][t.old].vector,c["faces_re:center"][n],e["faces_re:coloring"][t.old]),c["faces_re:layer"][n]=e["faces_re:layer"][t.old],c["faces_re:preindex"][n]=e["faces_re:preindex"][t.old]})}),{index:t,length:i.edges["new"][0].length,edge:i.edges["new"][0].vertices.map(function(e){return c.vertices_coords[e]})}}).reverse();c["faces_re:layer"]=Vc(c["faces_re:layer"],c["faces_re:sidedness"]);var d=void 0===o[0]?0:c["faces_re:preindex"].map(function(e,t){return{pre:e,new:t}}).filter(function(e){return 0===e.pre}).filter(function(e){return c["faces_re:sidedness"][e["new"]]}).shift()["new"],l=e["faces_re:matrix"][0];("M"===r||"m"===r||"V"===r||"v"===r)&&(l=void 0!==o[0]||e["faces_re:sidedness"][0]?os.core.multiply_matrices2(e["faces_re:matrix"][0],os.core.make_matrix2_reflection(e["faces_re:creases"][0].vector,e["faces_re:creases"][0].origin)):e["faces_re:matrix"][0]);var g=ys(c,d).map(function(e){return os.core.multiply_matrices2(l,e)});c["faces_re:coloring"]=Es(g);var f=os.core.multiply_matrix2_line2(l,e["faces_re:creases"][0].origin,e["faces_re:creases"][0].vector),p=os.core.normalize([f.vector[1],-f.vector[0]]),_=o.map(function(t,n){return void 0===t?void 0:t.edge.map(function(t){return os.core.multiply_matrix2_vector2(e["faces_re:matrix"][n],t)})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e.concat(t)},[]);return c["re:construction"]=0===_.length?Dc(p):{type:"fold",assignment:r,direction:p,edge:Yc(_)},c["vertices_re:foldedCoords"]=xs(c,d,g),c["faces_re:matrix"]=g.map(function(e){return e.map(function(e){return os.core.clean_number(e,14)})}),delete e["faces_re:creases"],delete c["faces_re:creases"],delete e["faces_re:sidedness"],delete c["faces_re:sidedness"],delete e["faces_re:preindex"],delete c["faces_re:preindex"],delete e["faces_re:coloring"],delete c["faces_re:coloring"],delete e["faces_re:center"],delete c["faces_re:center"],c},Zc=function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return e?{file_spec:pa,file_creator:_a,file_author:"",file_title:"",file_description:"",file_classes:[],file_frames:[],frame_description:"",frame_attributes:[],frame_classes:[],frame_unit:""}:{file_spec:pa,file_creator:_a}},Kc=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return{"faces_re:layer":Array.from(Array(e)).map(function(e,t){return t}),"faces_re:matrix":Array.from(Array(e)).map(function(){return[1,0,0,1,0,0]})}},Wc=function(){return{file_classes:["singleModel"],frame_attributes:["2D"],frame_classes:["creasePattern"]}},Hc=function(){return{vertices_coords:[[0,0],[1,0],[1,1],[0,1]],vertices_vertices:[[1,3],[2,0],[3,1],[0,2]],vertices_faces:[[0],[0],[0],[0]],edges_vertices:[[0,1],[1,2],[2,3],[3,0]],edges_faces:[[0],[0],[0],[0]],edges_assignment:["B","B","B","B"],edges_foldAngle:[0,0,0,0],edges_length:[1,1,1,1],faces_vertices:[[0,1,2,3]],faces_edges:[[0,1,2,3]]}},Qc=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object.assign(Object.create(e),Zc())},Jc=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object.assign(Object.create(e),Zc(),Wc(),Hc(),Kc(1))},$c=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=Hc();return i.vertices_coords=[[0,0],[e,0],[e,t],[0,t]],i.edges_length=[e,t,e,t],Object.assign(Object.create(null),Zc(),Wc(),i,Kc(1))},eo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=Array.from(Array(e)),r=2*ne/e,s=os.core.clean_number(oe(de(t-t*ae(r),2)+de(t*se(r),2))),a={vertices_coords:n.map(function(e,t){return r*t}).map(function(e){return[os.core.clean_number(t*ae(e)),os.core.clean_number(t*se(e))]}),vertices_vertices:n.map(function(e,t){return[(t+1)%n.length,(t+n.length-1)%n.length]}),vertices_faces:n.map(function(){return[0]}),edges_vertices:n.map(function(e,t){return[t,(t+1)%n.length]}),edges_faces:n.map(function(){return[0]}),edges_assignment:n.map(function(){return"B"}),edges_foldAngle:n.map(function(){return 0}),edges_length:n.map(function(){return s}),faces_vertices:[n.map(function(e,t){return t})],faces_edges:[n.map(function(e,t){return t})]};return Object.assign(Object.create(null),Zc(),Wc(),a,Kc(1))},to=function(e,t){var n={vertices:ws(e),edges:Ss(e),faces:Ns(e)};return t["new"]&&Object.keys(t["new"]).forEach(function(r){return t["new"][r].forEach(function(t,s){return Object.keys(t).forEach(function(i){e[i][n[r]+s]=t[i]})})}),t.update&&Object.keys(t.update).forEach(function(n){return Object.keys(t.update[n]).forEach(function(i){e[i][n]=t.update[n][i]})}),t.remove&&(t.remove.faces&&Bs(e,"faces",t.remove.faces),t.remove.edges&&Bs(e,"edges",t.remove.edges),t.remove.vertices&&Bs(e,"vertices",t.remove.vertices)),t},io=function(e,t,i){var n=ba(e,t),r={};return n.forEach(function(t){r[t]=e[t][i]}),r},no=function(t,i,e,n,r){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"U",a=os.segment(i,e,n,r),c=[0,1].map(function(e){return t.vertices_coords.map(function(t){return oe(de(a[e][0]-t[0],2)+de(a[e][1]-t[1],2))}).map(function(e,t){return e<os.core.EPSILON?t:void 0}).filter(function(e){return void 0!==e}).shift()}),o=t.edges_vertices.map(function(e){return e.map(function(e){return t.vertices_coords[e]})}),d=[0,1].map(function(t){return o.map(function(i){return os.core.point_on_segment(i[0],i[1],a[t])}).map(function(e,t){return e?t:void 0}).filter(function(t){return void 0!==t}).shift()}),l=[0,1].map(function(e){return void 0===c[e]?void 0===d[e]?"new":"edge":"vertex"}),g={new:{vertices:[],edges:[{edges_vertices:[]}]},remove:{edges:[]}},f=ws(t),p=function(e){g["new"].vertices.push({vertices_coords:[a[e][0],a[e][1]]}),f+=1,g["new"].edges[0].edges_vertices[e]=f-1};return[0,1].forEach(function(n){switch(l[n]){case"vertex":g["new"].edges[0].edges_vertices[n]=c[n];break;case"edge":{p(n);var i=io(t,"edges",d[n]);[ca(i),ca(i)].forEach(function(e,i){e.edges_vertices=[t.edges_vertices[d[n]][i],f-1],g["new"].edges.push(e)}),g.remove.edges.push(d[n])}break;default:p(n);}}),g["new"].edges.filter(function(t){return void 0===t.edges_assignment}).forEach(function(t){t.edges_assignment=s}),g.apply=function(){return to(t,g)},g},ro=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return[0,1].map(function(e){return t.filter(function(t,n){return n%2===e}).reduce(function(e,t){return e+t},0)})},so=function(){return ro.apply(void 0,arguments).map(function(e){return 0>e?e+2*ne:e}).map(function(e){return ne-e}).map(function(e){return os.core.clean_number(e,14)})},ao=function(e,t){return e.vertices_vertices[t].map(function(i){return[e.vertices_coords[i][0]-e.vertices_coords[t][0],e.vertices_coords[i][1]-e.vertices_coords[t][1]]})},co=function(e,t){return ao(e,t).map(function(e,t,i){return os.core.counter_clockwise_angle2(i[t],i[(t+1)%i.length])})},oo=function(e,t){return so.apply(void 0,n(co(e,t)))},lo=function(e){var t=bs(e),i=Array.from(Array(e.vertices_coords.length)).map(function(n,r){return t[r]?[0,0]:oo(e,r)});return i},go=function(e){var t=Array.from(Array(e.vertices_coords.length)),i=lo(e),n=e.vertices_vertices,r=t.map(function(t,n){return ao(e,n)}),s=t.map(function(){return[]});return i.forEach(function(e,t){0===e[0]||n[t].forEach(function(i,n){s[t][i]=[-r[t][n][1]*e[n%2],r[t][n][0]*e[n%2]]})}),s},fo=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(function(e,t,i){return os.core.counter_clockwise_angle2_radians(e,i[(t+1)%i.length])}).map(function(e,t,i){return i.slice(t+1,i.length).concat(i.slice(0,t))}).map(function(e){return so.apply(void 0,n(e))}).map(function(e,n){return t[n]+e[0]}).map(function(e,n){return os.core.is_counter_clockwise_between(e,t[n],t[(n+1)%t.length])?e:void 0})},po=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.map(function(e){return ce(e[1],e[0])});return fo.apply(void 0,n(r)).map(function(e){return void 0===e?void 0:[os.core.clean_number(ae(e),14),os.core.clean_number(se(e),14)]})},_o=/*#__PURE__*/Object.freeze({__proto__:null,alternating_sum:ro,kawasaki_flatness:so,vertex_adjacent_vectors:ao,vertex_sectorAngles:co,vertex_kawasaki_flatness:oo,make_vertices_sectorAngles:function(e){return Array.from(Array(e.vertices_coords.length)).map(function(t,n){return co(e,n)})},make_vertices_kawasaki_flatness:function(e){return Array.from(Array(e.vertices_coords.length)).map(function(t,n){return oo(e,n)})},make_vertices_kawasaki:lo,make_vertices_nudge_matrix:go,kawasaki_test:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:os.core.EPSILON;if(null==e.vertices_coords)return!1;if(null==e.vertices_vertices);return lo(e).map(function(e){return e.map(function(e){return re(e)<t}).reduce(function(e,t){return e&&t},!0)}).reduce(function(e,t){return e&&t},!0)},make_vertices_nudge:function(e){var t=go(e),n=t.map(function(e){return e.reduce(function(e,t){var i=0===t.length?0:os.core.magnitude(t);return e>i?e:i},0)}),r=t.map(function(e,t){return e.map(function(e){return os.core.magnitude(e)/n[t]})}),s=r.map(function(e){return e.map(function(e){return 1/e})}),a=t.map(function(e,t){return e.map(function(e,i){return e.map(function(e){return e*s[t][i]})})}),c=a.map(function(e){return e.reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0])});return c},kawasaki_solutions_radians:fo,kawasaki_solutions:po,kawasaki_collapse:E}),uo=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(function(e){return"string"==typeof e}).filter(function(e){return 1===e.length}).shift()},ho=function(e,t){return Object.defineProperty(t,"valley",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="V"}),t}}),Object.defineProperty(t,"mountain",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="M"}),t}}),Object.defineProperty(t,"mark",{value:function(){return t.forEach(function(t){e.edges_assignment[t]="F"}),t}}),t},mo={rebuild:!0,change:!0},vo=function(t){if("object"!==e(t)||null===t)return!1;for(var n=Object.keys(t),r=Object.keys(mo),s=0;s<n.length;s+=1)if(r.includes(n[s]))return!0;return!1},yo=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.filter(function(t){return"object"===e(t)}).filter(function(e){return vo(e)}).shift();return void 0===r?ca(mo):Object.assign(ca(mo),r)},ko=function(e){var t=this,i=function(i){for(var r=arguments.length,s=Array(1<r?r-1:0),a=1,c,o,d,g;a<r;a++)s[a-1]=arguments[a];"edge"===i?d=(c=os.core).get_vector_of_vectors.apply(c,s):(g=(o=os.core).get_line.apply(o,s),d=[g.origin,g.vector]);var f={line:os.core.intersection.convex_poly_line,ray:os.core.intersection.convex_poly_ray,edge:os.core.intersection.convex_poly_segment};return e.map(function(e){return e.vertices.map(function(e){return t.vertices_coords[e]})}).map(function(e){return f[i].apply(f,[e].concat(n(d)))}).filter(function(e){return void 0!==e})};return e.clipLine=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["line"].concat(t))},e.clipRay=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["ray"].concat(t))},e.clipSegment=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,["edge"].concat(t))},e},xo=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=Object.assign(Object.create(Tc()),Qc(),t,{file_spec:pa,file_creator:_a});i.square=function(){var e=this;Object.keys(this).forEach(function(t){return delete e[t]});var t=$c(1,1);Object.keys(t).forEach(function(i){e[i]=t[i]})},i.regularPolygon=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;Object.keys(this).forEach(function(t){return delete e[t]});var n=eo(t,i);Object.keys(n).forEach(function(t){e[t]=n[t]})};var n=function(){return ko.call(this,[Ds(this)])},r=function(){if(!1!="frame_classes"in this){var e=this.frame_classes.indexOf("creasePattern"),t=this.frame_classes.indexOf("foldedForm");return-1===e&&-1===t||-1!==e&&-1!==t?void 0:-1!==t}};i.clean2=function(){dc(this,{collinear:!0,isolated:!0}),this["faces_re:matrix"]=ys(this),null!=this[ua.FACES_LAYER]&&null!=this.faces_vertices&&this[ua.FACES_LAYER].length!==this.faces_vertices.length&&delete this[ua.FACES_LAYER]};var a=function(){this.didChange.forEach(function(e){return e()})};return i.segment=function(){var e=(s=os.core).flatten_input.apply(s,arguments).filter(function(e){return"number"==typeof e}),t=n.call(this),i=t.clipSegment([e[0],e[1]],[e[2],e[3]]),r=uo.apply(void 0,arguments)||"F",s;no(this,i[0],i[1],i[2],i[3],r).apply(),bc(this),a.call(this);var c=Ja(this,[i[0],i[1]],[i[2]-i[0],i[3]-i[1]]);return ho(this,c)},i.line=function(){var e=(s=os.core).flatten_input.apply(s,arguments).filter(function(e){return"number"==typeof e}),t=n.call(this),i=t.clipLine([e[0],e[1]],[e[2],e[3]]),r=uo.apply(void 0,arguments)||"F",s;no(this,i[0],i[1],i[2],i[3],r).apply(),bc(this),a.call(this);var c=Ja(this,[i[0],i[1]],[i[2]-i[0],i[3]-i[1]]);return ho(this,c)},i.axiom=function(){var e;RabbitEar.axiom(2,start[0],start[1],end[0],end[1]).solutions.forEach(function(e){return app.origami.line(e[0][0],e[0][1],e[1][0],e[1][1])}),Ma(this),this.clean2();var t=(e=os.core).flatten_input.apply(e,arguments).filter(function(e){return"number"==typeof e}),i=n.call(this),r=i.clipLine([t[0],t[1]],[t[2],t[3]]),s=uo.apply(void 0,arguments)||"F";no(this,r[0],r[1],r[2],r[3],s).apply(),bc(this),a.call(this);var c=Ja(this,[r[0],r[1]],[r[2]-r[0],r[3]-r[1]]);return ho(this,c)},i.mark=function(){var e=(n=os.core).get_vector_of_vectors.apply(n,arguments),t=yo.apply(void 0,arguments),i=uo.apply(void 0,arguments)||"F",n;no(this,e[0][0],e[0][1],e[1][0],e[1][1],i).apply(),t.rebuild&&bc(this),t.change&&this.didChange.forEach(function(e){return e()})},i.crease=function(){for(var t=this,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var s=n.filter(function(t){return"object"===e(t)}),c=os.core.get_line(n),o=uo.apply(void 0,n)||"V",d=n.filter(function(e){return null!==e&&!isNaN(e)}).shift();if(!os.core.is_vector(c.origin)||!os.core.is_vector(c.vector))return void console.warn("fold was not supplied the correct parameters");var l=Gc(this,c.origin,c.vector,d,o);Object.keys(l).forEach(function(e){t[e]=l[e]}),!0=="re:construction"in this&&0<s.length&&!0=="axiom"in s[0]&&(this["re:construction"].axiom=s[0].axiom,this["re:construction"].parameters=s[0].parameters),a.call(this)},i.creaseRay=function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=os.ray(i),s=this.faces_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}),a=s.map(function(e,t){return void 0===os.core.intersection.convex_poly_ray_exclusive(e,r.origin,r.vector)?void 0:t}).filter(function(e){return void 0!==e}).sort(function(e,t){return t-e});a.forEach(function(t){return Bc(e,t,r.origin,r.vector,"F")})},i.kawasaki=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=E.apply(void 0,[this].concat(t));return a.call(this),n},Object.defineProperty(i,"boundaries",{get:n}),Object.defineProperty(i,"isFolded",{value:r}),Object.defineProperty(i,"clear",{value:function(){var e=this;Rs(this),Object.keys(this).filter(function(e){return e.includes("re:")}).forEach(function(t){return delete e[t]}),delete this.vertices_vertices,delete this.vertices_faces,delete this.edges_faces,this.didChange.forEach(function(e){return e()})}}),i.didChange=[],i},bo=function(e){return 128>e.length&&-1!==e.indexOf(".")},Eo=function(e){return"svg"===e.tagName||0<e.getElementsByTagName("svg").length},Po=function(e){var t=e.getElementsByTagName("object");return!!(0<t.length)&&0<Array.from(t).filter(function(e){return"oripa.DataSet"===e.className}).length},Ao={SVG:"svg",Svg:"svg",svg:"svg",FOLD:"fold",Fold:"fold",fold:"fold",ORIPA:"oripa",Oripa:"oripa",oripa:"oripa",".SVG":"svg",".Svg":"svg",".svg":"svg",".FOLD":"fold",".Fold":"fold",".fold":"fold",".ORIPA":"oripa",".Oripa":"oripa",".oripa":"oripa"},wo=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];if(0>=i.length)throw new Error("convert(), load(), missing a file as a parameter");var r=i[0],s;if(2<=i.length&&"string"==typeof i[1]&&(s=Ao[i[1]],void 0===s))throw new Error("expected a file type (like 'svg'), ".concat(i[1]," is unsupported"));if(void 0!==s)return"string"==typeof r?"fold"===s?{data:JSON.parse(r),type:s}:"svg"===s||"oripa"===s?{data:new qs.DOMParser().parseFromString(r,"text/xml").documentElement,type:s}:{data:r,type:s}:{data:r,type:s};var a=e(r);if("string"===a){try{var c=JSON.parse(r);if(yc(c))return{data:c,type:"fold"}}catch(e){var o=new qs.DOMParser().parseFromString(r,"text/xml").documentElement;if(!(0<o.getElementsByTagName("parsererror").length))return Eo(o)?{data:o,type:"svg"}:Po(o)?{data:o,type:"oripa"}:void 0;if(bo(r))throw new Error("did you provide a file name? please load the file first and pass in the data.");else throw new Error("unable to load file. tried XML, JSON")}return}if("object"===a)try{var d=JSON.parse(JSON.stringify(r));return{data:d,type:"fold"}}catch(e){return"function"==typeof r.getElementsByTagName?Eo(r)?{data:r,type:"svg"}:Po(r)?{data:r,type:"oripa"}:void 0:void 0}},So={};So.type2fold={0:"F",1:"B",2:"M",3:"V"},So.fold2type={};var No=So.type2fold;for(var Lo in No){var x=No[Lo];So.fold2type[x]=Lo}So.fold2type_default=0,So.prop_xml2fold={editorName:"frame_author",originalAuthorName:"frame_designer",reference:"frame_reference",title:"frame_title",memo:"frame_description",paperSize:null,mainVersion:null,subVersion:null},So.POINT_EPS=1,So.toFold=function(e,t){var i,r,s,a,c,o,d,g,f,p,_,u,h,v,y,x,b,E,P,A,w,S,N,L,O,C,M,T,z,I,F,B,V,D;for(r={vertices_coords:[],edges_vertices:[],edges_assignment:[],file_creator:"oripa2fold"},z=function(e,t){var i;return i=r.vertices_coords.length,r.vertices_coords.push([parseFloat(e),parseFloat(t)]),i},y=function(e,t,i,n){return null!=t&&e.tagName!==t?(console.warn("ORIPA file has "+e.tagName+" where "+t+" was expected"),null):null==i||e.hasAttribute(i)&&(null==n||e.getAttribute(i)===n)?e:(console.warn("ORIPA file has "+e.tagName+" with "+i+" = "+e.getAttribute(i)+" where "+n+" was expected"),null)},i=function(e){var t,i,n,r,s;if(e){for(r=e.childNodes,s=[],(i=0,n=r.length);i<n;i++)t=r[i],1===t.nodeType&&s.push(t);return s}return[]},b=function(e,t,n,r){var s;return s=i(e),1===s.length?y(s[0],t,n,r):(console.warn("ORIPA file has "+e.tagName+" with "+e.childNodes.length+" children, not 1"),null)},E=function(e){var t;return 1<e.childNodes.length?(console.warn("ORIPA file has "+e.tagName+" with "+e.childNodes.length+" children, not 0 or 1"),null):0===e.childNodes.length?"":(t=e.childNodes[0],3===t.nodeType?t.data:console.warn("ORIPA file has nodeType "+t.nodeType+" where 3 (text) was expected"))},B=!0===t?e:new DOMParser().parseFromString(e,"text/xml").documentElement,w=i(B),(s=0,o=w.length);s<o;s++)if(M=w[s],y(M,"object","class","oripa.DataSet"))for(S=i(M),a=0,d=S.length;a<d;a++)if(A=S[a],"lines"===A.getAttribute("property")){for(u=b(A,"array","class","oripa.OriLineProxy"),N=i(u),(c=0,g=N.length);c<g;c++)if(_=N[c],y(_,"void","index"))for(L=i(_),h=0,f=L.length;h<f;h++)if(x=L[h],y(x,"object","class","oripa.OriLineProxy")){for(I=F=V=D=T=0,O=i(x),(v=0,p=O.length);v<p;v++)if(C=O[v],y(C,"void","property"))switch(C.getAttribute("property")){case"x0":I=E(b(C,"double"));break;case"x1":F=E(b(C,"double"));break;case"y0":V=E(b(C,"double"));break;case"y1":D=E(b(C,"double"));break;case"type":T=E(b(C,"int"));}null!=I&&null!=F&&null!=V&&null!=D?(r.edges_vertices.push([z(I,V),z(F,D)]),null!=T&&(T=parseInt(T)),r.edges_assignment.push(So.type2fold[T])):console.warn("ORIPA line has missing data: "+I+" "+F+" "+V+" "+D+" "+T)}}else A.getAttribute("property")in So.prop_xml2fold?(P=So.prop_xml2fold[A.getAttribute("property")],null!=P&&(r[P]=E(b(A,"string")))):console.warn("Ignoring "+A.tagName+" "+M.getAttribute("property")+" in ORIPA file");return Ua.collapseNearbyVertices(r,So.POINT_EPS),Ua.subdivideCrossingEdges_vertices(r,So.POINT_EPS),Za.edges_vertices_to_faces_vertices(r),r},So.fromFold=function(e){var t,n,r,a,c,o,d,l,g,f,p,_,u;for(u in"string"==typeof e&&(e=JSON.parse(e)),f="<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n<java version=\"1.5.0_05\" class=\"java.beans.XMLDecoder\"> \n <object class=\"oripa.DataSet\"> \n  <void property=\"mainVersion\"> \n   <int>1</int> \n  </void> \n  <void property=\"subVersion\"> \n   <int>1</int> \n  </void> \n  <void property=\"paperSize\"> \n   <double>400.0</double> \n  </void> \n",g=So.prop_xml2fold,g)r=g[u],f+=(".\n  <void property=\""+u+"\"> \n   <string>"+(e[r]||"")+"</string> \n  </void> \n").slice(2);for(l=function(){var i,r,s,a;for(s=e.edges_vertices,a=[],(n=i=0,r=s.length);i<r;n=++i)t=s[n],_=function(){var i,n,r,s,a,c;for(c=[],i=0,r=t.length;i<r;i++){for(p=t[i],a=e.vertices_coords[p].slice(2),(n=0,s=a.length);n<s;n++)a[n];c.push(e.vertices_coords[p])}return c}(),a.push({x0:_[0][0],y0:_[0][1],x1:_[1][0],y1:_[1][1],type:So.fold2type[e.edges_assignment[n]]||So.fold2type_default});return a}(),f+=(".\n  <void property=\"lines\"> \n   <array class=\"oripa.OriLineProxy\" length=\""+l.length+"\"> \n").slice(2),(a=c=0,o=l.length);c<o;a=++c)d=l[a],f+=(".\n    <void index=\""+a+"\"> \n     <object class=\"oripa.OriLineProxy\"> \n      <void property=\"type\"> \n       <int>"+d.type+"</int> \n      </void> \n      <void property=\"x0\"> \n       <double>"+d.x0+"</double> \n      </void> \n      <void property=\"x1\"> \n       <double>"+d.x1+"</double> \n      </void> \n      <void property=\"y0\"> \n       <double>"+d.y0+"</double> \n      </void> \n      <void property=\"y1\"> \n       <double>"+d.y1+"</double> \n      </void> \n     </object> \n    </void> \n").slice(2);return f+=".\n   </array> \n  </void> \n </object> \n</java> \n".slice(2),f};var y="undefined"!=typeof window&&"undefined"!=typeof window.document,Oo="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,jo="object"===("undefined"==typeof self?"undefined":e(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,Co=function(){var e={};if(Oo){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else y&&(e=window);return e}(),Mo={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",orange:"#ffa500",aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"},To=Object.keys(Mo),zo=function(e){var t=0,i=0,n=0,s=255;return 4===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3])):7===e.length?(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6])):5===e.length?(t="0x".concat(e[1]).concat(e[1]),i="0x".concat(e[2]).concat(e[2]),n="0x".concat(e[3]).concat(e[3]),s="0x".concat(e[4]).concat(e[4])):9===e.length&&(t="0x".concat(e[1]).concat(e[2]),i="0x".concat(e[3]).concat(e[4]),n="0x".concat(e[5]).concat(e[6]),s="0x".concat(e[7]).concat(e[8])),[+(t/255),+(i/255),+(n/255),+(s/255)]},Io=function(e){if(null==e||"string"!=typeof e)return"U";var t=[0,0,0,1];"#"===e[0]?t=zo(e):-1!==To.indexOf(e)&&(t=zo(Mo[e]));var i=.05;return t[0]<i&&t[1]<i&&t[2]<i?"U":t[0]>t[1]&&t[0]-t[2]>i?"M":t[2]>t[1]&&t[2]-t[0]>i?"V":"U"},Fo=1e-6,Bo=function(e){var t=e.map(function(e){return e*e}).reduce(function(e,t){return e+t},0);return oe(t)},Vo=function(e,t){return e>Fo&&e<1-Fo&&t>Fo&&t<1-Fo},Do=function(e,t,i,n,r){function s(e,t){return e[0]*t[1]-t[0]*e[1]}var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:Fo,c=s(t,n);if(!(re(c)<a)){var o=s([i[0]-e[0],i[1]-e[1]],n),d=s([e[0]-i[0],e[1]-i[1]],t),l=o/c;return r(l,d/-c,a)?[e[0]+t[0]*l,e[1]+t[1]*l]:void 0}},Ro={core:{EPSILON:Fo,magnitude:Bo,normalize:function(e){var t=Bo(e);return 0===t?e:e.map(function(e){return e/t})},equivalent:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Fo,r=0;r<e.length;r+=1)if(re(e[r]-t[r])>n)return!1;return!0},point_on_edge_exclusive:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Fo,r=[t[0]-i[0],t[1]-i[1]],s=[t[0]-e[0],t[1]-e[1]],a=[i[0]-e[0],i[1]-e[1]],c=oe(r[0]*r[0]+r[1]*r[1]),o=oe(s[0]*s[0]+s[1]*s[1]),d=oe(a[0]*a[0]+a[1]*a[1]);return re(c-o-d)<n},intersection:{segment_segment_exclusive:function(e,t,i,n,r){var s=[t[0]-e[0],t[1]-e[1]],a=[n[0]-i[0],n[1]-i[1]];return Do(e,s,i,a,Vo,r)}}}},qo=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ie.apply(Math,n(t.filter(function(e){return void 0!==e}).map(function(e){return e.length})))},Xo={vertices:function(e){var t=e.vertices_coords,i=e.vertices_faces,n=e.vertices_vertices;return qo([],t,i,n)},edges:function(e){var t=e.edges_vertices,i=e.edges_faces;return qo([],t,i)},faces:function(e){var t=e.faces_vertices,i=e.faces_edges;return qo([],t,i)}},Uo=function(e,t,i){var n=Xo[t](e),r=Array(n).fill(!1);i.forEach(function(e){r[e]=!0});var a=0,c=r.map(function(e){return e?--a:a});if(0===i.length)return c;var o="".concat(t,"_"),d="_".concat(t),l=Object.keys(e),g=l.map(function(e){return e.substring(0,o.length)===o?e:void 0}).filter(function(e){return void 0!==e}),f=l.map(function(e){return e.substring(e.length-d.length,e.length)===d?e:void 0}).filter(function(e){return void 0!==e});return f.forEach(function(t){return e[t].forEach(function(n,r){return e[t][r].forEach(function(i,n){e[t][r][n]+=c[i]})})}),g.forEach(function(t){e[t]=e[t].filter(function(e,t){return!r[t]})}),c},Yo=function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},Go=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ro.core.EPSILON,r=i.map(function(e){return e.map(function(e){return t[e]})});return r.map(function(i){return t.filter(function(e){return Ro.core.point_on_edge_exclusive(e,i[0],i[1],n)})})},Zo=function(e){var t=e.vertices_coords,i=e.edges_vertices,n=i.map(function(e){return e.map(function(e){return t[e]})}),r=n.map(function(t){return[t[1][0]-t[0][0],t[1][1]-t[0][1]]}),s=r.map(function(t){return oe(t[0]*t[0]+t[1]*t[1])}),a=r.map(function(t,e){return[t[0]/s[e],t[1]/s[e]]});return a.map(function(t){return .707<re(t[0])})},Ko=function(e){for(var t=e.vertices_coords,n=e.edges_vertices,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ro.core.EPSILON,s=n.length,a=n.map(function(e){return e.map(function(e){return t[e]})}),c=Array.from(Array(s-1)).map(function(){return[]}),o=0;o<a.length-1;o+=1)for(var d=o+1;d<a.length;d+=1)c[o][d]=Ro.core.intersection.segment_segment_exclusive(a[o][0],a[o][1],a[d][0],a[d][1],r);for(var l=Array.from(Array(s)).map(function(){return[]}),g=0;g<a.length-1;g+=1)for(var f=g+1;f<a.length;f+=1)null!=c[g][f]&&(l[g].push(c[g][f]),l[f].push(c[g][f]));return l},Wo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ro.core.EPSILON,n=function(e,t){return e[0]-t[0]},r=function(e,t){return e[1]-t[1]},s=Zo(e),a=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})});a.forEach(function(t,e){return t.sort(s[e]?n:r)});var c=Ko(e,t),o=Go(e,t),d=c.map(function(e,t){return e.concat(o[t])});d.forEach(function(t,e){return t.sort(s[e]?n:r)});var l=d.map(function(e){return Array.from(Array(e.length-1)).map(function(t,n){return[e[n],e[n+1]]})});l=l.map(function(e){return e.filter(function(n){return!1===n.map(function(e,r){return re(n[0][r]-n[1][r])<t}).reduce(function(e,t){return e&&t},!0)})});for(var g=l.map(function(e,t){return e.map(function(){return t})}).reduce(function(e,t){return e.concat(t)},[]),f=l.map(function(e){return e.reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),p=0,_=l.map(function(e){return e.map(function(){return[p++,p++]})}).reduce(function(e,t){return e.concat(t)},[]),u=Array.from(Array(f.length)).map(function(){return[]}),h=0;h<f.length-1;h+=1)for(var m=h+1;m<f.length;m+=1)u[h][m]=Ro.core.equivalent(f[h],f[m],t);var y=f.map(function(){});u.forEach(function(e,t){return e.forEach(function(e,i){e&&(y[i]=void 0===y[t]?t:y[t])})});var k=y.map(function(e){return void 0!==e});y.forEach(function(e,t){void 0===e&&(y[t]=t)}),_.forEach(function(e,t){return e.forEach(function(e,i){_[t][i]=y[e]})});for(var x=Array.from(Array(_.length)).map(function(){return[]}),b=0;b<_.length-1;b+=1)for(var E=b+1;E<_.length;E+=1)x[b][E]=Yo(_[b],_[E]);var P=_.map(function(){});x.forEach(function(e,t){return e.forEach(function(e,i){e&&(P[t]=void 0===P[i]?i:P[i])})});var A=P.map(function(e){return void 0===e});P.forEach(function(e,t){void 0===e&&(P[t]=t)});var w=_.filter(function(e,t){return A[t]}),S=g.filter(function(e,t){return A[t]}),N={vertices_coords:f,edges_vertices:w};!0=="edges_assignment"in e&&(N.edges_assignment=S.map(function(t){return e.edges_assignment[t]})),!0=="edges_foldAngle"in e&&(N.edges_foldAngle=S.map(function(t){return e.edges_foldAngle[t]}));var L=k.map(function(e,t){return e?t:void 0}).filter(function(e){return void 0!==e});return Uo(N,"vertices",L),N},Ho=function(e){var t=e.edges_vertices,n={};return t.map(function(e){return e.sort(function(e,t){return e-t}).join(" ")}).forEach(function(e,t){n[e]=t}),n},Qo=function(e,t,i){for(var n=e.vertices_vertices,r=[t,i];r[0]!==r[r.length-1]&&r[r.length-1]!==r[r.length-2];){var s=n[r[r.length-1]],a=s.indexOf(r[r.length-2]),c=s[(a+1)%s.length];r.push(c)}return r.pop(),r},Jo=function(e){if(null==e.vertices_coords||1>e.vertices_coords.length)return[];for(var t=0,n=1;n<e.vertices_coords.length;n+=1)e.vertices_coords[n][1]<e.vertices_coords[t][1]&&(t=n);if(-1===t)return[];for(var r=e.vertices_vertices[t],s=r.map(function(i){return[e.vertices_coords[i][0]-e.vertices_coords[t][0],e.vertices_coords[i][1]-e.vertices_coords[t][1]]}),a=s.map(function(e){return Ro.core.normalize(e)}).map(function(e){return e[0]}),c=-1,o=-Infinity,d=0;d<a.length;d+=1)a[d]>o&&(c=d,o=a[d]);var l=Qo(e,t,r[c]),g=Ho(e),f=l.map(function(e,t,i){return[i[t],i[(t+1)%i.length]].sort(function(e,t){return e-t}).join(" ")}),p=f.map(function(e){return g[e]});return p},$o="undefined"!=typeof window&&"undefined"!=typeof window.document,ed="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,td=function(){var e={};if(ed){var t=require("xmldom"),i=t.DOMParser,n=t.XMLSerializer;e.DOMParser=i,e.XMLSerializer=n,e.document=new i().parseFromString("<!DOCTYPE html><title> </title>","text/html")}else $o&&(e=window);return e}(),id={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},nd=/([astvzqmhlc])([^astvzqmhlc]*)/ig,rd=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;L.prototype={constructor:L,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var i=C(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i)},getTangentAtLength:function(e){var i=C(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),n=oe(t.x*t.x+t.y*t.y),r;return r=0<n?{x:t.x/n,y:t.y/n}:{x:0,y:0},r},getPropertiesAtLength:function(e){var i=C(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i),n=oe(t.x*t.x+t.y*t.y),r;r=0<n?{x:t.x/n,y:t.y/n}:{x:0,y:0};var s=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],i);return{x:s.x,y:s.y,tangentX:r.x,tangentY:r.y}}};var sd=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],ad=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],cd=[[1],[1,1],[1,2,1],[1,3,3,1]];D.prototype={constructor:D,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=R({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getTangentAtLength:function(e){0>e?e=0:e>this.length&&(e=this.length);var t=R({x:this.x0,y:this.y0},this.rx,this.ry,this.xAxisRotate,this.LargeArcFlag,this.SweepFlag,{x:this.x1,y:this.y1},e/this.length);return{x:t.x,y:t.y}},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),i=this.getPointAtLength(e);return{x:i.x,y:i.y,tangentX:t.x,tangentY:t.y}}},H.prototype.getTotalLength=function(){return oe(de(this.x0-this.x1,2)+de(this.y0-this.y1,2))},H.prototype.getPointAtLength=function(e){var t=e/oe(de(this.x0-this.x1,2)+de(this.y0-this.y1,2)),i=(this.x1-this.x0)*t,n=(this.y1-this.y0)*t;return{x:this.x0+i,y:this.y0+n}},H.prototype.getTangentAtLength=function(){var e=oe((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}},H.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),i=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:i.x,tangentY:i.y}};var od={value:0},dd=function(e){return e.split(" ").filter(function(e){return""!==e}).map(function(e){return e.split(",").map(function(e){return parseFloat(e)})})},ld=function(e,t){var i=t.map(function(t){for(var n=0;n<e.attributes.length;n+=1)if(e.attributes[n].nodeName===t)return n});return i.map(function(t){return void 0===t?od:e.attributes[t]}).map(function(e){return void 0===e.value?e.baseVal.value:e.value})},gd=function(e){for(var t="",n=0;n<e.attributes.length;n+=1)if("points"===e.attributes[n].nodeName){t=e.attributes[n].value;break}return dd(t).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},fd={line:function(e){return[ld(e,["x1","y1","x2","y2"])]},rect:function(e){var t=ld(e,["x","y","width","height"]),i=parseFloat(t[0]),n=parseFloat(t[1]),r=parseFloat(t[2]),s=parseFloat(t[3]);return[[i,n,i+r,n],[i+r,n,i+r,n+s],[i+r,n+s,i,n+s],[i,n+s,i,n]]},circle:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:64,i=ld(e,["cx","cy","r"]),n=parseFloat(i[0]),s=parseFloat(i[1]),a=parseFloat(i[2]);return Array.from(Array(t)).map(function(e,r){return[n+a*ae(2*(r/t*ne)),s+a*se(2*(r/t*ne))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},ellipse:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:64,i=ld(e,["cx","cy","rx","ry"]),n=parseFloat(i[0]),r=parseFloat(i[1]),s=parseFloat(i[2]),a=parseFloat(i[3]);return Array.from(Array(t)).map(function(e,c){return[n+s*ae(2*(c/t*ne)),r+a*se(2*(c/t*ne))]}).map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]})},polygon:gd,polyline:function(e){var t=gd(e);return t.pop(),t},path:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:128,i=e.getAttribute("d"),n=Q(i),r=n.getTotalLength(),s="Z"===i[i.length-1]||"z"===i[i.length-1],a=s?r/t:r/(t-1),c=Array.from(Array(t)).map(function(e,t){return n.getPointAtLength(t*a)}).map(function(e){return[e.x,e.y]}),o=c.map(function(e,t,i){return[i[t][0],i[t][1],i[(t+1)%i.length][0],i[(t+1)%i.length][1]]});return s||o.pop(),o}},pd={line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:["points"],polyline:["points"],path:["d"]},_d=function e(t){return"g"===t.tagName||"svg"===t.tagName?null==t.childNodes?[]:Array.from(t.childNodes).map(function(t){return e(t)}).reduce(function(e,t){return e.concat(t)},[]):[t]},ud=function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5],e[2]*t[0]+e[3]*t[2]+t[4],e[2]*t[1]+e[3]*t[3]+t[5]]},hd=function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},md=function(e){var t=e.match(/(\w+\((\-?\d+\.?\d*e?\-?\d*,?\s*)+\))+/g),i=t.map(function(e){return e.match(/[\w\.\-]+/g)});return i.map(function(e){return{transform:e.shift(),parameters:e.map(function(e){return parseFloat(e)})}})},vd=function(e){switch(e.length){case 1:return[1,0,0,1,e[0],0];case 2:return[1,0,0,1,e[0],e[1]];default:console.warn("improper translate, ".concat(e));}},yd=function(e){var t=ae(e[0]/180*ne),i=se(e[0]/180*ne);switch(e.length){case 1:return[t,i,-i,t,0,0];case 3:return[t,i,-i,t,-e[1]*t+e[2]*i+e[1],-e[1]*i-e[2]*t+e[2]];default:console.warn("improper rotate, ".concat(e));}},kd=function(e){switch(e.length){case 1:return[e[0],0,0,e[0],0,0];case 2:return[e[0],0,0,e[1],0,0];default:console.warn("improper scale, ".concat(e));}},xd=function(e){return[1,0,J(e[0]/180*ne),1,0,0]},bd=function(e){return[1,J(e[0]/180*ne),0,1,0,0]},Ed=function(e,t){switch(e){case"translate":return vd(t);case"rotate":return yd(t);case"scale":return kd(t);case"skewX":return xd(t);case"skewY":return bd(t);case"matrix":return t;default:console.warn("unknown transform type ".concat(e));}},Pd=function(e){return md(e).map(function(e){return Ed(e.transform,e.parameters)}).filter(function(e){return void 0!==e}).reduce(function(e,t){return hd(e,t)},[1,0,0,1,0,0])},Ad=function(e){if("function"!=typeof e.getAttribute)return[1,0,0,1,0,0];var t=e.getAttribute("transform");return null!=t&&""!==t?Pd(t):[1,0,0,1,0,0]},wd=function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[1,0,0,1,0,0],n=hd(i,Ad(t));if(t.matrix=n,"g"===t.tagName||"svg"===t.tagName){if(null==t.childNodes)return;Array.from(t.childNodes).forEach(function(t){return e(t,n)})}},Sd=Object.keys(fd),Nd=function(e){return Array.from(e.attributes).filter(function(t){return-1===pd[e.tagName].indexOf(t.name)})},Ld=function(e){var t={};return e.forEach(function(e){t[e.nodeName]=e.value}),t},Od=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r="object"===e(i.resolution)?i.resolution:{};"number"==typeof i.resolution&&["circle","ellipse","path"].forEach(function(e){r[e]=i.resolution}),wd(t);var s=_d(t),a=s.filter(function(e){return-1!==Sd.indexOf(e.tagName)}).map(function(e){return fd[e.tagName](e,r[e.tagName]).map(function(t){return ud(t,e.matrix)}).map(function(t){return[].concat(n(t),[Nd(e)])})}).reduce(function(e,t){return e.concat(t)},[]);return a.filter(function(e){return void 0!==e[4]}).forEach(function(e){var t=e[4].filter(function(e){return"transform"!==e.nodeName});e[4]=Ld(t)}),a},jd="http://www.w3.org/2000/svg",Cd=["version","xmlns","contentScriptType","contentStyleType","baseProfile","class","externalResourcesRequired","x","y","width","height","viewBox","preserveAspectRatio","zoomAndPan","style"],Md={defs:!0,metadata:!0,title:!0,desc:!0,style:!0},Td=function(e,t){var i=td.document.createElementNS(jd,"svg");return void 0!==t&&Cd.map(function(e){return{attribute:e,value:t.getAttribute(e)}}).filter(function(e){return null!=e.value&&""!==e.value}).forEach(function(e){return i.setAttribute(e.attribute,e.value)}),null===i.getAttribute("xmlns")&&i.setAttribute("xmlns",jd),Array.from(t.childNodes).filter(function(e){return Md[e.tagName]}).map(function(e){return e.cloneNode(!0)}).forEach(function(e){return i.appendChild(e)}),e.forEach(function(e){var t=td.document.createElementNS(jd,"line");pd.line.forEach(function(n,r){return t.setAttributeNS(null,n,e[r])}),null!=e[4]&&Object.keys(e[4]).forEach(function(i){return t.setAttribute(i,e[4][i])}),i.appendChild(t)}),i},zd=Object.freeze({input:"string",output:"string",resolution:Object.freeze({circle:64,ellipse:64,path:128})}),Id=function(e){return"string"==typeof e||e instanceof String?new td.DOMParser().parseFromString(e,"text/xml").documentElement:e},Fd=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:zd,i="svg"===t.input?e:Id(e),n=Od(i,t);if("data"===t.output)return n;var r=Td(n,i);if("svg"===t.output)return r;var s=new td.XMLSerializer().serializeToString(r);return P(s)},Bd={convert:Za},Vd={V:180,v:180,M:-180,m:-180},Dd=function(e){return Vd[e]||0},Rd=function(){return{file_spec:1.1,file_creator:"Rabbit Ear",file_classes:["singleModel"],frame_title:"",frame_classes:["creasePattern"],frame_attributes:["2D"],vertices_coords:[],vertices_vertices:[],vertices_faces:[],edges_vertices:[],edges_faces:[],edges_assignment:[],edges_foldAngle:[],edges_length:[],faces_vertices:[],faces_edges:[]}},qd=function(e,t){var i=Rd(),n=i.vertices_coords.length,r=Fd(e,{output:"data"});i.vertices_coords=r.map(function(e){return[[e[0],e[1]],[e[2],e[3]]]}).reduce(function(e,t){return e.concat(t)},i.vertices_coords),i.edges_vertices=r.map(function(e,t){return[n+2*t,n+2*t+1]}),i.edges_assignment=r.map(function(e){return e[4]}).map(function(e){return null==e?"U":Io(e.stroke)});var s=Wo(i,t.epsilon);return Bd.convert.edges_vertices_to_vertices_vertices_sorted(s),Bd.convert.vertices_vertices_to_faces_vertices(s),Bd.convert.faces_vertices_to_faces_edges(s),s.edges_foldAngle=s.edges_assignment.map(function(e){return Dd(e)}),!1!==t.boundary&&Jo(s).forEach(function(e){s.edges_assignment[e]="B"}),s},Xd=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var i=new Co.DOMParser().parseFromString(e,"text/xml").documentElement;return qd(i,t)}return qd(e,t)};Xd.core={segmentize:function(){},fragment:Wo};var Ud=function(e,t,i){switch(t){case"fold":switch(i){case"fold":return e;case"oripa":return So.fromFold(e);case"svg":return dt(e);}break;case"oripa":switch(i){case"fold":return So.toFold(e,!0);case"oripa":return e;case"svg":return dt(So.toFold(e,!0));}break;case"svg":for(var n=arguments.length,r=Array(3<n?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];switch(i){case"fold":return Xd.apply(void 0,[e].concat(r));case"oripa":return So.fromFold(Xd.apply(void 0,[e].concat(r)));case"svg":return e;}}},Yd=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Gd=function(e){var t=e.toLowerCase(),i=e.toUpperCase(),n=Yd(t),r=[t,i,n];return["","to","into"].map(function(e){return r.map(function(t){return e+t})}).reduce(function(e,t){return e.concat(t)},[])},Zd=function(){var e=wo.apply(void 0,arguments),t={};return["fold","svg","oripa"].forEach(function(i){return Gd(i).forEach(function(n){return Object.defineProperty(t,n,{value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ud.apply(void 0,[e.data,e.type,i].concat(n))}})})}),t},Kd="foldedForm",Wd="creasePattern",Hd="vertices_re:foldedCoords",Qd="vertices_re:unfoldedCoords",Jd="faces_re:matrix",$d=Object.freeze({touchFold:!1}),el=function(){var t=Object.keys($d),i={};return Array.apply(void 0,arguments).filter(function(t){return"object"===e(t)}).forEach(function(e){return Object.keys(e).filter(function(e){return t.includes(e)}).forEach(function(t){i[t]=e[t]})}),i},tl=function(e){return null==e||null==e.frame_classes?void 0:!!e.frame_classes.includes(Kd)||!e.frame_classes.includes(Wd)&&void 0},il=function(e,t){null==e.frame_classes&&(e.frame_classes=[]);var i=tl(e);if(t!==i){e.frame_classes=e.frame_classes.filter(function(e){return![Wd,Kd].includes(e)}).concat([t?Kd:Wd]),t&&!(Hd in e)&&(!(Jd in e)&&(null==e.faces_vertices&&pc(e),e[Jd]=ys(e,0)),!(Hd in e)&&(e[Hd]=xs(e,null,e[Jd])));var n=t?Hd:Qd,r=t?Qd:Hd;!0==n in e&&(e[r]=e.vertices_coords,e.vertices_coords=e[n],delete e[n])}},nl=function(e,t){if(!1=="file_frames"in e||e.file_frames.length<t)return e;var i=["frame_parent","frame_inherit"],n={visited_frames:[]};return function e(t,i,r){if(-1!==n.visited_frames.indexOf(i))throw new Error("encountered a cycle in file_frames. can't flatten.");return n.visited_frames.push(i),r=[i].concat(r),0===i?r:t.file_frames[i-1].frame_inherit&&null!=t.file_frames[i-1].frame_parent?e(t,t.file_frames[i-1].frame_parent,r):r}(e,t,[]).map(function(t){if(0===t){var n=e.file_frames;e.file_frames=null;var r=ca(e);return e.file_frames=n,delete r.file_frames,i.forEach(function(e){return delete r[e]}),r}var s=ca(e.file_frames[t-1]);return i.forEach(function(e){return delete s[e]}),s}).reduce(function(e,t){return Object.assign(e,t)},{})},rl=/*#__PURE__*/Object.freeze({__proto__:null,flatten_frame:nl,merge_frame:function(e,t){var i=ca(t);["frame_parent","frame_inherit"].forEach(function(e){return delete i[e]});var n=e.file_frames;e.file_frames=null;var r=ca(e);return e.file_frames=n,delete r.file_frames,Object.assign(r,t),r}}),sl=/*#__PURE__*/Object.freeze({__proto__:null,copy_without_marks:function(e){var t=e.edges_vertices.filter(function(t,n){return"F"!==e.edges_assignment[n]&&"f"!==e.edges_assignment[n]}),i=e.edges_assignment.filter(function(e){return"F"!==e&&"f"!==e}),n=ca(e);Object.keys(n).filter(function(e){return"vertices_"===e.substring(0,9)}).forEach(function(e){return delete n[e]}),Object.keys(n).filter(function(e){return"edges_"===e.substring(0,6)}).forEach(function(e){return delete n[e]}),Object.keys(n).filter(function(e){return"faces_"===e.substring(0,6)}).forEach(function(e){return delete n[e]});var r=Object.assign(n,{vertices_coords:e.vertices_coords,edges_vertices:t,edges_assignment:i});return Za.edges_vertices_to_vertices_vertices_sorted(r),Za.vertices_vertices_to_faces_vertices(r),Za.faces_vertices_to_faces_edges(r),r.edges_faces=fs(r),r.vertices_faces=hs(r),r}}),al=/*#__PURE__*/Object.freeze({__proto__:null,select_vertices:function(e,t){var i=os.convexPolygon(t),n=e.vertices_coords.map(function(e){return i.contains(e)});return e.vertices_coords.map(function(e,t){return t}).filter(function(e){return n[e]})},select_edges:function(e,t){var i=e.edges_vertices.map(function(t){return t.map(function(t){return e.vertices_coords[t]})}),n=os.convexPolygon(t),r=i.map(function(e){return n.overlaps(e)});return i.map(function(e,t){return t}).filter(function(e){return r[e]})}}),cl=JSON.parse("{\n  \"ar\": [null,\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0628\u0646\u0642\u0637\u062A\u064A\u0646\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u0639\u0646 \u0637\u0631\u064A\u0642 \u0637\u064A \u0646\u0642\u0637\u0629 \u0648\u0627\u062D\u062F\u0629 \u0625\u0644\u0649 \u0623\u062E\u0631\u0649\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u0639\u0646 \u0637\u0631\u064A\u0642 \u0637\u064A \u062E\u0637 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0622\u062E\u0631\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0639\u0628\u0631 \u0646\u0642\u0637\u0629 \u0648\u0627\u062D\u062F\u0629 \u0648\u064A\u062C\u0639\u0644 \u062E\u0637\u0627\u064B \u0648\u0627\u062D\u062F\u0627\u064B \u0641\u0648\u0642 \u0646\u0641\u0633\u0647\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u0645\u0631 \u0628\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0648\u064A\u062C\u0639\u0644 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0639\u0644\u0649 \u0627\u0644\u062E\u0637\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u062C\u0644\u0628 \u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0625\u0644\u0649 \u0627\u0644\u062E\u0637 \u0627\u0644\u0623\u0648\u0644 \u0648\u0627\u0644\u0646\u0642\u0637\u0629 \u0627\u0644\u062B\u0627\u0646\u064A\u0629 \u0625\u0644\u0649 \u0627\u0644\u062E\u0637 \u0627\u0644\u062B\u0627\u0646\u064A\",\n    \"\u0627\u0635\u0646\u0639 \u062E\u0637\u0627\u064B \u064A\u062C\u0644\u0628 \u0646\u0642\u0637\u0629 \u0625\u0644\u0649 \u062E\u0637 \u0648\u064A\u062C\u0639\u0644 \u062E\u0637 \u062B\u0627\u0646\u064A \u0641\u0648\u0642 \u0646\u0641\u0633\u0647\"\n  ],\n  \"de\": [null,\n    \"Falte eine Linie durch zwei Punkte\",\n    \"Falte zwei Punkte aufeinander\",\n    \"Falte zwei Linien aufeinander\",\n    \"Falte eine Linie auf sich selbst, falte dabei durch einen Punkt\",\n    \"Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt\",\n    \"Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie\",\n    \"Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen\"\n  ],\n  \"en\": [null,\n    \"fold a line through two points\",\n    \"fold two points together\",\n    \"fold two lines together\",\n    \"fold a line on top of itself, creasing through a point\",\n    \"fold a point to a line, creasing through another point\",\n    \"fold a point to a line and another point to another line\",\n    \"fold a point to a line and another line onto itself\"\n  ],\n  \"es\": [null,\n    \"dobla una l\xEDnea entre dos puntos\",\n    \"dobla dos puntos juntos\",\n    \"dobla y une dos l\xEDneas\",\n    \"dobla una l\xEDnea sobre s\xED misma, dobl\xE1ndola hacia un punto\",\n    \"dobla un punto hasta una l\xEDnea, dobl\xE1ndola a trav\xE9s de otro punto\",\n    \"dobla un punto hacia una l\xEDnea y otro punto hacia otra l\xEDnea\",\n    \"dobla un punto hacia una l\xEDnea y otra l\xEDnea sobre s\xED misma\"\n  ],\n  \"fr\":[null,\n    \"cr\xE9ez un pli passant par deux points\",\n    \"pliez pour superposer deux points\",\n    \"pliez pour superposer deux lignes\",\n    \"rabattez une ligne sur elle-m\xEAme \xE0 l'aide d'un pli qui passe par un point\",\n    \"rabattez un point sur une ligne \xE0 l'aide d'un pli qui passe par un autre point\",\n    \"rabattez un point sur une ligne et un autre point sur une autre ligne\",\n    \"rabattez un point sur une ligne et une autre ligne sur elle-m\xEAme\"\n  ],\n  \"hi\": [null,\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u0926\u094B \u0938\u094D\u0925\u093E\u0928\u094B\u0902 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u092A\u0930 \u092E\u094B\u0921\u093C\u0915\u0930 \u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901\",\n    \"\u090F\u0915 \u0930\u0947\u0916\u093E \u092A\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u0915\u094B \u092E\u094B\u0921\u093C\u0915\u0930 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948 \u0914\u0930 \u090F\u0915 \u0930\u0947\u0916\u093E \u0915\u094B \u0938\u094D\u0935\u092F\u0902 \u0915\u0947 \u090A\u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u092A\u0939\u0932\u0947 \u0938\u094D\u0925\u093E\u0928 \u0938\u0947 \u0917\u0941\u091C\u0930\u0924\u093E \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u092A\u0939\u0932\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u092A\u0939\u0932\u0940 \u0930\u0947\u0916\u093E \u092A\u0930 \u0914\u0930 \u0926\u0942\u0938\u0930\u0947 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\",\n    \"\u090F\u0915 \u0915\u094D\u0930\u0940\u091C\u093C \u092C\u0928\u093E\u090F\u0901 \u091C\u094B \u090F\u0915 \u0938\u094D\u0925\u093E\u0928 \u0915\u094B \u090F\u0915 \u0930\u0947\u0916\u093E \u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948 \u0914\u0930 \u0926\u0942\u0938\u0930\u0940 \u0930\u0947\u0916\u093E \u0915\u094B \u0938\u094D\u0935\u092F\u0902 \u0915\u0947 \u090A\u092A\u0930 \u0932\u0947 \u0906\u0924\u093E \u0939\u0948\"\n  ],\n  \"jp\": [null,\n    \"2\u70B9\u306B\u6CBF\u3063\u3066\u6298\u308A\u76EE\u3092\u4ED8\u3051\u307E\u3059\",\n    \"2\u70B9\u3092\u5408\u308F\u305B\u3066\u6298\u308A\u307E\u3059\",\n    \"2\u3064\u306E\u7DDA\u3092\u5408\u308F\u305B\u3066\u6298\u308A\u307E\u3059\",\n    \"\u70B9\u3092\u901A\u904E\u3055\u305B\u3001\u65E2\u306B\u3042\u308B\u7DDA\u306B\u6CBF\u3063\u3066\u6298\u308A\u307E\u3059\",\n    \"\u70B9\u3092\u7DDA\u6CBF\u3044\u306B\u5408\u308F\u305B\u5225\u306E\u70B9\u3092\u901A\u904E\u3055\u305B\u6298\u308A\u307E\u3059\",\n    \"\u7DDA\u306B\u5411\u304B\u3063\u3066\u70B9\u3092\u6298\u308A\u3001\u540C\u6642\u306B\u3082\u3046\u4E00\u65B9\u306E\u7DDA\u306B\u5411\u304B\u3063\u3066\u3082\u3046\u4E00\u65B9\u306E\u70B9\u3092\u6298\u308A\u307E\u3059\",\n    \"\u7DDA\u306B\u5411\u304B\u3063\u3066\u70B9\u3092\u6298\u308A\u3001\u540C\u6642\u306B\u5225\u306E\u7DDA\u3092\u305D\u306E\u4E0A\u306B\u6298\u308A\u307E\u3059\"\n  ],\n  \"ko\": [null,\n    \"\uB450 \uC810\uC744 \uD1B5\uACFC\uD558\uB294 \uC120\uC73C\uB85C \uC811\uC73C\uC138\uC694\",\n    \"\uB450 \uC810\uC744 \uD568\uAED8 \uC811\uC73C\uC138\uC694\",\n    \"\uB450 \uC120\uC744 \uD568\uAED8 \uC811\uC73C\uC138\uC694\",\n    \"\uADF8 \uC704\uC5D0 \uC120\uC744 \uC811\uC73C\uBA74\uC11C \uC810\uC744 \uD1B5\uACFC\uD558\uAC8C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uC73C\uBA74\uC11C, \uB2E4\uB978 \uC810\uC744 \uC9C0\uB098\uAC8C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uACE0 \uB2E4\uB978 \uC810\uC744 \uB2E4\uB978 \uC120\uC73C\uB85C \uC811\uC73C\uC138\uC694\",\n    \"\uC810\uC744 \uC120\uC73C\uB85C \uC811\uACE0 \uB2E4\uB978 \uC120\uC744 \uADF8 \uC704\uC5D0 \uC811\uC73C\uC138\uC694\"\n  ],\n  \"ms\": [null,\n    \"lipat garisan melalui dua titik\",\n    \"lipat dua titik bersama\",\n    \"lipat dua garisan bersama\",\n    \"lipat satu garisan di atasnya sendiri, melipat melalui satu titik\",\n    \"lipat satu titik ke garisan, melipat melalui titik lain\",\n    \"lipat satu titik ke garisan dan satu lagi titik ke garisan lain\",\n    \"lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri\"\n  ],\n  \"pt\": [null,\n    \"dobre uma linha entre dois pontos\",\n    \"dobre os dois pontos para uni-los\",\n    \"dobre as duas linhas para uni-las\",\n    \"dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto\",\n    \"dobre um ponto at\xE9 uma linha, criando uma dobra ao longo de outro ponto\",\n    \"dobre um ponto at\xE9 uma linha e outro ponto at\xE9 outra linha\",\n    \"dobre um ponto at\xE9 uma linha e outra linha sobre si mesma\"\n  ],\n  \"ru\": [null,\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u043B\u0438\u043D\u0438\u044E \u0447\u0435\u0440\u0435\u0437 \u0434\u0432\u0435 \u0442\u043E\u0447\u043A\u0438\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0434\u0432\u0435 \u043B\u0438\u043D\u0438\u0438 \u0432\u043C\u0435\u0441\u0442\u0435\",\n    \"\u0441\u0432\u0435\u0440\u043D\u0438\u0442\u0435 \u043B\u0438\u043D\u0438\u044E \u0441\u0432\u0435\u0440\u0445\u0443 \u0441\u0435\u0431\u044F, \u0441\u0433\u0438\u0431\u0430\u044F \u0447\u0435\u0440\u0435\u0437 \u0442\u043E\u0447\u043A\u0443\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E, \u0441\u0433\u0438\u0431\u0430\u044F \u0447\u0435\u0440\u0435\u0437 \u0434\u0440\u0443\u0433\u0443\u044E \u0442\u043E\u0447\u043A\u0443\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E \u0438 \u0434\u0440\u0443\u0433\u0443\u044E \u0442\u043E\u0447\u043A\u0443 \u0432 \u0434\u0440\u0443\u0433\u0443\u044E \u043B\u0438\u043D\u0438\u044E\",\n    \"\u0441\u043B\u043E\u0436\u0438\u0442\u0435 \u0442\u043E\u0447\u043A\u0443 \u0432 \u043B\u0438\u043D\u0438\u044E \u0438 \u0434\u0440\u0443\u0433\u0443\u044E \u043B\u0438\u043D\u0438\u044E \u043D\u0430 \u0441\u0435\u0431\u044F\"\n  ],\n  \"tr\": [null,\n    \"iki noktadan ge\xE7en bir \xE7izgi boyunca katla\",\n    \"iki noktay\u0131 birbirine katla\",\n    \"iki \xE7izgiyi birbirine katla\",\n    \"bir noktadan k\u0131v\u0131rarak kendi \xFCzerindeki bir \xE7izgi boyunca katla\",\n    \"ba\u015Fka bir noktadan k\u0131v\u0131rarak bir noktay\u0131 bir \xE7izgiye katla\",\n    \"bir noktay\u0131 bir \xE7izgiye ve ba\u015Fka bir noktay\u0131 ba\u015Fka bir \xE7izgiye katla\",\n    \"bir noktay\u0131 bir \xE7izgiye ve ba\u015Fka bir \xE7izgiyi kendi \xFCzerine katla\"\n  ],\n  \"vi\": [null,\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua hai \u0111i\u1EC3m\",\n    \"t\u1EA1o n\u1EBFp g\u1EA5p b\u1EB1ng c\xE1ch g\u1EA5p m\u1ED9t \u0111i\u1EC3m n\xE0y sang \u0111i\u1EC3m kh\xE1c\",\n    \"t\u1EA1o n\u1EBFp g\u1EA5p b\u1EB1ng c\xE1ch g\u1EA5p m\u1ED9t \u0111\u01B0\u1EDDng l\xEAn m\u1ED9t \u0111\u01B0\u1EDDng kh\xE1c\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua m\u1ED9t \u0111i\u1EC3m v\xE0 \u0111\u01B0a m\u1ED9t \u0111\u01B0\u1EDDng l\xEAn tr\xEAn ch\xEDnh n\xF3\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p \u0111i qua \u0111i\u1EC3m \u0111\u1EA7u ti\xEAn v\xE0 \u0111\u01B0a \u0111i\u1EC3m th\u1EE9 hai l\xEAn \u0111\u01B0\u1EDDng th\u1EB3ng\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p mang \u0111i\u1EC3m \u0111\u1EA7u ti\xEAn \u0111\u1EBFn \u0111\u01B0\u1EDDng \u0111\u1EA7u ti\xEAn v\xE0 \u0111i\u1EC3m th\u1EE9 hai cho \u0111\u01B0\u1EDDng th\u1EE9 hai\",\n    \"t\u1EA1o m\u1ED9t n\u1EBFp g\u1EA5p mang l\u1EA1i m\u1ED9t \u0111i\u1EC3m cho m\u1ED9t \u0111\u01B0\u1EDDng v\xE0 \u0111\u01B0a m\u1ED9t \u0111\u01B0\u1EDDng th\u1EE9 hai l\xEAn tr\xEAn ch\xEDnh n\xF3\"\n  ],\n  \"zh\": [null,\n    \"\u901A\u904E\u5169\u9EDE\u6298\u4E00\u689D\u7DDA\",\n    \"\u5C07\u5169\u9EDE\u6298\u758A\u8D77\u4F86\",\n    \"\u5C07\u5169\u689D\u7DDA\u6298\u758A\u5728\u4E00\u8D77\",\n    \"\u901A\u904E\u4E00\u500B\u9EDE\u6298\u758A\u4E00\u689D\u7DDA\u5728\u81EA\u8EAB\u4E0A\u9762\",\n    \"\u5C07\u4E00\u500B\u9EDE\uFF0C\u901A\u904E\u53E6\u4E00\u500B\u9EDE\u6298\u758A\u6210\u4E00\u689D\u7DDA\uFF0C\",\n    \"\u5C07\u4E00\u500B\u9EDE\u6298\u758A\u70BA\u4E00\u689D\u7DDA\uFF0C\u518D\u5C07\u53E6\u4E00\u500B\u9EDE\u6298\u758A\u5230\u53E6\u4E00\u689D\u7DDA\",\n    \"\u5C07\u4E00\u500B\u9EDE\u6298\u758A\u6210\u4E00\u689D\u7DDA\uFF0C\u53E6\u4E00\u689D\u7DDA\u6298\u758A\u5230\u5B83\u81EA\u8EAB\u4E0A\"\n  ]\n}\n"),ol=function(e){if(!(isNaN(e)||null==e||1>e||7<e)){var t={};return Object.keys(cl).forEach(function(i){t[i]=cl[i][e]}),t}},dl=function(e){var t=e.axiom||0;return!isNaN(t)&&null!=t&&0<t&&8>t?ol(t):"assignment"in e?{en:"".concat(ya[e.assignment]," fold")}:{en:""}},ll=function(e,t){var i=e.axiom||0,n=e.edge,r=e.direction,s=e;if(2===i)return[s.parameters.points[1],s.parameters.points[0]];if(5===i)return[s.parameters.points[1],s.test.points_reflected[1]];if(7===i)return[s.parameters.points[0],s.test.points_reflected[0]];var a=[n[1][0]-n[0][0],n[1][1]-n[0][1]],c;c=4===i?os.core.nearest_point_on_line(n[0],a,s.parameters.lines[0][0],function(e){return e}):7===i?os.core.nearest_point_on_line(n[0],a,s.parameters.points[0],function(e){return e}):os.core.average(n[0],n[1]);var o=Ds(t).vertices.map(function(e){return t.vertices_coords[e]}),d=os.core.intersection.convex_poly_line(o,c,r);if(void 0===d)return[];var l=[d[0],d[1]].map(function(e){return os.core.distance2(e,c)}).sort(function(e,t){return e-t}).shift();7===i&&(l=os.core.distance2(e.parameters.points[0],c));var g=r.map(function(e){return e*l});return[c.map(function(e,t){return e-g[t]}),c.map(function(e,t){return e+g[t]})]},gl=function(e,t){for(var i=arguments.length,n=Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var s=Object.keys(e).map(function(e){return"edges_"===e.substring(0,6)?e:void 0}).filter(function(e){return void 0!==e}),a=Array.from(Array(n.length)).map(function(){return{}});return n.forEach(function(n,r){return s.filter(function(i){return void 0!==e[i][t]}).forEach(function(i){a[r][i]=e[i][t]})}),n.forEach(function(e,t){return Object.keys(e).forEach(function(e){a[t][e]=n[t][e]})}),a},fl=function(e,t,r){var s=[];t.forEach(function(e){s[e]={}});var a=[1,0].map(function(e){return t[e]});t.forEach(function(t,r){s[t].vertices_vertices=void 0===e.vertices_vertices[t]?[a[r]]:n(e.vertices_vertices[t])});var c=t.map(function(e,t){return s[e].vertices_vertices.indexOf(a[t])});return t.forEach(function(e,t){s[e].vertices_vertices[c[t]]=r}),s},pl=function(e,t,n){for(var r=e.length,s=e.map(function(e,n,i){return e===t[0]&&i[(n+1)%r]===t[1]||e===t[1]&&i[(n+1)%r]===t[0]?(n+1)%r:void 0}).filter(function(e){return void 0!==e}),a=[],c=0,o=0;o<r+s.length;o+=1)s.includes(o)?(c-=1,a[o]=n):a[o]=e[o+c];return a},_l=function(t){for(var i=arguments.length,n=Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=n.map(function(i){return t.edges_vertices[i]});return s[0][0]===s[1][0]||s[0][0]===s[1][1]?s[0][0]:s[0][1]},ul=function(e,t,i,n,r,s,a){var c=t.length,o=t.indexOf(i),d=[t[(o+c-1)%c],i,t[(o+1)%c]],l=[0,1].map(function(t){return _l(e,d[t],d[t+1])}),g=a[0]===l[0]||a[1]===l[0]?[r,s]:[s,r],f=t.slice();return o===c-1?(f.splice(o,1,g[0]),f.unshift(g[1])):f.splice.apply(f,[o,1].concat(g)),f},hl=Object.create(null);Object.assign(hl,rl,oa,ic,rc,wa,wc,xc,fc,Ps,sl,al,zs,_o,aa),hl.build_diagram_frame=function(e){var t=e["re:construction"];if(null==t)return console.warn("couldn't build diagram. construction info doesn't exist"),{};switch(t.type){case"flip":return{"re:diagram_arrows":[{"re:diagram_arrow_classes":["flip"],"re:diagram_arrow_coords":[]}],"re:diagram_instructions":{en:"flip over"}};case"fold":return{"re:diagram_lines":[{"re:diagram_line_classes":[ya[t.assignment]],"re:diagram_line_coords":t.edge}],"re:diagram_arrows":[{"re:diagram_arrowClasses":[],"re:diagram_arrow_coords":ll(t,e)}],"re:diagram_instructions":dl(t)};case"squash":case"sink":case"pleat":default:return{error:"construction type (".concat(t.type,") not yet defined")};}},hl.add_edge=no,hl.split_edge_run=function(e,t,i,r){var s=e.vertices_coords.length,a=e.edges_vertices.length;if(!(a<r)){var c={remove:{edges:[r]},update:fl(e,e.edges_vertices[r],s),new:{vertices:[{vertices_coords:[t,i],vertices_vertices:n(e.edges_vertices[r]),vertices_faces:e.edges_faces?e.edges_faces[r]:void 0}],edges:gl.apply(void 0,[e,r].concat(n(e.edges_vertices[r].map(function(e){return{edges_vertices:[e,s]}})))),faces:[]}};return e.edges_faces&&e.edges_faces[r].forEach(function(t){void 0===c.update[t]&&(c.update[t]={}),c.update[t].faces_vertices=pl(e.faces_vertices[t],e.edges_vertices[r],s),c.update[t].faces_edges=ul(e,e.faces_edges[t],r,s,a,a+1,c["new"].edges[0].edges_vertices,c["new"].edges[1].edges_vertices)}),c}},hl.apply_run=to,hl.merge_run=function(e,t,r){var s=ws(e),a=Ss(e),c=Ns(e),o=0,d=0,l=0;void 0!==t["new"]&&(void 0!==t["new"].vertices&&(o=t["new"].vertices.length),void 0!==t["new"].edges&&(d=t["new"].edges.length),void 0!==t["new"].faces&&(l=t["new"].faces.length));var g={vertices:{length:s,change:o},edges:{length:a,change:d},faces:{length:c,change:l}},f=[];void 0!==r["new"]&&Object.keys(r["new"]).forEach(function(e){r["new"][e].forEach(function(t,s){["vertices","edges","faces"].forEach(function(i){var n="_".concat(i),a=Object.keys(t).map(function(e){return e.substring(e.length-n.length,e.length)===n?e:void 0}).filter(function(e){return void 0!==e});a.forEach(function(t){r["new"][e][s][t].forEach(function(i,n){r["new"][e][s][t][n]>=g[e].length&&(r["new"][e][s][t][n]+=g[e].change)})})})}),f=f.concat(r["new"].vertices)});var p={};void 0!==t["new"]&&(p["new"]=t["new"]),void 0!==t.update&&(p.update=t.update),void 0!==t.remove&&(p.remove=t.remove),void 0!==r["new"]&&(void 0!==r["new"].vertices&&(void 0===p["new"].vertices&&(p["new"].vertices=[]),p["new"].vertices=p["new"].vertices.concat(r["new"].vertices)),void 0!==r["new"].edges&&(void 0===p["new"].edges&&(p["new"].edges=[]),p["new"].edges=p["new"].edges.concat(r["new"].edges)),void 0!==r["new"].faces&&(void 0===p["new"].faces&&(p["new"].faces=[]),p["new"].faces=p["new"].faces.concat(r["new"].faces))),void 0!==r.update&&Object.keys(r.update).forEach(function(e){if(null==p.update[e])p.update[e]=r.update[e];else{var t=Object.keys(p.update[e]),i=Object.keys(r.update[e]),n=t.filter(function(e){return i.includes(e)});if(0<n.length){var s=n.join(", ");return void console.warn("cannot merge. two diffs contain overlap at ".concat(s))}Object.assign(p.update[e],r.update[e])}}),void 0!==r.remove&&(void 0!==r.remove.vertices&&(void 0===p.remove.vertices&&(p.remove.vertices=[]),p.remove.vertices=p.remove.vertices.concat(r.remove.vertices)),void 0!==r.remove.edges&&(void 0===p.remove.edges&&(p.remove.edges=[]),p.remove.edges=p.remove.edges.concat(r.remove.edges)),void 0!==r.remove.faces&&(void 0===p.remove.faces&&(p.remove.faces=[]),p.remove.faces=p.remove.faces.concat(r.remove.faces))),Object.assign(t,r)},hl.apply_axiom=Gs,hl.fragment=Ma,hl.clean=dc,hl.join=_c,hl.remove=Bs,hl.rebuild=bc,hl.populate=pc,hl.validate=vc;var ml={empty:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_title\": \"\",\n\t\"file_description\": \"\",\n\t\"file_classes\": [],\n\t\"file_frames\": [],\n\n\t\"frame_author\": \"\",\n\t\"frame_title\": \"\",\n\t\"frame_description\": \"\",\n\t\"frame_attributes\": [],\n\t\"frame_classes\": [],\n\t\"frame_unit\": \"\",\n\n\t\"vertices_coords\": [],\n\t\"vertices_vertices\": [],\n\t\"vertices_faces\": [],\n\n\t\"edges_vertices\": [],\n\t\"edges_faces\": [],\n\t\"edges_assignment\": [],\n\t\"edges_foldAngle\": [],\n\t\"edges_length\": [],\n\n\t\"faces_vertices\": [],\n\t\"faces_edges\": [],\n\n\t\"edgeOrders\": [],\n\t\"faceOrders\": []\n}\n"),square:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [1,0], [1,1], [0,1]],\n\t\"vertices_vertices\": [[1,3], [2,0], [3,1], [0,2]],\n\t\"vertices_faces\": [[0], [0], [0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,0]],\n\t\"edges_faces\": [[0], [0], [0], [0]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0],\n\t\"edges_length\": [1, 1, 1, 1],\n\t\"faces_vertices\": [[0,1,2,3]],\n\t\"faces_edges\": [[0,1,2,3]]\n}"),book:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,1], [0.5,1], [0,1]],\n\t\"vertices_vertices\": [[1,5], [2,4,0], [3,1], [4,2], [5,1,3], [0,4]],\n\t\"vertices_faces\": [[0], [0,1], [1], [1], [1,0], [0]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,0], [1,4]],\n\t\"edges_faces\": [[0], [1], [1], [1], [0], [0], [0,1]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180],\n\t\"edges_length\": [0.5, 0.5, 1, 0.5, 0.5, 1, 1],\n\t\"faces_vertices\": [[1,4,5,0], [4,1,2,3]],\n\t\"faces_edges\": [[6,4,5,0], [6,1,2,3]]\n}"),blintz:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"file_creator\": \"\",\n\t\"file_author\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_title\": \"blintz base\",\n\t\"frame_attributes\": [\"2D\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"vertices_coords\": [[0,0], [0.5,0], [1,0], [1,0.5], [1,1], [0.5,1], [0,1], [0,0.5]],\n\t\"vertices_vertices\": [[1,7], [2,3,7,0], [3,1], [4,5,1,2], [5,3], [6,7,3,4], [7,5], [0,1,5,6]],\n\t\"vertices_faces\": [[0], [1,4,0], [1], [2,4,1], [2], [3,4,2], [3], [0,4,3]],\n\t\"edges_vertices\": [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0], [1,3], [3,5], [5,7], [7,1]],\n\t\"edges_faces\": [[0], [1], [1], [2], [2], [3], [3], [0], [1,4], [2,4], [3,4], [0,4]],\n\t\"edges_assignment\": [\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"B\",\"V\",\"V\",\"V\",\"V\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\"edges_length\": [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.7071067811865476, 0.7071067811865476, 0.7071067811865476, 0.7071067811865476],\n\t\"faces_vertices\": [[0,1,7], [2,3,1], [4,5,3], [6,7,5], [1,3,5,7]],\n\t\"faces_edges\": [[0,11,7], [2,8,1], [4,9,3], [6,10,5], [8,9,10,11]],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedForm\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [[0.5,0.5], [0.5,0.0], [0.5,0.5], [1.0,0.5], [0.5,0.5], [0.5,1.0], [0.5,0.5], [0.0,0.5]],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 0, 0, 180, 180, 180, 180],\n\t\t\"faceOrders\": [[0,4,1], [1,4,1], [2,4,1], [3,4,1]]\n\t}]\n}"),kite:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"kite base\",\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [\n\t\t[0,0],\n\t\t[0.414213562373095,0],\n\t\t[1,0],\n\t\t[1,0.585786437626905],\n\t\t[1,1],\n\t\t[0,1]\n\t],\n\t\"vertices_vertices\": [ [1,5], [2,5,0], [3,5,1], [4,5,2], [5,3], [0,1,2,3,4] ],\n\t\"vertices_faces\": [ [0], [1,0], [2,1], [3,2], [3], [0,1,2,3] ],\n\t\"edges_vertices\": [\n\t\t[0,1],\n\t\t[1,2],\n\t\t[2,3],\n\t\t[3,4],\n\t\t[4,5],\n\t\t[5,0],\n\t\t[5,1],\n\t\t[3,5],\n\t\t[5,2]\n\t],\n\t\"edges_faces\": [[0], [1], [2], [3], [3], [0], [0,1], [3,2], [1,2]],\n\t\"edges_assignment\": [\"B\", \"B\", \"B\", \"B\", \"B\", \"B\", \"V\", \"V\", \"F\"],\n\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180, 180, 0],\n\t\"edges_length\": [0.414213562373095, 0.585786437626905, 0.585786437626905, 0.414213562373095, 1, 1, 1.082392200292394, 1.082392200292394, 1.414213562373095],\n\t\"faces_vertices\": [\n\t\t[0,1,5],\n\t\t[1,2,5],\n\t\t[2,3,5],\n\t\t[3,4,5]\n\t],\n\t\"faces_edges\": [\n\t\t[0,6,5],\n\t\t[1,8,6],\n\t\t[2,7,8],\n\t\t[3,4,7]\n\t],\n\t\"file_frames\": [{\n\t\t\"frame_classes\": [\"foldedForm\"],\n\t\t\"frame_parent\": 0,\n\t\t\"frame_inherit\": true,\n\t\t\"vertices_coords\": [\n\t\t\t[0.707106781186548,0.292893218813452],\n\t\t\t[1,0],\n\t\t\t[0.707106781186548,0.292893218813452],\n\t\t\t[0,1],\n\t\t\t[0.414213562373095,0],\n\t\t\t[1,0.585786437626905]\n\t\t],\n\t\t\"edges_foldAngle\": [0, 0, 0, 0, 0, 0, 180, 180, 0],\n\t\t\"faceOrders\": [[0,1,1], [3,2,1]]\n\t}]\n}"),fish:JSON.parse("{\n  \"file_spec\": 1.1,\n  \"file_creator\": \"\",\n  \"file_author\": \"\",\n  \"file_classes\": [\"singleModel\"],\n  \"frame_title\": \"\",\n  \"frame_classes\": [\"creasePattern\"],\n  \"frame_attributes\": [\"2D\"],\n  \"vertices_coords\": [\n    [0,0],\n    [1,0],\n    [1,1],\n    [0,1],\n    [0.292893218813452,0.292893218813452],\n    [0.707106781186548,0.707106781186548],\n    [0.292893218813452,0],\n    [1,0.707106781186548]\n  ],\n  \"edges_vertices\": [\n  \t[2,3], [3,0], [3,1], [0,4], [1,4], [3,4], [1,5], [2,5], [3,5], [4,6], [0,6], [6,1], [5,7], [1,7], [7,2]\n  ],\n  \"edges_assignment\": [\n  \t\"B\", \"B\", \"F\", \"M\", \"M\", \"M\", \"M\", \"M\", \"M\", \"V\", \"B\", \"B\", \"V\", \"B\", \"B\"\n  ],\n  \"file_frames\": [{\n    \"frame_classes\": [\"foldedForm\"],\n    \"frame_parent\": 0,\n    \"frame_inherit\": true,\n    \"vertices_coords\":[[0.707106781186548,0.292893218813452],[1,0],[0.707106781186548,0.292893218813452],[0,1],[0.292893218813452,0.292893218813452],[0.707106781186548,0.707106781186548],[0.5,0.5],[0.5,0.5]]\n  }],\n  \"vertices_vertices\": [\n    [6,4,3],\n    [7,5,3,4,6],\n    [5,7,3],\n    [0,4,1,5,2],\n    [0,6,1,3],\n    [1,7,2,3],\n    [1,4,0],\n    [1,2,5]\n  ],\n  \"faces_vertices\": [\n    [4,0,6],\n    [3,0,4],\n    [5,1,7],\n    [3,1,5],\n    [4,1,3],\n    [6,1,4],\n    [5,2,3],\n    [7,2,5]\n  ],\n  \"faces_edges\": [\n    [3,10,9],\n    [1,3,5],\n    [6,13,12],\n    [2,6,8],\n    [4,2,5],\n    [11,4,9],\n    [7,0,8],\n    [14,7,12]\n  ],\n  \"edges_faces\": [[6], [1], [3,4], [0,1], [4,5], [1,4], [2,3], [6,7], [3,6], [0,5], [0], [5], [2,7], [2], [7]],\n  \"vertices_faces\": [[0,1], [2,3,4,5], [6,7], [1,3,4,6], [0,1,4,5], [2,3,6,7], [0,5], [2,7]],\n  \"edges_length\": [1, 1, 1.4142135623730951, 0.41421356237309437, 0.7653668647301798, 0.7653668647301798, 0.7653668647301798, 0.41421356237309437, 0.7653668647301798, 0.292893218813452, 0.292893218813452, 0.707106781186548, 0.292893218813452, 0.707106781186548, 0.292893218813452],\n  \"edges_foldAngle\": [0, 0, 0, -180, -180, -180, -180, -180, -180, 180, 0, 0, 180, 0, 0],\n  \"faces_faces\": [\n  \t[1,5], [0,4], [3,7], [2,4,6], [3,1,5], [4,0], [3,7], [6,2]\n  ],\n  \"vertices_edges\": [\n    [1,3,10],\n    [2,4,6,11,13],\n    [0,7,14],\n    [0,1,2,5,8],\n    [3,4,5,9],\n    [6,7,8,12],\n    [9,10,11],\n    [12,13,14]\n  ]\n}\n"),bird:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0.207106781186548,0.5],[0.5,0.207106781186548],[0.792893218813452,0.5],[0.5,0.792893218813452],[0.353553390593274,0.646446609406726],[0.646446609406726,0.646446609406726],[0.646446609406726,0.353553390593274],[0.353553390593274,0.353553390593274],[0,0.5],[0.5,0],[1,0.5],[0.5,1]],\n\t\"edges_vertices\": [[3,5],[5,9],[3,9],[3,13],[5,13],[0,5],[0,13],[0,12],[5,12],[4,5],[4,12],[4,9],[0,6],[6,12],[0,14],[6,14],[1,6],[1,14],[1,11],[6,11],[4,6],[4,11],[1,7],[7,11],[1,15],[7,15],[2,7],[2,15],[2,10],[7,10],[4,7],[4,10],[2,8],[8,10],[2,16],[8,16],[3,8],[3,16],[8,9],[4,8]],\n\t\"edges_faces\": [[0,1],[0,5],[21,0],[1],[2,1],[2,3],[2],[3,6],[4,3],[4,5],[11,4],[5,22],[6,7],[6,11],[7],[8,7],[8,9],[8],[9,12],[10,9],[10,11],[17,10],[12,13],[12,17],[13],[14,13],[14,15],[14],[15,18],[16,15],[16,17],[23,16],[18,19],[18,23],[19],[20,19],[20,21],[20],[22,21],[22,23]],\n\t\"edges_assignment\": [\"M\",\"F\",\"V\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"V\",\"F\",\"M\",\"V\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"F\",\"M\",\"F\",\"M\",\"F\",\"B\",\"V\",\"M\",\"B\",\"F\",\"M\"],\n\t\"faces_vertices\": [[3,5,9],[5,3,13],[0,5,13],[5,0,12],[4,5,12],[5,4,9],[0,6,12],[6,0,14],[1,6,14],[6,1,11],[4,6,11],[6,4,12],[1,7,11],[7,1,15],[2,7,15],[7,2,10],[4,7,10],[7,4,11],[2,8,10],[8,2,16],[3,8,16],[8,3,9],[4,8,9],[8,4,10]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,4,6],[5,7,8],[9,8,10],[9,11,1],[12,13,7],[12,14,15],[16,15,17],[16,18,19],[20,19,21],[20,10,13],[22,23,18],[22,24,25],[26,25,27],[26,28,29],[30,29,31],[30,21,23],[32,33,28],[32,34,35],[36,35,37],[36,2,38],[39,38,11],[39,31,33]]\n}"),frog:JSON.parse("{\n\t\"file_spec\": 1.1,\n\t\"frame_title\": \"\",\n\t\"file_classes\": [\"singleModel\"],\n\t\"frame_classes\": [\"creasePattern\"],\n\t\"frame_attributes\": [\"2D\"],\n\t\"vertices_coords\": [[0,0],[1,0],[1,1],[0,1],[0.5,0.5],[0,0.5],[0.5,0],[1,0.5],[0.5,1],[0.146446609406726,0.353553390593274],[0.353553390593274,0.146446609406726],[0.646446609406726,0.146446609406726],[0.853553390593274,0.353553390593274],[0.853553390593274,0.646446609406726],[0.646446609406726,0.853553390593274],[0.353553390593274,0.853553390593274],[0.146446609406726,0.646446609406726],[0,0.353553390593274],[0,0.646446609406726],[0.353553390593274,0],[0.646446609406726,0],[1,0.353553390593274],[1,0.646446609406726],[0.646446609406726,1],[0.353553390593274,1]],\n\t\"edges_vertices\": [[0,4],[4,9],[0,9],[0,10],[4,10],[2,4],[2,14],[4,14],[4,13],[2,13],[3,4],[4,15],[3,15],[3,16],[4,16],[1,4],[1,12],[4,12],[4,11],[1,11],[4,5],[5,9],[5,16],[4,6],[6,11],[6,10],[4,7],[7,13],[7,12],[4,8],[8,15],[8,14],[9,17],[0,17],[5,17],[0,19],[10,19],[6,19],[11,20],[1,20],[6,20],[1,21],[12,21],[7,21],[13,22],[2,22],[7,22],[2,23],[14,23],[8,23],[15,24],[3,24],[8,24],[3,18],[16,18],[5,18]],\n\t\"edges_faces\": [[0,1],[0,8],[16,0],[1,18],[11,1],[3,2],[2,26],[15,2],[3,12],[24,3],[4,5],[4,14],[28,4],[5,30],[9,5],[7,6],[6,22],[13,6],[7,10],[20,7],[8,9],[8,17],[31,9],[10,11],[10,21],[19,11],[12,13],[12,25],[23,13],[14,15],[14,29],[27,15],[16,17],[16],[17],[18],[19,18],[19],[20,21],[20],[21],[22],[23,22],[23],[24,25],[24],[25],[26],[27,26],[27],[28,29],[28],[29],[30],[31,30],[31]],\n\t\"edges_assignment\": [\"F\",\"M\",\"M\",\"M\",\"M\",\"F\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"M\",\"M\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\",\"V\",\"B\",\"B\",\"B\",\"V\",\"B\"],\n\t\"faces_vertices\": [[0,4,9],[4,0,10],[4,2,14],[2,4,13],[3,4,15],[4,3,16],[4,1,12],[1,4,11],[4,5,9],[5,4,16],[4,6,11],[6,4,10],[4,7,13],[7,4,12],[4,8,15],[8,4,14],[0,9,17],[9,5,17],[10,0,19],[6,10,19],[1,11,20],[11,6,20],[12,1,21],[7,12,21],[2,13,22],[13,7,22],[14,2,23],[8,14,23],[3,15,24],[15,8,24],[16,3,18],[5,16,18]],\n\t\"faces_edges\": [[0,1,2],[0,3,4],[5,6,7],[5,8,9],[10,11,12],[10,13,14],[15,16,17],[15,18,19],[20,21,1],[20,14,22],[23,24,18],[23,4,25],[26,27,8],[26,17,28],[29,30,11],[29,7,31],[2,32,33],[21,34,32],[3,35,36],[25,36,37],[19,38,39],[24,40,38],[16,41,42],[28,42,43],[9,44,45],[27,46,44],[6,47,48],[31,48,49],[12,50,51],[30,52,50],[13,53,54],[22,54,55]]\n}")},b=Object.create(null);Object.defineProperty(b,"empty",{get:function(){return hl.clone(ml.empty)}}),Object.defineProperty(b,"square",{get:function(){return hl.clone(ml.square)}}),Object.defineProperty(b,"book",{get:function(){return hl.clone(ml.book)}}),Object.defineProperty(b,"blintz",{get:function(){return hl.clone(ml.blintz)}}),Object.defineProperty(b,"kite",{get:function(){return hl.clone(ml.kite)}}),Object.defineProperty(b,"fish",{get:function(){return hl.clone(ml.fish)}}),Object.defineProperty(b,"bird",{get:function(){return hl.clone(ml.bird)}}),Object.defineProperty(b,"frog",{get:function(){return hl.clone(ml.frog)}});var vl={origami:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=Object.assign(Object.create(xo()),t.filter(function(e){return yc(e)}).shift()||Jc()),r={};Object.assign(r,$d);var s=el.apply(void 0,t);return Object.keys(s).forEach(function(e){r[e]=s[e]}),Object.defineProperty(n,"isFolded",{get:function(){return tl(n)}}),Object.defineProperty(n,"fold",{value:function(){return 0===arguments.length&&(il(n,!0),n.didChange.forEach(function(e){return e()})),n}}),Object.defineProperty(n,"unfold",{value:function(){return il(n,!1),n.didChange.forEach(function(e){return e()}),n}}),Object.defineProperty(n,"export",{get:function(){var e=function(){if(0===arguments.length)return JSON.stringify(n);switch(0>=arguments.length?void 0:arguments[0]){case"oripa":return Zd(n,"fold").oripa();case"svg":return Zd(n,"fold").svg();default:return JSON.stringify(n);}};return e.json=function(){return JSON.stringify(n)},e.fold=function(){return JSON.stringify(n)},e.svg=function(){return Zd(n,"fold").svg()},e.oripa=function(){return Zd(n,"fold").oripa()},e}}),fa.apply(void 0,[n].concat(t)),n},graph:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.create(Tc()),Qc(),e,{file_spec:pa,file_creator:_a})},svg:Hi,fold:Gc,convert:Zd,core:hl,bases:b,math:os.core,axiom:sa,equivalent:os.core.equivalent};return Object.keys(os).filter(function(e){return"core"!==e}).forEach(function(e){vl[e]=os[e]}),vl});
