<!DOCTYPE html>

<title>Rabbit Ear</title>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="style.css">

<script type="text/javascript" src="../../rabbit-ear.js"></script>
<script type="text/javascript">
// example
// mouse hover over vertices, edges, faces to highlight them

// todo: bring back sectors
var style = {
  vertex: "fill:#357;stroke:#357",
  edge: "stroke:#ec3",
  face: "fill:#e53"
};

var origami = RabbitEar.Origami({ padding: 0.05 });
origami.vertices.visible = true;

// fetch("https://robbykraft.github.io/Origami/files/fold/crane.fold").then(blob => blob.json()).then(json => origami.load(json));
fetch("../../files/svg/crane.svg").then(blob => blob.text()).then(svg => origami.load(svg));

origami.svg.mouseMoved = function (event) {
  /** highlight */
  ["vertices", "edges", "faces"].forEach(function (key) {
    origami[key]
      .filter(function (v) { return v.svg != null; })
      .forEach((v) => { v.svg.style = ""; });
  });

  // get all the nearest components to the cursor
  var nearest = origami.nearest(event);
  // console.log(nearest);

  Object.keys(nearest)
    .filter(function (key) { return nearest[key].svg != null; })
    .forEach(function (key) { nearest[key].svg.style = style[key]; });
  /** highlight end */
};
</script>