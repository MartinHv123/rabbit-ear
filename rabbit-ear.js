/* Rabbit Ear 0.9.11 alpha 2021-01-17 (c) Robby Kraft, MIT License */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ear=t()}(this,(function(){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e=function type_of(e){switch(e.constructor.name){case"vector":case"matrix":case"segment":case"ray":case"line":case"circle":case"ellipse":case"rect":case"polygon":case"junction":return e.constructor.name}if("object"===_typeof(e)){if(null!=e.radius)return"circle";if(null!=e.width)return"rect";if(null!=e.x||"number"==typeof e[0])return"vector";if(null!=e[0]&&e[0].length&&("number"==typeof e[0].x||"number"==typeof e[0][0]))return"segment";if(null!=e.vector&&null!=e.origin)return"line"}},t=function resize(e,t){return t.length===e?t:Array(e).fill(0).map((function(e,n){return t[n]?t[n]:e}))},n=function resize_up(e,n){var r=e.length>n.length?e.length:n.length;return[e,n].map((function(e){return t(r,e)}))},r=function count_places(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},o=function clean_number(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;if("number"!=typeof e)return e;var n=parseFloat(e.toFixed(t));return r(n)===Math.min(t,r(e))?e:n},i=function is_iterable(e){return null!=e&&"function"==typeof e[Symbol.iterator]},c=function semi_flatten_arrays(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return i(arguments[0])&&"string"!=typeof arguments[0]?semi_flatten_arrays.apply(void 0,_toConsumableArray(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(e){return i(e)?_toConsumableArray(semi_flatten_arrays(e)):e}))}},a=function flatten_arrays(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return i(arguments[0])&&"string"!=typeof arguments[0]?flatten_arrays.apply(void 0,_toConsumableArray(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(e){return i(e)?_toConsumableArray(flatten_arrays(e)):e})).reduce((function(e,t){return e.concat(t)}),[])}},u=Object.freeze({__proto__:null,resize:t,resize_up:n,resize_down:function resize_down(e,n){var r=e.length>n.length?n.length:e.length;return[e,n].map((function(e){return t(r,e)}))},clean_number:o,semi_flatten_arrays:c,flatten_arrays:a}),s=180/Math.PI,l=Math.PI/180,p=2*Math.PI,d=1e-6,v=Object.freeze({__proto__:null,R2D:s,D2R:l,TWO_PI:p,EPSILON:d}),g=function fn_true(){return!0},m=function fn_square(e){return e*e},h=function fn_add(e,t){return e+(t||0)},b=function fn_not_undefined(e){return void 0!==e},k=function fn_vec2_angle(e){return Math.atan2(e[1],e[0])},w=function fn_to_vec2(e){return[Math.cos(e),Math.sin(e)]},C=function include(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return e>-t},M=function exclude(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return e>t},E=g,O=g,j=C,P=M,S=function include_s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return e>-t&&e<1+t},N=function exclude_s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return e>t&&e<1-t},I=function ray_limiter(e){return e<-d?0:e},q=function segment_limiter(e){return e<-d?0:e>1.000001?1:e},L=Object.freeze({__proto__:null,fn_true:g,fn_square:m,fn_add:h,fn_not_undefined:b,fn_vec2_angle:k,fn_to_vec2:w,include:C,exclude:M,include_l:E,exclude_l:O,include_r:j,exclude_r:P,include_s:S,exclude_s:N,line_limiter:function line_limiter(e){return e},ray_limiter:I,segment_limiter:q}),T=Object.create(null),F=[1,0,0,1],V=F.concat(0,0),B=function determinant2(e){return e[0]*e[3]-e[1]*e[2]},G=function make_matrix2_rotate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=Math.cos(e),r=Math.sin(e);return[n,r,-r,n,t[0],t[1]]},D=Object.freeze({__proto__:null,identity2x2:F,identity2x3:V,multiply_matrix2_vector2:function multiply_matrix2_vector2(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]]},multiply_matrix2_line2:function multiply_matrix2_line2(e,t,n){return{vector:[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1]],origin:[e[0]*n[0]+e[2]*n[1]+e[4],e[1]*n[0]+e[3]*n[1]+e[5]]}},multiply_matrices2:function multiply_matrices2(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]},determinant2:B,invert_matrix2:function invert_matrix2(e){var t=B(e);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(e[4])&&isFinite(e[5]))return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[3]*e[4])/t,(e[1]*e[4]-e[0]*e[5])/t]},make_matrix2_translate:function make_matrix2_translate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return F.concat(e,t)},make_matrix2_scale:function make_matrix2_scale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];return[e,0,0,t,e*-n[0]+n[0],t*-n[1]+n[1]]},make_matrix2_rotate:G,make_matrix2_reflect:function make_matrix2_reflect(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=Math.atan2(e[1],e[0]),r=Math.cos(n),o=Math.sin(n),i=Math.cos(-n),c=Math.sin(-n),a=r*i+o*c,u=r*-c+o*i,s=o*i+-r*c,l=o*-c+-r*i,p=t[0]+a*-t[0]+-t[1]*s,d=t[1]+u*-t[0]+-t[1]*l;return[a,u,s,l,p,d]}}),R=function magnitude(e){return Math.sqrt(e.map(m).reduce(h,0))},U=function mag_squared(e){return e.map(m).reduce(h,0)},Z=function normalize(e){var t=R(e);return 0===t?e:e.map((function(e){return e/t}))},H=function scale(e,t){return e.map((function(e){return e*t}))},X=function add(e,t){return e.map((function(e,n){return e+(t[n]||0)}))},W=function subtract(e,t){return e.map((function(e,n){return e-(t[n]||0)}))},Y=function dot(e,t){return e.map((function(n,r){return e[r]*t[r]})).reduce(h,0)},$=function midpoint(e,t){return e.map((function(e,n){return(e+t[n])/2}))},K=function average(){var e=arguments;if(0===arguments.length)return[];var t=arguments[0].length>0?arguments[0].length:0,n=Array(t).fill(0);return Array.from(arguments).forEach((function(e){return n.forEach((function(t,r){n[r]+=e[r]||0}))})),n.map((function(t){return t/e.length}))},J=function lerp(e,t,n){var r=1-n;return e.map((function(e,o){return e*r+(t[o]||0)*n}))},Q=function cross2(e,t){return e[0]*t[1]-e[1]*t[0]},ee=function cross3(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},te=function distance2(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},ne=function distance(e,t){return Math.sqrt(e.map((function(n,r){return Math.pow(e[r]-t[r],2)})).reduce((function(e,t){return e+t}),0))},re=function flip(e){return e.map((function(e){return-e}))},oe=function rotate90(e){return[-e[1],e[0]]},ie=function rotate270(e){return[e[1],-e[0]]},ce=function degenerate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return Math.abs(e.reduce(h,0))<t},ae=function parallel(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return 1-Math.abs(Y(Z(e),Z(t)))<n},ue=Object.freeze({__proto__:null,magnitude:R,mag_squared:U,normalize:Z,scale:H,add:X,subtract:W,dot:Y,midpoint:$,average:K,lerp:J,cross2:Q,cross3:ee,distance2:te,distance3:function distance3(e,t){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)},distance:ne,flip:re,rotate90:oe,rotate270:ie,degenerate:ce,parallel:ae}),se=Object.freeze([1,0,0,0,1,0,0,0,1]),fe=Object.freeze(se.concat(0,0,0)),le=function is_identity3x4(e){return fe.map((function(t,n){return Math.abs(t-e[n])<d})).reduce((function(e,t){return e&&t}),!0)},pe=function multiply_matrix3_vector3(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2]+e[9],e[1]*t[0]+e[4]*t[1]+e[7]*t[2]+e[10],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]+e[11]]},de=function multiply_matrix3_line3(e,t,n){return{vector:[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]],origin:[e[0]*n[0]+e[3]*n[1]+e[6]*n[2]+e[9],e[1]*n[0]+e[4]*n[1]+e[7]*n[2]+e[10],e[2]*n[0]+e[5]*n[1]+e[8]*n[2]+e[11]]}},ve=function multiply_matrices3(e,t){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2],e[0]*t[3]+e[3]*t[4]+e[6]*t[5],e[1]*t[3]+e[4]*t[4]+e[7]*t[5],e[2]*t[3]+e[5]*t[4]+e[8]*t[5],e[0]*t[6]+e[3]*t[7]+e[6]*t[8],e[1]*t[6]+e[4]*t[7]+e[7]*t[8],e[2]*t[6]+e[5]*t[7]+e[8]*t[8],e[0]*t[9]+e[3]*t[10]+e[6]*t[11]+e[9],e[1]*t[9]+e[4]*t[10]+e[7]*t[11]+e[10],e[2]*t[9]+e[5]*t[10]+e[8]*t[11]+e[11]]},_e=function determinant3(e){return e[0]*e[4]*e[8]-e[0]*e[7]*e[5]-e[3]*e[1]*e[8]+e[3]*e[7]*e[2]+e[6]*e[1]*e[5]-e[6]*e[4]*e[2]},ge=function invert_matrix3(e){var t=_e(e);if(!(Math.abs(t)<1e-6||isNaN(t))&&isFinite(e[9])&&isFinite(e[10])&&isFinite(e[11])){var n=[e[4]*e[8]-e[7]*e[5],-e[1]*e[8]+e[7]*e[2],e[1]*e[5]-e[4]*e[2],-e[3]*e[8]+e[6]*e[5],e[0]*e[8]-e[6]*e[2],-e[0]*e[5]+e[3]*e[2],e[3]*e[7]-e[6]*e[4],-e[0]*e[7]+e[6]*e[1],e[0]*e[4]-e[3]*e[1],-e[3]*e[7]*e[11]+e[3]*e[8]*e[10]+e[6]*e[4]*e[11]-e[6]*e[5]*e[10]-e[9]*e[4]*e[8]+e[9]*e[5]*e[7],e[0]*e[7]*e[11]-e[0]*e[8]*e[10]-e[6]*e[1]*e[11]+e[6]*e[2]*e[10]+e[9]*e[1]*e[8]-e[9]*e[2]*e[7],-e[0]*e[4]*e[11]+e[0]*e[5]*e[10]+e[3]*e[1]*e[11]-e[3]*e[2]*e[10]-e[9]*e[1]*e[5]+e[9]*e[2]*e[4]],r=1/t;return n.map((function(e){return e*r}))}},me=function make_matrix3_translate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return se.concat(e,t,n)},he=function single_axis_rotate(e,t,n,r,o){var i=se.concat([0,1,2].map((function(e){return t[e]||0}))),c=Math.cos(e),a=Math.sin(e);return i[3*n+n]=c,i[3*n+r]=(o?1:-1)*a,i[3*r+n]=(o?-1:1)*a,i[3*r+r]=c,i},ye=function make_matrix3_rotateX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return he(e,t,1,2,!0)},be=function make_matrix3_rotateY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return he(e,t,0,2,!1)},Ae=function make_matrix3_rotateZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return he(e,t,0,1,!0)},xe=function make_matrix3_rotate(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],o=t(3,Z(n)),i=[0,1,2].map((function(e){return r[e]||0})),c=_slicedToArray(o,3),a=c[0],u=c[1],s=c[2],l=Math.cos(e),p=Math.sin(e),d=Math.sqrt(o[1]*o[1]+o[2]*o[2]),v=Math.abs(d)<1e-6?0:u/d,g=Math.abs(d)<1e-6?1:s/d,m=se.concat(-i[0],-i[1],-i[2]),h=se.concat(i[0],i[1],i[2]),b=[1,0,0,0,g,v,0,-v,g,0,0,0],k=[1,0,0,0,g,-v,0,v,g,0,0,0],w=[d,0,a,0,1,0,-a,0,d,0,0,0],C=[d,0,-a,0,1,0,a,0,d,0,0,0],M=[l,p,0,-p,l,0,0,0,1,0,0,0];return ve(h,ve(k,ve(C,ve(M,ve(w,ve(b,m))))))},ke=function make_matrix3_scale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return[e,0,0,0,e,0,0,0,e,e*-t[0]+t[0],e*-t[1]+t[1],e*-t[2]+t[2]]},we=function make_matrix3_reflectZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=Math.atan2(e[1],e[0]),r=Math.cos(n),o=Math.sin(n),i=Math.cos(-n),c=Math.sin(-n),a=r*i+o*c,u=r*-c+o*i,s=o*i+-r*c,l=o*-c+-r*i,p=t[0]+a*-t[0]+-t[1]*s,d=t[1]+u*-t[0]+-t[1]*l;return[a,u,0,s,l,0,0,0,1,p,d,0]},Ce=Object.freeze({__proto__:null,identity3x3:se,identity3x4:fe,is_identity3x4:le,multiply_matrix3_vector3:pe,multiply_matrix3_line3:de,multiply_matrices3:ve,determinant3:_e,invert_matrix3:ge,make_matrix3_translate:me,make_matrix3_rotateX:ye,make_matrix3_rotateY:be,make_matrix3_rotateZ:Ae,make_matrix3_rotate:xe,make_matrix3_scale:ke,make_matrix3_reflectZ:we}),Me=function vector_origin_form(e,t){return{vector:e||[],origin:t||[]}},Ee=function get_vector(){if(arguments[0]instanceof T.vector)return arguments[0];var e=a(arguments);return e.length>0&&"object"===_typeof(e[0])&&null!==e[0]&&!isNaN(e[0].x)&&(e=["x","y","z"].map((function(t){return e[0][t]})).filter(b)),e.filter((function(e){return"number"==typeof e}))},Oe=function get_vector_of_vectors(){return c(arguments).map((function(e){return Ee(e)}))},je=function get_segment(){if(arguments[0]instanceof T.segment)return arguments[0];var e=c(arguments);return 4===e.length?[[e[0],e[1]],[e[2],e[3]]]:Oe(e)},Pe=function get_line(){var e=c(arguments);return 0===e.length?Me([],[]):e[0]instanceof T.line||e[0]instanceof T.ray||e[0]instanceof T.segment?e[0]:e[0].constructor===Object?Me(e[0].vector||[],e[0].origin||[]):"number"==typeof e[0]?Me(Ee(e)):Me.apply(void 0,_toConsumableArray(e.map((function(e){return Ee(e)}))))},Se=Pe,ze=function get_rect_params(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:e,y:t,width:n,height:r}},Ne=function get_rect(){if(arguments[0]instanceof T.rect)return arguments[0];var e=a(arguments);if(e.length>0&&"object"===_typeof(e[0])&&null!==e[0]&&!isNaN(e[0].width))return ze.apply(void 0,_toConsumableArray(["x","y","width","height"].map((function(t){return e[0][t]})).filter(b)));var t=e.filter((function(e){return"number"==typeof e})),n=t.length<4?[,,].concat(_toConsumableArray(t)):t;return ze.apply(void 0,_toConsumableArray(n))},Ie=function get_circle_params(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{radius:e,origin:[].concat(n)}},qe=function get_circle(){if(arguments[0]instanceof T.circle)return arguments[0];var e=Oe(arguments),t=a(arguments).filter((function(e){return"number"==typeof e}));if(2===arguments.length){if(1===e[1].length)return Ie.apply(void 0,[e[1][0]].concat(_toConsumableArray(e[0])));if(1===e[0].length)return Ie.apply(void 0,[e[0][0]].concat(_toConsumableArray(e[1])));if(e[0].length>1&&e[1].length>1)return Ie.apply(void 0,[te.apply(void 0,_toConsumableArray(e))].concat(_toConsumableArray(e[0])))}else switch(t.length){case 0:return Ie(1,0,0,0);case 1:return Ie(t[0],0,0,0);default:return Ie.apply(void 0,[t.pop()].concat(_toConsumableArray(t)))}return Ie(1,0,0,0)},Le=[[0,1,3,4,9,10],[0,1,2,3,4,5,6,7,8,9,10,11],[0,1,2,void 0,3,4,5,void 0,6,7,8,void 0,9,10,11]];[11,7,3].forEach((function(e){return delete Le[2][e]}));var Te=function matrix_map_3x4(e){return Le[e<8?0:e<13?1:2]},Fe=function get_matrix_3x4(){var e=a(arguments),t=_toConsumableArray(fe);return Te(e.length).forEach((function(n,r){null!=e[r]&&(t[n]=e[r])})),t},Ve=Object.freeze({__proto__:null,get_vector:Ee,get_vector_of_vectors:Oe,get_segment:je,get_line:Pe,get_ray:Se,get_rect_params:ze,get_rect:Ne,get_circle:qe,get_matrix_3x4:Fe}),Be=function fEqual(e,t){return e===t},Ge=function fEpsilonEqual(e,t){return Math.abs(e-t)<d},De=function array_similarity_test(e,t){return Array.from(Array(e.length-1)).map((function(n,r){return t(e[0],e[r+1])})).reduce((function(e,t){return e&&t}),!0)},Re=function equivalent_vector2(e,t){return Math.abs(e[0]-t[0])<d&&Math.abs(e[1]-t[1])<d},Ue=function equivalent_vectors(){var e=Array.from(arguments),n=e.map((function(e){return e.length})).reduce((function(e,t){return e>t?e:t})),r=e.map((function(e){return t(n,e)}));return Array.from(Array(arguments.length-1)).map((function(e,t){return r[0].map((function(e,n){return Math.abs(r[0][n]-r[t+1][n])<d})).reduce((function(e,t){return e&&t}),!0)})).reduce((function(e,t){return e&&t}),!0)},Ze=Object.freeze({__proto__:null,equivalent_vector2:Re,equivalent_numbers:function equivalent_numbers(){return 0!==arguments.length&&(1===arguments.length&&void 0!==arguments[0]?equivalent_numbers.apply(void 0,_toConsumableArray(arguments[0])):De(arguments,Ge))},equivalent_vectors:Ue,equivalent:function equivalent(){var e=c.apply(void 0,arguments);if(e.length<1)return!1;var t=_typeof(e[0]);if("undefined"===t)return!1;switch(t){case"number":return De(e,Ge);case"boolean":case"string":return De(e,Be);case"object":return e[0].constructor===Array?Ue.apply(void 0,_toConsumableArray(e)):De(e,(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));default:return}}}),He=function sort_points_along_vector2(e,t){return e.map((function(e){return{point:e,d:e[0]*t[0]+e[1]*t[1]}})).sort((function(e,t){return e.d-t.d})).map((function(e){return e.point}))},Xe=Object.freeze({__proto__:null,sort_points_along_vector2:He}),We=function smallest_comparison_search(e,t,n){for(var r,o=t.map((function(t,r){return{o:t,i:r,d:n(e,t)}})),i=1/0,c=0;c<o.length;c+=1)o[c].d<i&&(r=c,i=o[c].d);return r},Ye=function nearest_point_on_line(e,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;n=t(e.length,n),r=t(e.length,r);var c=U(e),a=W(r,n),u=Y(e,a),s=u/c,l=o(s,i);return X(n,H(e,l))},$e=function nearest_point_on_polygon(e,t){var n=e.map((function(e,t,n){return W(n[(t+1)%n.length],e)}));return e.map((function(e,r){return Ye(n[r],e,t,q)})).map((function(e,n){return{point:e,i:n,distance:ne(e,t)}})).sort((function(e,t){return e.distance-t.distance})).shift()},Ke=function nearest_point_on_circle(e,t,n){return X(t,H(Z(W(n,t)),e))},Je=Object.freeze({__proto__:null,smallest_comparison_search:We,nearest_point2:function nearest_point2(e,t){var n=We(e,t,te);return void 0===n?void 0:t[n]},nearest_point:function nearest_point(e,t){var n=We(e,t,ne);return void 0===n?void 0:t[n]},nearest_point_on_line:Ye,nearest_point_on_polygon:$e,nearest_point_on_circle:Ke,nearest_point_on_ellipse:function nearest_point_on_ellipse(){return!1}}),Qe=function counter_clockwise_angle_radians(e,t){for(;e<0;)e+=p;for(;t<0;)t+=p;for(;e>p;)e-=p;for(;t>p;)t-=p;var n=t-e;return n>=0?n:p-(e-t)},et=function clockwise_angle2(e,t){var n=t[0]*e[0]+t[1]*e[1],r=t[0]*e[1]-t[1]*e[0],o=Math.atan2(r,n);return o<0&&(o+=p),o},tt=function counter_clockwise_angle2(e,t){var n=e[0]*t[0]+e[1]*t[1],r=e[0]*t[1]-e[1]*t[0],o=Math.atan2(r,n);return o<0&&(o+=p),o},nt=function clockwise_bisect2(e,t){return w(k(e)-et(e,t)/2)},rt=function counter_clockwise_bisect2(e,t){return w(k(e)+tt(e,t)/2)},ot=function bisect_lines2(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,i=Q(e,n),c=Y(e,n),a=i>-o?[rt(e,n)]:[nt(e,n)];a[1]=i>-o?oe(a[0]):ie(a[0]);var u=(r[0]-t[0])*n[1]-n[0]*(r[1]-t[1]),s=u/i,l=[e,n].map((function(e){return Z(e)})),p=Math.abs(Q.apply(void 0,_toConsumableArray(l)))<o,v=p?$(t,r):[t[0]+e[0]*s,t[1]+e[1]*s],g=a.map((function(e){return{vector:e,origin:v}}));return p&&delete g[c>-o?1:0],g},it=function counter_clockwise_order_radians(){var e=a(arguments),t=e.map((function(e,t){return t})).sort((function(t,n){return e[t]-e[n]}));return t.slice(t.indexOf(0),t.length).concat(t.slice(0,t.indexOf(0)))},ct=function counter_clockwise_sectors_radians(){var e=a(arguments),t=it(e).map((function(t){return e[t]}));return t.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){return Qe(e[0],e[1])}))},at=function counter_clockwise_subsect_radians(e,t,n){var r=Qe(t,n)/e;return Array.from(Array(e-1)).map((function(e,n){return t+r*(n+1)}))},ut=Object.freeze({__proto__:null,is_counter_clockwise_between:function is_counter_clockwise_between(e,t,n){for(;n<t;)n+=p;for(;e>t;)e-=p;for(;e<t;)e+=p;return e<n},clockwise_angle_radians:function clockwise_angle_radians(e,t){for(;e<0;)e+=p;for(;t<0;)t+=p;for(;e>p;)e-=p;for(;t>p;)t-=p;var n=e-t;return n>=0?n:p-(t-e)},counter_clockwise_angle_radians:Qe,clockwise_angle2:et,counter_clockwise_angle2:tt,clockwise_bisect2:nt,counter_clockwise_bisect2:rt,bisect_lines2:ot,counter_clockwise_order_radians:it,counter_clockwise_order2:function counter_clockwise_order2(){return it(Oe(arguments).map(k))},counter_clockwise_sectors_radians:ct,counter_clockwise_sectors2:function counter_clockwise_sectors2(){return ct(Oe(arguments).map(k))},counter_clockwise_subsect_radians:at,counter_clockwise_subsect2:function counter_clockwise_subsect2(e,t,n){var r=Math.atan2(t[1],t[0]),o=Math.atan2(n[1],n[0]);return at(e,r,o).map(w)}}),st=function overlap_line_point(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,i=W(n,t),c=U(e),a=Math.sqrt(c);if(a<o)return!1;var u=Q(i,e.map((function(e){return e/a}))),s=Y(i,e)/c;return Math.abs(u)<o&&r(s,o/a)},ft=function intersect_line_line(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:O,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d,a=Q(Z(e),Z(n));if(!(Math.abs(a)<c)){var u=Q(e,n),s=-u,l=[r[0]-t[0],r[1]-t[1]],p=[-l[0],-l[1]],v=Q(l,n)/u,g=Q(p,e)/s;return o(v,c/R(e))&&i(g,c/R(n))?X(t,H(e,v)):void 0}},lt=function circumcircle(e,t,n){var r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],c=n[1]-e[1],a=r*(e[0]+t[0])+o*(e[1]+t[1]),u=i*(e[0]+n[0])+c*(e[1]+n[1]),s=2*(r*(n[1]-t[1])-o*(n[0]-t[0]));if(Math.abs(s)<d){var l=Math.min(e[0],t[0],n[0]),p=Math.min(e[1],t[1],n[1]),v=.5*(Math.max(e[0],t[0],n[0])-l),g=.5*(Math.max(e[1],t[1],n[1])-p);return{origin:[l+v,p+g],radius:Math.sqrt(v*v+g*g)}}var m=[(c*a-o*u)/s,(r*u-i*a)/s],h=m[0]-e[0],b=m[1]-e[1];return{origin:m,radius:Math.sqrt(h*h+b*b)}},pt=function signed_area(e){return.5*e.map((function(e,t,n){var r=n[(t+1)%n.length];return e[0]*r[1]-r[0]*e[1]})).reduce(h,0)},dt=function centroid(e){var t=1/(6*pt(e));return e.map((function(e,t,n){var r=n[(t+1)%n.length],o=e[0]*r[1]-r[0]*e[1];return[(e[0]+r[0])*o,(e[1]+r[1])*o]})).reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(e){return e*t}))},vt=function enclosing_rectangle(e){var t=Array(e[0].length).fill(1/0),n=Array(e[0].length).fill(-1/0);e.forEach((function(e){return e.forEach((function(e,r){e<t[r]&&(t[r]=e),e>n[r]&&(n[r]=e)}))}));var r=n.map((function(e,n){return e-t[n]}));return ze(t[0],t[1],r[0],r[1])},_t=function angle_array(e){return Array.from(Array(Math.floor(e))).map((function(t,n){return p*(n/e)}))},gt=function angles_to_vecs(e,t){return e.map((function(e){return[t*Math.cos(e),t*Math.sin(e)]})).map((function(e){return e.map((function(e){return o(e,14)}))}))},mt=function make_regular_polygon(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return gt(_t(e),t)},ht=function make_regular_polygon_side_aligned(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Math.PI/e,r=_t(e).map((function(e){return e+n}));return gt(r,t)},yt=function split_convex_polygon(e,t,n){var r=e.map((function(e,r){return{point:st(t,n,e,E)?e:null,at_index:r}})).filter((function(e){return null!=e.point})),o=e.map((function(e,r,o){return{point:ft(t,n,W(e,o[(r+1)%o.length]),o[(r+1)%o.length],O,N),at_index:r}})).filter((function(e){return null!=e.point}));if(2==o.length){var i=o.slice().sort((function(e,t){return e.at_index-t.at_index})),c=e.slice(i[1].at_index+1).concat(e.slice(0,i[0].at_index+1));c.push(i[0].point),c.push(i[1].point);var a=e.slice(i[0].at_index+1,i[1].at_index+1);return a.push(i[1].point),a.push(i[0].point),[c,a]}if(1==o.length&&1==r.length){r[0].type="v",o[0].type="e";var u=r.concat(o).sort((function(e,t){return e.at_index-t.at_index})),s=e.slice(u[1].at_index+1).concat(e.slice(0,u[0].at_index+1));"e"===u[0].type&&s.push(u[0].point),s.push(u[1].point);var l=e.slice(u[0].at_index+1,u[1].at_index+1);return"e"===u[1].type&&l.push(u[1].point),l.push(u[0].point),[s,l]}if(2==r.length){var p=r.slice().sort((function(e,t){return e.at_index-t.at_index}));return[e.slice(p[1].at_index).concat(e.slice(0,p[0].at_index+1)),e.slice(p[0].at_index,p[1].at_index+1)]}return[e.slice()]},bt=function convex_hull(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,n=1e4,r=e.slice().sort((function(e,n){return Math.abs(e[1]-n[1])<t?e[0]-n[0]:e[1]-n[1]})),o=[];o.push(r[0]);var i=0,c=0,a=function _loop(){c+=1;var e=o.length-1,n=r.filter((function(n){return!(Math.abs(n[0]-o[e][0])<t&&Math.abs(n[1]-o[e][1])<t)})).map((function(t){for(var n=Math.atan2(o[e][1]-t[1],o[e][0]-t[0]);n<i;)n+=2*Math.PI;return{node:t,angle:n,distance:void 0}})).sort((function(e,t){return e.angle<t.angle?-1:e.angle>t.angle?1:0}));if(0===n.length)return{v:void 0};var a=n[0];if(n=n.filter((function(e){return Math.abs(a.angle-e.angle)<t})).map((function(t){var n=Math.sqrt(Math.pow(o[e][0]-t.node[0],2)+Math.pow(o[e][1]-t.node[1],2));return t.distance=n,t})).sort((function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0})),o.filter((function(e){return e===n[0].node})).length>0)return{v:o};o.push(n[0].node),i=Math.atan2(o[e][1]-n[0].node[1],o[e][0]-n[0].node[0])};do{var u=a();if("object"===_typeof(u))return u.v}while(c<n)},At=function recurse_skeleton(e,t,n){var r=e.map((function(e,t){return{vector:n[t],origin:e}})).map((function(e,t,n){return ft(e.vector,e.origin,n[(t+1)%n.length].vector,n[(t+1)%n.length].origin,P,P)})),o=t.map((function(e,t){return Ye(e.vector,e.origin,r[t],(function(e){return e}))}));if(3===e.length)return e.map((function(e){return{type:"skeleton",points:[e,r[0]]}})).concat([{type:"perpendicular",points:[o[0],r[0]]}]);var i=r.map((function(e,t){return ne(e,o[t])})),c=0;i.forEach((function(e,t){e<i[c]&&(c=t)}));var a=[{type:"skeleton",points:[e[c],r[c]]},{type:"skeleton",points:[e[(c+1)%e.length],r[c]]},{type:"perpendicular",points:[o[c],r[c]]}],u=nt(re(t[(c+t.length-1)%t.length].vector),t[(c+1)%t.length].vector),s=c===e.length-1;return e.splice(c,2,r[c]),t.splice(c,1),n.splice(c,2,u),s&&(e.splice(0,1),n.splice(0,1),t.push(t.shift())),a.concat(recurse_skeleton(e,t,n))},xt=function straight_skeleton(e){var t=e.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){return{vector:W(e[1],e[0]),origin:e[0]}})),n=e.map((function(e,t,n){return[(t-1+n.length)%n.length,t,(t+1)%n.length].map((function(e){return n[e]}))})).map((function(e){return[W(e[0],e[1]),W(e[2],e[1])]})).map((function(e){return nt.apply(void 0,_toConsumableArray(e))}));return At(e,t,n)},kt=Object.freeze({__proto__:null,circumcircle:lt,signed_area:pt,centroid:dt,enclosing_rectangle:vt,make_regular_polygon:mt,make_regular_polygon_side_aligned:ht,make_regular_polygon_inradius:function make_regular_polygon_inradius(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return mt(e,t/Math.cos(Math.PI/e))},make_regular_polygon_inradius_side_aligned:function make_regular_polygon_inradius_side_aligned(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ht(e,t/Math.cos(Math.PI/e))},make_regular_polygon_side_length:function make_regular_polygon_side_length(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return mt(e,t/2/Math.sin(Math.PI/e))},make_regular_polygon_side_length_side_aligned:function make_regular_polygon_side_length_side_aligned(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ht(e,t/2/Math.sin(Math.PI/e))},split_convex_polygon:yt,convex_hull:bt,straight_skeleton:xt}),wt=function intersect_circle_line(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d,c=Math.pow(n[0],2)+Math.pow(n[1],2),a=Math.sqrt(c),u=0===a?n:n.map((function(e){return e/a})),s=oe(u),l=W(r,t),p=Q(l,u);if(!(Math.abs(p)>e+i)){var v=Math.sqrt(Math.pow(e,2)-Math.pow(p,2)),g=function f(e,n){return t[n]-s[n]*p+u[n]*e},m=Math.abs(e-Math.abs(p))<i?[v].map((function(e){return[e,e].map(g)})):[-v,v].map((function(e){return[e,e].map(g)})),h=m.map((function(e){return e.map((function(e,t){return e-r[t]}))})).map((function(e){return e[0]*n[0]+n[1]*e[1]})).map((function(e){return e/c}));return m.filter((function(e,t){return o(h[t],i)}))}},Ct=function line_to_ud(e,t){var n=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)),r=[-e[1],e[0]],o=(t[0]*r[0]+t[1]*r[1])/n;return o<0?{u:[-r[0]/n,-r[1]/n],d:-o}:{u:[r[0]/n,r[1]/n],d:o}},Mt=function ud_to_line(e){var t=e.u,n=e.d;return{vector:[t[1],-t[0]],origin:[n*t[0],n*t[1]]}},Et=function cubrt(e){return e<0?-Math.pow(-e,1/3):Math.pow(e,1/3)},Ot=Object.freeze({__proto__:null,axiom1:function axiom1(e,t){return T.line(Z(W.apply(void 0,_toConsumableArray(n(t,e)))),e)},axiom2:function axiom2(e,t){return T.line(Z(oe(W.apply(void 0,_toConsumableArray(n(t,e))))),$(e,t))},axiom3:function axiom3(e,t,n,r){return ot(e,t,n,r).map(T.line)},axiom4:function axiom4(e,t){return T.line(oe(Z(e)),t)},axiom5:function axiom5(e,t,r,o){return(wt(ne(r,o),r,e,t,E)||[]).map((function(e){return T.line(Z(oe(W.apply(void 0,_toConsumableArray(n(e,o))))),$(o,e))}))},axiom6:function axiom6(e,t,n,r,o,i){var c=Ct(e,t),a=Ct(n,r);if(Math.abs(1-Y(c.u,o)/c.d)<.02)return[];var u=[-c.u[1],c.u[0]],s=[o[0]+c.d*c.u[0]-2*i[0],o[1]+c.d*c.u[1]-2*i[1]],l=[c.d*c.u[0]-o[0],c.d*c.u[1]-o[1]],p=Y(i,a.u)-a.d,v=2*Y(l,u),g=Y(l,l),m=Y(X(s,l),u),h=Y(s,l),b=Y(u,a.u),k=Y(l,a.u),w=b,C=p+m*b+k,M=p*v+h*b+m*k,E=p*g+h*k,O=function make_point(e){return[c.d*c.u[0]+e*u[0],c.d*c.u[1]+e*u[1]]},j=0;Math.abs(M)>d&&(j=1),Math.abs(C)>d&&(j=2),Math.abs(w)>d&&(j=3);var P=[];switch(j){case 1:P.push(O(-E/M));break;case 2:var S=Math.pow(M,2)-4*C*E;if(S<-d)break;var N=-M/(2*C);if(S<d){P.push(O(N));break}var I=Math.sqrt(S)/(2*C);P.push(O(N+I),O(N-I));break;case 3:var q=C/w,L=M/w,F=E/w,V=(3*L-Math.pow(q,2))/9,B=(9*q*L-27*F-2*Math.pow(q,3))/54,G=Math.pow(V,3)+Math.pow(B,2),D=-q/3;if(G>0){var R=Math.sqrt(G),U=Et(B+R),H=Et(B-R);P.push(O(D+U+H));break}if(Math.abs(G)<d){var K=Math.pow(B,1/3);if(isNaN(K))break;P.push(O(D+2*K),O(D-K));break}var J=Math.sqrt(-G),Q=Math.atan2(J,B)/3,ee=Math.pow(Math.pow(B,2)-G,1/6),te=ee*Math.cos(Q),ne=ee*Math.sin(Q);P.push(O(D+2*te),O(D-te-Math.sqrt(3)*ne),O(D-te+Math.sqrt(3)*ne))}return P.map((function(e){return Z(W(e,o))})).map((function(e,t){return{u:e,d:Y(e,$(P[t],o))}})).map(Mt).map(T.line)},axiom7:function axiom7(e,t,r,o){var i=ft(e,t,r,o,E,E);return void 0===i?void 0:T.line(Z(oe(W.apply(void 0,_toConsumableArray(n(i,o))))),$(o,i))}}),jt=function acos_safe(e){return e>=1?0:e<=-1?Math.PI:Math.acos(e)},Pt=function rotate_vector2(e,t,n){var r=t[0]-e[0],o=t[1]-e[1],i=r*Math.cos(n)+o*Math.sin(n),c=o*Math.cos(n)-r*Math.sin(n);return[e[0]+i,e[1]+c]},St=function intersect_circle_circle(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,i=e<n?e:n,c=e<n?n:e,a=e<n?t:r,u=e<n?r:t,s=[a[0]-u[0],a[1]-u[1]],l=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2));if(!(l<o)){var p=s.map((function(e,t){return e/l*c+u[t]}));if(Math.abs(c+i-l)<o||Math.abs(c-(i+l))<o)return[p];if(!(l+i<c||c+i<l)){var v=jt((i*i-l*l-c*c)/(-2*l*c)),g=Pt(u,p,+v),m=Pt(u,p,-v);return[g,m]}}},zt=function overlap_convex_polygon_point(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;return e.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){return Q(Z(W(e[1],e[0])),W(t,e[0]))})).map((function(e){return n(e,r)})).map((function(e,t,n){return e===n[0]})).reduce((function(e,t){return e&&t}),!0)},Nt=function get_unique_pair(e){for(var t=1;t<e.length;t+=1)if(!Re(e[0],e[t]))return[e[0],e[t]]},It=function intersect_convex_polygon_line_inclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d,c=e.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){return ft(W(e[1],e[0]),e[0],t,n,r,o,i)})).filter((function(e){return void 0!==e}));switch(c.length){case 0:return;case 1:return[c];default:return Nt(c)||[c[0]]}},qt=function intersect_convex_polygon_line(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:d,a=It(e,t,n,o,i,c);switch(i){case P:r=j;break;case N:r=S;break;default:return a}var u=It(e,t,n,S,r,c);if(void 0!==u){var s=Nt(u);if(void 0===s)switch(i){case O:return;case P:return zt(e,n,M,c)?u:void 0;case N:return zt(e,X(n,t),M,c)||zt(e,n,M,c)?u:void 0}return zt(e,$.apply(void 0,_toConsumableArray(s)),M,c)?s:a}},Lt={polygon:function polygon(e){return[e]},rect:function rect(e){return[e]},circle:function circle(e){return[e.radius,e.origin]},line:function line(e){return[e.vector,e.origin]},ray:function ray(e){return[e.vector,e.origin]},segment:function segment(e){return[e.vector,e.origin]}},Tt={polygon:{line:function line(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[S,r,o]))},ray:function ray(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[S,r,o]))},segment:function segment(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[S,r,o]))}},circle:{circle:function circle(e,t,n,r,o){return St.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[o]))},line:function line(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[r,o]))},ray:function ray(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[r,o]))},segment:function segment(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[r,o]))}},line:{polygon:function polygon(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[S,n,o]))},circle:function circle(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[n,o]))},line:function line(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},ray:function ray(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},segment:function segment(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))}},ray:{polygon:function polygon(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[S,n,o]))},circle:function circle(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[n,o]))},line:function line(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},ray:function ray(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},segment:function segment(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))}},segment:{polygon:function polygon(e,t,n,r,o){return qt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[S,n,o]))},circle:function circle(e,t,n,r,o){return wt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[n,o]))},line:function line(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},ray:function ray(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},segment:function segment(e,t,n,r,o){return ft.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))}}},Ft={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment"},Vt={polygon:M,rect:M,circle:M,line:O,ray:P,segment:N},Bt=function intersect(t,n,r){var o=e(t),i=e(n),c=Ft[o],a=Ft[i],u=Lt[o](t),s=Lt[i](n),l=t.domain_function||Vt[o],p=n.domain_function||Vt[i];return Tt[c][a](u,s,l,p,r)},Gt=function overlap_line_line(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:O,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:O,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d,a=Q(e,n),u=-a;if(Math.abs(a)<c)return st(e,t,r,o,c)||st(re(e),X(t,e),r,o,c)||st(n,r,t,i,c)||st(re(n),X(r,n),t,i,c);var s=[r[0]-t[0],r[1]-t[1]],l=[-s[0],-s[1]],p=Q(s,n)/a,v=Q(l,e)/u;return o(p,c/R(e))&&i(v,c/R(n))},Dt=function overlap_convex_polygons(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;if(zt(e,t[0],r,o))return!0;if(zt(t,e[0],r,o))return!0;for(var i=e.map((function(e,t,n){return[W(n[(t+1)%n.length],e),e]})),c=t.map((function(e,t,n){return[W(n[(t+1)%n.length],e),e]})),a=0;a<i.length;a+=1)for(var u=0;u<c.length;u+=1)if(Gt(i[a][0],i[a][1],c[u][0],c[u][1],n,n,o))return!0;return!1},Rt=function overlap_circle_point(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return r(e-te(t,n),o)},Ut={polygon:function polygon(e){return[e]},rect:function rect(e){return[e]},circle:function circle(e){return[e.radius,e.origin]},line:function line(e){return[e.vector,e.origin]},ray:function ray(e){return[e.vector,e.origin]},segment:function segment(e){return[e.vector,e.origin]},vector:function vector(e){return[e]}},Zt={polygon:{polygon:function polygon(e,t,n,r,o){return Dt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[N,M,o]))},vector:function vector(e,t,n,r,o){return zt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,o]))}},circle:{vector:function vector(e,t,n,r,o){return Rt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[M,o]))}},line:{line:function line(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},ray:function ray(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},segment:function segment(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},vector:function vector(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,o]))}},ray:{line:function line(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},ray:function ray(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},segment:function segment(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},vector:function vector(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,o]))}},segment:{line:function line(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},ray:function ray(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,n,o]))},segment:function segment(e,t,n,r,o){return Gt.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,r,o]))},vector:function vector(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[n,o]))}},vector:{polygon:function polygon(e,t,n,r,o){return zt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,o]))},circle:function circle(e,t,n,r,o){return Rt.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[M,o]))},line:function line(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,o]))},ray:function ray(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,o]))},segment:function segment(e,t,n,r,o){return st.apply(void 0,_toConsumableArray(t).concat(_toConsumableArray(e),[r,o]))},vector:function vector(e,t,n,r,o){return Re.apply(void 0,_toConsumableArray(e).concat(_toConsumableArray(t),[o]))}}},Ht={polygon:"polygon",rect:"polygon",circle:"circle",line:"line",ray:"ray",segment:"segment",vector:"vector"},Xt={polygon:M,rect:M,circle:M,line:O,ray:P,segment:N,vector:O},Wt=function overlap(t,n,r){var o=e(t),i=e(n),c=Ht[o],a=Ht[i],u=Ut[o](t),s=Ut[i](n),l=t.domain_function||Xt[o],p=n.domain_function||Xt[i];return Zt[c][a](u,s,l,p,r)},Yt=function intersect_line_seg_include(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return ft(e,t,W(r,n),n,E,S,o)},$t=function intersect_line_seg_exclude(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return ft(e,t,W(r,n),n,O,N,o)},Kt=function intersect_ray_seg_include(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return ft(e,t,W(r,n),n,j,S,o)},Jt=function intersect_ray_seg_exclude(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return ft(e,t,W(r,n),n,P,N,o)},Qt=function intersect_seg_seg_include(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return ft(W(t,e),e,W(r,n),n,S,S,o)},en=function filter_two_unique_points(e){for(var t=1;t<e.length;t+=1)if(!Re(e[0],e[t]))return[e[0],e[t]]},tn=function get_unique_points(e){for(var t=[],n=0;n<e.length;n+=1){for(var r=!1,o=0;o<t.length;o+=1)Re(e[n],t[o])&&(r=!0);r||t.push(e[n])}return t},nn=function collinear_check(e,t,n){var r=e.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){return W.apply(void 0,_toConsumableArray(e))}));return r.map((function(e,n){return ae(e,t)?n:void 0})).filter(b).map((function(t){return st(r[t],e[t],n)})).reduce((function(e,t){return e||t}),!1)},rn=function clip_intersections(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d;return t.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(t){return e(n,r,t[0],t[1],o)})).filter(b)},on=function clip_line_in_convex_poly_exclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=(rn($t,e,t,n,r),rn(Yt,e,t,n,r));if(void 0!==o){var i=en(o);if(void 0!==i)return zt(e,$.apply(void 0,_toConsumableArray(i)),M,r)?i:void 0}},cn=function clip_ray_in_convex_poly_exclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=(rn(Jt,e,t,n,r),rn(Kt,e,t,n,r));if(void 0!==o){var i=en(o);return void 0===i?zt(e,n,M,r)?[n,o[0]]:void 0:zt(e,$.apply(void 0,_toConsumableArray(i)),M,r)?i:void 0}},an=function clip_segment_func(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=[t,n],i=o.map((function(t){return zt(e,t,C,r)}));if(!0===i[0]&&!0===i[1])return[_toConsumableArray(t),_toConsumableArray(n)];var c=rn(Qt,e,t,n,r),a=tn(c);if(2===a.length)return a;if(a.length>2){var u=He(a,W(n,t));return[u[0],u[u.length-1]]}if(c.length>0){var s=o.map((function(t){return zt(e,t,M,r)}));if(!0===s[0])return[_toConsumableArray(t),c[0]];if(!0===s[1])return[_toConsumableArray(n),c[0]]}},un=function clip_segment_in_convex_poly_exclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=W(n,t);if(!nn(e,o,t))return an(e,t,n,r)},sn=Object.freeze({__proto__:null,clip_line_in_convex_poly_inclusive:function clip_line_in_convex_poly_inclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=rn(Yt,e,t,n,r);switch(o.length){case 0:case 1:return;default:return en(o)}},clip_line_in_convex_poly_exclusive:on,clip_ray_in_convex_poly_inclusive:function clip_ray_in_convex_poly_inclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,o=rn(Kt,e,t,n,r);if(0!==o.length){zt(e,n,C);return en(o)||[n,o[0]]}},clip_ray_in_convex_poly_exclusive:cn,clip_segment_in_convex_poly_inclusive:function clip_segment_in_convex_poly_inclusive(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d;return an(e,t,n,r)},clip_segment_in_convex_poly_exclusive:un}),fn={preserve:{magnitude:function magnitude(){return R(this)},isEquivalent:function isEquivalent(){return Ue(this,Ee(arguments))},isParallel:function isParallel(){return ae.apply(void 0,_toConsumableArray(n(this,Ee(arguments))))},isCollinear:function isCollinear(e){return Wt(this,e)},dot:function dot(){return Y.apply(void 0,_toConsumableArray(n(this,Ee(arguments))))},distanceTo:function distanceTo(){return ne.apply(void 0,_toConsumableArray(n(this,Ee(arguments))))},overlap:function overlap(e){return Wt(this,e)}},vector:{copy:function copy(){return _toConsumableArray(this)},normalize:function normalize(){return Z(this)},scale:function scale(){return H(this,arguments[0])},flip:function flip(){return re(this)},rotate90:function rotate90(){return oe(this)},rotate270:function rotate270(){return ie(this)},cross:function cross(){return ee(t(3,this),t(3,Ee(arguments)))},transform:function transform(){return pe(Fe(arguments),t(3,this))},add:function add(){return X(this,t(this.length,Ee(arguments)))},subtract:function subtract(){return W(this,t(this.length,Ee(arguments)))},rotateZ:function rotateZ(e,n){return pe(Fe(G(e,n)),t(3,this))},lerp:function lerp(e,n){return J(this,t(this.length,Ee(e)),n)},midpoint:function midpoint(){return $.apply(void 0,_toConsumableArray(n(this,Ee(arguments))))},bisect:function bisect(){return rt(this,Ee(arguments))}}},ln={};Object.keys(fn.preserve).forEach((function(e){ln[e]=fn.preserve[e]})),Object.keys(fn.vector).forEach((function(e){ln[e]=function(){return T.vector.apply(T,_toConsumableArray(fn.vector[e].apply(this,arguments)))}}));var pn={fromAngle:function fromAngle(e){return T.vector(Math.cos(e),Math.sin(e))},fromAngleDegrees:function fromAngleDegrees(e){return T.vector.fromAngle(e*l)}},dn={vector:{P:Array.prototype,A:function VectorArgs(){var e=this;Ee(arguments).forEach((function(t){return e.push(t)}))},G:{x:function x(){return this[0]},y:function y(){return this[1]},z:function z(){return this[2]}},M:ln,S:pn}},vn={};vn.prototype=Object.create(Object.prototype),vn.prototype.constructor=vn,vn.prototype.domain_function=O,vn.prototype.isParallel=function(){var e=n(this.vector,Pe.apply(void 0,arguments).vector);return ae.apply(void 0,_toConsumableArray(e))},vn.prototype.isCollinear=function(e){return Wt(this,e)},vn.prototype.isDegenerate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return ce(this.vector,e)},vn.prototype.reflectionMatrix=function(){return T.matrix(we(this.vector,this.origin))},vn.prototype.nearestPoint=function(){var e=Ee(arguments);return T.vector(Ye(this.vector,this.origin,e,this.clip_function))},vn.prototype.transform=function(){var e=this.dimension,n=de(Fe(arguments),t(3,this.vector),t(3,this.origin));return this.constructor(t(e,n.vector),t(e,n.origin))},vn.prototype.translate=function(){var e=X.apply(void 0,_toConsumableArray(n(this.origin,Ee(arguments))));return this.constructor(this.vector,e)},vn.prototype.intersect=function(){return Bt.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},vn.prototype.overlap=function(){return Wt.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},vn.prototype.bisect=function(){var e=Pe(arguments);return ot(this.vector,this.origin,e.vector,e.origin)},Object.defineProperty(vn.prototype,"dimension",{get:function get(){return[this.vector,this.origin].map((function(e){return e.length})).reduce((function(e,t){return Math.max(e,t)}),0)}});var _n={fromPoints:function fromPoints(){var e=Oe(arguments);return this.constructor({vector:W(e[1],e[0]),origin:e[0]})},fromAngle:function fromAngle(){var e=arguments[0]||0;return this.constructor({vector:[Math.cos(e),Math.sin(e)],origin:[0,0]})},perpendicularBisector:function perpendicularBisector(){var e=Oe(arguments);return this.constructor({vector:oe(W(e[1],e[0])),origin:K(e[0],e[1])})}},gn={line:{P:vn.prototype,A:function A(){var e=Pe.apply(void 0,arguments);this.vector=T.vector(e.vector),this.origin=T.vector(t(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:O})},G:{length:function length(){return 1/0}},M:{inclusive:function inclusive(){return this.domain_function=E,this},exclusive:function exclusive(){return this.domain_function=O,this},clip_function:function clip_function(e){return e},svgPath:function svgPath(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e4,t=X(this.origin,H(this.vector,-e/2)),n=H(this.vector,e);return"M".concat(t[0]," ").concat(t[1],"l").concat(n[0]," ").concat(n[1])}},S:_n}},mn={ray:{P:vn.prototype,A:function A(){var e=Pe.apply(void 0,arguments);this.vector=T.vector(e.vector),this.origin=T.vector(t(this.vector.length,e.origin)),Object.defineProperty(this,"domain_function",{writable:!0,value:P})},G:{length:function length(){return 1/0}},M:{inclusive:function inclusive(){return this.domain_function=j,this},exclusive:function exclusive(){return this.domain_function=P,this},flip:function flip(){return T.ray(re(this.vector),this.origin)},scale:function scale(e){return T.ray(this.vector.scale(e),this.origin)},normalize:function normalize(){return T.ray(this.vector.normalize(),this.origin)},clip_function:I,svgPath:function svgPath(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=this.vector.scale(e);return"M".concat(this.origin[0]," ").concat(this.origin[1],"l").concat(t[0]," ").concat(t[1])}},S:_n}},hn={segment:{P:vn.prototype,A:function A(){var e=je.apply(void 0,arguments);this.points=[T.vector(e[0]),T.vector(e[1])],this.vector=this.points[1].subtract(this.points[0]),this.origin=this.points[0],Object.defineProperty(this,"domain_function",{writable:!0,value:N})},G:{0:function _(){return this.points[0]},1:function _(){return this.points[1]},length:function length(){return this.vector.magnitude()}},M:{inclusive:function inclusive(){return this.domain_function=S,this},exclusive:function exclusive(){return this.domain_function=N,this},clip_function:q,transform:function transform(){for(var e=this.points[0].length,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=Fe(r),c=this.points.map((function(e){return t(3,e)})).map((function(e){return pe(i,e)})).map((function(n){return t(e,n)}));return T.segment(c)},translate:function translate(){var translate=Ee(arguments),e=this.points.map((function(e){return X.apply(void 0,_toConsumableArray(n(e,translate)))}));return T.segment(e)},midpoint:function midpoint(){return T.vector(K(this.points[0],this.points[1]))},svgPath:function svgPath(){var e=this.points.map((function(e){return"".concat(e[0]," ").concat(e[1])}));return["M","L"].map((function(t,n){return"".concat(t).concat(e[n])})).join("")}},S:{fromPoints:function fromPoints(){return this.constructor.apply(this,arguments)}}}},yn=function pointOnEllipse(e,t,n,r,o,i){var c=Math.cos(o),a=Math.sin(o),u=Math.cos(i),s=Math.sin(i);return[e+c*n*u+-a*r*s,t+a*n*u+c*r*s]},bn=function pathInfo(e,t,n,r,o,i,c){var a=i;if(a<0&&!isNaN(a))for(;a<0;)a+=2*Math.PI;var u=c>2*Math.PI?2*Math.PI:c,s=yn(e,t,n,r,o,a),l=yn(e,t,n,r,o,a+u/2),p=yn(e,t,n,r,o,a+u),d=u/2>Math.PI?1:0,v=u/2>0?1:0;return{x1:s[0],y1:s[1],x2:l[0],y2:l[1],x3:p[0],y3:p[1],fa:d,fs:v}},An=function cln(e){return o(e,4)},xn=function ellipticalArcTo(e,t,n,r,o,i,c){return"A".concat(An(e)," ").concat(An(t)," ").concat(An(n)," ").concat(An(r)," ").concat(An(o)," ").concat(An(i)," ").concat(An(c))},kn={circle:{A:function CircleArgs(){var e=qe.apply(void 0,arguments);this.radius=e.radius,this.origin=T.vector.apply(T,_toConsumableArray(e.origin))},G:{x:function x(){return this.origin[0]},y:function y(){return this.origin[1]},z:function z(){return this.origin[2]}},M:{nearestPoint:function nearestPoint(){return T.vector(Ke(this.radius,this.origin,Ee(arguments)))},intersect:function intersect(e){return Bt(this,e)},svgPath:function svgPath(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,n=bn(this.origin[0],this.origin[1],this.radius,this.radius,0,e,t),r=xn(this.radius,this.radius,0,n.fa,n.fs,n.x2,n.y2),o=xn(this.radius,this.radius,0,n.fa,n.fs,n.x3,n.y3);return"M".concat(n.x1," ").concat(n.y1).concat(r).concat(o)},points:function points(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(e,n){return 2*Math.PI/t*n})).map((function(t){return[e.origin[0]+e.radius*Math.cos(t),e.origin[1]+e.radius*Math.sin(t)]}))},polygon:function polygon(){return T.polygon(this.points(arguments[0]))},segments:function segments(){var e=this.points(arguments[0]);return e.map((function(t,n){var r=(n+1)%e.length;return[t,e[r]]}))}},S:{fromPoints:function fromPoints(){if(3===arguments.length){var e=lt.apply(void 0,arguments);return this.constructor(e.radius,e.origin)}return this.constructor.apply(this,arguments)},fromThreePoints:function fromThreePoints(){var e=lt.apply(void 0,arguments);return this.constructor(e.radius,e.origin)}}}},wn=function getFoci(e,t,n,r){var o=t>n,i=o?Math.pow(t,2)-Math.pow(n,2):Math.pow(n,2)-Math.pow(t,2),c=Math.sqrt(i),a=o?Math.cos(r):Math.sin(r),u=o?Math.sin(r):Math.cos(r);return[T.vector(e[0]+c*a,e[1]+c*u),T.vector(e[0]-c*a,e[1]-c*u)]},Cn={ellipse:{A:function A(){var e=a(arguments).filter((function(e){return!isNaN(e)})),n=t(5,e);this.rx=n[0],this.ry=n[1],this.origin=T.vector(n[2],n[3]),this.spin=n[4],this.foci=wn(this.origin,this.rx,this.ry,this.spin)},G:{x:function x(){return this.origin[0]},y:function y(){return this.origin[1]}},M:{svgPath:function svgPath(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2*Math.PI,n=bn(this.origin[0],this.origin[1],this.rx,this.ry,this.spin,e,t),r=xn(this.rx,this.ry,this.spin/Math.PI*180,n.fa,n.fs,n.x2,n.y2),o=xn(this.rx,this.ry,this.spin/Math.PI*180,n.fa,n.fs,n.x3,n.y3);return"M".concat(n.x1," ").concat(n.y1).concat(r).concat(o)},points:function points(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return Array.from(Array(t)).map((function(e,n){return 2*Math.PI/t*n})).map((function(t){return yn(e.origin.x,e.origin.y,e.rx,e.ry,e.spin,t)}))},polygon:function polygon(){return T.polygon(this.points(arguments[0]))},segments:function segments(){var e=this.points(arguments[0]);return e.map((function(t,n){var r=(n+1)%e.length;return[t,e[r]]}))}},S:{}}},Mn=function makeClip(e){return void 0===e?void 0:T.segment(e)},En={area:function area(){return pt(this)},centroid:function centroid(){return T.vector(dt(this))},enclosingRectangle:function enclosingRectangle(){return T.rect(vt(this))},straightSkeleton:function straightSkeleton(){return xt(this)},scale:function scale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt(this),n=this.map((function(e){return[0,1].map((function(n,r){return e[r]-t[r]}))})).map((function(n){return n.map((function(r,o){return t[o]+n[o]*e}))}));return this.constructor.fromPoints(n)},rotate:function rotate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt(this),n=this.map((function(n){var r=[n[0]-t[0],n[1]-t[1]],o=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),i=Math.atan2(r[1],r[0]);return[t[0]+Math.cos(i+e)*o,t[1]+Math.sin(i+e)*o]}));return T.polygon(n)},translate:function translate(){var e=Ee.apply(void 0,arguments),t=this.map((function(t){return t.map((function(t,n){return t+e[n]}))}));return this.constructor.fromPoints(t)},transform:function transform(){var e=Fe.apply(void 0,arguments),n=this.map((function(n){return pe(e,t(3,n))}));return T.polygon(n)},nearest:function nearest(){var e=Ee.apply(void 0,arguments),t=$e(this,e);return void 0===t?void 0:Object.assign(t,{edge:this.sides[t.i]})},split:function split(){var e=Pe.apply(void 0,arguments),t=yt;return t(this,e.vector,e.origin).map((function(e){return T.polygon(e)}))},overlap:function overlap(){return Wt.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},intersect:function intersect(){return Bt.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)))},clipLine:function clipLine(){var e=Pe.apply(void 0,arguments),t=on(this,e.vector,e.origin);return Mn(t)},clipRay:function clipRay(){var e=Pe.apply(void 0,arguments),t=cn(this,e.vector,e.origin);return Mn(t)},clipSegment:function clipSegment(){var e=je.apply(void 0,arguments),t=un(this,e[0],e[1]);return Mn(t)},clip:function clip(t){switch(e(t)){case"segment":return this.clipSegment(t);case"ray":return this.clipRay(t);case"line":return this.clipLine(t);default:return}},svgPath:function svgPath(){var e=Array(this.length).fill("L");return e[0]="M","".concat(this.map((function(t,n){return"".concat(e[n]).concat(t[0]," ").concat(t[1])})).join(""),"z")}},On={};On.prototype=Object.create(Array.prototype),On.prototype.constructor=On,On.prototype.domain_function=M,Object.keys(En).forEach((function(e){On.prototype[e]=En[e]}));var jn=function rectToPoints(e){return[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]]},Pn={rect:{P:On.prototype,A:function A(){var e=Ne.apply(void 0,arguments);this.width=e.width,this.height=e.height,this.origin=T.vector(e.x,e.y),this.push.apply(this,_toConsumableArray(jn(this)))},G:{x:function x(){return this.origin[0]},y:function y(){return this.origin[1]},center:function center(){return T.vector(this.origin[0]+this.width/2,this.origin[1]+this.height/2)}},M:{area:function area(){return this.width*this.height},segments:function segments(){return function rectToSides(e){return[[[e.x,e.y],[e.x+e.width,e.y]],[[e.x+e.width,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],[[e.x,e.y+e.height],[e.x,e.y]]]}(this)},svgPath:function svgPath(){return"M".concat(this.origin.join(" "),"h").concat(this.width,"v").concat(this.height,"h").concat(-this.width,"Z")}},S:{fromPoints:function fromPoints(){return T.rect(vt(Oe(arguments)))}}}},Sn={polygon:{P:On.prototype,A:function A(){this.push.apply(this,_toConsumableArray(c(arguments))),this.sides=this.map((function(e,t,n){return[e,n[(t+1)%n.length]]})),this.vectors=this.sides.map((function(e){return W(e[1],e[0])})),Object.defineProperty(this,"domain_function",{writable:!0,value:M})},G:{isConvex:function isConvex(){return!0},points:function points(){return this}},M:{inclusive:function inclusive(){return this.domain_function=C,this},exclusive:function exclusive(){return this.domain_function=M,this},segments:function segments(){return this.sides},straightSkeleton:function straightSkeleton(){return xt(this)}},S:{fromPoints:function fromPoints(){return this.constructor.apply(this,arguments)},regularPolygon:function regularPolygon(){return this.constructor(mt.apply(void 0,arguments))},convexHull:function convexHull(){return this.constructor(bt.apply(void 0,arguments))}}}},zn=function assign(e,t){for(var n=0;n<12;n+=1)e[n]=t[n];return e},Nn={matrix:{P:Array.prototype,A:function A(){var e=this;Fe(arguments).forEach((function(t){return e.push(t)}))},G:{},M:{copy:function copy(){return T.matrix.apply(T,_toConsumableArray(Array.from(this)))},set:function set(){return zn(this,Fe(arguments))},isIdentity:function isIdentity(){return le(this)},multiply:function multiply(e){return zn(this,ve(this,e))},determinant:function determinant(){return _e(this)},inverse:function inverse(){return zn(this,ge(this))},translate:function translate(e,t,n){return zn(this,ve(this,me(e,t,n)))},rotateX:function rotateX(e){return zn(this,ve(this,ye(e)))},rotateY:function rotateY(e){return zn(this,ve(this,be(e)))},rotateZ:function rotateZ(e){return zn(this,ve(this,Ae(e)))},rotate:function rotate(e,t,n){var r=xe(e,t,n);return zn(this,ve(this,r))},scale:function scale(e){return zn(this,ve(this,ke(e)))},reflectZ:function reflectZ(e,t){var n=we(e,t);return zn(this,ve(this,n))},transform:function transform(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return T.vector(pe(this,t(3,Ee(n))))},transformVector:function transformVector(e){return T.vector(pe(this,t(3,Ee(e))))},transformLine:function transformLine(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Pe(t);return T.line(de(this,r.vector,r.origin))}},S:{}}},In=Object.assign({},dn,gn,mn,hn,kn,Cn,Pn,Sn,Nn),qn=function create(e,t){var n=Object.create(In[e].proto);return In[e].A.apply(n,t),n};Object.assign(T,{vector:function vector(){return qn("vector",arguments)},circle:function circle(){return qn("circle",arguments)},ellipse:function ellipse(){return qn("ellipse",arguments)},rect:function rect(){return qn("rect",arguments)},polygon:function polygon(){return qn("polygon",arguments)},line:function line(){return qn("line",arguments)},ray:function ray(){return qn("ray",arguments)},segment:function segment(){return qn("segment",arguments)},matrix:function matrix(){return qn("matrix",arguments)},junction:function junction(){return qn("junction",arguments)}}),Object.keys(In).forEach((function(e){var t={};t.prototype=null!=In[e].P?Object.create(In[e].P):Object.create(Object.prototype),t.prototype.constructor=t,T[e].prototype=t.prototype,T[e].prototype.constructor=T[e],Object.keys(In[e].G).forEach((function(n){return Object.defineProperty(t.prototype,n,{get:In[e].G[n]})})),Object.keys(In[e].M).forEach((function(n){return Object.defineProperty(t.prototype,n,{value:In[e].M[n]})})),Object.keys(In[e].S).forEach((function(t){return Object.defineProperty(T[e],t,{value:In[e].S[t].bind(T[e].prototype)})})),In[e].proto=t.prototype}));var Ln=T;Ln.core=Object.assign(Object.create(null),v,u,Ve,L,ue,Ze,Xe,kt,ut,D,Ce,Je,Ot,sn,{enclose_convex_polygons_inclusive:function enclose_convex_polygons_inclusive(e,t){var n=e.map((function(e){return zt(t,e,C)})).reduce((function(e,t){return e||t}),!1),r=t.map((function(e){return zt(t,e,C)})).reduce((function(e,t){return e&&t}),!0);return!n&&r},intersect_convex_polygon_line:qt,intersect_circle_circle:St,intersect_circle_line:wt,intersect_line_line:ft,overlap_convex_polygons:Dt,overlap_convex_polygon_point:zt,overlap_line_line:Gt,overlap_line_point:st}),Ln.typeof=e,Ln.intersect=Bt,Ln.overlap=Wt;var Tn=Object.create(null),Fn=function list_function_params(e,t,n){switch(e){case"1":case"2":case 1:case 2:return t;case"3":case 3:return[n[0].vector,n[0].origin,n[1].vector,n[1].origin];case"4":case 4:return[n[0].vector,t[0]];case"5":case 5:return[n[0].vector,n[0].origin,t[0],t[1]];case"6":case 6:return[n[0].vector,n[0].origin,n[1].vector,n[1].origin,t[0],t[1]];case"7":case 7:return[n[0].vector,n[0].origin,n[1].vector,t[0]]}return[]},Vn=function arrayify(e,t){switch(e){case"1":case 1:case"2":case 2:case"4":case 4:case"7":case 7:return[t];case"3":case 3:case"5":case 5:case"6":case 6:return t}},Bn=function axiom(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.points?n.points.map((function(e){return Ln.core.get_vector(e)})):void 0,o=n.lines?n.lines.map((function(e){return Ln.core.get_line(e)})):void 0,i=(t=Ln.core)["axiom".concat(e)].apply(t,_toConsumableArray(Fn(e,r,o)));return Vn(e,i)},Gn=[null,1,2,3,4,5,6,7];delete Gn[0],Object.keys(Gn).forEach((function(e){Bn[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bn.apply(void 0,[e].concat(n))}}));var Dn=function line_line_for_arrows(e,t){return Ln.core.intersect_line_line(e.vector,e.origin,t.vector,t.origin,Ln.core.include_l,Ln.core.include_l)},Rn=function reflect_point(e,t){var n=Ln.core.make_matrix2_reflect(e.vector,e.origin);return Ln.core.multiply_matrix2_vector2(n,t)},Un=function boundary_for_arrows(e){var t=e.vertices_coords;return Ln.core.convex_hull(t)},Zn=function widest_perp(e,t,n){var r=Un(e);if(void 0===n){var o,i=Ln.core.clip_line_in_convex_poly_exclusive(r,t.vector,t.origin);n=(o=Ln.core).midpoint.apply(o,_toConsumableArray(i))}var c=Ln.core.rotate270(t.vector),a=Ln.core.clip_line_in_convex_poly_exclusive(r,c,n).map((function(e){return Ln.core.distance(n,e)})).sort((function(e,t){return e-t})).shift(),u=Ln.core.scale(Ln.core.normalize(c),a);return Ln.segment(Ln.core.add(n,Ln.core.flip(u)),Ln.core.add(n,u))},Hn=function between_2_segments(e,t,n){var r,o=t.map((function(e){return Ln.core.midpoint(e[0],e[1])})),i=(r=Ln.line).fromPoints.apply(r,_toConsumableArray(o)),c=Ln.intersect(n,i),a=Ln.line(n.vector.rotate90(),c);return Ln.segment(e.lines.map((function(e){return Ln.intersect(e,a)})))},Xn=[null,function axiom_1_arrows(e,t){return Bn(1,e).map((function(e){return[Zn(t,e)]}))},function axiom_2_arrows(e){return[[Ln.segment(e.points)]]},function axiom_3_arrows(e,t){var n=Un(t),r=e.lines.map((function(e){return Ln.core.clip_line_in_convex_poly_exclusive(n,e.vector,e.origin)})),o=r.map((function(e){return Ln.core.subtract(e[1],e[0])})),i=Ln.core.intersect_line_line(o[0],r[0][0],o[1],r[1][0],Ln.core.exclude_s,Ln.core.exclude_s);return i?Bn(3,e).map((function(t){return function between_2_intersecting_segments(e,t,n,r){var o=e.lines.map((function(e){return e.vector})),i=o.map(Ln.core.flip),c=o.concat(i).map((function(e){return Ln.ray(e,t)})),a=c.filter((function(e){return Ln.core.dot(e.vector,n.vector)>0&&Ln.core.cross2(e.vector,n.vector)>0})).shift(),u=c.filter((function(e){return Ln.core.dot(e.vector,n.vector)>0&&Ln.core.cross2(e.vector,n.vector)<0})).shift(),s=c.filter((function(e){return Ln.core.dot(e.vector,n.vector)<0&&Ln.core.cross2(e.vector,n.vector)>0})).shift(),l=c.filter((function(e){return Ln.core.dot(e.vector,n.vector)<0&&Ln.core.cross2(e.vector,n.vector)<0})).shift(),p=[a,u,s,l].map((function(e){return Ln.core.intersect_convex_polygon_line(r,e.vector,e.origin,Ln.core.exclude_s,Ln.core.exclude_r).shift().shift()})),d=p.map((function(e){return Ln.core.distance(e,t)})),v=d[0]<d[1]?p[0]:p[1],g=d[0]<d[1]?Ln.core.add(u.origin,u.vector.normalize().scale(d[0])):Ln.core.add(a.origin,a.vector.normalize().scale(d[1])),m=d[2]<d[3]?p[2]:p[3],h=d[2]<d[3]?Ln.core.add(l.origin,l.vector.normalize().scale(d[2])):Ln.core.add(s.origin,s.vector.normalize().scale(d[3]));return[Ln.segment(v,g),Ln.segment(m,h)]}(e,i,t,n)})):[Hn(e,r,Bn(3,e).filter((function(e){return void 0!==e})).shift())]},function axiom_4_arrows(e,t){return Bn(4,e).map((function(n){return[Zn(t,n,Dn(n,e.lines[0]))]}))},function axiom_5_arrows(e){return Bn(5,e).map((function(t){return[Ln.segment(e.points[1],Rn(t,e.points[1]))]}))},function axiom_6_arrows(e){return Bn(6,e).map((function(t){return e.points.map((function(e){return Ln.segment(e,Rn(t,e))}))}))},function axiom_7_arrows(e,t){return Bn(7,e).map((function(n){return[Ln.segment(e.points[0],Rn(n,e.points[0])),Zn(t,n,Dn(n,e.lines[1]))]}))}];delete Xn[0];var Wn=function axiom_arrows(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.points?t.points.map((function(e){return Ln.core.get_vector(e)})):void 0,r=t.lines?t.lines.map((function(e){return Ln.core.get_line(e)})):void 0,o=arguments.length,i=new Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];return Xn[e].apply(Xn,[{points:n,lines:r}].concat(i))};Object.keys(Xn).forEach((function(e){Wn[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wn.apply(void 0,[e].concat(n))}}));var Yn=Object.assign(Object.create(null),{axiom_arrows:Wn}),$n=function maekawa_assignments(e){var t=function get_unassigned_indices(e){return e.map((function(e,t){return t})).filter((function(t){return"U"===e[t]||"u"===e[t]}))}(e),n=Array.from(Array(Math.pow(2,t.length))).map((function(e,t){return t.toString(2)})).map((function(e){return Array(t.length-e.length+1).join("0")+e})).map((function(e){return Array.from(e).map((function(e){return"0"===e?"V":"M"}))})).map((function(n){var r=e.slice();return t.forEach((function(e,t){r[e]=n[t]})),r})),r=n.map((function(e){return e.filter((function(e){return"M"===e||"m"===e})).length})),o=n.map((function(e){return e.filter((function(e){return"V"===e||"v"===e})).length}));return n.filter((function(e,t){return 2===Math.abs(r[t]-o[t])}))},Kn=function fn_and(e,t){return e&&t},Jn=function fn_cat(e,t){return e.concat(t)},Qn=function fn_def(e){return void 0!==e},er=function fn_add(e,t){return e+t},tr=function merge_nextmaps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var r=t[0].map((function(e,t){return[t]}));return t.forEach((function(e){r.forEach((function(t,n){return t.forEach((function(t,o){r[n][o]=e[t]}))})),r.forEach((function(e,t){r[t]=e.reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}))}))})),r}},nr=function invert_map(e){var t=[];return e.forEach((function(e,n){null!=e&&("number"==typeof e&&(void 0!==t[e]?"number"==typeof t[e]?t[e]=[t[e],n]:t[e].push(n):t[e]=n),e.constructor===Array&&e.forEach((function(e){t[e]=n})))})),t},rr=function invert_simple_map(e){var t=[];return e.forEach((function(e,n){t[e]=n})),t},or=Object.freeze({__proto__:null,merge_simple_nextmaps:function merge_simple_nextmaps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var r=t[0].map((function(e,t){return t}));return t.forEach((function(e){return r.forEach((function(t,n){r[n]=e[t]}))})),r}},merge_nextmaps:tr,merge_simple_backmaps:function merge_simple_backmaps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var r=t[0].map((function(e,t){return t}));return t.forEach((function(e,t){var n=e.map((function(e){return r[e]}));r=n})),r}},merge_backmaps:function merge_backmaps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var r=t[0].reduce((function(e,t){return e.concat(t)}),[]).map((function(e,t){return[t]}));return t.forEach((function(e,t){var n=[];e.forEach((function(e,t){n[t]="number"==typeof e?r[e]:e.map((function(e){return r[e]})).reduce((function(e,t){return e.concat(t)}),[])})),r=n})),r}},invert_map:nr,invert_simple_map:rr}),ir={V:1,v:1,M:-1,m:-1},cr=function upOrDown(e,t){return t%2==0?ir[e]:-ir[e]},ar=function between(e,t,n){return t<n?e.slice(t+1,n):e.slice(n+1,t)},ur=function get_sectors_layer(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln.core.EPSILON,r=0,o=e.map((function(e,t){return t%2==0?e:-e})).map((function(e){return r+=e})),i=o.map((function(e,t,n){return t%2==0?n[(t+n.length-1)%n.length]:e})).map((function(e){return e+n})),c=o.map((function(e,t,n){return t%2==0?e:n[(t+n.length-1)%n.length]})).map((function(e){return e-n})),a=function test(t){var n=[];t.forEach((function(e,t){n[e]=t}));for(var r=t.length+(t.length===e.length?0:-1),a=function _loop(e){var r=(e+1)%t.length,a=ar(t,n[e],n[r]),u=a.map((function(t){return o[e]<i[t]})).reduce(Kn,!0),s=a.map((function(t){return o[e]>c[t]})).reduce(Kn,!0);if(!u&&!s)return{v:!1}},u=0;u<r;u+=1){var s=a(u);if("object"===_typeof(s))return s.v}return!0},u=function final_test(e){var n=rr(e);return n[0]>n[n.length-1]?"M"===t[0]:"V"===t[0]},s=function recurse(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n=n.slice(0,o).concat([r],n.slice(o,n.length)),!a(n))return[];if(r>=e.length-1)return u(n)?[n]:[];var i=cr(t[(r+1)%e.length],r),c=1===i?Array.from(Array(n.length-o)).map((function(e,t){return o+t+1})):Array.from(Array(o+1)).map((function(e,t){return t}));return c.map((function(e){return recurse(n,r+1,e)})).reduce((function(e,t){return e.concat(t)}),[]).map(rr)};return s()},sr=function odd_assignment(e){for(var t=0,n=0,r=0;r<e.length;r+=1)"M"!==e[r]&&"m"!==e[r]||(t+=1),"V"!==e[r]&&"v"!==e[r]||(n+=1);for(var o=0;o<e.length;o+=1){if(t>n&&("V"===e[o]||"v"===e[o]))return o;if(n>t&&("M"===e[o]||"m"===e[o]))return o}},fr=function alternating_sum(e){return[0,1].map((function(t){return e.filter((function(e,n){return n%2===t})).reduce(er,0)}))},lr=function kawasaki_solutions_radians(e){return e.map((function(e,t,n){return[e,n[(t+1)%n.length]]})).map((function(e){var t;return(t=Ln.core).counter_clockwise_angle_radians.apply(t,_toConsumableArray(e))})).map((function(e,t,n){return n.slice(t+1,n.length).concat(n.slice(0,t))})).map((function(e){return fr(e).map((function(e){return Math.PI-e}))})).map((function(t,n){return e[n]+t[0]})).map((function(t,n){return Ln.core.is_counter_clockwise_between(t,e[n],e[(n+1)%e.length])?t:void 0}))},pr=Object.freeze({__proto__:null,alternating_sum:fr,alternating_sum_difference:function alternating_sum_difference(e){var t=e.reduce(er,0)/2;return fr(e).map((function(e){return e-t}))},kawasaki_solutions_radians:lr,kawasaki_solutions:function kawasaki_solutions(e){var t=e.map((function(e){return Math.atan2(e[1],e[0])}));return lr(t).map((function(e){return void 0===e?void 0:[Math.cos(e),Math.sin(e)]}))}}),dr=Object.assign(Object.create(null),{maekawa_assignments:$n,sectors_layer:ur,layer_solver:function layer_solver(e,t){null==t&&(t=e.map((function(){return"U"})));var n=$n(t),r=n.map((function(t){return ur(e,t)}));return n.map((function(e,t){return t})).filter((function(e){return r[e].length>0})).map((function(e){return{assignment:n[e],layer:r[e]}}))},fold_angles4:function single_vertex_fold_angles(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=sr(t);if(void 0!==r){var o=e[(r+1)%e.length],i=e[(r+2)%e.length],c=Math.PI*n,a=-Math.cos(o)*Math.cos(i)+Math.sin(o)*Math.sin(i)*Math.cos(Math.PI-c),u=Math.cos(Math.PI-c)-Math.pow(Math.sin(Math.PI-c),2)*Math.sin(o)*Math.sin(i)/(1-a),s=-Math.acos(u)+Math.PI;return r%2==0?[s,c,s,c].map((function(e,t){return r===t?-e:e})):[c,s,c,s].map((function(e,t){return r===t?-e:e}))}}},pr),vr=function vertex_degree(e,t){var n=this;Object.defineProperty(e,"degree",{get:function get(){return n.vertices_vertices&&n.vertices_vertices[t]?n.vertices_vertices[t].length:null}})},_r=function edge_coords(e,t){var n=this;Object.defineProperty(e,"coords",{get:function get(){if(n.edges_vertices&&n.edges_vertices[t]&&n.vertices_coords)return n.edges_vertices[t].map((function(e){return n.vertices_coords[e]}))}})},gr=function face_simple(e,t){var n=this;Object.defineProperty(e,"simple",{get:function get(){if(!n.faces_vertices||!n.faces_vertices[t])return null;for(var r=0;r<e.length-1;r+=1)for(var o=r+1;o<e.length;o+=1)if(n.faces_vertices[t][r]===n.faces_vertices[t][o])return!1;return!0}})},mr=function face_coords(e,t){var n=this;Object.defineProperty(e,"coords",{get:function get(){if(n.faces_vertices&&n.faces_vertices[t]&&n.vertices_coords)return n.faces_vertices[t].map((function(e){return n.vertices_coords[e]}))}})},hr={vertices:function setup_vertex(e,t){return vr.call(this,e,t),e},edges:function setup_edge(e,t){return _r.call(this,e,t),e},faces:function setup_face(e,t){return gr.call(this,e,t),mr.call(this,e,t),e}},yr=1.1,br="Rabbit Ear",Ar={file:["file_spec","file_creator","file_author","file_title","file_description","file_classes","file_frames"],frame:["frame_author","frame_title","frame_description","frame_attributes","frame_classes","frame_unit","frame_parent","frame_inherit"],graph:["vertices_coords","vertices_vertices","vertices_faces","edges_vertices","edges_faces","edges_assignment","edges_foldAngle","edges_length","faces_vertices","faces_edges","vertices_edges","edges_edges","faces_faces"],orders:["edgeOrders","faceOrders"]},xr=Object.freeze([].concat(Ar.file).concat(Ar.frame).concat(Ar.graph).concat(Ar.orders)),kr="vertices",wr="edges",Cr="faces",Mr="vertices_coords",Er="edges_assignment",Or="edges_foldAngle",jr={vertices:"vertex",edges:"edge",faces:"face"},Pr={M:-180,m:-180,V:180,v:180,B:0,b:0,F:0,f:0,U:0,u:0},Sr=function edge_assignment_to_foldAngle(e){return Pr[e]||0},zr=function edge_foldAngle_to_assignment(e){return e>0?"V":e<0?"M":"U"},Nr=function filter_keys_with_suffix(e,t){return Object.keys(e).map((function(e){return e.substring(e.length-t.length,e.length)===t?e:void 0})).filter((function(e){return void 0!==e}))},Ir=function filter_keys_with_prefix(e,t){return Object.keys(e).map((function(e){return e.substring(0,t.length)===t?e:void 0})).filter((function(e){return void 0!==e}))},qr=function get_graph_keys_with_prefix(e,t){return Ir(e,"".concat(t,"_"))},Lr=function get_graph_keys_with_suffix(e,t){return Nr(e,"_".concat(t))},Tr=function transpose_graph_arrays(e,t){var n=qr(e,t);if(0===n.length)return[];var r=Math.max.apply(Math,_toConsumableArray(n.map((function(t){return e[t].length})))),o=Array.from(Array(r)).map((function(){return{}}));return n.forEach((function(t){return o.forEach((function(n,r){o[r][t]=e[t][r]}))})),o},Fr=function transpose_graph_array_at_index(e,t,n){var r=qr(e,t);if(0!==r.length){var o={};return r.forEach((function(t){o[t]=e[t][n]})),o}},Vr=function fold_object_certainty(e){return"object"!==_typeof(e)||null===e?0:xr.filter((function(t){return e[t]})).length},Br=Object.freeze({__proto__:null,edges_assignment_degrees:Pr,edges_assignment_names:{M:"mountain",m:"mountain",V:"valley",v:"valley",B:"boundary",b:"boundary",F:"mark",f:"mark",U:"unassigned",u:"unassigned"},edge_assignment_to_foldAngle:Sr,edge_foldAngle_to_assignment:zr,filter_keys_with_suffix:Nr,filter_keys_with_prefix:Ir,get_graph_keys_with_prefix:qr,get_graph_keys_with_suffix:Lr,transpose_graph_arrays:Tr,transpose_graph_array_at_index:Fr,fold_object_certainty:Vr}),Gr=function max_arrays_length(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Math.max.apply(Math,[0].concat(_toConsumableArray(t.filter((function(e){return void 0!==e})).map((function(e){return e.length})))))},Dr=function count(e,t){return Gr.apply(void 0,_toConsumableArray(qr(e,t).map((function(t){return e[t]}))))};Dr.vertices=function(e){var t=e.vertices_coords,n=e.vertices_faces,r=e.vertices_vertices;return Gr(t,n,r)},Dr.edges=function(e){var t=e.edges_vertices,n=e.edges_edges,r=e.edges_faces;return Gr(t,n,r)},Dr.faces=function(e){var t=e.faces_vertices,n=e.faces_edges,r=e.faces_faces;return Gr(t,n,r)};var Rr=function unique_sorted_integers(e){var t={};return e.forEach((function(e){t[e]=!0})),Object.keys(t).map((function(e){return parseInt(e)})).sort((function(e,t){return e-t}))},Ur=function remove_geometry_indices(e,t,n){var r,o,i,c=Dr(e,t),a=Rr(n),u=[];for(r=0,o=0,i=0;r<c;r+=1,o+=1){for(;r===a[i];)u[r]=void 0,r+=1,i+=1;r<c&&(u[r]=o)}return Lr(e,t).forEach((function(t){return e[t].forEach((function(n,r){return e[t][r].forEach((function(n,o){e[t][r][o]=u[n]}))}))})),a.reverse(),qr(e,t).forEach((function(t){return a.forEach((function(n){return e[t].splice(n,1)}))})),u},Zr=function get_isolated_vertices(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.faces_vertices,o=t.length,i=Array(o).fill(!1);return n&&n.forEach((function(e){e.filter((function(e){return!i[e]})).forEach((function(e){i[e]=!0,o-=1}))})),r&&r.forEach((function(e){e.filter((function(e){return!i[e]})).forEach((function(e){i[e]=!0,o-=1}))})),i.map((function(e,t){return e?void 0:t})).filter((function(e){return void 0!==e}))},Hr=Object.freeze({__proto__:null,get_edge_isolated_vertices:function get_edge_isolated_vertices(e){var t=e.vertices_coords,n=e.edges_vertices,r=t.length,o=Array(r).fill(!1);return n.forEach((function(e){e.filter((function(e){return!o[e]})).forEach((function(e){o[e]=!0,r-=1}))})),o.map((function(e,t){return e?void 0:t})).filter((function(e){return void 0!==e}))},get_face_isolated_vertices:function get_face_isolated_vertices(e){var t=e.vertices_coords,n=e.faces_vertices,r=t.length,o=Array(r).fill(!1);return n.forEach((function(e){e.filter((function(e){return!o[e]})).forEach((function(e){o[e]=!0,r-=1}))})),o.map((function(e,t){return e?void 0:t})).filter((function(e){return void 0!==e}))},get_isolated_vertices:Zr}),Xr=function get_circular_edges(e){for(var t=e.edges_vertices,n=[],r=0;r<t.length;r+=1)t[r][0]===t[r][1]&&n.push(r);return n},Wr=function get_duplicate_edges(e){var t=e.edges_vertices;if(!t)return[];for(var n=[],r={},o=0;o<t.length;o+=1){var i="".concat(t[o][0]," ").concat(t[o][1]),c="".concat(t[o][1]," ").concat(t[o][0]);void 0!==r[i]?n[o]=r[i]:(r[i]=o,r[c]=o)}return n},Yr=function are_vertices_equivalent(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln.core.EPSILON,r=e.length,o=0;o<r;o+=1)if(Math.abs(e[o]-t[o])>n)return!1;return!0},$r=function get_duplicate_vertices(e){for(var t=e.vertices_coords,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,r=t.map((function(){return[]})),o=0;o<t.length-1;o+=1)for(var i=o+1;i<t.length;i+=1)r[o][i]=Yr(t[o],t[i],n);for(var c=r.map((function(e){return e.map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e}))})),a=[],u=Array(t.length).fill(!1),s=0,l=function recurse(e,n){if(!u[n]&&s!==t.length)for(u[n]=!0,s+=1,a[e]||(a[e]=[]),a[e].push(n);c[n].length>0;)recurse(e,c[n][0]),c[n].splice(0,1)},p=0;p<t.length&&(l(p,p),s!==t.length);p+=1);return a.filter((function(e){return e.length}))},Kr=function remove_isolated_vertices(e){var t=Zr(e);return{map:Ur(e,kr,t),remove:t}},Jr=function remove_circular_edges(e){var t=Xr(e);if(t.length){var n={};t.forEach((function(e){n[e]=!0})),Lr(e,wr).forEach((function(t){return e[t].forEach((function(r,o){for(var i=r.length-1;i>=0;i-=1)!0===n[r[i]]&&e[t][o].splice(i,1)}))}))}return{map:Ur(e,wr,t),remove:t}},Qr=function remove_duplicate_edges(e){var t=Wr(e),n=Object.keys(t),r=Ur(e,wr,n);return t.forEach((function(e,t){r[t]=e})),{map:r,remove:n}},eo=function remove_duplicate_vertices(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,n=$r(e,t),r=[];n.forEach((function(e,t){return e.forEach((function(e){r[e]=t}))})),e.vertices_coords=n.map((function(t){return t.map((function(t){return e.vertices_coords[t]}))})).map((function(e){var t;return(t=Ln.core).average.apply(t,_toConsumableArray(e))})),Lr(e,kr).forEach((function(t){return e[t].forEach((function(n,o){return e[t][o].forEach((function(n,i){e[t][o][i]=r[n]}))}))})),qr(e,kr).filter((function(e){return e!==Mr})).forEach((function(t){return delete e[t]}));var o=n.map((function(e){return e.length>1?e.slice(1,e.length):void 0})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.concat(t)}),[]);return{map:r,remove:o}},to=Object.freeze({__proto__:null,remove_isolated_vertices:Kr,remove_circular_edges:Jr,remove_duplicate_edges:Qr,remove_duplicate_vertices:eo}),no=function clean(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"===_typeof(t)&&!1===t.edges||(Jr(e),Qr(e)),"object"===_typeof(t)&&!0===t.vertices&&Kr(e),e},ro=function implied_count(e,t,n){return Math.max(function max_num_in_array_in_arrays(e){var t=-1;return e.filter((function(e){return void 0!==e})).forEach((function(e){return e.forEach((function(e){return e.forEach((function(e){e>t&&(t=e)}))}))})),t}(Lr(e,t).map((function(t){return e[t]}))),e[n]?function max_num_in_orders(e){var t=-1;return e.forEach((function(e){e[0]>t&&(t=e[0]),e[1]>t&&(t=e[1])})),t}(e[n]):-1)+1};ro.vertices=function(e){return ro(e,"vertices")},ro.edges=function(e){return ro(e,"edges","edgeOrders")},ro.faces=function(e){return ro(e,"faces","faceOrders")};var oo,io=function planar_vertex_walk(e){var t=e.vertices_vertices,n={vertices_vertices:t,vertices_sectors:e.vertices_sectors},r={};return t.map((function(e,t){return e.map((function(e){return function counter_clockwise_walk(e,t,n){for(var r=e.vertices_vertices,o=e.vertices_sectors,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c={},a={vertices:[t],edges:[],angles:[]},u=t,s=n;;){var l=r[s],p=(l.indexOf(u)+l.length-1)%l.length,d=l[p],v="".concat(s," ").concat(d);if(c[v])return Object.assign(i,c),a.vertices.pop(),a;if(c[v]=!0,i[v])return;a.vertices.push(s),a.edges.push(v),a.angles.push(o[s][p]),u=s,s=d}}(n,t,e,r)})).filter((function(e){return void 0!==e}))})).reduce((function(e,t){return e.concat(t)}),[])},co=Object.freeze({__proto__:null,planar_vertex_walk:io}),ao=function sort_vertices_counter_clockwise(e,t,n){var r=e.vertices_coords;return t.map((function(e){return r[e]})).map((function(e){return Ln.core.subtract(e,r[n])})).map((function(e){return Math.atan2(e[1],e[0])})).map((function(e){return e>-Ln.core.EPSILON?e:e+2*Math.PI})).map((function(e,t){return{a:e,i:t}})).sort((function(e,t){return e.a-t.a})).map((function(e){return e.i})).map((function(e){return t[e]}))},uo=function sort_vertices_along_vector(e,t,n){var r=e.vertices_coords;return t.map((function(e){return{i:e,d:Ln.core.dot(r[e],n)}})).sort((function(e,t){return e.d-t.d})).map((function(e){return e.i}))},so=Object.freeze({__proto__:null,sort_vertices_counter_clockwise:ao,sort_vertices_along_vector:uo}),fo=function make_vertices_edges(e){var t=e.edges_vertices,n=[];return t.forEach((function(e,t){return e.forEach((function(e){void 0===n[e]&&(n[e]=[]),n[e].push(t)}))})),n},lo=function make_vertices_edges_sorted(e){var t=e.edges_vertices,n=e.vertices_vertices,r=go({edges_vertices:t});return n.map((function(e,t){return e.map((function(e){return r["".concat(t," ").concat(e)]}))}))},po=function make_vertices_vertices(e){var t=e.vertices_coords,n=e.vertices_edges,r=e.edges_vertices;n||(n=fo({edges_vertices:r}));var o=n.map((function(e,t){return e.map((function(e){return r[e].filter((function(e){return e!==t}))})).reduce((function(e,t){return e.concat(t)}),[])}));return void 0===t?o:o.map((function(e,n){return ao({vertices_coords:t},e,n)}))},vo=function make_vertices_faces(e){var t=e.faces_vertices,n=Array.from(Array(ro.vertices({faces_vertices:t}))).map((function(){return[]}));return t.forEach((function(e,t){var r=[];e.forEach((function(e){r[e]=t})),r.forEach((function(e,t){return n[t].push(e)}))})),n},_o=function make_vertices_faces_sorted(e){var t=e.vertices_vertices,n=e.faces_vertices,r=ho({faces_vertices:n});return t.map((function(e,t){return e.map((function(e,n,r){return[r[(n+1)%r.length],t,e].join(" ")}))})).map((function(e){return e.map((function(e){return r[e]})).filter((function(e){return void 0!==e}))}))},go=function make_vertices_to_edge_bidirectional(e){var t=e.edges_vertices,n={};return t.map((function(e){return e.join(" ")})).forEach((function(e,t){n[e]=t})),t.map((function(e){return"".concat(e[1]," ").concat(e[0])})).forEach((function(e,t){n[e]=t})),n},mo=function make_vertices_to_edge(e){var t=e.edges_vertices,n={};return t.map((function(e){return e.join(" ")})).forEach((function(e,t){n[e]=t})),n},ho=function make_vertices_to_face(e){var t=e.faces_vertices,n={};return t.forEach((function(e,t){return e.map((function(t,n){return[0,1,2].map((function(t){return(n+t)%e.length})).map((function(t){return e[t]})).join(" ")})).forEach((function(e){n[e]=t}))})),n},yo=function make_vertices_vertices_vector(e){var t=e.vertices_coords,n=e.vertices_vertices,r=e.edges_vertices,o=e.edges_vector;o||(o=Co({vertices_coords:t,edges_vertices:r}));var i=mo({edges_vertices:r});return n.map((function(e,t){return n[t].map((function(e){var n=i["".concat(t," ").concat(e)],r=i["".concat(e," ").concat(t)];return void 0!==n?o[n]:void 0!==r?Ln.core.flip(o[r]):void 0}))}))},bo=function make_vertices_sectors(e){var t=e.vertices_coords,n=e.vertices_vertices,r=e.edges_vertices,o=e.edges_vector;return yo({vertices_coords:t,vertices_vertices:n,edges_vertices:r,edges_vector:o}).map((function(e){return 1===e.length?[Ln.core.TWO_PI]:Ln.core.counter_clockwise_sectors2(e)}))},Ao=function make_vertices_coords_folded(e,t){var n=e.vertices_coords,r=e.vertices_faces,o=e.edges_vertices,i=e.edges_foldAngle,c=e.edges_assignment,a=e.faces_vertices,u=e.faces_faces,s=e.faces_matrix;s&&void 0===t||(s=zo({vertices_coords:n,edges_vertices:o,edges_foldAngle:i,edges_assignment:c,faces_vertices:a,faces_faces:u},t)),r||(r=vo({faces_vertices:a}));var l=r.map((function(e){return e[0]})).map((function(e){return void 0===e?Ln.core.identity3x4:s[e]}));return n.map((function(e){return Ln.core.resize(3,e)})).map((function(e,t){return Ln.core.multiply_matrix3_vector3(l[t],e)}))},xo=function make_edges_faces(e){var t=e.faces_edges,n=Array.from(Array(ro.edges({faces_edges:t}))).map((function(){return[]}));return t.forEach((function(e,t){var r=[];e.forEach((function(e){r[e]=t})),r.forEach((function(e,t){return n[t].push(e)}))})),n},ko={M:-180,m:-180,V:180,v:180},wo=function make_edges_foldAngle(e){return e.edges_assignment.map((function(e){return ko[e]||0}))},Co=function make_edges_vector(e){var t=e.vertices_coords;return e.edges_vertices.map((function(e){return e.map((function(e){return t[e]}))})).map((function(e){return Ln.core.subtract(e[1],e[0])}))},Mo=function make_edges_coords_min_max(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_coords;return r||(r=n.map((function(e){return e.map((function(e){return t[e]}))}))),r.map((function(e){var t=e[0].map((function(){return 1/0})),n=e[0].map((function(){return-1/0}));return e.forEach((function(e){return e.forEach((function(e,r){e<t[r]&&(t[r]=e),e>n[r]&&(n[r]=e)}))})),[t,n]}))},Eo=function make_edges_coords_min_max_inclusive(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,n=[-t,+t];return Mo(e).map((function(e){return e.map((function(e,t){return e.map((function(e){return e+n[t]}))}))}))},Oo=function make_planar_faces(e){var t=e.vertices_coords,n=e.vertices_vertices,r=e.vertices_edges,o=e.vertices_sectors,i=e.edges_vertices,c=e.edges_vector;n||(n=po({vertices_coords:t,edges_vertices:i,vertices_edges:r})),o||(o=bo({vertices_coords:t,vertices_vertices:n,edges_vertices:i,edges_vector:c}));var a=go({edges_vertices:i});return io({vertices_vertices:n,vertices_sectors:o}).map((function(e){return _objectSpread2(_objectSpread2({},e),{},{edges:e.edges.map((function(e){return a[e]}))})})).filter((function(e){return e.angles.map((function(e){return Math.PI-e})).reduce((function(e,t){return e+t}),0)>0}))},jo=function make_faces_faces(e){var t=e.faces_vertices,n=t.map((function(){return[]})),r={};return t.forEach((function(e,t){var o=e.length;e.forEach((function(e,i,c){var a=c[(i+1)%o];if(a<e){var u=[a,e];e=u[0],a=u[1]}var s="".concat(e," ").concat(a);if(s in r){var l=r[s];n[t].push(l),n[l].push(t)}else r[s]=t}))})),n},Po=function get_face_face_shared_vertices(e,t){var n={};t.forEach((function(e){n[e]=!0}));for(var r=e.map((function(e){return!!n[e]})),o=[],i=r.indexOf(!1),c=i+1;c<r.length;c+=1)r[c]&&o.push(e[c]);for(var a=0;a<i;a+=1)r[a]&&o.push(e[a]);return o},So=function make_face_spanning_tree(e){var t=e.faces_vertices,n=e.faces_faces,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n||(n=jo({faces_vertices:t})),0===n.length)return[];var o=[[{face:r}]],i={};i[r]=!0;var c=function _loop(){var e=o[o.length-1].map((function(e){return n[e.face].map((function(t){return{face:t,parent:e.face}}))})).reduce((function(e,t){return e.concat(t)}),[]),r={};e.forEach((function(e,t){i[e.face]&&(r[t]=!0),i[e.face]=!0}));var c=e.filter((function(e,t){return!r[t]}));c.map((function(e){return Po(t[e.face],t[e.parent])})).forEach((function(e,t){c[t].edge_vertices=e.slice(0,2)})),o[o.length]=c};do{c()}while(o[o.length-1].length>0);return o.length>0&&0===o[o.length-1].length&&o.pop(),o},zo=function make_faces_matrix(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_foldAngle,o=e.edges_assignment,i=e.faces_vertices,c=e.faces_faces,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r||(r=o?wo({edges_assignment:o}):Array(n.length).fill(0));var u=go({edges_vertices:n}),s=i.map((function(){return Ln.core.identity3x4}));return So({faces_vertices:i,faces_faces:c},a).slice(1).forEach((function(e){return e.forEach((function(e){var n,o=e.edge_vertices.map((function(e){return t[e]})),i=e.edge_vertices.join(" "),c=u[i],a=Ln.core.make_matrix3_rotate(r[c]*Math.PI/180,(n=Ln.core).subtract.apply(n,_toConsumableArray(Ln.core.resize_up(o[1],o[0]))),o[0]);s[e.face]=Ln.core.multiply_matrices3(s[e.parent],a)}))})),s},No=function make_faces_coloring_from_matrix(e){return e.faces_matrix.map((function(e){return e[0]*e[4]-e[1]*e[3]})).map((function(e){return e>=0}))},Io=Object.freeze({__proto__:null,make_vertices_edges:fo,make_vertices_edges_sorted:lo,make_vertices_vertices:po,make_vertices_faces:vo,make_vertices_faces_sorted:_o,make_vertices_to_edge_bidirectional:go,make_vertices_to_edge:mo,make_vertices_to_face:ho,make_vertices_vertices_vector:yo,make_vertices_sectors:bo,make_vertices_coords_folded:Ao,make_edges_edges:function make_edges_edges(e){var t=e.edges_vertices,n=e.vertices_edges;return t.map((function(e,t){var r=n[e[0]].filter((function(e){return e!==t})),o=n[e[1]].filter((function(e){return e!==t}));return r.concat(o)}))},make_edges_faces:xo,make_edges_foldAngle:wo,make_edges_assignment:function make_edges_assignment(e){return e.edges_foldAngle.map((function(e){return 0===e?"F":e<0?"M":"V"}))},make_edges_vector:Co,make_edges_length:function make_edges_length(e){var t=e.vertices_coords,n=e.edges_vertices;return Co({vertices_coords:t,edges_vertices:n}).map((function(e){return Ln.core.magnitude(e)}))},make_edges_coords_min_max:Mo,make_edges_coords_min_max_exclusive:function make_edges_coords_min_max_exclusive(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,n=[+t,-t];return Mo(e).map((function(e){return e.map((function(e,t){return e.map((function(e){return e+n[t]}))}))}))},make_edges_coords_min_max_inclusive:Eo,make_planar_faces:Oo,make_faces_vertices:function make_faces_vertices(e){return Oo(e).map((function(e){return e.vertices}))},make_faces_edges:function make_faces_edges(e){return Oo(e).map((function(e){return e.edges}))},make_faces_faces:jo,get_face_face_shared_vertices:Po,make_face_spanning_tree:So,make_faces_matrix:zo,make_faces_center:function make_faces_center(e){var t=e.vertices_coords;return e.faces_vertices.map((function(e){return e.map((function(e){return t[e]}))})).map((function(e){return Ln.core.centroid(e)}))},make_faces_coloring_from_matrix:No,make_faces_coloring:function make_faces_coloring(e){var t=e.faces_vertices,n=e.faces_faces,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[];return o[r]=!0,So({faces_vertices:t,faces_faces:n},r).forEach((function(e,t){return e.forEach((function(e){o[e.face]=t%2==0}))})),o}}),qo=function populate(e){if("object"===_typeof(e)&&e.edges_vertices){if(e.vertices_edges=fo(e),e.vertices_vertices=po(e),e.vertices_edges=lo(e),e.vertices_coords&&(e.edges_vector=Co(e),e.vertices_sectors=bo(e)),function set_edges_angles(e){var t=e.edges_vertices.length;if(e.edges_assignment||(e.edges_assignment=[]),e.edges_foldAngle||(e.edges_foldAngle=[]),e.edges_assignment.length>e.edges_foldAngle.length)for(var n=e.edges_foldAngle.length;n<e.edges_assignment.length;n+=1)e.edges_foldAngle[n]=Sr(e.edges_assignment[n]);if(e.edges_foldAngle.length>e.edges_assignment.length)for(var r=e.edges_assignment.length;r<e.edges_foldAngle.length;r+=1)e.edges_assignment[r]=zr(e.edges_foldAngle[r]);for(var o=e.edges_assignment.length;o<t;o+=1)e.edges_assignment[o]="U",e.edges_foldAngle[o]=0}(e),e.vertices_coords){var t=Oo(e);e.faces_vertices=t.map((function(e){return e.vertices})),e.faces_edges=t.map((function(e){return e.edges})),e.faces_angles=t.map((function(e){return e.angles}))}else e.faces_vertices=[],e.faces_edges=[];return e.vertices_faces=e.vertices_vertices?_o(e):vo(e),e.edges_faces=xo(e),e.faces_faces=jo(e),e.vertices_coords&&(e.faces_matrix=zo(e)),e}},Lo=function get_edges_vertices_span(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON;return Eo(e).map((function(n,r){return e.vertices_coords.map((function(e,r){return e[0]>n[0][0]-t&&e[1]>n[0][1]-t&&e[0]<n[1][0]+t&&e[1]<n[1][1]+t}))}))},To=function get_edges_edges_span(e){for(var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_coords,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,i=Eo({vertices_coords:t,edges_vertices:n,edges_coords:r},o),c=n.map((function(){return[]})),a=0;a<n.length-1;a+=1)for(var u=a+1;u<n.length;u+=1){var s=(i[a][1][0]<i[u][0][0]||i[u][1][0]<i[a][0][0])&&(i[a][1][1]<i[u][0][1]||i[u][1][1]<i[a][0][1]);c[a][u]=!s,c[u][a]=!s}for(var l=0;l<n.length;l+=1)c[l][l]=!0;return c},Fo=Object.freeze({__proto__:null,get_edges_vertices_span:Lo,get_edges_edges_span:To}),Vo=function get_collinear_vertices(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_coords,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON;r||(r=n.map((function(e){return e.map((function(e){return t[e]}))})));for(var i=Lo({vertices_coords:t,edges_vertices:n,edges_coords:r},o),c=0;c<r.length;c+=1)for(var a=0;a<t.length;a+=1)i[c][a]&&(i[c][a]=Ln.core.overlap_line_point(Ln.core.subtract(r[c][1],r[c][0]),r[c][0],t[a],Ln.core.exclude_s,o));return i.map((function(e){return e.map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e}))}))},Bo=function get_edges_edges_intersections(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_vector,o=e.edges_origin,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON;r||(r=Co({vertices_coords:t,edges_vertices:n})),o||(o=n.map((function(e){return t[e[0]]})));for(var c=r.map((function(){return[]})),a=To({vertices_coords:t,edges_vertices:n},i),u=0;u<r.length-1;u+=1)for(var s=u+1;s<r.length;s+=1)!0===a[u][s]?(c[u][s]=Ln.core.intersect_line_line(r[u],o[u],r[s],o[s],Ln.core.exclude_s,Ln.core.exclude_s,i),c[s][u]=c[u][s]):c[u][s]=void 0;return c},Go=function fragment_graph(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON,n=e.edges_vertices.map((function(t){return t.map((function(t){return e.vertices_coords[t]}))})),r=n.map((function(e){return Ln.core.subtract(e[1],e[0])})),o=n.map((function(e){return e[0]})),i=Bo({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_vector:r,edges_origin:o},1e-6),c=Vo({vertices_coords:e.vertices_coords,edges_vertices:e.edges_vertices,edges_coords:n},t);if(0!==i.reduce(Jn,[]).filter(Qn).length||0!==c.reduce(Jn,[]).filter(Qn).length){var a={vertices:e.vertices_coords.length};i.forEach((function(t){return t.filter(Qn).filter((function(e){return 2===e.length})).forEach((function(t){var n=e.vertices_coords.length;e.vertices_coords.push(_toConsumableArray(t)),t.splice(0,2),t.push(n)}))})),i.forEach((function(e,t){e.forEach((function(e,n){e&&(i[t][n]=e[0])}))}));var u=i.map((function(e){return e.filter(Qn)}));e.edges_vertices.forEach((function(e,t){return e.push.apply(e,_toConsumableArray(u[t]).concat(_toConsumableArray(c[t])))})),e.edges_vertices.forEach((function(t,n){e.edges_vertices[n]=uo({vertices_coords:e.vertices_coords},t,r[n])}));var s=e.edges_vertices.map((function(e,t){return Array(e.length-1).fill(t)})).reduce(Jn,[]);if(e.edges_vertices=e.edges_vertices.map((function(e){return Array.from(Array(e.length-1)).map((function(t,n,r){return[e[n],e[n+1]]}))})).reduce(Jn,[]),e.edges_assignment&&e.edges_foldAngle&&e.edges_foldAngle.length>e.edges_assignment.length)for(var l=e.edges_assignment.length;l<e.edges_foldAngle.length;l+=1)e.edges_assignment[l]=zr(e.edges_foldAngle[l]);return e.edges_assignment&&(e.edges_assignment=s.map((function(t){return e.edges_assignment[t]||"U"}))),e.edges_foldAngle&&(e.edges_foldAngle=s.map((function(t){return e.edges_foldAngle[t]})).map((function(t,n){return void 0===t?Sr(e.edges_assignment[n]):t}))),{vertices:{new:Array.from(Array(e.vertices_coords.length-a.vertices)).map((function(e,t){return a.vertices+t}))},edges:{backmap:s}}}},Do=["vertices_coords","edges_vertices","edges_assignment","edges_foldAngle"],Ro=function fragment(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ln.core.EPSILON;e.vertices_coords=e.vertices_coords.map((function(e){return e.slice(0,2)})),[kr,wr,Cr].map((function(t){return qr(e,t)})).reduce(Jn,[]).filter((function(e){return!Do.includes(e)})).forEach((function(t){return delete e[t]}));var n,r={vertices:{},edges:{}};for(n=0;n<20;n++){var o=eo(e,t/2),i=Qr(e),c=Jr(e),a=Go(e,t);if(void 0===a){r.vertices.map=void 0===r.vertices.map?o.map:tr(r.vertices.map,o.map),r.edges.map=void 0===r.edges.map?tr(i.map,c.map):tr(r.edges.map,i.map,c.map);break}var u=nr(a.edges.backmap),s=tr(i.map,c.map,u);r.vertices.map=void 0===r.vertices.map?o.map:tr(r.vertices.map,o.map),r.edges.map=void 0===r.edges.map?s:tr(r.edges.map,s)}return 20===n&&console.warn("debug warning. fragment reached max iterations"),r},Uo=function add_vertices(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln.core.EPSILON;e.vertices_coords||(e.vertices_coords=[]),"number"==typeof t[0]&&(t=[t]);var o=t.map((function(t){return e.vertices_coords.map((function(e){return Ln.core.distance(e,t)<r})).map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e})).shift()})),i=e.vertices_coords.length,c=t.filter((function(e,t){return void 0===o[t]}));return(n=e.vertices_coords).push.apply(n,_toConsumableArray(c)),o.map((function(e){return void 0===e?i++:e}))},Zo=["vertices","edges","faces"],Ho=function make_vertices_map_and_consider_duplicates(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln.core.EPSILON,r=e.vertices_coords.length;return t.vertices_coords.map((function(t){return e.vertices_coords.map((function(e){return Ln.core.distance(e,t)<n})).map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e})).shift()})).map((function(e){return void 0===e?r++:e}))},Xo=function get_edges_duplicate_from_source_in_target(e,t){for(var n={},r={},o=0;o<e.edges_vertices.length;o+=1)r["".concat(e.edges_vertices[o][0]," ").concat(e.edges_vertices[o][1])]=o,r["".concat(e.edges_vertices[o][1]," ").concat(e.edges_vertices[o][0])]=o;for(var i=0;i<t.edges_vertices.length;i+=1){var c=r["".concat(t.edges_vertices[i][0]," ").concat(t.edges_vertices[i][1])];void 0!==c&&(n[i]=c)}return n},Wo=function update_suffixes(e,t,n,r){return n.forEach((function(n){return t[n].forEach((function(t){return e[t].forEach((function(o,i){return o.forEach((function(o,c){e[t][i][c]=r[n][o]}))}))}))}))},Yo=function assign(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln.core.EPSILON,r={},o={},i={};Zo.forEach((function(e){r[e]=qr(t,e),o[e]=Lr(t,e)})),Zo.forEach((function(t){return r[t].filter((function(t){return!e[t]})).forEach((function(t){e[t]=[]}))})),i.vertices=Ho(e,t,n),Wo(t,o,["vertices"],i);var c=Dr.edges(e);i.edges=Array.from(Array(Dr.edges(t))).map((function(e,t){return c+t}));var a=Xo(e,t);Object.keys(a).forEach((function(e){i.edges[e]=a[e]}));var u=Dr.faces(e);return i.faces=Array.from(Array(Dr.faces(t))).map((function(e,t){return u+t})),Wo(t,o,["edges","faces"],i),Zo.forEach((function(n){return r[n].forEach((function(r){return t[r].forEach((function(t,o){var c=i[n][o];e[r][c]=t}))}))})),i},$o=function subgraph(e,t){var n={},r={};return["faces","edges","vertices"].forEach((function(o){n[o]=Array.from(Array(Dr[o](e))).map((function(e,t){return t})),r[o]=Rr(t[o]||[]).reverse()})),Object.keys(r).forEach((function(e){return r[e].forEach((function(t){return n[e].splice(t,1)}))})),Object.keys(n).forEach((function(t){return Ur(e,t,n[t])})),e},Ko=function get_boundary(e){var t=e.vertices_edges,n=e.edges_vertices,r=e.edges_assignment;if(void 0===r)return{vertices:[],edges:[]};t||(t=fo({edges_vertices:n}));for(var o=r.map((function(e){return"B"===e||"b"===e})),i=[],c=[],a=-1,u=0;u<o.length;u+=1)if(o[u]){a=u;break}if(-1===a)return{vertices:[],edges:[]};o[a]=!1,i.push(a),c.push(n[a][0]);for(var s=n[a][1];c[0]!==s;){if(c.push(s),void 0===(a=t[s].filter((function(e){return o[e]})).shift()))return{vertices:[],edges:[]};if(n[a][0]===s)s=_slicedToArray(n[a],2)[1];else s=_slicedToArray(n[a],1)[0];o[a]=!1,i.push(a)}return{vertices:c,edges:i}},Jo=Object.freeze({__proto__:null,get_boundary:Ko,get_planar_boundary:function get_planar_boundary(e){var t=e.vertices_coords,n=e.vertices_edges,r=e.vertices_vertices,o=e.edges_vertices;r||(r=po({vertices_coords:t,vertices_edges:n,edges_vertices:o}));var i=go({edges_vertices:o}),c=[],a=[],u={vertices:a,edges:c},s=-1/0,l=-1;if(t.forEach((function(e,t){e[0]>s&&(s=e[0],l=t)})),-1===l)return u;a.push(l);var p=t[l],d=r[l],v=d.map((function(e){return t[e]})).map((function(e){return[e[0]-p[0],e[1]-p[1]]})).map((function(e){return Math.atan2(e[1],e[0])})).map((function(e){return e<0?e+2*Math.PI:e})).map((function(e,t){return{a:e,i:t}})).sort((function(e,t){return e.a-t.a})).shift().i,g=d[v],m=i[l<g?"".concat(l," ").concat(g):"".concat(g," ").concat(l)];c.push(m);for(var h=l,b=g,k=0;k<1e4;){var w=r[b],C=w.indexOf(h),M=w[(C+1)%w.length],E=i[b<M?"".concat(b," ").concat(M):"".concat(M," ").concat(b)];if(E===c[0])return u;a.push(b),c.push(E),h=b,b=M,k+=1}return console.warn("calculate boundary potentially entered infinite loop"),u}}),Qo=function apply_matrix_to_graph(e,t){return Nr(e,"coords").forEach((function(n){e[n]=e[n].map((function(e){return Ln.core.resize(3,e)})).map((function(e){return Ln.core.multiply_matrix3_vector3(t,e)}))})),Nr(e,"matrix").forEach((function(n){e[n]=e[n].map((function(e){return Ln.core.multiply_matrices3(e,t)}))})),e},ei={scale:function transform_scale(e,t){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var c=(n=Ln.core).get_vector.apply(n,o),a=Ln.core.resize(3,c),u=Ln.core.make_matrix3_scale(t,a);return Qo(e,u)},translate:function transform_translate(e){for(var t,n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var c=(t=Ln.core).get_vector.apply(t,o),a=Ln.core.resize(3,c),u=(n=Ln.core).make_matrix3_translate.apply(n,_toConsumableArray(a));return Qo(e,u)},rotateZ:function transform_rotateZ(e,t){for(var n,r,o=arguments.length,i=new Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];var a=(n=Ln.core).get_vector.apply(n,i),u=Ln.core.resize(3,a),s=(r=Ln.core).make_matrix3_rotateZ.apply(r,[t].concat(_toConsumableArray(u)));return Qo(e,s)},transform:Qo},ti=function explode_faces(e){var t=e.faces_vertices.map((function(t){return t.map((function(t){return e.vertices_coords[t]}))})).reduce((function(e,t){return e.concat(t)}),[]),n=0,r=e.faces_vertices.map((function(e){return e.map((function(e){return n++}))}));return{vertices_coords:JSON.parse(JSON.stringify(t)),faces_vertices:r}},ni=function nearest_vertex(e,t){var n=e.vertices_coords;if(n){var r=Ln.core.resize(n[0].length,t),o=n.map((function(e,t){return{d:Ln.core.distance(r,e),i:t}})).sort((function(e,t){return e.d-t.d})).shift();return o?o.i:void 0}},ri=function nearest_edge(e,t){var n=e.vertices_coords,r=e.edges_vertices;if(n&&r){var o=r.map((function(e){return e.map((function(e){return n[e]}))})).map((function(e){return Ln.core.nearest_point_on_line(Ln.core.subtract(e[1],e[0]),e[0],t,Ln.core.segment_limiter)}));return Ln.core.smallest_comparison_search(t,o,Ln.core.distance)}},oi=function face_containing_point(e,t){var n=e.vertices_coords,r=e.faces_vertices;if(n&&r){var o=r.map((function(e,t){return{face:e.map((function(e){return n[e]})),i:t}})).filter((function(e){return Ln.core.overlap_convex_polygon_point(e.face,t)})).shift();return void 0===o?void 0:o.i}},ii=oi,ci=Object.freeze({__proto__:null,nearest_vertex:ni,nearest_edge:ri,face_containing_point:oi,nearest_face:ii}),ai=function clone(e){var t,n;if("object"!==_typeof(e))return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(t=[],n=0;n<e.length;n+=1)t[n]=clone(e[n]);return t}for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=clone(e[n]));return t},ui="vertices",si="edges",fi="faces",li="boundaries",pi="boundary",di="mountain",vi="valley",_i="mark",gi="unassigned",mi="class",hi="index",yi="vertices_coords",bi="edges_vertices",Ai="faces_edges",xi="faces_re:layer",ki={};["number","object","transform","class","style","function","string","undefined","boolean","path","svg","id","viewBox"].forEach((function(e){return ki[e]=e}));var wi=("undefined"==typeof window?"undefined":_typeof(window))!==ki.undefined&&_typeof(window.document)!==ki.undefined,Ci=("undefined"==typeof process?"undefined":_typeof(process))!==ki.undefined&&null!=process.versions&&null!=process.versions.node,Mi=("undefined"==typeof self?"undefined":_typeof(self))===ki.object&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,Ei=Object.freeze({__proto__:null,isBrowser:wi,isNode:Ci,isWebWorker:Mi}),Oi=function(){var e={};if(Ci){var t=require("xmldom"),n=t.DOMParser,r=t.XMLSerializer;e.DOMParser=n,e.XMLSerializer=r,e.document=(new n).parseFromString("<!DOCTYPE html><title>.</title>","text/html")}else wi&&(e=window);return e}(),ji="http://www.w3.org/2000/svg",Pi={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]},Si=function vec(e,t){return[Math.cos(e)*t,Math.sin(e)*t]},zi=function arcPath(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(null==o)return"";var c=Si(r,n),a=Si(o,n),u=[a[0]-c[0],a[1]-c[1]],s=c[0]*a[1]-c[1]*a[0],l=c[0]*a[0]+c[1]*a[1],p=Math.atan2(s,l)>0?0:1,d=i?"M ".concat(e,",").concat(t," l ").concat(c[0],",").concat(c[1]," "):"M ".concat(e+c[0],",").concat(t+c[1]," ");return d+=["a ",n,n,0,p,1,u[0],u[1]].join(" "),i&&(d+=" Z"),d},Ni=function arcArguments(e,t,n,r,o){return[zi(e,t,n,r,o,!1)]},Ii={arc:{nodeName:"path",attributes:["d"],args:Ni,methods:{setArc:function setArc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.setAttribute("d",Ni.apply(void 0,n))}}}},qi=function wedgeArguments(e,t,n,r,o){return[zi(e,t,n,r,o,!0)]},Li={wedge:{nodeName:"path",args:qi,attributes:["d"],methods:{setArc:function setArc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.setAttribute("d",qi.apply(void 0,n))}}}},Ti=128,Fi=function parabolaArguments(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Array.from(Array(129)).map((function(e,t){return(t-Ti)/Ti*2+1})).map((function(o){return[e+(o+1)*n*.5,t+Math.pow(o,2)*r]}))},Vi={parabola:{nodeName:"polyline",attributes:["points"],args:function parabolaPathString(e,t,n,r){return[Fi(e,t,n,r).map((function(e){return"".concat(e[0],",").concat(e[1])})).join(" ")]}}},Bi=function regularPolygonArguments(e,t,n,r){var o=[t,n];return Array.from(Array(e)).map((function(t,n){return 2*Math.PI*n/e})).map((function(e){return[Math.cos(e),Math.sin(e)]})).map((function(e){return o.map((function(t,n){return t+r*e[n]}))}))},Gi={regularPolygon:{nodeName:"polygon",attributes:["points"],args:function polygonPathString(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[Bi(e,t,n,r).map((function(e){return"".concat(e[0],",").concat(e[1])})).join(" ")]}}},Di={roundRect:{nodeName:"path",attributes:["d"],args:function roundRectArguments(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o>n/2&&(o=n/2),o>r/2&&(o=r/2);var i=n-2*o,c=r-2*o,a="A".concat(o," ").concat(o," 0 0 1");return["M".concat(e+(n-i)/2,",").concat(t),"h".concat(i),a,"".concat(e+n,",").concat(t+(r-c)/2),"v".concat(c),a,"".concat(e+n-o,",").concat(t+r),"h".concat(-i),a,"".concat(e,",").concat(t+r-o),"v".concat(-c),a,"".concat(e+o,",").concat(t)].join(" ")}}},Ri=function is_iterable(e){return null!=e&&_typeof(e[Symbol.iterator])===ki.function},Ui=function flatten_arrays(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return Ri(arguments[0])&&"string"!=typeof arguments[0]?flatten_arrays.apply(void 0,_toConsumableArray(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(e){return Ri(e)?_toConsumableArray(flatten_arrays(e)):e})).reduce((function(e,t){return e.concat(t)}),[])}},Zi=function coordinates(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return _typeof(e)===ki.number})).concat(t.filter((function(e){return _typeof(e)===ki.object&&null!==e})).map((function(e){return _typeof(e.x)===ki.number?[e.x,e.y]:_typeof(e[0])===ki.number?[e[0],e[1]]:void 0})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.concat(t)}),[]))},Hi=function add(e,t){return[e[0]+t[0],e[1]+t[1]]},Xi=function sub(e,t){return[e[0]-t[0],e[1]-t[1]]},Wi=function scale(e,t){return[e[0]*t,e[1]*t]},Yi=function curveArguments(){var e=Zi.apply(void 0,_toConsumableArray(Ui.apply(void 0,arguments))),t=e.slice(0,4);if(!t.length)return[""];var n=e[4]||0,r=e[5]||.5,o=[t[0],t[1]],i=[t[2],t[3]],c=Xi(i,o),a=Hi(o,Wi(c,.5)),u=[c[1],-c[0]],s=Hi(a,Wi(u,n)),l=Hi(o,Wi(Xi(s,o),r)),p=Hi(i,Wi(Xi(s,i),r));return["M".concat(o[0],",").concat(o[1],"C").concat(l[0],",").concat(l[1]," ").concat(p[0],",").concat(p[1]," ").concat(i[0],",").concat(i[1])]},$i={bend:function bend(e,t){return e.setAttribute("d",Yi.apply(void 0,_toConsumableArray(function getEndpoints(e){var t=e.getAttribute("d");return null==t||""===t?[]:[t.slice(t.indexOf("M")+1,t.indexOf("C")).split(","),t.split(" ").pop().split(",")].map((function(e){return e.map((function(e){return parseFloat(e)}))}))}(e)).concat([t]))),e}},Ki={curve:{nodeName:"path",attributes:["d"],args:Yi,methods:$i}},Ji={};Object.assign(Ji,Ii,Li,Vi,Gi,Di,Ki);var Qi=Object.keys(Ji),ec=[Pi.h,Pi.p,Pi.i],tc=[Pi.g,Pi.v,Pi.t,Qi],nc={svg:[Pi.s,Pi.d].concat(ec).concat(tc),g:tc,text:[Pi.cT],linearGradient:[Pi.cG],radialGradient:[Pi.cG],defs:ec,filter:[Pi.cF],marker:tc,symbol:tc,clipPath:tc,mask:tc},rc=Object.create(null);Object.keys(nc).forEach((function(e){rc[e]=nc[e].reduce((function(e,t){return e.concat(t)}),[])}));var oc={toCamel:function toCamel(e){return e.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},toKebab:function toKebab(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()},capitalized:function capitalized(e){return e.charAt(0).toUpperCase()+e.slice(1)}},ic=function viewBoxValue(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=1,c=n/i-n,a=e-c-o,u=t-c-o,s=n+2*c+2*o,l=r+2*c+2*o;return[a,u,s,l].join(" ")};function viewBox(){var e=Zi.apply(void 0,_toConsumableArray(Ui(arguments)));return 2===e.length&&e.unshift(0,0),4===e.length?ic.apply(void 0,_toConsumableArray(e)):void 0}var cc=function cdata(e){return(new Oi.DOMParser).parseFromString("<root></root>","text/xml").createCDATASection("".concat(e))},ac=function removeChildren(e){for(;e.lastChild;)e.removeChild(e.lastChild);return e},uc=function moveChildren(e,t){for(;t.childNodes.length>0;){var n=t.childNodes[0];t.removeChild(n),e.appendChild(n)}return e},sc=function assignSVG(e,t){return Array.from(t.attributes).forEach((function(t){return e.setAttribute(t.name,t.value)})),uc(e,t)},fc={removeChildren:ac,appendTo:function appendTo(e,t){return null!=t&&t.appendChild(e),e},setAttributes:function setAttributes(e,t){return Object.keys(t).forEach((function(n){return e.setAttribute(oc.toKebab(n),t[n])}))}},lc=function filterWhitespaceNodes(e){if(null===e)return e;for(var t=e.childNodes.length-1;t>=0;t-=1){var n=e.childNodes[t];3===n.nodeType&&n.data.match(/^\s*$/)&&e.removeChild(n),1===n.nodeType&&filterWhitespaceNodes(n)}return e},pc=function parse(e){return(new Oi.DOMParser).parseFromString(e,"text/xml")},dc=function checkParseError(e){var t=e.getElementsByTagName("parsererror");if(t.length>0)throw new Error(t[0]);return lc(e.documentElement)},vc=function sync(e){if(_typeof(e)===ki.string||e instanceof String)try{return dc(pc(e))}catch(e){return e}if(null!=e.childNodes)return e},_c=function Load(e){return function isFilename(e){return _typeof(e)===ki.string&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(e)&&e.length<1e4}(e)&&wi&&_typeof(Oi.fetch)===ki.function?function async(e){return new Promise((function(t,n){if(_typeof(e)===ki.string||e instanceof String)fetch(e).then((function(e){return e.text()})).then((function(e){return dc(pc(e))})).then((function(e){return"svg"===e.nodeName?e:e.getElementsByTagName("svg")[0]})).then((function(e){return null==e?n("valid XML found, but no SVG element"):t(e)})).catch((function(e){return n(e)}));else if(e instanceof Oi.Document)return asyncDone(e)}))}(e):vc(e)};var gc=function save(e,t){if((t=Object.assign(function SAVE_OPTIONS(){return{download:!1,output:ki.string,windowStyle:!1,filename:"image.svg"}}(),t)).windowStyle){var n=Oi.document.createElementNS(ji,ki.style);n.setAttribute("type","text/css"),n.innerHTML=function getWindowStylesheets(){var e=[];if(Oi.document.styleSheets)for(var t=0;t<Oi.document.styleSheets.length;t+=1){var n=Oi.document.styleSheets[t];try{for(var r=("cssRules"in n?n.cssRules:n.rules),o=0;o<r.length;o+=1){var i=r[o];"cssText"in i?e.push(i.cssText):e.push("".concat(i.selectorText," {\n").concat(i.style.cssText,"\n}\n"))}}catch(e){console.warn(e)}}return e.join("\n")}(),e.appendChild(n)}var r=function vkXML(e,t){for(var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),r=n.length,o=!1,i=0,c="",a=null!=t&&"string"==typeof t?t:"\t",u=["\n"],s=0;s<100;s+=1)u.push(u[s]+a);for(var l=0;l<r;l+=1)n[l].search(/<!/)>-1?(c+=u[i]+n[l],o=!0,(n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1||n[l].search(/!DOCTYPE/)>-1)&&(o=!1)):n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1?(c+=n[l],o=!1):/^<\w/.exec(n[l-1])&&/^<\/\w/.exec(n[l])&&/^<[\w:\-\.\,]+/.exec(n[l-1])==/^<\/[\w:\-\.\,]+/.exec(n[l])[0].replace("/","")?(c+=n[l],o||(i-=1)):n[l].search(/<\w/)>-1&&-1===n[l].search(/<\//)&&-1===n[l].search(/\/>/)?c=c+=o?n[l]:u[i++]+n[l]:n[l].search(/<\w/)>-1&&n[l].search(/<\//)>-1?c=c+=o?n[l]:u[i]+n[l]:n[l].search(/<\//)>-1?c=c+=o?n[l]:u[--i]+n[l]:n[l].search(/\/>/)>-1?c=c+=o?n[l]:u[i]+n[l]:n[l].search(/<\?/)>-1||n[l].search(/xmlns\:/)>-1||n[l].search(/xmlns\=/)>-1?c+=u[i]+n[l]:c+=n[l];return"\n"===c[0]?c.slice(1):c}((new Oi.XMLSerializer).serializeToString(e));return t.download&&wi&&!Ci&&function downloadInBrowser(e,t){var n=new Oi.Blob([t],{type:"text/plain"}),r=Oi.document.createElement("a");r.setAttribute("href",Oi.URL.createObjectURL(n)),r.setAttribute("download",e),Oi.document.body.appendChild(r),r.click(),Oi.document.body.removeChild(r)}(t.filename,r),"svg"===t.output?e:r},mc=function setViewBox(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=1===n.length&&"string"==typeof n[0]?n[0]:viewBox.apply(void 0,n);return o&&e.setAttribute(ki.viewBox,o),e},hc=function getViewBox(e){var t=e.getAttribute(ki.viewBox);return null==t?void 0:t.split(" ").map((function(e){return parseFloat(e)}))},yc=function convertToViewBox(e,t,n){var r=e.createSVGPoint();r.x=t,r.y=n;var o=r.matrixTransform(e.getScreenCTM().inverse());return[o.x,o.y]},bc=Object.freeze({__proto__:null,setViewBox:mc,getViewBox:hc,convertToViewBox:yc}),Ac=function loadSVG(e,t){var n=_c(t);if(null!=n)return _typeof(n.then)===ki.function?n.then((function(t){return sc(e,t)})):sc(e,n)},xc=function getFrame(e){var t=hc(e);if(void 0!==t)return t;if(_typeof(e.getBoundingClientRect)===ki.function){var n=e.getBoundingClientRect();return[n.x,n.y,n.width,n.height]}return[]},kc="svg-background-rectangle",wc=function stylesheet(e,t){var n=function findStyleSheet(e){var t=e.getElementsByTagName(ki.style);return 0===t.length?void 0:t[0]}(e);return null==n&&(n=this.Constructor(ki.style),e.insertBefore(n,e.firstChild)),n.textContent="",n.appendChild(cc(t)),n},Cc={clear:function clearSVG(e){return Array.from(e.attributes).filter((function(e){return"xmlns"!==e})).forEach((function(t){return e.removeAttribute(t.name)})),ac(e)},size:mc,setViewBox:mc,getViewBox:hc,padding:function setPadding(e,t){var n=hc(e);return void 0!==n&&mc.apply(void 0,[e].concat(_toConsumableArray([-t,-t,2*t,2*t].map((function(e,t){return n[t]+e}))))),e},background:function background(e,t){var n=Array.from(e.childNodes).filter((function(e){return e.getAttribute(ki.class)===kc})).shift();return null==n&&((n=this.Constructor.apply(this,["rect"].concat(_toConsumableArray(xc(e))))).setAttribute(ki.class,kc),n.setAttribute("stroke","none"),e.insertBefore(n,e.firstChild)),n.setAttribute("fill",t),e},getWidth:function getWidth(e){return xc(e)[2]},getHeight:function getHeight(e){return xc(e)[3]},stylesheet:function stylesheet(e,t){return wc.call(this,e,t)},load:Ac,save:gc},Mc={math:{vector:function vector(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t)}}},Ec={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"]},Oc=Object.values(Ec).reduce((function(e,t){return e.concat(t)}),[]),jc=function defineGetter(e,t,n){return Object.defineProperty(e,t,{get:function get(){return n},enumerable:!0,configurable:!0})},Pc=function assignPress(e,t){var n;(["pressX","pressY"].filter((function(t){return!e.hasOwnProperty(t)})).forEach((function(n,r){return jc(e,n,t[r])})),e.hasOwnProperty("press"))||jc(e,"press",(n=Mc.math).vector.apply(n,_toConsumableArray(t)))},Sc=function TouchEvents(e){var t=[],n=[];Object.keys(Ec).forEach((function(e){Ec[e].forEach((function(e){n[e]=[]}))}));var r={press:function press(e,n){Pc(e,t=n)},release:function release(){},move:function move(e,n){e.buttons>0&&void 0===t[0]?t=n:0===e.buttons&&void 0!==t[0]&&(t=[]),Pc(e,t)}};Object.keys(Ec).forEach((function(t){var o="on"+oc.capitalized(t);Object.defineProperty(e,o,{set:function set(o){return null==o?function removeHandler(t){return Ec[t].forEach((function(t){return n[t].forEach((function(n){return e.removeEventListener(t,n)}))}))}(t):Ec[t].forEach((function(i){var c=function handlerFunc(n){var i=null!=n.touches?n.touches[0]:n;if(void 0!==i){var c,a=yc(e,i.clientX,i.clientY).map((function(e){return isNaN(e)?void 0:e}));if(["x","y"].filter((function(e){return!n.hasOwnProperty(e)})).forEach((function(e,t){return jc(n,e,a[t])})),!n.hasOwnProperty("position"))jc(n,"position",(c=Mc.math).vector.apply(c,_toConsumableArray(a)));r[t](n,a)}o(n)};e.addEventListener&&(n[i].push(c),e.addEventListener(i,c))}))},enumerable:!0})})),Object.defineProperty(e,"off",{value:function value(){return function off(e,t){return Oc.forEach((function(n){t[n].forEach((function(t){return e.removeEventListener(n,t)})),t[n]=[]}))}(e,n)}})},zc=function UUID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5)},Nc=function Animation(e){var t,n,r={},o=0,i=function removeHandlers(){Oi.cancelAnimationFrame&&Oi.cancelAnimationFrame(n),Object.keys(r).forEach((function(e){return delete r[e]})),t=void 0,o=0};Object.defineProperty(e,"play",{set:function set(e){if(i(),null!=e){var c=zc();r[c]=function handlerFunc(i){t||(t=i,o=0),e({time:.001*(i-t),frame:o}),o+=1,r[c]&&(n=Oi.requestAnimationFrame(r[c]))},Oi.requestAnimationFrame&&(n=Oi.requestAnimationFrame(r[c]))}},enumerable:!0}),Object.defineProperty(e,"stop",{value:i,enumerable:!0})},Ic=function distanceSq2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)},qc=function distance2(e,t){return Math.sqrt(Ic(e,t))},Lc=Object.freeze({__proto__:null,distanceSq2:Ic,distance2:qc}),Tc=[["cx","cy"],["x","y"]],Fc=function controlPoint(e){var t=[0,0],n={selected:!1,svg:void 0,updatePosition:function updatePosition(e){return e}},r=function updateSVG(){n.svg&&(n.svg.parentNode||e.appendChild(n.svg),Tc.filter((function(e){return null!=n.svg[e[0]]})).forEach((function(e){return e.forEach((function(e,r){n.svg.setAttribute(e,t[r])}))})))},o=new Proxy(t,{set:function set(e,t,n){return e[t]=n,r(),!0}}),i=function setPosition(){Zi.apply(void 0,_toConsumableArray(Ui.apply(void 0,arguments))).forEach((function(e,n){t[n]=e})),r(),"function"==typeof t.delegate&&t.delegate.apply(t.pointsContainer,[o,t.pointsContainer])};return t.delegate=void 0,t.setPosition=i,t.onMouseMove=function(e){return n.selected?i(n.updatePosition(e)):void 0},t.onMouseUp=function(){n.selected=!1},t.distance=function(e){return Math.sqrt(Ic(e,t))},["x","y"].forEach((function(e,n){return Object.defineProperty(t,e,{get:function get(){return t[n]},set:function set(e){t[n]=e}})})),["svg","updatePosition","selected"].forEach((function(e){return Object.defineProperty(t,e,{get:function get(){return n[e]},set:function set(t){n[e]=t}})})),Object.defineProperty(t,"remove",{value:function value(){!function removeFromParent(e){e&&e.parentNode&&e.parentNode.removeChild(e)}(n.svg),t.delegate=void 0}}),o},Vc=function controls(e,t,n){var r,o,i=Array.from(Array(t)).map((function(){return Fc(e)})),c=function protocol(e){return"function"==typeof o?o.call(i,e,r,i):void 0};i.forEach((function(e){e.delegate=c,e.pointsContainer=i}));e.onPress=function mousePressedHandler(e){i.length>0&&(r=i.map((function(t,n){return{i:n,d:Ic(t,[e.x,e.y])}})).sort((function(e,t){return e.d-t.d})).shift().i,i[r].selected=!0)},e.onMove=function mouseMovedHandler(e){i.forEach((function(t){return t.onMouseMove(e)}))},e.onRelease=function mouseReleasedHandler(){i.forEach((function(e){return e.onMouseUp()})),r=void 0},Object.defineProperty(i,"selectedIndex",{get:function get(){return r}}),Object.defineProperty(i,"selected",{get:function get(){return i[r]}}),Object.defineProperty(i,"add",{value:function value(t){i.push(Fc(e))}}),i.removeAll=function(){for(;i.length>0;)i.pop().remove()};var a={onChange:function onChange(e,t){if(o=e,!0===t){var n=i.length-1;e.call(i,i[n],n,i)}},position:function position(e){return i.forEach((function(t,n){return t.setPosition(e.call(i,t,n,i))}))},svg:function svg(e){return i.forEach((function(t,n){t.svg=e.call(i,t,n,i)}))}};return Object.keys(a).forEach((function(e){i[e]=function(){return"function"==typeof arguments[0]&&a[e].apply(a,arguments),i}})),i.parent=function(e){return null!=e&&null!=e.appendChild&&i.forEach((function(t){e.appendChild(t.svg)})),i},i},Bc=function applyControlsToSVG(e){e.controls=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vc.call.apply(Vc,[e,e].concat(n))}},Gc=(new Oi.DOMParser).parseFromString("<div />","text/xml").documentElement.constructor,Dc={svg:{args:function args(){return[viewBox(Zi.apply(void 0,arguments))].filter((function(e){return null!=e}))},methods:Cc,init:function init(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.filter((function(e){return _typeof(e)===ki.string})).forEach((function(t){return Ac(e,t)})),n.filter((function(e){return null!=e})).filter((function(e){return e instanceof Gc})).filter((function(e){return _typeof(e.appendChild)===ki.function})).forEach((function(t){return t.appendChild(e)})),Sc(e),Nc(e),Bc(e)}}},Rc=function loadGroup(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.map((function(e){return vc(e)})).filter((function(e){return void 0!==e}));return o.filter((function(e){return e.tagName===ki.svg})).forEach((function(t){return uc(e,t)})),o.filter((function(e){return e.tagName!==ki.svg})).forEach((function(t){return e.appendChild(t)})),e},Uc={g:{init:Rc,methods:{load:Rc}}},Zc=Object.assign(Object.create(null),{svg:["viewBox"],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:["points"],polyline:["points"],path:["d"],text:["x","y"],mask:["id"],symbol:["id"],clipPath:["id","clip-rule"],marker:["id","markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]}),Hc=function setRadius(e,t){return e.setAttribute(Zc.circle[2],t),e},Xc=function setOrigin(e,t,n){return _toConsumableArray(Zi.apply(void 0,_toConsumableArray(Ui(t,n))).slice(0,2)).forEach((function(t,n){return e.setAttribute(Zc.circle[n],t)})),e},Wc=function fromPoints(e,t,n,r){return[e,t,qc([e,t],[n,r])]},Yc={circle:{args:function args(e,t,n,r){var o=Zi.apply(void 0,_toConsumableArray(Ui(e,t,n,r)));switch(o.length){case 0:case 1:return[,,].concat(_toConsumableArray(o));case 2:case 3:return o;default:return Wc.apply(void 0,_toConsumableArray(o))}},methods:{radius:Hc,setRadius:Hc,origin:Xc,setOrigin:Xc,center:Xc,setCenter:Xc,position:Xc,setPosition:Xc}}},$c=function setRadii(e,t,n){return[,,t,n].forEach((function(t,n){return e.setAttribute(Zc.ellipse[n],t)})),e},Kc=function setCenter(e,t,n){return _toConsumableArray(Zi.apply(void 0,_toConsumableArray(Ui(t,n))).slice(0,2)).forEach((function(t,n){return e.setAttribute(Zc.ellipse[n],t)})),e},Jc={ellipse:{args:function args(e,t,n,r){var o=Zi.apply(void 0,_toConsumableArray(Ui(e,t,n,r))).slice(0,4);switch(o.length){case 0:case 1:case 2:return[,,].concat(_toConsumableArray(o));default:return o}},methods:{radius:$c,setRadius:$c,origin:Kc,setOrigin:Kc,center:Kc,setCenter:Kc,position:Kc,setPosition:Kc}}},Qc=function Args(e,t,n,r){return Zi.apply(void 0,_toConsumableArray(Ui(e,t,n,r))).slice(0,4)},ea={line:{args:Qc,methods:{setPoints:function setPoints(e,t,n,r,o){return Qc(t,n,r,o).forEach((function(t,n){return e.setAttribute(Zc.line[n],t)})),e}}}},ta=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,na=/-?[0-9]*\.?\d+/g,ra={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(ra).forEach((function(e){var t=ra[e];ra[e.toUpperCase()]=t.charAt(0).toUpperCase()+t.slice(1)}));var oa=function getD(e){var t=e.getAttribute("d");return null==t?"":t},ia=function appendPathCommand(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e.setAttribute("d","".concat(oa(e)).concat(t).concat(Ui.apply(void 0,r).join(" "))),e},ca=function getCommands(e){return function parsePathCommands(e){for(var t,n=[];null!==(t=ta.exec(e));)n.push(t);return n.map((function(t){return{command:e[t.index],index:t.index}})).reduceRight((function(t,n){var r=e.substring(n.index,t.length?t[t.length-1].index:e.length);return t.concat([{command:n.command,index:n.index,chunk:r.length>0?r.substr(1,r.length-1):r}])}),[]).reverse().map((function(e){var t=e.chunk.match(na);return e.en=ra[e.command],e.values=t?t.map(parseFloat):[],delete e.chunk,e}))}(oa(e))},aa={addCommand:ia,appendCommand:ia,clear:function clear(e){return e.removeAttribute("d"),e},getCommands:ca,get:ca,getD:function getD(e){return e.getAttribute("d")}};Object.keys(ra).forEach((function(e){aa[ra[e]]=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return ia.apply(void 0,[t,e].concat(r))}}));var ua={path:{methods:aa}},sa=function setRectSize(e,t,n){return[,,t,n].forEach((function(t,n){return e.setAttribute(Zc.rect[n],t)})),e},fa=function setRectOrigin(e,t,n){return _toConsumableArray(Zi.apply(void 0,_toConsumableArray(Ui(t,n))).slice(0,2)).forEach((function(t,n){return e.setAttribute(Zc.rect[n],t)})),e},la=function fixNegatives(e){return[0,1].forEach((function(t){e[2+t]<0&&(void 0===e[0+t]&&(e[0+t]=0),e[0+t]+=e[2+t],e[2+t]=-e[2+t])})),e},pa={rect:{args:function args(e,t,n,r){var o=Zi.apply(void 0,_toConsumableArray(Ui(e,t,n,r))).slice(0,4);switch(o.length){case 0:case 1:case 2:case 3:return la([,,].concat(_toConsumableArray(o)));default:return la(o)}},methods:{origin:fa,setOrigin:fa,center:fa,setCenter:fa,size:sa,setSize:sa}}},da={style:{init:function init(e,t){e.textContent="",e.appendChild(cc(t))},methods:{setTextContent:function setTextContent(e,t){return e.textContent="",e.appendChild(cc(t)),e}}}},va={text:{args:function args(e,t,n){return Zi.apply(void 0,_toConsumableArray(Ui(e,t,n))).slice(0,2)},init:function init(e,t,n,r,o){var i=[t,n,r,o].filter((function(e){return _typeof(e)===ki.string})).shift();i&&e.appendChild(Oi.document.createTextNode(i))}}},_a=function makeIDString(){return Array.from(arguments).filter((function(e){return _typeof(e)===ki.string||e instanceof String})).shift()||zc()},ga=function args(){return[_a.apply(void 0,arguments)]},ma={mask:{args:ga},clipPath:{args:ga},symbol:{args:ga},marker:{args:ga,methods:{size:mc,setViewBox:mc}}},ha=function getPoints(e){var t=e.getAttribute("points");return null==t?"":t},ya=function polyString(){var e=arguments;return Array.from(Array(Math.floor(arguments.length/2))).map((function(t,n){return"".concat(e[2*n+0],",").concat(e[2*n+1])})).join(" ")},ba=function stringifyArgs(){return[ya.apply(void 0,_toConsumableArray(Zi.apply(void 0,_toConsumableArray(Ui.apply(void 0,arguments)))))]},Aa=function setPoints$1(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.setAttribute("points",ba.apply(void 0,n)[0]),e},xa=function addPoint(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.setAttribute("points",[ha(e),ba.apply(void 0,n)[0]].filter((function(e){return""!==e})).join(" ")),e},ka=function Args$1(){return 1===arguments.length&&_typeof(arguments.length<=0?void 0:arguments[0])===ki.string?[arguments.length<=0?void 0:arguments[0]]:ba.apply(void 0,arguments)},wa={polyline:{args:ka,methods:{setPoints:Aa,addPoint:xa}},polygon:{args:ka,methods:{setPoints:Aa,addPoint:xa}}},Ca=Object.assign({},Dc,Uc,Yc,Jc,ea,ua,pa,da,va,ma,wa),Ma={presentation:["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],animation:["accumulate","additive","attributeName","begin","by","calcMode","dur","end","from","keyPoints","keySplines","keyTimes","max","min","repeatCount","repeatDur","restart","to","values"],effects:["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"],text:["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"],gradient:["gradientTransform","gradientUnits","spreadMethod"]};Object.values(Pi).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0===Zc[e]})).forEach((function(e){Zc[e]=[]})),[[["svg","defs","g"].concat(Pi.v,Pi.t),Ma.presentation],[["filter"],Ma.effects],[Pi.cT.concat("text"),Ma.text],[Pi.cF,Ma.effects],[Pi.cG,Ma.gradient]].forEach((function(e){return e[0].forEach((function(t){Zc[t]=Zc[t].concat(e[1])}))}));var Ea=function getClassList(e){if(null==e)return[];var t=e.getAttribute(ki.class);return null==t?[]:t.split(" ").filter((function(e){return""!==e}))},Oa={addClass:function addClass(e,t){var n=Ea(e).filter((function(e){return e!==t}));n.push(t),e.setAttributeNS(null,ki.class,n.join(" "))},removeClass:function removeClass(e,t){var n=Ea(e).filter((function(e){return e!==t}));e.setAttributeNS(null,ki.class,n.join(" "))},setClass:function setClass(e,t){e.setAttributeNS(null,ki.class,t)},setId:function setId(e,t){e.setAttributeNS(null,ki.id,t)}},ja=function getAttr(e){var t=e.getAttribute(ki.transform);return null==t||""===t?void 0:t},Pa={clearTransform:function clearTransform(e){return e.removeAttribute(ki.transform),e}};["translate","rotate","scale","matrix"].forEach((function(e){Pa[e]=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.setAttribute(ki.transform,[ja(t),"".concat(e,"(").concat(r.join(" "),")")].filter((function(e){return void 0!==e})).join(" "))}}));var Sa={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach((function(e){Sa[oc.toCamel(e)]=function(t,n){return t.setAttribute(e,function findIdURL(e){if(null==e)return"";if(_typeof(e)===ki.string)return"url"===e.slice(0,3)?e:"url(#".concat(e,")");if(null!=e.getAttribute){var t=e.getAttribute(ki.id);return"url(#".concat(t,")")}return""}(n))}}));var za={};(oo=Pi.v).push.apply(oo,_toConsumableArray(Object.keys(Ji))),Object.keys(Ji).forEach((function(e){Ji[e].attributes=void 0===Ji[e].attributes?_toConsumableArray(Ma.presentation):Ji[e].attributes.concat(Ma.presentation)})),Object.assign(za,Ca,Ji),Object.keys(Pi).forEach((function(e){return Pi[e].filter((function(e){return void 0===za[e]})).forEach((function(e){za[e]={}}))}));var Na=function passthrough(){return Array.from(arguments)};Object.keys(za).forEach((function(e){za[e].nodeName||(za[e].nodeName=e),za[e].init||(za[e].init=Na),za[e].args||(za[e].args=Na),za[e].methods||(za[e].methods={}),za[e].attributes||(za[e].attributes=Zc[e]||[])}));var Ia=function assign(e,t){e.forEach((function(e){return Object.keys(t).forEach((function(n){za[e].methods[n]=function(){return t[n].apply(t,arguments),arguments[0]}}))}))};Ia(Ui(Pi.t,Pi.v,Pi.g,Pi.s,Pi.p,Pi.i,Pi.h,Pi.d),Oa),Ia(Ui(Pi.t,Pi.v,Pi.g,Pi.s,Pi.p,Pi.i,Pi.h,Pi.d),fc),Ia(Ui(Pi.v,Pi.g,Pi.s),Pa),Ia(Ui(Pi.t,Pi.v,Pi.g),Sa);var qa={svg:{version:"1.1",xmlns:ji},style:{type:"text/css"}},La=function RequiredAttributes(e,t){qa[t]&&Object.keys(qa[t]).forEach((function(n){return e.setAttribute(n,qa[t][n])}))},Ta={},Fa=function constructor(e){for(var t,n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var c=Oi.document.createElementNS(ji,za[e].nodeName);return La(c,e),(t=za[e]).init.apply(t,[c].concat(o)),(n=za[e]).args.apply(n,o).forEach((function(t,n){null!=za[e].attributes[n]&&c.setAttribute(za[e].attributes[n],t)})),za[e].attributes.forEach((function(e){Object.defineProperty(c,oc.toCamel(e),{value:function value(){return c.setAttribute.apply(c,[e].concat(Array.prototype.slice.call(arguments))),c}})})),Object.keys(za[e].methods).forEach((function(t){return Object.defineProperty(c,t,{value:function value(){var n;return(n=za[e].methods[t]).call.apply(n,[Ta,c].concat(Array.prototype.slice.call(arguments)))}})})),rc[e]&&rc[e].forEach((function(e){Object.defineProperty(c,e,{value:function value(){var t=constructor.apply(void 0,[e].concat(Array.prototype.slice.call(arguments)));return c.appendChild(t),t}})})),c};Ta.Constructor=Fa;var Va={};Object.keys(Pi).forEach((function(e){return Pi[e].forEach((function(e){Va[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fa.apply(void 0,[e].concat(n))}}))}));var Ba=function getFoldObject(e){return e.filter((function(e){return function possibleFoldObject(e){if("object"!==_typeof(e))return!1;var t=["vertices_coords","edges_vertices","faces_vertices","faces_edges"];return Object.keys(e).map((function(e){return t.includes(e)})).reduce((function(e,t){return e||t}),!1)}(e)})).shift()},Ga=function initialize(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.filter((function(e){return _typeof(e)===ki.function})).forEach((function(t){return t.call(e,e)}))},Da=function SVG(){var e=arguments,t=Fa.apply(void 0,[ki.svg].concat(Array.prototype.slice.call(arguments)));return"loading"===Oi.document.readyState?Oi.document.addEventListener("DOMContentLoaded",(function(){return Ga.apply(void 0,[t].concat(_toConsumableArray(e)))})):Ga.apply(void 0,[t].concat(Array.prototype.slice.call(arguments))),t};Object.assign(Da,Va),Da.NS=ji,Da.linker=function Linker(e){e.graph&&e.origami&&function link_rabbitear(e,t){t.svg=e,["segment","circle","ellipse","rect","polygon"].filter((function(e){return t[e]&&t[e].prototype})).forEach((function(n){t[n].prototype.svg=function(){return e.path(this.svgPath())}})),za.graph={nodeName:"g",init:function init(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.graph.svg(n,_objectSpread2(_objectSpread2({},r),{},{parent:e})),e},args:function args(){return[]},methods:za.g.methods,attributes:za.g.attributes},rc.graph=_toConsumableArray(rc.g),rc.svg.push("graph"),rc.g.push("graph")}(this,e)}.bind(Da),Da.use=function use(e){e.origami&&function bindRabbitEar(e,t){Mc.math.vector=t.vector}(0,e),e.render_into_svg&&function bindFoldToSvg(e,t){var n=za.svg.init;za.svg.init=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var c=Ba(o);if(c){var a=t.options.apply(t,o);t.render_into_svg(e,c,a)}return n.apply(void 0,[e].concat(o))}}(0,e)}.bind(Da),Da.core=Object.assign(Object.create(null),{load:_c,save:gc,coordinates:Zi,flatten:Ui,attributes:Zc,children:rc,cdata:cc,detect:Ei},oc,Oa,fc,Lc,Pa,bc);var Ra={SVG:Da},Ua=function is_folded_form(e){return e.frame_classes&&e.frame_classes.includes("foldedForm")||e.file_classes&&e.file_classes.includes("foldedForm")},Za=Object.freeze({__proto__:null,is_folded_form:Ua}),Ha={SVG:Da},Xa={},Wa={stroke:"black"},Ya={},$a={m:{stroke:"red"},v:{stroke:"blue"},f:{stroke:"lightgray"}},Ka={B:pi,b:pi,M:di,m:di,V:vi,v:vi,F:_i,f:_i,U:gi,u:gi},Ja={B:"b",b:"b",M:"m",m:"m",V:"v",v:"v",F:"f",f:"f",U:"u",u:"u"},Qa=function edges_assignment_indices(e){var t={u:[],f:[],v:[],m:[],b:[]},n=e.edges_assignment.map((function(e){return Ja[e]}));return e.edges_vertices.map((function(e,t){return n[t]||"u"})).forEach((function(e,n){return t[e].push(n)})),t},eu=function edges_path_data(e){return function edges_coords(e){var t=e.vertices_coords,n=e.edges_vertices;return t&&n?n.map((function(e){return e.map((function(e){return t[e]}))})):[]}(e).map((function(e){return function segment_to_path(e){return"M".concat(e[0][0]," ").concat(e[0][1],"L").concat(e[1][0]," ").concat(e[1][1])}(e)})).join("")},tu=function edges_path_data_assign(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_assignment;if(!t||!n)return{};if(!r)return{u:eu({vertices_coords:t,edges_vertices:n})};var o=Qa({vertices_coords:t,edges_vertices:n,edges_assignment:r});return Object.keys(o).forEach((function(e){o[e]=eu({vertices_coords:t,edges_vertices:o[e].map((function(e){return n[e]}))})})),Object.keys(o).forEach((function(e){""===o[e]&&delete o[e]})),o},nu=function edges_paths_assign(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_assignment,o=tu({vertices_coords:t,edges_vertices:n,edges_assignment:r});return Object.keys(o).forEach((function(e){var t=Ha.SVG.path(o[e]);t.setAttributeNS(null,mi,Ka[e]),o[e]=t})),o},ru=function apply_style(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){return e.setAttributeNS(null,n,t[n])}))},ou={SVG:Da},iu={back:{fill:"white"},front:{fill:"#ddd"}},cu={},au={stroke:"black","stroke-linejoin":"bevel"},uu={fill:"none"},su=function apply_style(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){return e.setAttributeNS(null,n,t[n])}))},fu=function finalize_faces(e,t,n,r){var o=Ua(e),i=null!=e[xi]&&e[xi].length===e.faces_vertices.length,c=[["front"],["back"]],a=function get_faces_winding(e){return e.faces_vertices.map((function(t){return t.map((function(t){return e.vertices_coords[t]})).map((function(e,t,n){return[e,n[(t+1)%n.length],n[(t+2)%n.length]]})).map((function(e){return Ln.core.cross2(Ln.core.subtract(e[1],e[0]),Ln.core.subtract(e[2],e[1]))})).reduce((function(e,t){return e+t}),0)}))}(e).map((function(e){return e<0}));return a.map((function(e){return e?c[0]:c[1]})).forEach((function(e,n){t[n].setAttributeNS(null,mi,e),su(t[n],o?iu[e]:cu[e]),su(t[n],r[e])})),(i?function faces_sorted_by_layer(e){return e.map((function(e,t){return{layer:e,i:t}})).sort((function(e,t){return e.layer-t.layer})).map((function(e){return e.i}))}(e[xi]).map((function(e){return t[e]})):t).forEach((function(e){return n.appendChild(e)})),Object.defineProperty(n,"front",{get:function get(){return t.filter((function(e,t){return a[t]}))}}),Object.defineProperty(n,"back",{get:function get(){return t.filter((function(e,t){return!a[t]}))}}),su(n,o?au:uu),n},lu={SVG:Da},pu={fill:"none"},du={stroke:"black",fill:"white"},vu=function apply_style(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(n){return e.setAttributeNS(null,n,t[n])}))},_u=function graph_classes(e){return[e.file_classes?e.file_classes:[],e.frame_classes?e.frame_classes:[]].reduce((function(e,t){return e.concat(t)}))},gu={SVG:Da},mu={vertices:function vertices_circle(e){var t=e.vertices_coords,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ra.SVG.g();if(!t)return r;t.map((function(e){return Ra.SVG.circle(e[0],e[1],.01)})).forEach((function(e){return r.appendChild(e)}));return r.setAttributeNS(null,"fill","none"),Object.keys(n).forEach((function(e){return r.setAttributeNS(null,e,n[e])})),r},edges:function edges_paths(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ua(e),r=nu(e),o=Ha.SVG.g();return Object.keys(r).forEach((function(e){r[e].setAttributeNS(null,mi,Ka[e]),ru(r[e],n?Ya[e]:$a[e]),ru(r[e],t[e]),ru(r[e],t[Ka[e]]),o.appendChild(r[e]),Object.defineProperty(o,Ka[e],{get:function get(){return r[e]}})})),ru(o,n?Xa:Wa),ru(o,t.stroke?{stroke:t.stroke}:{}),o},faces:function faces_draw_function(e,t){return null!=e.faces_vertices?function faces_vertices_polygon(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ou.SVG.g();if(!e.vertices_coords||!e.faces_vertices)return n;var r=e.faces_vertices.map((function(t){return t.map((function(t){return[0,1].map((function(n){return e.vertices_coords[t][n]}))}))})).map((function(e){return ou.SVG.polygon(e)}));return r.forEach((function(e,t){return e.setAttributeNS(null,hi,t)})),n.setAttributeNS(null,"fill","white"),fu(e,r,n,t)}(e,t):function faces_edges_polygon(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ou.SVG.g();if(Ai in e==0||bi in e==0||yi in e==0)return n;var r=e.faces_edges.map((function(t){return t.map((function(t){return e.edges_vertices[t]})).map((function(e,t,n){var r=n[(t+1)%n.length];return e[1]===r[0]||e[1]===r[1]?e[0]:e[1]})).map((function(t){return[0,1].map((function(n){return e.vertices_coords[t][n]}))}))})).map((function(e){return ou.SVG.polygon(e)}));return r.forEach((function(e,t){return e.setAttributeNS(null,hi,t)})),n.setAttributeNS(null,"fill","white"),fu(e,r,n,t)}(e,t)},boundaries:function boundaries_polygon(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=lu.SVG.g();if(!e.vertices_coords||!e.edges_vertices||!e.edges_assignment)return n;var r=Ko(e).vertices.map((function(t){return[0,1].map((function(n){return e.vertices_coords[t][n]}))}));if(0===r.length)return n;var o=lu.SVG.polygon(r);return o.setAttributeNS(null,mi,pi),n.appendChild(o),vu(n,Ua(e)?pu:du),Object.keys(t).forEach((function(e){return n.setAttributeNS(null,e,t[e])})),n}},hu=function draw_groups(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.parent?t.parent:gu.SVG.g(),r=["graph"].concat(_u(e)).join(" ");return n.setAttributeNS(null,mi,r),[li,fi,si,ui].map((function(r){var o=t[r]||{},i=mu[r](e,o);return i.setAttributeNS(null,mi,r),Object.defineProperty(n,r,{get:function get(){return i}}),i})).filter((function(e){return e.childNodes.length>0})).forEach((function(e){return n.appendChild(e)})),n};[li,fi,si,ui].forEach((function(e){hu[e]=function(){var t=mu[e].apply(mu,arguments);return t.setAttributeNS(null,mi,e),t}}));var yu=function split_edge(e,t,n){if(!(e.edges_vertices.length<t)){var r,o=e.edges_vertices[t];if(!n)n=(r=Ln.core).midpoint.apply(r,_toConsumableArray(o));var i=o.map((function(t){return e.vertices_coords[t]})).map((function(e){return Ln.core.distance(e,n)<Ln.core.EPSILON}));if(i[0])return{vertex:o[0],edges:{}};if(i[1])return{vertex:o[1],edges:{}};var c=e.vertices_coords.length;e.vertices_coords[c]=n;var a=[0,1].map((function(t){return t+e.edges_vertices.length}));(function split_edge_into_two(e,t,n){var r=e.edges_vertices[t],o=[{edges_vertices:[r[0],n]},{edges_vertices:[n,r[1]]}];return o.forEach((function(n,r){if([Er,Or].filter((function(n){return void 0!==e[n]&&void 0!==e[n][t]})).forEach((function(r){return n[r]=e[r][t]})),e.edges_faces&&void 0!==e.edges_faces[t]&&(n.edges_faces=_toConsumableArray(e.edges_faces[t])),e.edges_vector){var o=n.edges_vertices.map((function(t){return e.vertices_coords[t]}));n.edges_vector=Ln.core.subtract(o[1],o[0])}if(e.edges_length){var i,c=n.edges_vertices.map((function(t){return e.vertices_coords[t]}));n.edges_length=(i=Ln.core).distance2.apply(i,_toConsumableArray(c))}})),o})(e,t,c).forEach((function(t,n){return Object.keys(t).forEach((function(r){e[r][a[n]]=t[r]}))})),function update_vertices_vertices(e,t,n){var r=e.vertices_vertices;r&&(r[t]=_toConsumableArray(n),n.forEach((function(e,n,o){var i=o[(n+1)%o.length],c=r[e].indexOf(i);r[e][c]=t})))}(e,c,o),function update_vertices_edges(e,t,n,r,o){var i=e.vertices_edges;i&&(i[r]=_toConsumableArray(o),t.map((function(e){return i[e].indexOf(n)})).forEach((function(e,n){i[t[n]][e]=o[n]})))}(e,o,t,c,a);var u=function find_adjacent_faces_to_edge(e,t){var n=e.vertices_faces,r=e.edges_vertices,o=e.edges_faces,i=e.faces_edges;if(e.faces_vertices,o&&o[t])return o[t];var c=r[t];if(void 0!==n){for(var a=[],u=0;u<n[c[0]].length;u+=1)for(var s=0;s<n[c[1]].length;s+=1)n[c[0]][u]===n[c[1]][s]&&a.push(n[c[0]][u]);return a}if(i){for(var l=[],p=0;p<i.length;p+=1)for(var d=0;d<i[p].length;d+=1)i[p][d]===t&&l.push(p);return l}}(e,t);u&&(function update_vertices_faces(e,t,n){var r=e.vertices_faces;r&&(r[t]=_toConsumableArray(n))}(e,c,o),function update_faces_vertices(e,t,n,r){var o=e.faces_vertices;o&&t.map((function(e){return o[e]})).forEach((function(e){return e.map((function(e,t,n){var o=(t+1)%n.length;return e===r[0]&&n[o]===r[1]||e===r[1]&&n[o]===r[0]?o:void 0})).filter((function(e){return void 0!==e})).sort((function(e,t){return t-e})).forEach((function(t){return e.splice(t,0,n)}))}))}(e,u,c,o),function update_faces_edges(e,t,n,r,o){var i=e.edges_vertices,c=e.faces_edges;c&&t.map((function(e){return c[e]})).forEach((function(e){var t=e.indexOf(o),c=e[(t+e.length-1)%e.length],a=e[(t+1)%e.length],u=[[c,o],[o,a]].map((function(e){var t=e.map((function(e){return i[e]}));return t[0][0]===t[1][0]||t[0][0]===t[1][1]?t[0][0]:t[0][1]})).reduce((function(e,t){return e.concat(t)}),[]),s=[[u[0],n],[n,u[1]]].map((function(e){var t=e.map((function(e){return-1!==i[r[0]].indexOf(e)})).reduce((function(e,t){return e&&t}),!0),n=e.map((function(e){return-1!==i[r[1]].indexOf(e)})).reduce((function(e,t){return e&&t}),!0);if(t)return r[0];if(n)return r[1];throw new Error("something wrong with input graph's faces_edges construction")}));return t===e.length-1?(e.splice(t,1,s[0]),e.unshift(s[1])):e.splice.apply(e,[t,1].concat(_toConsumableArray(s))),s}))}(e,u,c,a,t));var s=Ur(e,wr,[t]);return a.forEach((function(e,t){a[t]=s[a[t]]})),s.splice(-2),s[t]=a,{vertex:c,edges:{map:s,remove:t}}}},bu=function split_convex_face(e,t,n,r){var o=function intersect_face_with_line(e,t,n,r){var o=e.vertices_coords,i=e.edges_vertices,c=e.faces_vertices,a=e.faces_edges,u=c[t].map((function(e){return o[e]})).map((function(e){return Ln.core.overlap_line_point(n,r,e)})).map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e})).slice(0,2),s=u.map((function(e){return{vertex:c[t][e],face_vertex_index:e}}));if(s.length>1){var l=u[1]-u[0];if(1===(l<0?l+c[t].length:l))return;return{vertices:s,edges:[]}}var p=a[t].map((function(e){return i[e].map((function(e){return o[e]}))})).map((function(e){return[Ln.core.subtract(e[1],e[0]),e[0]]})).map((function(e){var t;return(t=Ln.core).intersect_line_line.apply(t,[n,r].concat(_toConsumableArray(e),[Ln.core.include_l,Ln.core.exclude_s]))})).map((function(e,n){return{coords:e,face_edge_index:n,edge:a[t][n]}})).filter((function(e){return void 0!==e.coords})).slice(0,2);return s.length>0&&p.length>0?{vertices:s,edges:p}:p.length>1?{vertices:[],edges:p}:void 0}(e,t,n,r);if(void 0!==o){var i=o.vertices.map((function(e){return e.vertex})),c=[];o.edges.map((function(t,n,r){t.edge=c.length?c[0].edges.map[t.edge]:t.edge,c.push(yu(e,t.edge,t.coords))})),i.push.apply(i,_toConsumableArray(c.map((function(e){return e.vertex}))));var a=e.edges_vertices.length,u=[0,1].map((function(t){return e.faces_vertices.length+t-1})),s=function make_edge(e,t,n){var r,o,i=e.vertices_coords,c=t.map((function(e){return i[e]})).reverse();return{edges_vertices:_toConsumableArray(t),edges_foldAngle:0,edges_assignment:"U",edges_length:(r=Ln.core).distance2.apply(r,_toConsumableArray(c)),edges_vector:(o=Ln.core).subtract.apply(o,_toConsumableArray(c)),edges_faces:_toConsumableArray(n)}}(e,i,u);Object.keys(s).filter((function(t){return void 0!==e[t]})).forEach((function(t){e[t][a]=s[t]})),function update_vertices_vertices(e,t){var n=e.vertices_coords,r=e.vertices_vertices,o=e.edges_vertices,i=o[t][0],c=o[t][1];r[i]=ao({vertices_coords:n},r[i].concat(c),i),r[c]=ao({vertices_coords:n},r[c].concat(i),c)}(e,a);var l=function make_faces(e,t,n){var r=e.edges_vertices,o=e.faces_vertices,i=go({edges_vertices:r}),c=n.map((function(e){return o[t].indexOf(e)}));return function split_circular_array(e,t){return t.sort((function(e,t){return e-t})),[e.slice(t[1]).concat(e.slice(0,t[0]+1)),e.slice(t[0],t[1]+1)]}(o[t],c).map((function(e){return{faces_vertices:e,faces_edges:e.map((function(e,t,n){return"".concat(e," ").concat(n[(t+1)%n.length])})).map((function(e){return i[e]}))}}))}(e,t,i),p=Ur(e,"faces",[t]);if(l.forEach((function(t,n){return Object.keys(t).filter((function(t){return void 0!==e[t]})).forEach((function(r){e[r][u[n]]=t[r]}))})),e.vertices_faces=vo(e),e.edges_faces=xo(e),e.faces_faces=jo(e),2===c.length){var d=rr(c[0].edges.map);c[1].edges.remove=d[c[1].edges.remove]}return p[t]=u,{vertices:i,faces:{map:p,remove:t},edges:{map:tr.apply(void 0,_toConsumableArray(c.map((function(e){return e.edges.map})))),new:a,remove:c.map((function(e){return e.edges.remove}))}}}},Au={};Au.prototype=Object.create(Object.prototype),Au.prototype.constructor=Au;var xu=Object.assign({clean:no,populate:qo,fragment:Ro,subgraph:$o,assign:Yo,svg:hu},ei);Object.keys(xu).forEach((function(e){Au.prototype[e]=function(){return xu[e].apply(xu,[this].concat(Array.prototype.slice.call(arguments)))}}));var ku={addVertices:Uo,splitEdge:yu,faceSpanningTree:So,explodeFaces:ti};Object.keys(ku).forEach((function(e){Au.prototype[e]=function(){return ku[e].apply(ku,[this].concat(Array.prototype.slice.call(arguments)))}})),Au.prototype.splitFace=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=(t=Ln.core).get_line.apply(t,r);return bu(this,e,i.vector,i.origin)},Au.prototype.copy=function(){return Object.assign(Object.create(Au.prototype),ai(this))},Au.prototype.load=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===_typeof(e)&&(!0!==n.append&&xr.forEach((function(e){return delete t[e]})),Object.assign(this,{file_spec:yr,file_creator:br},ai(e)))},Au.prototype.clear=function(){var e=this;Ar.graph.forEach((function(t){return delete e[t]})),Ar.orders.forEach((function(t){return delete e[t]})),delete this.file_frames},Au.prototype.folded=function(){var e=Ao.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)));return Object.assign(Object.create(Au.prototype),Object.assign(ai(this),{vertices_coords:e},{frame_classes:["foldedForm"]}))};var wu=function shortenKeys(e,t,n){var r=this,o=Object.create(null);return Object.keys(e).forEach((function(t){o[t.substring(r.length+1)]=e[t]})),o},Cu=function getComponent(e){return Tr(this,e).map(wu.bind(e)).map(hr[e].bind(this))};["vertices","edges","faces"].forEach((function(e){return Object.defineProperty(Au.prototype,e,{get:function get(){return Cu.call(this,e)}})})),Object.defineProperty(Au.prototype,"boundary",{get:function get(){var e=this,t=Ko(this),n=Ln.polygon(t.vertices.map((function(t){return e.vertices_coords[t]})));return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.assign(n,t)}});var Mu={vertices:ni,edges:ri,faces:oi};Au.prototype.nearest=function(){var e=this,t=Ln.core.get_vector(arguments),n=Object.create(null),r={};return["vertices","edges","faces"].forEach((function(o){Object.defineProperty(n,jr[o],{get:function get(){return void 0!==r[o]||(r[o]=Mu[o](e,t)),r[o]}}),Ir(e,o).forEach((function(t){return Object.defineProperty(n,t,{get:function get(){return e[t][n[jr[o]]]}})}))})),n};var Eu=Au.prototype,Ou=function clip_line(e,t){var n=e.vertices_coords,r=e.vertices_edges,o=e.edges_vertices,i=e.edges_assignment,c=e.boundaries_vertices,a=Ln.typeof(t),u=Ln.core["clip_".concat(a,"_in_convex_poly_exclusive")];if(u){c||(c=Ko({vertices_edges:r,edges_vertices:o,edges_assignment:i}).vertices);var s=c.map((function(e){return n[e]}));return u.apply(void 0,[s].concat(_toConsumableArray(function prepare_clip_func_params(e,t){switch(t){case"line":case"ray":return[e.vector,e.origin];case"segment":return[e[0],e[1]];default:return[]}}(t,a))))}},ju=Object.freeze({__proto__:null,clip_line:Ou}),Pu=function add_edges(e,t){var n;e.edges_vertices||(e.edges_vertices=[]),"number"==typeof t[0]&&(t=[t]);var r=t.map((function(t,n){return e.edges_vertices.length+n}));(n=e.edges_vertices).push.apply(n,_toConsumableArray(t));var o=Qr(e).map;return r.map((function(e){return o[e]}))},Su={};Su.prototype=Object.create(Eu),Su.prototype.constructor=Su;Su.prototype.copy=function(){return Object.assign(Object.create(Su.prototype),ai(this))},Su.prototype.folded=function(){var e=make_vertices_coords_folded.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)));return Object.assign(Object.create(Eu),Object.assign(ai(this),{vertices_coords:e},{frame_classes:["foldedForm"]}))};var zu=function edges_array(e){var t=this;return e.mountain=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-180;return e.forEach((function(e){t.edges_assignment[e]="M",t.edges_foldAngle[e]=n})),e},e.valley=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:180;return e.forEach((function(e){t.edges_assignment[e]="V",t.edges_foldAngle[e]=n})),e},e.flat=function(){return e.forEach((function(e){t.edges_assignment[e]="F",t.edges_foldAngle[e]=0})),e},e};["line","ray","segment"].forEach((function(e){Su.prototype[e]=function(){var t=Ln[e].apply(Ln,arguments);if(t){var n=Ou(this,t);if(n){var r=Uo(this,n),o=Pu(this,r),i=Ro(this).edges.map;return qo(this),zu.call(this,o.map((function(e){return i[e]})).reduce((function(e,t){return e.concat(t)}),[]))}}}})),["circle","ellipse","rect","polygon"].forEach((function(e){Su.prototype[e]=function(){var t=this,n=Ln[e].apply(Ln,arguments);if(n){var r=n.segments(96).map((function(e){return Ln.segment(e)})).map((function(e){return Ou(t,e)})).filter((function(e){return void 0!==e}));if(r){var o=[],i=[];r.forEach((function(e){var n=Uo(t,e);o.push.apply(o,_toConsumableArray(n)),i.push.apply(i,_toConsumableArray(Pu(t,n)))}));var c=Ro(this).edges.map;return qo(this),zu.call(this,i.map((function(e){return c[e]})).reduce((function(e,t){return e.concat(t)}),[]))}}}}));var Nu=Su.prototype,Iu=function fold_faces_layer(e,t){var n=[],r=e.map((function(e,t){return t})),o=r.filter((function(e){return t[e]})),i=r.filter((function(e){return!t[e]}));return i.sort((function(t,n){return e[t]-e[n]})).forEach((function(e,t){n[e]=t})),o.sort((function(t,n){return e[n]-e[t]})).forEach((function(e,t){n[e]=i.length+t})),n},qu=function get_face_sidedness(e,t,n,r){var o=[n[0]-t[0],n[1]-t[1]],i=e[0]*o[1]-e[1]*o[0];return r?i>0:i<0},Lu=function make_face_center_fast(e,t){return e.faces_vertices[t]?e.faces_vertices[t].map((function(t){return e.vertices_coords[t]})).reduce((function(e,t){return[e[0]+t[0],e[1]+t[1]]}),[0,0]).map((function(n){return n/e.faces_vertices[t].length})):[0,0]},Tu=function prepare_graph_crease(e,t,n,r){var o=Dr.faces(e),i=Array.from(Array(o));e["faces_re:layer"]||(e["faces_re:layer"]=Array(o).fill(0)),e["faces_re:preindex"]=i.map((function(e,t){return t})),e.faces_matrix||(e.faces_matrix=zo(e,r)),e.faces_coloring=No(e),e["faces_re:creases"]=e.faces_matrix.map((function(e){return Ln.core.invert_matrix3(e)})).map((function(e){return Ln.core.multiply_matrix3_line3(e,t,n)})),e.faces_center=i.map((function(t,n){return Lu(e,n)})),e["faces_re:sidedness"]=i.map((function(t,n){return qu(e["faces_re:creases"][n].vector,e["faces_re:creases"][n].origin,e.faces_center[n],e.faces_coloring[n])}))},Fu=function two_furthest_points(e){var t=[0,-1/0],n=[1/0,0],r=[-1/0,0],o=[0,1/0];return e.forEach((function(e){e[0]<n[0]&&(n=e),e[0]>r[0]&&(r=e),e[1]<o[1]&&(o=e),e[1]>t[1]&&(t=e)})),Math.abs(t[1]-o[1])>Math.abs(r[0]-n[0])?[o,t]:[n,r]},Vu={M:"V",m:"V",V:"M",v:"M"},Bu=function opposingCrease(e){return Vu[e]||e},Gu=function flat_fold(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",i=Bu(o);if(null==r){var c=oi(e,n);r=void 0===c?0:c}t=Ln.core.resize(3,t),n=Ln.core.resize(3,n),Tu(e,t,n,r);var a=ai(e);a.vertices_coords.forEach((function(e){return e.splice(2)}));var u=Array.from(Array(Dr.faces(e))).map((function(e,t){return t})).reverse().map((function(t){var n=a.faces_coloring[t],r=bu(a,t,a["faces_re:creases"][t].vector,a["faces_re:creases"][t].origin);if(void 0!==r)return a.edges_assignment[r.edges.new]=n?o:i,a.edges_foldAngle[r.edges.new]=n?Pr[o]||0:Pr[i]||0,r.faces.map[r.faces.remove].forEach((function(t){a.faces_center[t]=Lu(a,t),a["faces_re:sidedness"][t]=qu(e["faces_re:creases"][r.faces.remove].vector,e["faces_re:creases"][r.faces.remove].origin,a.faces_center[t],e.faces_coloring[r.faces.remove]),a["faces_re:layer"][t]=e["faces_re:layer"][r.faces.remove],a["faces_re:preindex"][t]=e["faces_re:preindex"][r.faces.remove]})),r})).reverse();a["faces_re:layer"]=Iu(a["faces_re:layer"],a["faces_re:sidedness"]);var s=void 0===u[0]?0:a["faces_re:preindex"].map((function(e,t){return{pre:e,new:t}})).filter((function(e){return 0===e.pre})).filter((function(e){return a["faces_re:sidedness"][e.new]})).shift().new,l=e.faces_matrix[0];"M"!==o&&"m"!==o&&"V"!==o&&"v"!==o||(l=void 0!==u[0]||e["faces_re:sidedness"][0]?Ln.core.multiply_matrices3(e.faces_matrix[0],Ln.core.make_matrix3_reflectZ(e["faces_re:creases"][0].vector,e["faces_re:creases"][0].origin)):e.faces_matrix[0]);var p=zo(a,s).map((function(e){return Ln.core.multiply_matrices3(l,e)}));a.faces_coloring=No({faces_matrix:p});var d=Ln.core.multiply_matrix3_line3(l,e["faces_re:creases"][0].vector,e["faces_re:creases"][0].origin),v=Ln.core.normalize(Ln.core.rotate270(d.vector)),g=u.map((function(t,n){return void 0===t?void 0:a.edges_vertices[t.edges.new].map((function(e){return a.vertices_coords[e]})).map((function(t){return Ln.core.multiply_matrix3_vector3(e.faces_matrix[n],t)}))})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.concat(t)}),[]);return a["re:construction"]=0===g.length?{type:"flip",direction:v}:{type:"fold",assignment:o,direction:v,edge:Fu(g)},a.faces_matrix=p,a["vertices_re:foldedCoords"]=Ao(a,s),a.faces_matrix=p,delete e["faces_re:creases"],delete a["faces_re:creases"],delete e["faces_re:sidedness"],delete a["faces_re:sidedness"],delete e["faces_re:preindex"],delete a["faces_re:preindex"],delete e.faces_coloring,delete a.faces_coloring,delete e.faces_center,delete a.faces_center,a},Du={};Du.prototype=Object.create(Eu),Du.prototype.constructor=Du,Du.prototype.flatFold=function(){var e=this,t=Ln.core.get_line(arguments),n=Gu(this,t.vector,t.origin);return[kr,wr,Cr].map((function(t){return qr(e,t)})).reduce(Jn,[]).forEach((function(t){return delete e[t]})),Object.assign(this,n),this},Du.prototype.copy=function(){return Object.assign(Object.create(Du.prototype),ai(this))},Du.prototype.folded=function(){var e=Ao.apply(void 0,[this].concat(Array.prototype.slice.call(arguments)));return Object.assign(Object.create(Du.prototype),Object.assign(ai(this),{vertices_coords:e},{frame_classes:["foldedForm"]}))};var Ru=Du.prototype,Uu=Object.assign(Object.create(null),{assign:Yo,add_vertices:Uo,add_vertices_split_edges:function add_vertices_split_edges(e,t){var n=Uo(e,t),r=e.edges_vertices.map((function(t){return t.map((function(t){return e.vertices_coords[t]}))})),o=t.map((function(e){return r.map((function(t){return Ln.core.overlap_line_point(Ln.core.subtract(t[1],t[0]),t[0],e,Ln.core.exclude_s)})).map((function(e,t){return e?t:void 0})).filter((function(e){return void 0!==e})).shift()})),i=o.filter((function(e){return void 0!==e})),c=o.map((function(e,t){return{e:e,i:t}})).filter((function(e){return void 0!==e.e})).map((function(t){var r=Fr(e,"edges",t.e);return[r,ai(r)].map((function(r,o){return Object.assign(r,{edges_vertices:[e.edges_vertices[t.e][o],n[t.i]]})}))})).reduce((function(e,t){return e.concat(t)}),[]),a=Dr.edges(e),u={new:{edges:[]}};return c.forEach((function(t,n){return Object.keys(t).forEach((function(r){void 0===e[r]&&(e[r]=[]),e[r][a+n]=t[r],u.new.edges[n]=a+n}))})),Ur(e,"edges",i),n},add_edges:Pu,split_edge:yu,split_face:bu,flat_fold:Gu,clean:no,get_circular_edges:Xr,get_duplicate_edges:Wr,get_duplicate_vertices:$r,get_collinear_vertices:Vo,count:Dr,implied:ro,fragment:Ro,remove:Ur,populate:qo,subgraph:$o,explode_faces:ti,svg:hu},Io,ju,ei,Jo,co,ci,Br,so,Fo,or,Za,to,Hr),Zu=function make_polygon_vertices(e){return 4===e?[[0,0],[1,0],[1,1],[0,1]]:Ln.core.make_regular_polygon(e,.5/Math.sin(Math.PI/e))},Hu={},Xu=[null,null,null,"triangle","square","pentagon","hexagon","heptagon","octogon","nonagon","decagon","hendecagon","dodecagon"];[0,1,2].forEach((function(e){delete Xu[e]}));var Wu=function create_init(e){return qo(e)};Xu.forEach((function(e,t){var n=Array.from(Array(t));Hu[e]=function(){return Wu({vertices_coords:Zu(t),edges_vertices:n.map((function(e,t){return[t,(t+1)%n.length]})),edges_assignment:n.map((function(){return"B"}))})}})),Hu.rectangle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Wu({vertices_coords:[[0,0],[0,e],[e,t],[0,t]],edges_vertices:Array.from(Array(4)).map((function(e,t,n){return[t,(t+1)%n.length]})),edges_assignment:Array.from(Array(4)).map((function(){return"B"}))})},Hu.circle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return Wu({vertices_coords:Ln.core.make_regular_polygon(e,1),edges_vertices:Array.from(Array(e)).map((function(e,t,n){return[t,(t+1)%n.length]})),edges_assignment:Array.from(Array(e)).map((function(){return"B"}))})},Hu.kite=function(){return Wu({vertices_coords:[[0,0],[Math.sqrt(2)-1,0],[1,0],[1,1-(Math.sqrt(2)-1)],[1,1],[0,1]],edges_vertices:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0],[5,1],[3,5],[5,2]],edges_assignment:["B","B","B","B","B","B","V","V","F"]})};var Yu=Object.create(null),$u={graph:Eu,cp:Nu,origami:Ru},Ku={graph:function graph(){return{}},cp:Hu.square,origami:Hu.square};Object.keys($u).forEach((function(e){Yu[e]=function(){var t=Array.from(arguments).filter((function(e){return Vr(e)})).map((function(e){return JSON.parse(JSON.stringify(e))}));return Object.assign.apply(Object,[Object.create($u[e]),t.length?{}:Ku[e]()].concat(_toConsumableArray(t),[{file_spec:yr,file_creator:br}]))},Yu[e].prototype=$u[e],Yu[e].prototype.constructor=Yu[e],Object.keys(Hu).forEach((function(t){Yu[e][t]=function(){return Yu[e](Hu[t].apply(Hu,arguments))}}))})),Object.assign(Yu.graph,Uu);var Ju=function reflect_point(e,t){var n=Ln.core.make_matrix2_reflect(e.vector,e.origin);return Ln.core.multiply_matrix2_vector2(n,t)},Qu=function test_axiom1_2(e,t){return[e.points.map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,ear.math.include)})).reduce((function(e,t){return e&&t}),!0)]},es=[null,Qu,Qu,function test_axiom3(e,t){var n=e.lines.map((function(e){return Ln.core.clip_line_in_convex_poly_inclusive(t,e.vector,e.origin)}));if(void 0===n[0]||void 0===n[1])return[!1,!1];var r=Ln.core.axiom3(e.lines[0].vector,e.lines[0].origin,e.lines[1].vector,e.lines[1].origin),o=r.map((function(e){return void 0===e?void 0:Ln.core.intersect_convex_polygon_line(t,e.vector,e.origin,ear.math.exclude_s,ear.math.exclude_l)})),i=[0,1].map((function(e){return void 0!==o[e]})),c=r.map((function(e,t){return void 0===e?void 0:[Ju(e,n[0][0]),Ju(e,n[0][1])]})).map((function(e,t){return void 0!==e&&(Ln.core.overlap_line_point(Ln.core.subtract(n[1][1],n[1][0]),n[1][0],e[0])||Ln.core.overlap_line_point(Ln.core.subtract(n[1][1],n[1][0]),n[1][0],e[1])||Ln.core.overlap_line_point(Ln.core.subtract(e[1],e[0]),e[0],n[1][0])||Ln.core.overlap_line_point(Ln.core.subtract(e[1],e[0]),e[0],n[1][1]))}));return[0,1].map((function(e){return!0===c[e]&&!0===i[e]}))},function test_axiom4(e,t){var n=Ln.core.intersect_line_line(e.lines[0].vector,e.lines[0].origin,Ln.core.rotate90(e.lines[0].vector),e.points[0],Ln.core.include_l,Ln.core.include_l);return[[e.points[0],n].map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)})).reduce((function(e,t){return e&&t}),!0)]},function test_axiom5(e,t){var n=Ln.core.axiom5(e.lines[0].vector,e.lines[0].origin,e.points[0],e.points[1]);if(0===n.length)return[];var r=e.points.map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)})).reduce((function(e,t){return e&&t}),!0);return n.map((function(t){return Ju(t,e.points[1])})).map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)})).map((function(e){return e&&r}))},function test_axiom6(e,t){var n=Ln.core.axiom6(e.lines[0].vector,e.lines[0].origin,e.lines[1].vector,e.lines[1].origin,e.points[0],e.points[1]);if(0===n.length)return[];if(!e.points.map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)})).reduce((function(e,t){return e&&t}),!0))return n.map((function(){return!1}));var r=n.map((function(t){return Ju(t,e.points[0])})).map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)})),o=n.map((function(t){return Ju(t,e.points[1])})).map((function(e){return Ln.core.overlap_convex_polygon_point(t,e,Ln.core.include)}));return n.map((function(e,t){return r[t]&&o[t]}))},function test_axiom7(e,t){var n=Ln.core.overlap_convex_polygon_point(t,e.points[0],Ln.core.include),r=Ln.core.axiom7(e.lines[0].vector,e.lines[0].origin,e.lines[1].vector,e.points[0]);if(void 0===r)return[!1];var o=Ju(r,e.points[0]),i=Ln.core.overlap_convex_polygon_point(t,o,Ln.core.include),c=void 0!==Ln.core.intersect_convex_polygon_line(t,e.lines[1].vector,e.lines[1].origin,Ln.core.include_s,Ln.core.include_l);return[n&&i&&c]}];delete es[0];var ts=function test_axiom(e,t,n){var r="object"===_typeof(n)&&n.vertices_coords?Ko(n).vertices.map((function(e){return n.vertices_coords[e]})):n;return es[e](t,r)};Object.keys(es).forEach((function(e){ts[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ts.apply(void 0,[e].concat(n))}}));var ns={axioms:{ar:[null,"اصنع خطاً يمر بنقطتين","اصنع خطاً عن طريق طي نقطة واحدة إلى أخرى","اصنع خطاً عن طريق طي خط واحد على آخر","اصنع خطاً يمر عبر نقطة واحدة ويجعل خطاً واحداً فوق نفسه","اصنع خطاً يمر بالنقطة الأولى ويجعل النقطة الثانية على الخط","اصنع خطاً يجلب النقطة الأولى إلى الخط الأول والنقطة الثانية إلى الخط الثاني","اصنع خطاً يجلب نقطة إلى خط ويجعل خط ثاني فوق نفسه"],de:[null,"Falte eine Linie durch zwei Punkte","Falte zwei Punkte aufeinander","Falte zwei Linien aufeinander","Falte eine Linie auf sich selbst, falte dabei durch einen Punkt","Falte einen Punkt auf eine Linie, falte dabei durch einen anderen Punkt","Falte einen Punkt auf eine Linie und einen weiteren Punkt auf eine weitere Linie","Falte einen Punkt auf eine Linie und eine weitere Linie in sich selbst zusammen"],en:[null,"fold a line through two points","fold two points together","fold two lines together","fold a line on top of itself, creasing through a point","fold a point to a line, creasing through another point","fold a point to a line and another point to another line","fold a point to a line and another line onto itself"],es:[null,"dobla una línea entre dos puntos","dobla dos puntos juntos","dobla y une dos líneas","dobla una línea sobre sí misma, doblándola hacia un punto","dobla un punto hasta una línea, doblándola a través de otro punto","dobla un punto hacia una línea y otro punto hacia otra línea","dobla un punto hacia una línea y otra línea sobre sí misma"],fr:[null,"créez un pli passant par deux points","pliez pour superposer deux points","pliez pour superposer deux lignes","rabattez une ligne sur elle-même à l'aide d'un pli qui passe par un point","rabattez un point sur une ligne à l'aide d'un pli qui passe par un autre point","rabattez un point sur une ligne et un autre point sur une autre ligne","rabattez un point sur une ligne et une autre ligne sur elle-même"],hi:[null,"एक क्रीज़ बनाएँ जो दो स्थानों से गुजरता है","एक स्थान को दूसरे स्थान पर मोड़कर एक क्रीज़ बनाएँ","एक रेखा पर दूसरी रेखा को मोड़कर क्रीज़ बनाएँ","एक क्रीज़ बनाएँ जो एक स्थान से गुजरता है और एक रेखा को स्वयं के ऊपर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान से गुजरता है और दूसरे स्थान को रेखा पर ले आता है","एक क्रीज़ बनाएँ जो पहले स्थान को पहली रेखा पर और दूसरे स्थान को दूसरी रेखा पर ले आता है","एक क्रीज़ बनाएँ जो एक स्थान को एक रेखा पर ले आता है और दूसरी रेखा को स्वयं के ऊपर ले आता है"],jp:[null,"2点に沿って折り目を付けます","2点を合わせて折ります","2つの線を合わせて折ります","点を通過させ、既にある線に沿って折ります","点を線沿いに合わせ別の点を通過させ折ります","線に向かって点を折り、同時にもう一方の線に向かってもう一方の点を折ります","線に向かって点を折り、同時に別の線をその上に折ります"],ko:[null,"두 점을 통과하는 선으로 접으세요","두 점을 함께 접으세요","두 선을 함께 접으세요","그 위에 선을 접으면서 점을 통과하게 접으세요","점을 선으로 접으면서, 다른 점을 지나게 접으세요","점을 선으로 접고 다른 점을 다른 선으로 접으세요","점을 선으로 접고 다른 선을 그 위에 접으세요"],ms:[null,"lipat garisan melalui dua titik","lipat dua titik bersama","lipat dua garisan bersama","lipat satu garisan di atasnya sendiri, melipat melalui satu titik","lipat satu titik ke garisan, melipat melalui titik lain","lipat satu titik ke garisan dan satu lagi titik ke garisan lain","lipat satu titik ke garisan dan satu lagi garisan di atasnya sendiri"],pt:[null,"dobre uma linha entre dois pontos","dobre os dois pontos para uni-los","dobre as duas linhas para uni-las","dobre uma linha sobre si mesma, criando uma dobra ao longo de um ponto","dobre um ponto até uma linha, criando uma dobra ao longo de outro ponto","dobre um ponto até uma linha e outro ponto até outra linha","dobre um ponto até uma linha e outra linha sobre si mesma"],ru:[null,"сложите линию через две точки","сложите две точки вместе","сложите две линии вместе","сверните линию сверху себя, сгибая через точку","сложите точку в линию, сгибая через другую точку","сложите точку в линию и другую точку в другую линию","сложите точку в линию и другую линию на себя"],tr:[null,"iki noktadan geçen bir çizgi boyunca katla","iki noktayı birbirine katla","iki çizgiyi birbirine katla","bir noktadan kıvırarak kendi üzerindeki bir çizgi boyunca katla","başka bir noktadan kıvırarak bir noktayı bir çizgiye katla","bir noktayı bir çizgiye ve başka bir noktayı başka bir çizgiye katla","bir noktayı bir çizgiye ve başka bir çizgiyi kendi üzerine katla"],vi:[null,"tạo một nếp gấp đi qua hai điểm","tạo nếp gấp bằng cách gấp một điểm này sang điểm khác","tạo nếp gấp bằng cách gấp một đường lên một đường khác","tạo một nếp gấp đi qua một điểm và đưa một đường lên trên chính nó","tạo một nếp gấp đi qua điểm đầu tiên và đưa điểm thứ hai lên đường thẳng","tạo một nếp gấp mang điểm đầu tiên đến đường đầu tiên và điểm thứ hai cho đường thứ hai","tạo một nếp gấp mang lại một điểm cho một đường và đưa một đường thứ hai lên trên chính nó"],zh:[null,"通過兩點折一條線","將兩點折疊起來","將兩條線折疊在一起","通過一個點折疊一條線在自身上面","將一個點，通過另一個點折疊成一條線，","將一個點折疊為一條線，再將另一個點折疊到另一條線","將一個點折疊成一條線，另一條線折疊到它自身上"]},folds:{es:{fold:{verb:"",noun:"doblez"},valley:"doblez de valle",mountain:"doblez de montaña",inside:"",outside:"",open:"",closed:"",rabbit:"",rabbit2:"",petal:"",squash:"",flip:"dale la vuelta a tu papel"},en:{fold:{verb:"fold",noun:"crease"},valley:"valley fold",mountain:"mountain fold",inside:"inside reverse fold",outside:"outside reverse fold",open:"open sink",closed:"closed sink",rabbit:"rabbit ear fold",rabbit2:"double rabbit ear fold",petal:"petal fold",squash:"squash fold",flip:"flip over"},zh:{fold:{verb:"",noun:""},valley:"谷摺",mountain:"山摺",inside:"內中割摺",outside:"外中割摺",open:"開放式沉壓摺",closed:"封閉式沉壓摺",rabbit:"兔耳摺",rabbit2:"雙兔耳摺",petal:"花瓣摺",blintz:"坐墊基",squash:"壓摺",flip:""}}},rs="undefined"!=typeof window&&void 0!==window.document,os="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,is=("object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.constructor&&self.constructor.name,function(){var e={};if(os){var t=require("xmldom"),n=t.DOMParser,r=t.XMLSerializer;e.DOMParser=n,e.XMLSerializer=r,e.document=(new n).parseFromString("<!DOCTYPE html><title>.</title>","text/html")}else rs&&(e=window);return e}()),cs=function make_edge_cylinder(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Ln.core.mag_squared(t)<Ln.core.EPSILON)return[];for(var o=Ln.core.normalize(t),i=[[1,0,0],[0,1,0],[0,0,1]].map((function(e){return Ln.core.cross3(e,o)})).sort((function(e,t){return Ln.core.magnitude(t)-Ln.core.magnitude(e)})).shift(),c=[Ln.core.normalize(i)],a=1;a<4;a+=1)c.push(Ln.core.cross3(c[a-1],o));var u=c.map((function(e){return Ln.core.scale(e,n)})),s=[-r,r].map((function(e){return Ln.core.scale(o,e)})),l=0===r?e:e.map((function(e,t){return Ln.core.add(e,s[t])}));return l.map((function(e){return u.map((function(t){return Ln.core.add(e,t)}))})).reduce(Jn,[])},as=Object.freeze({__proto__:null,make_faces_geometry:function make_faces_geometry(e){var t=is.THREE,n=e.vertices_coords.map((function(e){return[e[0],e[1],e[2]||0]})).reduce(Jn,[]),r=e.vertices_coords.map((function(e){return[0,0,1]})).reduce(Jn,[]),o=e.vertices_coords.map((function(e){return[1,1,1]})).reduce(Jn,[]),i=e.faces_vertices.map((function(e){return e.map((function(e,t,n){return[n[0],n[t+1],n[t+2]]})).slice(0,e.length-2)})).reduce(Jn,[]).reduce(Jn,[]),c=new t.BufferGeometry;return c.setAttribute("position",new t.Float32BufferAttribute(n,3)),c.setAttribute("normal",new t.Float32BufferAttribute(r,3)),c.setAttribute("color",new t.Float32BufferAttribute(o,3)),c.setIndex(i),c},make_edges_geometry:function make_edges_geometry(e){var t=e.vertices_coords,n=e.edges_vertices,r=e.edges_assignment,o=e.edges_coords,i=e.edges_vector,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.002,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=is.THREE;o||(o=n.map((function(e){return e.map((function(e){return t[e]}))}))),i||(i=o.map((function(e){return Ln.core.subtract(e[1],e[0])}))),o=o.map((function(e){return e.map((function(e){return Ln.core.resize(3,e)}))})),i=i.map((function(e){return Ln.core.resize(3,e)}));var s={B:[0,0,0],M:[0,0,0],F:[0,0,0],V:[0,0,0]},l=r.map((function(e){return[s[e],s[e],s[e],s[e],s[e],s[e],s[e],s[e]]})).reduce(Jn,[]).reduce(Jn,[]).reduce(Jn,[]),p=o.map((function(e,t){return cs(e,i[t],c,a)})).reduce(Jn,[]).reduce(Jn,[]),d=i.map((function(e){if(Ln.core.mag_squared(e)<Ln.core.EPSILON)throw"degenerate edge";var t=Ln.core.normalize(e),n=(Ln.core.scale(t,c),Ln.core.scale(Ln.core.normalize(Ln.core.cross3(e,[0,0,-1])),c)),r=Ln.core.scale(Ln.core.normalize(Ln.core.cross3(e,[0,0,1])),c);return[n,[-n[2],n[1],n[0]],r,[-r[2],r[1],r[0]],n,[-n[2],n[1],n[0]],r,[-r[2],r[1],r[0]]]})).reduce(Jn,[]).reduce(Jn,[]),v=o.map((function(e,t){return[8*t+0,8*t+4,8*t+1,8*t+1,8*t+4,8*t+5,8*t+1,8*t+5,8*t+2,8*t+2,8*t+5,8*t+6,8*t+2,8*t+6,8*t+3,8*t+3,8*t+6,8*t+7,8*t+3,8*t+7,8*t+0,8*t+0,8*t+7,8*t+4,8*t+0,8*t+1,8*t+3,8*t+1,8*t+2,8*t+3,8*t+5,8*t+4,8*t+7,8*t+7,8*t+6,8*t+5]})).reduce(Jn,[]),g=new u.BufferGeometry;return g.setAttribute("position",new u.Float32BufferAttribute(p,3)),g.setAttribute("normal",new u.Float32BufferAttribute(d,3)),g.setAttribute("color",new u.Float32BufferAttribute(l,3)),g.setIndex(v),g.computeVertexNormals(),g}});Bn.test=ts;var us=Object.assign(Tn,Yu,{math:Ln.core,axiom:Bn,diagram:Yn,single:dr,text:ns,webgl:as});return Object.defineProperty(us,"use",{enumerable:!1,value:function use(e){null!=e&&"function"==typeof e.linker&&e.linker(this)}.bind(us)}),Object.keys(Ln).filter((function(e){return"core"!==e})).forEach((function(e){us[e]=Ln[e]})),Da.use(us),us.use(Da),us}));
